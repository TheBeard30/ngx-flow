(self.webpackChunkngx_flow=self.webpackChunkngx_flow||[]).push([[179],{825:()=>{"object"==typeof window&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(Pi=>{Object.prototype.hasOwnProperty.call(Pi,"append")||Object.defineProperty(Pi,"append",{configurable:!0,enumerable:!0,writable:!0,value(...Be){const ei=document.createDocumentFragment();Be.forEach(I=>{const Va=I instanceof Node;ei.appendChild(Va?I:document.createTextNode(String(I)))}),this.appendChild(ei)}})})},198:(Nr,Pi,Be)=>{"use strict";var ei={};Be.r(ei),Be.d(ei,{dot:()=>CQ,doubleMesh:()=>EQ,fixedDot:()=>_Q,mesh:()=>xQ});var I={};Be.r(I),Be.d(I,{flipX:()=>bL,flipXY:()=>CL,flipY:()=>wL,watermark:()=>DQ});var Va={};Be.r(Va),Be.d(Va,{blur:()=>MQ,brightness:()=>LQ,contrast:()=>kQ,dropShadow:()=>IQ,grayScale:()=>TQ,highlight:()=>AQ,hueRotate:()=>NQ,invert:()=>RQ,outline:()=>SQ,saturate:()=>OQ,sepia:()=>PQ});var Ha={};Be.r(Ha),Be.d(Ha,{async:()=>Aee,block:()=>vee,circle:()=>FL,circlePlus:()=>Mee,classic:()=>bee,cross:()=>Dee,diamond:()=>Cee,ellipse:()=>Tee,path:()=>xee});var hd={};Be.r(hd),Be.d(hd,{annotations:()=>aee,atConnectionLength:()=>Bee,atConnectionLengthIgnoreGradient:()=>Fee,atConnectionLengthKeepGradient:()=>jL,atConnectionRatio:()=>$ee,atConnectionRatioIgnoreGradient:()=>jee,atConnectionRatioKeepGradient:()=>BL,connection:()=>kee,displayEmpty:()=>lee,eol:()=>cee,fill:()=>tee,filter:()=>mee,html:()=>pee,lineHeight:()=>iee,port:()=>yee,ref:()=>jQ,refCx:()=>zQ,refCy:()=>GQ,refD:()=>ZQ,refDKeepOffset:()=>qQ,refDResetOffset:()=>AL,refDx:()=>BQ,refDy:()=>$Q,refHeight:()=>DL,refHeight2:()=>eee,refPoints:()=>JQ,refPointsKeepOffset:()=>WQ,refPointsResetOffset:()=>ML,refR:()=>YQ,refRCircumscribed:()=>UQ,refRInscribed:()=>SL,refRx:()=>VQ,refRy:()=>HQ,refWidth:()=>EL,refWidth2:()=>QQ,refX:()=>_L,refX2:()=>XQ,refY:()=>xL,refY2:()=>KQ,resetOffset:()=>hee,sourceMarker:()=>Oee,stroke:()=>nee,style:()=>gee,targetMarker:()=>Nee,text:()=>OL,textPath:()=>oee,textVerticalAnchor:()=>see,textWrap:()=>ree,title:()=>uee,vertexMarker:()=>Ree,xAlign:()=>fee,yAlign:()=>dee});var jn={};Be.r(jn),Be.d(jn,{className:()=>Vee,opacity:()=>Hee,stroke:()=>zee});var gd={};Be.r(gd),Be.d(gd,{absolute:()=>Gee,bottom:()=>Qee,ellipse:()=>qee,ellipseSpread:()=>Wee,left:()=>Jee,line:()=>Zee,right:()=>Xee,top:()=>Kee});var Ua={};Be.r(Ua),Be.d(Ua,{bottom:()=>ste,inside:()=>cte,insideOriented:()=>lte,left:()=>nte,manual:()=>tte,outside:()=>ote,outsideOriented:()=>ate,radial:()=>ute,radialOriented:()=>fte,right:()=>rte,top:()=>ite});var pd={};Be.r(pd),Be.d(pd,{noop:()=>gte,pinAbsolute:()=>vte,pinRelative:()=>yte});var Po={};Be.r(Po),Be.d(Po,{bottom:()=>Ate,bottomLeft:()=>Ote,bottomRight:()=>Nte,center:()=>Dte,left:()=>Mte,midSide:()=>kte,nodeCenter:()=>Lte,orth:()=>Rte,right:()=>Ite,top:()=>Ste,topLeft:()=>Tte,topRight:()=>Pte});var ti={};Be.r(ti),Be.d(ti,{closest:()=>Bte,length:()=>jte,orth:()=>$te,ratio:()=>Fte});var cl={};Be.r(cl),Be.d(cl,{anchor:()=>Gte,bbox:()=>nk,boundary:()=>Ute,rect:()=>Hte});var is={};Be.r(is),Be.d(is,{er:()=>fne,loop:()=>dne,manhattan:()=>pk,metro:()=>une,normal:()=>qte,oneSide:()=>Wte,orth:()=>sk});var ss={};function Ke(n){return"function"==typeof n}function Bn(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Be.r(ss),Be.d(ss,{jumpover:()=>Cne,loop:()=>gne,normal:()=>hne,rounded:()=>pne,smooth:()=>mne});const Oi=Bn(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ll(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Dt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Ke(r))try{r()}catch(s){e=s instanceof Oi?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Bs(s)}catch(o){e=e??[],o instanceof Oi?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Oi(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Bs(e);else{if(e instanceof Dt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ll(t,e)}remove(e){const{_finalizers:t}=this;t&&ll(t,e),e instanceof Dt&&e._removeParent(this)}}Dt.EMPTY=(()=>{const n=new Dt;return n.closed=!0,n})();const js=Dt.EMPTY;function Rr(n){return n instanceof Dt||n&&"closed"in n&&Ke(n.remove)&&Ke(n.add)&&Ke(n.unsubscribe)}function Bs(n){Ke(n)?n():n.unsubscribe()}const Tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},os={setTimeout(n,e,...t){const{delegate:r}=os;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=os;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ul(n){os.setTimeout(()=>{const{onUnhandledError:e}=Tn;if(!e)throw n;e(n)})}function md(){}const D0=fl("C",void 0,void 0);function fl(n,e,t){return{kind:n,value:e,error:t}}let $s=null;function dl(n){if(Tn.useDeprecatedSynchronousErrorHandling){const e=!$s;if(e&&($s={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=$s;if($s=null,t)throw r}}else n()}class ni extends Dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rr(e)&&e.add(this)):this.destination=gl}static create(e,t,r){return new za(e,t,r)}next(e){this.isStopped?as(function A0(n){return fl("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?as(function S0(n){return fl("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?as(D0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const M0=Function.prototype.bind;function Oo(n,e){return M0.call(n,e)}class ri{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){hl(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){hl(r)}else hl(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){hl(t)}}}class za extends ni{constructor(e,t,r){let i;if(super(),Ke(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Tn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Oo(e.next,s),error:e.error&&Oo(e.error,s),complete:e.complete&&Oo(e.complete,s)}):i=e}this.destination=new ri(i)}}function hl(n){Tn.useDeprecatedSynchronousErrorHandling?function Vs(n){Tn.useDeprecatedSynchronousErrorHandling&&$s&&($s.errorThrown=!0,$s.error=n)}(n):ul(n)}function as(n,e){const{onStoppedNotification:t}=Tn;t&&os.setTimeout(()=>t(n,e))}const gl={closed:!0,next:md,error:function I0(n){throw n},complete:md},yd="function"==typeof Symbol&&Symbol.observable||"@@observable";function br(n){return n}function Fp(n){return 0===n.length?br:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let St=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Lr(n){return n&&n instanceof ni||function jp(n){return n&&Ke(n.next)&&Ke(n.error)&&Ke(n.complete)}(n)&&Rr(n)}(t)?t:new za(t,r,i);return dl(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=qa(r))((i,s)=>{const o=new za({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[yd](){return this}pipe(...t){return Fp(t)(this)}toPromise(t){return new(t=qa(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function qa(n){var e;return null!==(e=n??Tn.Promise)&&void 0!==e?e:Promise}const Wa=Bn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let kr=(()=>{class n extends St{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ii(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Wa}next(t){dl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){dl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){dl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?js:(this.currentObservers=null,s.push(t),new Dt(()=>{this.currentObservers=null,ll(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new St;return t.source=this,t}}return n.create=(e,t)=>new ii(e,t),n})();class ii extends kr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:js}}function vd(n){return Ke(n?.lift)}function $t(n){return e=>{if(vd(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ct(n,e,t,r,i){return new Fr(n,e,t,r,i)}class Fr extends ni{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ge(n,e){return $t((t,r)=>{let i=0;t.subscribe(Ct(r,s=>{r.next(n.call(e,s,i++))}))})}function cs(n){return this instanceof cs?(this.v=n,this):new cs(n)}function Wp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function _d(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Zp=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Jp(n){return Ke(n?.then)}function Xp(n){return Ke(n[yd])}function Kp(n){return Symbol.asyncIterator&&Ke(n?.[Symbol.asyncIterator])}function Dd(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Qp=function V0(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function em(n){return Ke(n?.[Qp])}function tm(n){return function qp(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(g){r[g]&&(i[g]=function(m){return new Promise(function(y,v){s.push([g,m,y,v])>1||a(g,m)})})}function a(g,m){try{!function c(g){g.value instanceof cs?Promise.resolve(g.value.v).then(u,d):h(s[0][2],g)}(r[g](m))}catch(y){h(s[0][3],y)}}function u(g){a("next",g)}function d(g){a("throw",g)}function h(g,m){g(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield cs(t.read());if(i)return yield cs(void 0);yield yield cs(r)}}finally{t.releaseLock()}})}function nm(n){return Ke(n?.getReader)}function wr(n){if(n instanceof St)return n;if(null!=n){if(Xp(n))return function ml(n){return new St(e=>{const t=n[yd]();if(Ke(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Zp(n))return function H0(n){return new St(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Jp(n))return function yl(n){return new St(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ul)})}(n);if(Kp(n))return rm(n);if(em(n))return function U0(n){return new St(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(nm(n))return function z0(n){return rm(tm(n))}(n)}throw Dd(n)}function rm(n){return new St(e=>{(function im(n,e){var t,r,i,s;return function pl(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Wp(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function si(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function un(n,e,t=1/0){return Ke(e)?un((r,i)=>Ge((s,o)=>e(r,s,i,o))(wr(n(r,i))),t):("number"==typeof e&&(t=e),$t((r,i)=>function sm(n,e,t,r,i,s,o,a){const c=[];let u=0,d=0,h=!1;const g=()=>{h&&!c.length&&!u&&e.complete()},m=v=>u<r?y(v):c.push(v),y=v=>{s&&e.next(v),u++;let w=!1;wr(t(v,d++)).subscribe(Ct(e,_=>{i?.(_),s?m(_):e.next(_)},()=>{w=!0},void 0,()=>{if(w)try{for(u--;c.length&&u<r;){const _=c.shift();o?si(e,o,()=>y(_)):y(_)}g()}catch(_){e.error(_)}}))};return n.subscribe(Ct(e,m,()=>{h=!0,g()})),()=>{a?.()}}(r,i,n,t)))}function Lo(n=1/0){return un(br,n)}const oi=new St(n=>n.complete());function vl(n){return n[n.length-1]}function Ja(n){return function am(n){return n&&Ke(n.schedule)}(vl(n))?n.pop():void 0}function Xa(n,e=0){return $t((t,r)=>{t.subscribe(Ct(r,i=>si(r,n,()=>r.next(i),e),()=>si(r,n,()=>r.complete(),e),i=>si(r,n,()=>r.error(i),e)))})}function Ad(n,e=0){return $t((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function fm(n,e){if(!n)throw new Error("Iterable cannot be null");return new St(t=>{si(t,e,()=>{const r=n[Symbol.asyncIterator]();si(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Vt(n,e){return e?function Id(n,e){if(null!=n){if(Xp(n))return function G0(n,e){return wr(n).pipe(Ad(e),Xa(e))}(n,e);if(Zp(n))return function um(n,e){return new St(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Jp(n))return function lm(n,e){return wr(n).pipe(Ad(e),Xa(e))}(n,e);if(Kp(n))return fm(n,e);if(em(n))return function Md(n,e){return new St(t=>{let r;return si(t,e,()=>{r=n[Qp](),si(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>Ke(r?.return)&&r.return()})}(n,e);if(nm(n))return function dm(n,e){return fm(tm(n),e)}(n,e)}throw Dd(n)}(n,e):wr(n)}class tr extends kr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function ve(...n){return Vt(n,Ja(n))}function hm(n={}){const{connector:e=(()=>new kr),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,d=!1,h=!1;const g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),o=c=void 0,d=h=!1},y=()=>{const v=o;m(),v?.unsubscribe()};return $t((v,w)=>{u++,!h&&!d&&g();const _=c=c??e();w.add(()=>{u--,0===u&&!h&&!d&&(a=bl(y,i))}),_.subscribe(w),!o&&u>0&&(o=new za({next:C=>_.next(C),error:C=>{h=!0,g(),a=bl(m,t,C),_.error(C)},complete:()=>{d=!0,g(),a=bl(m,r),_.complete()}}),wr(v).subscribe(o))})(s)}}function bl(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new za({next:()=>{r.unsubscribe(),n()}});return wr(e(...t)).subscribe(r)}function jr(n,e){return $t((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Ct(r,c=>{i?.unsubscribe();let u=0;const d=s++;wr(n(c,d)).subscribe(i=Ct(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function pm(n,e){return n===e}function We(n){for(let e in n)if(n[e]===We)return e;throw Error("Could not find renamed property on target object.")}function Ht(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ht).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Cl(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const q0=We({__forward_ref__:We});function Td(n){return n.__forward_ref__=Td,n.toString=function(){return Ht(this())},n}function be(n){return Pd(n)?n():n}function Pd(n){return"function"==typeof n&&n.hasOwnProperty(q0)&&n.__forward_ref__===Td}function Ka(n){return n&&!!n.\u0275providers}class W extends Error{constructor(e,t){super(function _l(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ce(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():function Ce(n){return"string"==typeof n?n:null==n?"":String(n)}(n)}function Od(n,e){throw new W(-201,!1)}function rr(n,e){null==n&&function pe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ls(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qa(n){return ec(n,Vr)||ec(n,vm)}function ec(n,e){return n.hasOwnProperty(e)?n[e]:null}function tt(n){return n&&(n.hasOwnProperty(tc)||n.hasOwnProperty(Ld))?n[tc]:null}const Vr=We({\u0275prov:We}),tc=We({\u0275inj:We}),vm=We({ngInjectableDef:We}),Ld=We({ngInjectorDef:We});var Ne=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ne||{});let kd;function Pn(n){const e=kd;return kd=n,e}function nc(n,e,t){const r=Qa(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ne.Optional?null:void 0!==e?e:void Od(Ht(n))}const st=globalThis,Fo={},Dl="__NG_DI_FLAG__",Sl="ngTempTokenPath",sw=/\n/gm,Cm="__source";let Hr;function fs(n){const e=Hr;return Hr=n,e}function $d(n,e=Ne.Default){if(void 0===Hr)throw new W(-203,!1);return null===Hr?nc(n,void 0,e):Hr.get(n,e&Ne.Optional?null:void 0,e)}function ne(n,e=Ne.Default){return(function bm(){return kd}()||$d)(be(n),e)}function ee(n,e=Ne.Default){return ne(n,Al(e))}function Al(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Vd(n){const e=[];for(let t=0;t<n.length;t++){const r=be(n[t]);if(Array.isArray(r)){if(0===r.length)throw new W(900,!1);let i,s=Ne.Default;for(let o=0;o<r.length;o++){const a=r[o],c=jo(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(ne(i,s))}else e.push(ne(r))}return e}function ac(n,e){return n[Dl]=e,n.prototype[Dl]=e,n}function jo(n){return n[Dl]}function Ri(n){return{toString:n}.toString()}var Ml=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ml||{}),zr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(zr||{});const ai={},He=[],zs=We({\u0275cmp:We}),N=We({\u0275dir:We}),j=We({\u0275pipe:We}),k=We({\u0275mod:We}),J=We({\u0275fac:We}),ye=We({__NG_ELEMENT_ID__:We}),Ue=We({__NG_ENV_ID__:We});function Nt(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Ye(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];xm(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Il(n){return 3===n||4===n||6===n}function xm(n){return 64===n.charCodeAt(0)}function bn(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||cc(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function cc(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Em="ng-template";function Bo(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Nt(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function lc(n){return 4===n.type&&n.value!==Em}function Tl(n,e,t){return e===(4!==n.type||t?n.value:Em)}function Ze(n,e,t){let r=4;const i=n.attrs||[],s=function lw(n){for(let e=0;e<n.length;e++)if(Il(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Tl(n,c,t)||""===c&&1===e.length){if(Gr(r))return!1;o=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!Bo(n.attrs,u,t)){if(Gr(r))return!1;o=!0}continue}const h=Dm(8&r?"class":c,i,lc(n),t);if(-1===h){if(Gr(r))return!1;o=!0;continue}if(""!==u){let g;g=h>s?"":i[h+1].toLowerCase();const m=8&r?g:null;if(m&&-1!==Nt(m,u,0)||2&r&&u!==g){if(Gr(r))return!1;o=!0}}}}else{if(!o&&!Gr(r)&&!Gr(c))return!1;if(o&&Gr(c))continue;o=!1,r=c|1&r}}return Gr(r)||o}function Gr(n){return 0==(1&n)}function Dm(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function uw(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function uc(n,e,t=!1){for(let r=0;r<e.length;r++)if(Ze(n,e[r],t))return!0;return!1}function Pl(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Li(n,e){return n?":not("+e.trim()+")":e}function Ol(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Gr(o)&&(e+=Li(s,i),i=""),r=o,s=s||!Gr(r);t++}return""!==i&&(e+=Li(s,i)),e}function Gs(n){return Ri(()=>{const e=Ud(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ml.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||zr.Emulated,styles:n.styles||He,_:null,schemas:n.schemas||null,tView:null,id:""};Mm(t);const r=n.dependencies;return t.directiveDefs=Ll(r,!1),t.pipeDefs=Ll(r,!0),t.id=function wn(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Rl(n){return $e(n)||Rt(n)}function Am(n){return null!==n}function qr(n){return Ri(()=>({type:n.type,bootstrap:n.bootstrap||He,declarations:n.declarations||He,imports:n.imports||He,exports:n.exports||He,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function fc(n,e){if(null==n)return ai;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function On(n){return Ri(()=>{const e=Ud(n);return Mm(e),e})}function $e(n){return n[zs]||null}function Rt(n){return n[N]||null}function Qt(n){return n[j]||null}function ir(n,e){const t=n[k]||null;if(!t&&!0===e)throw new Error(`Type ${Ht(n)} does not have '\u0275mod' property.`);return t}function Ud(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ai,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||He,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fc(n.inputs,e),outputs:fc(n.outputs)}}function Mm(n){n.features?.forEach(e=>e(n))}function Ll(n,e){if(!n)return null;const t=e?Qt:Rl;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Am)}const At=0,K=1,xe=2,dt=3,sr=4,ki=5,en=6,Wr=7,at=8,xr=9,Fi=10,de=11,dc=12,Im=13,$o=14,Pt=15,hc=16,ji=17,Vn=18,Vo=19,D=20,or=21,Er=22,Cn=23,Te=24,Re=25,zd=1,hs=2,ci=7,Ho=9,fn=11;function Hn(n){return Array.isArray(n)&&"object"==typeof n[zd]}function Nn(n){return Array.isArray(n)&&!0===n[zd]}function Gd(n){return 0!=(4&n.flags)}function Ws(n){return n.componentOffset>-1}function Fl(n){return 1==(1&n.flags)}function zt(n){return!!n.template}function qd(n){return 0!=(512&n[xe])}function Zs(n,e){return n.hasOwnProperty(J)?n[J]:null}let Qe=null,Bl=!1;function ar(n){const e=Qe;return Qe=n,e}const Yd={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Bi(n){if(!Js(n)||n.dirty){if(!n.producerMustRecompute(n)&&!tn(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function pc(n){n.dirty=!0,function Zd(n){if(void 0===n.liveConsumerNode)return;const e=Bl;Bl=!0;try{for(const t of n.liveConsumerNode)t.dirty||pc(t)}finally{Bl=e}}(n),n.consumerMarkedDirty?.(n)}function Xd(n){return n&&(n.nextProducerIndex=0),ar(n)}function $l(n,e){if(ar(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Js(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)cr(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function tn(n){$i(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Bi(t),r!==t.version))return!0}return!1}function Vl(n){if($i(n),Js(n))for(let e=0;e<n.producerNode.length;e++)cr(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function cr(n,e){if(function ps(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),$i(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)cr(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];$i(i),i.producerIndexOfThis[r]=e}}function Js(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function $i(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Hl=null;const th=()=>{},nh=(()=>({...Yd,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:th}))();class rh{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ui(){return ih}function ih(n){return n.type.prototype.ngOnChanges&&(n.setInput=zl),km}function km(){const n=sh(this),e=n?.current;if(e){const t=n.previous;if(t===ai)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function zl(n,e,t,r){const i=this.declaredInputs[t],s=sh(n)||function jm(n,e){return n[Fm]=e}(n,{previous:ai,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new rh(c&&c.currentValue,e,a===ai),n[r]=e}ui.ngInherit=!0;const Fm="__ngSimpleChanges__";function sh(n){return n[Fm]||null}const fi=function(n,e,t){};function et(n){for(;Array.isArray(n);)n=n[At];return n}function ue(n,e){return et(e[n.index])}function $m(n,e){return n.data[e]}function zn(n,e){const t=e[n];return Hn(t)?t:t[At]}function ms(n,e){return null==e?null:n[e]}function vc(n){n[ji]=0}function lh(n){1024&n[xe]||(n[xe]|=1024,fh(n,1))}function uh(n){1024&n[xe]&&(n[xe]&=-1025,fh(n,-1))}function fh(n,e){let t=n[dt];if(null===t)return;t[ki]+=e;let r=t;for(t=t[dt];null!==t&&(1===e&&1===r[ki]||-1===e&&0===r[ki]);)t[ki]+=e,r=t,t=t[dt]}const he={lFrame:yh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ql(){return he.bindingsEnabled}function vs(){return null!==he.skipHydrationRootTNode}function H(){return he.lFrame.lView}function Ve(){return he.lFrame.tView}function nn(){let n=ph();for(;null!==n&&64===n.type;)n=n.parent;return n}function ph(){return he.lFrame.currentTNode}function Yr(n,e){const t=he.lFrame;t.currentTNode=n,t.isParent=e}function Wl(){return he.lFrame.isParent}function xn(){he.lFrame.isParent=!1}function wc(n,e){const t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,Yl(e)}function Yl(n){he.lFrame.currentDirectiveIndex=n}function Cc(){return he.lFrame.currentQueryIndex}function Jl(n){he.lFrame.currentQueryIndex=n}function Xl(n){const e=n[K];return 2===e.type?e.declTNode:1===e.type?n[en]:null}function Kl(n,e,t){if(t&Ne.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Ne.Host||(i=Xl(s),null===i||(s=s[$o],10&i.type))););if(null===i)return!1;e=i,n=s}const r=he.lFrame=Wm();return r.currentTNode=e,r.lView=n,!0}function Wo(n){const e=Wm(),t=n[K];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Wm(){const n=he.lFrame,e=null===n?null:n.child;return null===e?yh(n):e}function yh(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function _c(){const n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const vh=_c;function xc(){const n=_c();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _t(){return he.lFrame.selectedIndex}function Cs(n){he.lFrame.selectedIndex=n}let Ql=!0;function Yo(){return Ql}function pi(n){Ql=n}function Hi(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=d&&(n.destroyHooks??=[]).push(t,d)}}function le(n,e,t){_s(n,e,3,t)}function Qs(n,e,t,r){(3&n[xe])===t&&_s(n,e,t,r)}function Ec(n,e){let t=n[xe];(3&t)===e&&(t&=8191,t+=1,n[xe]=t)}function _s(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[ji]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[ji]+=65536),(a<s||-1==s)&&(bh(n,t,e,c),n[ji]=(4294901760&n[ji])+c+2),c++}function Jm(n,e){fi(4,n,e);const t=ar(null);try{e.call(n)}finally{ar(t),fi(5,n,e)}}function bh(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[xe]>>13<n[ji]>>16&&(3&n[xe])===e&&(n[xe]+=8192,Jm(a,s)):Jm(a,s)}const eo=-1;class Lt{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Zr(n){return n!==eo}function Gt(n){return 32767&n}function Dc(n,e){let t=function wh(n){return n>>16}(n),r=e;for(;t>0;)r=r[$o],t--;return r}let Sc=!0;function nu(n){const e=Sc;return Sc=n,e}const Zo=255,Ch=5;let Km=0;const mi={};function ru(n,e){const t=xh(n,e);if(-1!==t)return t;const r=e[K];r.firstCreatePass&&(n.injectorIndex=e.length,_h(r.data,n),_h(e,null),_h(r.blueprint,null));const i=Ac(n,e),s=n.injectorIndex;if(Zr(i)){const o=Gt(i),a=Dc(i,e),c=a[K].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function _h(n,e){n.push(0,0,0,0,0,0,0,0,e)}function xh(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Ac(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=ny(i),null===r)return eo;if(t++,i=i[$o],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return eo}function Eh(n,e,t){!function Lw(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ye)&&(r=t[ye]),null==r&&(r=t[ye]=Km++);const i=r&Zo;e.data[n+(i>>Ch)]|=1<<i}(n,e,t)}function Sh(n,e,t){if(t&Ne.Optional||void 0!==n)return n;Od()}function Jo(n,e,t,r){if(t&Ne.Optional&&void 0===r&&(r=null),!(t&(Ne.Self|Ne.Host))){const i=n[xr],s=Pn(void 0);try{return i?i.get(e,r,t&Ne.Optional):nc(e,r,t&Ne.Optional)}finally{Pn(s)}}return Sh(r,0,t)}function iu(n,e,t,r=Ne.Default,i){if(null!==n){if(2048&e[xe]&&!(r&Ne.Self)){const o=function jw(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[xe]&&!(512&o[xe]);){const a=Ah(s,o,t,r|Ne.Self,mi);if(a!==mi)return a;let c=s.parent;if(!c){const u=o[D];if(u){const d=u.get(t,mi,r);if(d!==mi)return d}c=ny(o),o=o[$o]}s=c}return i}(n,e,t,r,mi);if(o!==mi)return o}const s=Ah(n,e,t,r,mi);if(s!==mi)return s}return Jo(e,t,r,i)}function Ah(n,e,t,r,i){const s=function yi(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ye)?n[ye]:void 0;return"number"==typeof e?e>=0?e&Zo:Fw:e}(t);if("function"==typeof s){if(!Kl(e,n,r))return r&Ne.Host?Sh(i,0,r):Jo(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Ne.Optional)return o;Od()}finally{vh()}}else if("number"==typeof s){let o=null,a=xh(n,e),c=eo,u=r&Ne.Host?e[Pt][en]:null;for((-1===a||r&Ne.SkipSelf)&&(c=-1===a?Ac(n,e):e[a+8],c!==eo&&ey(r,!1)?(o=e[K],a=Gt(c),e=Dc(c,e)):a=-1);-1!==a;){const d=e[K];if(Es(s,a,d.data)){const h=Qm(a,e,t,o,r,u);if(h!==mi)return h}c=e[a+8],c!==eo&&ey(r,e[K].data[a+8]===u)&&Es(s,a,e)?(o=d,a=Gt(c),e=Dc(c,e)):a=-1}}return i}function Qm(n,e,t,r,i,s){const o=e[K],a=o.data[n+8],d=to(a,o,t,null==r?Ws(a)&&Sc:r!=o&&0!=(3&a.type),i&Ne.Host&&s===a);return null!==d?xs(e,o,d,a):mi}function to(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,d=s>>20,g=i?a+d:n.directiveEnd;for(let m=r?a:a+d;m<g;m++){const y=o[m];if(m<c&&t===y||m>=c&&y.type===t)return m}if(i){const m=o[c];if(m&&zt(m)&&m.type===t)return c}return null}function xs(n,e,t,r){let i=n[t];const s=e.data;if(function Nw(n){return n instanceof Lt}(i)){const o=i;o.resolving&&function it(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new W(-200,`Circular dependency in DI detected for ${n}${t}`)}(ce(s[t]));const a=nu(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Pn(o.injectImpl):null;Kl(n,r,Ne.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function eu(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=ih(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&Pn(u),nu(a),o.resolving=!1,vh()}}return i}function Es(n,e,t){return!!(t[e+(n>>Ch)]&1<<n)}function ey(n,e){return!(n&Ne.Self||n&Ne.Host&&e)}class Rn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return iu(this._tNode,this._lView,e,Al(r),t)}}function Fw(){return new Rn(nn(),H())}function Mh(n){return Pd(n)?()=>{const e=Mh(be(n));return e&&e()}:Zs(n)}function ny(n){const e=n[K],t=e.type;return 2===t?e.declTNode:1===t?n[en]:null}const Qo="__parameters__";function no(n,e,t){return Ri(()=>{const r=function ou(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,d){const h=c.hasOwnProperty(Qo)?c[Qo]:Object.defineProperty(c,Qo,{value:[]})[Qo];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function na(n,e){n.forEach(t=>Array.isArray(t)?na(t,e):e(t))}function iy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function au(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ro(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function lr(n,e,t){let r=ra(n,e);return r>=0?n[1|r]=t:(r=~r,function zw(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Th(n,e){const t=ra(n,e);if(t>=0)return n[1|t]}function ra(n,e){return function sy(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const lu=ac(no("Optional"),8),ia=ac(no("SkipSelf"),4);function pu(n){return 128==(128&n.flags)}var Jr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Jr||{});const uC=/^>|^->|<!--|-->|--!>|<!-$/g,vy=/(<|>)/g,by="\u200b$1\u200b";const vu=new Map;let wy=0;const Lh="__ngContext__";function sn(n,e){Hn(e)?(n[Lh]=e[Vo],function _y(n){vu.set(n[Vo],n)}(e)):n[Lh]=e}let kh;function Fh(n,e){return kh(n,e)}function Pc(n){const e=n[dt];return Nn(e)?e[dt]:e}function Ee(n){return Ln(n[dc])}function Ty(n){return Ln(n[sr])}function Ln(n){for(;null!==n&&!Nn(n);)n=n[sr];return n}function ot(n,e,t,r,i){if(null!=r){let s,o=!1;Nn(r)?s=r:Hn(r)&&(o=!0,r=r[At]);const a=et(r);0===n&&null!==t?null==i?Ny(e,t,a):oo(e,t,a,i||null,!0):1===n&&null!==t?oo(e,t,a,i||null,!0):2===n?function Rc(n,e,t){const r=la(n,e);r&&function Ly(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function DC(n,e,t,r,i){const s=t[ci];s!==et(t)&&ot(e,n,r,s,i);for(let a=fn;a<t.length;a++){const c=t[a];ua(c[K],c,n,e,r,s)}}(e,n,s,t,i)}}function jh(n,e){return n.createComment(function yu(n){return n.replace(uC,e=>e.replace(vy,by))}(e))}function wu(n,e,t){return n.createElement(e,t)}function $h(n,e){const t=n[Ho],r=t.indexOf(e);uh(e),t.splice(r,1)}function so(n,e){if(n.length<=fn)return;const t=fn+e,r=n[t];if(r){const i=r[hc];null!==i&&i!==n&&$h(i,r),e>0&&(n[t-1][sr]=r[sr]);const s=au(n,fn+e);!function bC(n,e){ua(n,e,e[de],2,null,null),e[At]=null,e[en]=null}(r[K],r);const o=s[Vn];null!==o&&o.detachView(s[K]),r[dt]=null,r[sr]=null,r[xe]&=-129}return r}function ct(n,e){if(!(256&e[xe])){const t=e[de];e[Cn]&&Vl(e[Cn]),e[Te]&&Vl(e[Te]),t.destroyNode&&ua(n,e,t,3,null,null),function Bh(n){let e=n[dc];if(!e)return gt(n[K],n);for(;e;){let t=null;if(Hn(e))t=e[dc];else{const r=e[fn];r&&(t=r)}if(!t){for(;e&&!e[sr]&&e!==n;)Hn(e)&&gt(e[K],e),e=e[dt];null===e&&(e=n),Hn(e)&&gt(e[K],e),t=e&&e[sr]}e=t}}(e)}}function gt(n,e){if(!(256&e[xe])){e[xe]&=-129,e[xe]|=256,function xC(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Lt)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];fi(4,a,c);try{c.call(a)}finally{fi(5,a,c)}}else{fi(4,i,s);try{s.call(i)}finally{fi(5,i,s)}}}}}(n,e),function Py(n,e){const t=n.cleanup,r=e[Wr];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Wr]=null);const i=e[or];if(null!==i){e[or]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[K].type&&e[de].destroy();const t=e[hc];if(null!==t&&Nn(e[dt])){t!==e[dt]&&$h(t,e);const r=e[Vn];null!==r&&r.detachView(n)}!function fC(n){vu.delete(n[Vo])}(e)}}function Vh(n,e,t){return function Oy(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[At];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===zr.None||s===zr.Emulated)return null}return ue(r,t)}}(n,e.parent,t)}function oo(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Ny(n,e,t){n.appendChild(e,t)}function Ry(n,e,t,r,i){null!==r?oo(n,e,t,r,i):Ny(n,e,t)}function la(n,e){return n.parentNode(e)}function Hh(n,e,t){return Wn(n,e,t)}let Ds,Wh,Wn=function Oc(n,e,t){return 40&n.type?ue(n,t):null};function _u(n,e,t,r){const i=Vh(n,r,e),s=e[de],a=Hh(r.parent||e[en],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)Ry(s,i,t[c],a,!1);else Ry(s,i,t,a,!1);void 0!==Ds&&Ds(s,r,e,t,i)}function Nc(n,e){if(null!==e){const t=e.type;if(3&t)return ue(e,n);if(4&t)return Uh(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Nc(n,r);{const i=n[e.index];return Nn(i)?Uh(-1,i):et(i)}}if(32&t)return Fh(e,n)()||et(n[e.index]);{const r=Fy(n,e);return null!==r?Array.isArray(r)?r[0]:Nc(Pc(n[Pt]),r):Nc(n,e.next)}}return null}function Fy(n,e){return null!==e?n[Pt][en].projection[e.projection]:null}function Uh(n,e){const t=fn+n+1;if(t<e.length){const r=e[t],i=r[K].firstChild;if(null!==i)return Nc(r,i)}return e[ci]}function De(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&sn(et(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)De(n,e,t.child,r,i,s,!1),ot(e,n,i,a,s);else if(32&c){const u=Fh(t,r);let d;for(;d=u();)ot(e,n,i,d,s);ot(e,n,i,a,s)}else 16&c?zh(n,e,r,t,i,s):ot(e,n,i,a,s);t=o?t.projectionNext:t.next}}function ua(n,e,t,r,i,s){De(t,r,n.firstChild,e,i,s,!1)}function zh(n,e,t,r,i,s){const o=t[Pt],c=o[en].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)ot(e,n,i,c[u],s);else{let u=c;const d=o[dt];pu(r)&&(u.flags|=128),De(n,e,u,d,i,s,!0)}}function Gh(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Lc(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Ye(n,e,r),null!==i&&Gh(n,e,i),null!==s&&function SC(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}class Su{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ss(n){return n instanceof Su?n.changingThisBreaksApplicationSecurity:n}class oe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const co=new oe("ENVIRONMENT_INITIALIZER"),Kh=new oe("INJECTOR",-1),Qh=new oe("INJECTOR_DEF_TYPES");class eg{get(e,t=Fo){if(t===Fo){const r=new Error(`NullInjectorError: No provider for ${Ht(e)}!`);throw r.name="NullInjectorError",r}return t}}function KC(...n){return{\u0275providers:Iu(0,n),\u0275fromNgModule:!0}}function Iu(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return na(e,o=>{const a=o;Tu(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Xy(i,s),t}function Xy(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];En(i,s=>{e(s,r)})}}function Tu(n,e,t,r){if(!(n=be(n)))return!1;let i=null,s=tt(n);const o=!s&&$e(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=tt(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)Tu(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{na(s.imports,d=>{Tu(d,e,t,r)&&(u||=[],u.push(d))})}finally{}void 0!==u&&Xy(u,e)}if(!a){const u=Zs(i)||(()=>new i);e({provide:i,useFactory:u,deps:He},i),e({provide:Qh,useValue:i,multi:!0},i),e({provide:co,useValue:()=>ne(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;En(c,d=>{e(d,u)})}}}return i!==n&&void 0!==n.providers}function En(n,e){for(let t of n)Ka(t)&&(t=t.\u0275providers),Array.isArray(t)?En(t,e):e(t)}const tg=We({provide:String,useValue:We});function ng(n){return null!==n&&"object"==typeof n&&tg in n}function lo(n){return"function"==typeof n}const ig=new oe("Set Injector scope."),ga={},QC={};let sg;function Pu(){return void 0===sg&&(sg=new eg),sg}class Ir{}class Bc extends Ir{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ag(e,o=>this.processProvider(o)),this.records.set(Kh,As(void 0,this)),i.has("environment")&&this.records.set(Ir,As(void 0,this));const s=this.records.get(ig);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Qh.multi,He,Ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=fs(this),r=Pn(void 0);try{return e()}finally{fs(t),Pn(r)}}get(e,t=Fo,r=Ne.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ue))return e[Ue](this);r=Al(r);const s=fs(this),o=Pn(void 0);try{if(!(r&Ne.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function i_(n){return"function"==typeof n||"object"==typeof n&&n instanceof oe}(e)&&Qa(e);c=u&&this.injectableDefInScope(u)?As(og(e),ga):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Ne.Self?Pu():this.parent).get(e,t=r&Ne.Optional&&t===Fo?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Sl]=a[Sl]||[]).unshift(Ht(e)),s)throw a;return function Ur(n,e,t,r){const i=n[Sl];throw e[Cm]&&i.unshift(e[Cm]),n.message=function _m(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ht(e);if(Array.isArray(e))i=e.map(Ht).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ht(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(sw,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Sl]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Pn(o),fs(s)}}resolveInjectorInitializers(){const e=fs(this),t=Pn(void 0);try{const i=this.get(co.multi,He,Ne.Self);for(const s of i)s()}finally{fs(e),Pn(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ht(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){let t=lo(e=be(e))?e:be(e&&e.provide);const r=function t_(n){return ng(n)?As(void 0,n.useValue):As(function Ou(n,e,t){let r;if(lo(n)){const i=be(n);return Zs(i)||og(i)}if(ng(n))r=()=>be(n.useValue);else if(function Qy(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Vd(n.deps||[]));else if(function Ky(n){return!(!n||!n.useExisting)}(n))r=()=>ne(be(n.useExisting));else{const i=be(n&&(n.useClass||n.provide));if(!function n_(n){return!!n.deps}(n))return Zs(i)||og(i);r=()=>new i(...Vd(n.deps))}return r}(n),ga)}(e);if(lo(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=As(void 0,ga,!0),i.factory=()=>Vd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===ga&&(t.value=QC,t.value=t.factory()),"object"==typeof t.value&&t.value&&function r_(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=be(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function og(n){const e=Qa(n),t=null!==e?e.factory:Zs(n);if(null!==t)return t;if(n instanceof oe)throw new W(204,!1);if(n instanceof Function)return function e_(n){const e=n.length;if(e>0)throw ro(e,"?"),new W(204,!1);const t=function Rd(n){return n&&(n[Vr]||n[vm])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new W(204,!1)}function As(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ag(n,e){for(const t of n)Array.isArray(t)?ag(t,e):t&&Ka(t)?ag(t.\u0275providers,e):e(t)}const Nu=new oe("AppId",{providedIn:"root",factory:()=>s_}),s_="ng",ev=new oe("Platform Initializer"),pa=new oe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),tv=new oe("CSP nonce",{providedIn:"root",factory:()=>function da(){if(void 0!==Wh)return Wh;if(typeof document<"u")return document;throw new W(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let $=(n,e,t)=>null;function se(n,e,t=!1){return $(n,e,t)}class nv{}class rA{}class rF{resolveComponentFactory(e){throw function nF(n){const e=Error(`No component factory found for ${Ht(n)}.`);return e.ngComponent=n,e}(e)}}let rv=(()=>{class n{static#e=this.NULL=new rF}return n})();function iF(){return Lu(nn(),H())}function Lu(n,e){return new ya(ue(n,e))}let ya=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=iF}return n})();function sF(n){return n instanceof ya?n.nativeElement:n}class sA{}let aF=(()=>{class n{static#e=this.\u0275prov=re({token:n,providedIn:"root",factory:()=>null})}return n})();class sv{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const cF=new sv("16.2.9"),c_={};function lA(n,e=null,t=null,r){const i=uA(n,e,t,r);return i.resolveInjectorInitializers(),i}function uA(n,e=null,t=null,r,i=new Set){const s=[t||He,KC(n)];return r=r||("object"==typeof n?void 0:Ht(n)),new Bc(s,e||Pu(),r||null,i)}let dr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Fo;static#t=this.NULL=new eg;static create(t,r){if(Array.isArray(t))return lA({name:""},r,t,"");{const i=t.name??"";return lA({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=re({token:n,providedIn:"any",factory:()=>ne(Kh)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function u_(n){return n.ngOriginalError}class uo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&u_(e);for(;t&&u_(t);)t=u_(t);return t||null}}function d_(n){return e=>{setTimeout(n,void 0,e)}}const hr=class pF extends kr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=d_(s),i&&(i=d_(i)),o&&(o=d_(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Dt&&e.add(a),a}};function dA(...n){}class pt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hr(!1),this.onMicrotaskEmpty=new hr(!1),this.onStable=new hr(!1),this.onError=new hr(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function mF(){const n="function"==typeof st.requestAnimationFrame;let e=st[n?"requestAnimationFrame":"setTimeout"],t=st[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function bF(n){const e=()=>{!function vF(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(st,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,g_(n),n.isCheckStableRunning=!0,h_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),g_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function CF(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return hA(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),gA(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return hA(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),gA(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,g_(n),h_(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pt.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(pt.isInAngularZone())throw new W(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,yF,dA,dA);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const yF={};function h_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function g_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function hA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gA(n){n._nesting--,h_(n)}class wF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hr,this.onMicrotaskEmpty=new hr,this.onStable=new hr,this.onError=new hr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const pA=new oe("",{providedIn:"root",factory:mA});function mA(){const n=ee(pt);let e=!0;return function ko(...n){const e=Ja(n),t=function cm(n,e){return"number"==typeof vl(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?wr(r[0]):Lo(t)(Vt(r,e)):oi}(new St(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new St(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{pt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{pt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(hm()))}function fo(n){return n instanceof Function?n():n}let p_=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})();function dg(n){for(;n;){n[xe]|=64;const e=Pc(n);if(qd(n)&&!e)return n;n=e}return null}const CA=new oe("",{providedIn:"root",factory:()=>!1});let av=null;function DA(n,e){return n[e]??MA()}function SA(n,e){const t=MA();t.producerNode?.length&&(n[e]=av,t.lView=n,av=AA())}const PF={...Yd,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{dg(n.lView)},lView:null};function AA(){return Object.create(PF)}function MA(){return av??=AA(),av}const Me={};function cv(n){IA(Ve(),H(),_t()+n,!1)}function IA(n,e,t,r){if(!r)if(3==(3&e[xe])){const s=n.preOrderCheckHooks;null!==s&&le(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Qs(e,s,0,t)}Cs(t)}function me(n,e=Ne.Default){const t=H();return null===t?ne(n,e):iu(nn(),t,be(n),e)}function lv(n,e,t,r,i,s,o,a,c,u,d){const h=e.blueprint.slice();return h[At]=i,h[xe]=140|r,(null!==u||n&&2048&n[xe])&&(h[xe]|=2048),vc(h),h[dt]=h[$o]=n,h[at]=t,h[Fi]=o||n&&n[Fi],h[de]=a||n&&n[de],h[xr]=c||n&&n[xr]||null,h[en]=s,h[Vo]=function Cy(){return wy++}(),h[Er]=d,h[D]=u,h[Pt]=2==e.type?n[Pt]:h,h}function ju(n,e,t,r,i){let s=n.data[e];if(null===s)s=function m_(n,e,t,r,i){const s=ph(),o=Wl(),c=n.data[e]=function BF(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return vs()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function qm(){return he.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function bc(){const n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Yr(s,!0),s}function hg(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function PA(n,e,t,r,i){const s=DA(e,Cn),o=_t(),a=2&r;try{Cs(-1),a&&e.length>Re&&IA(n,e,Re,!1),fi(a?2:0,i);const u=a?s:null,d=Xd(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{$l(u,d)}}finally{a&&null===e[Cn]&&SA(e,Cn),Cs(o),fi(a?3:1,i)}}function y_(n,e,t){if(Gd(e)){const r=ar(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ar(r)}}}function v_(n,e,t){ql()&&(function qF(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Ws(t)&&function QF(n,e,t){const r=ue(e,n),i=OA(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=uv(n,lv(n,i,null,o,r,e,null,n[Fi].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ru(t,e),sn(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=xs(e,n,a,t);sn(u,e),null!==o&&e2(0,a-i,u,c,0,o),zt(c)&&(zn(t.index,e)[at]=xs(e,n,a,t))}}(n,e,t,ue(t,e)),64==(64&t.flags)&&FA(n,e,t))}function b_(n,e,t=ue){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function OA(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=w_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function w_(n,e,t,r,i,s,o,a,c,u,d){const h=Re+r,g=h+i,m=function NF(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Me);return t}(h,g),y="function"==typeof u?u():u;return m[K]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:d}}let NA=n=>null;function RA(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?LA(t,e,i,s):r.hasOwnProperty(i)&&LA(t,e,r[i],s)}return t}function LA(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function C_(n,e,t,r){if(ql()){const i=null===r?null:{"":-1},s=function YF(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(uc(e,o.selectors,!1))if(r||(r=[]),zt(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),__(n,e,a.length)}else r.unshift(o),__(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&kA(n,e,t,o,i,a),i&&function ZF(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new W(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=bn(t.mergedAttrs,t.attrs)}function kA(n,e,t,r,i,s){for(let u=0;u<r.length;u++)Eh(ru(t,e),n,r[u].type);!function XF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const d=r[u];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=hg(n,e,r.length,null);for(let u=0;u<r.length;u++){const d=r[u];t.mergedAttrs=bn(t.mergedAttrs,d.hostAttrs),KF(n,t,e,c,d),JF(c,d,i),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function $F(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let d=e.directiveStart;d<i;d++){const h=s[d],g=t?t.get(h):null,y=g?g.outputs:null;c=RA(h.inputs,d,c,g?g.inputs:null),u=RA(h.outputs,d,u,y);const v=null===c||null===o||lc(e)?null:t2(c,d,o);a.push(v)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function FA(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Mw(){return he.lFrame.currentDirectiveIndex}();try{Cs(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];Yl(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&WF(c,u)}}finally{Cs(-1),Yl(o)}}function WF(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function __(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function JF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zt(e)&&(t[""]=n)}}function KF(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Zs(i.type)),o=new Lt(s,zt(i),me);n.blueprint[r]=o,t[r]=o,function zF(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function GF(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,hg(n,t,i.hostVars,Me),i)}function e2(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)jA(r,t,o[a++],o[a++],o[a++])}function jA(n,e,t,r,i){const s=ar(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{ar(s)}}function t2(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function BA(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function $A(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Jl(t[r]),o.contentQueries(2,e[s],s)}}}function uv(n,e){return n[dc]?n[Im][sr]=e:n[dc]=e,n[Im]=e,e}function E_(n,e,t){Jl(0);const r=ar(null);try{e(n,t)}finally{ar(r)}}function D_(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];jA(n.data[o],e[o],r,a,i)}}function n2(n,e){const t=zn(e,n),r=t[K];!function r2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[At];null!==i&&null===t[Er]&&(t[Er]=se(i,t[xr])),S_(r,t,t[at])}function S_(n,e,t){Wo(e);try{const r=n.viewQuery;null!==r&&E_(1,r,t);const i=n.template;null!==i&&PA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&$A(n,e),n.staticViewQueries&&E_(2,n.viewQuery,t);const s=n.components;null!==s&&function i2(n,e){for(let t=0;t<e.length;t++)n2(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[xe]&=-5,xc()}}let GA=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Cw(n,e,t){const r=Object.create(nh);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>pc(r),run:()=>{if(r.dirty=!1,r.hasRun&&!tn(r))return;r.hasRun=!0;const o=Xd(r);try{r.cleanupFn(),r.cleanupFn=th,r.fn(i)}finally{$l(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})();function fv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Cl(i,a):2==s&&(r=Cl(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function gg(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(et(s)),Nn(s)&&qA(s,r);const o=t.type;if(8&o)gg(n,e,t.child,r);else if(32&o){const a=Fh(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=Fy(e,t);if(Array.isArray(a))r.push(...a);else{const c=Pc(e[Pt]);gg(c[K],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function qA(n,e){for(let t=fn;t<n.length;t++){const r=n[t],i=r[K].firstChild;null!==i&&gg(r[K],r,i,e)}n[ci]!==n[At]&&e.push(n[ci])}function dv(n,e,t,r=!0){const i=e[Fi],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{WA(n,e,n.template,t)}catch(c){throw r&&function zA(n,e){const t=n[xr],r=t?t.get(uo,null):null;r&&r.handleError(e)}(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function WA(n,e,t,r){const i=e[xe];if(256!=(256&i)){e[Fi].effectManager?.flush(),Wo(e);try{vc(e),function mh(n){return he.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&PA(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&le(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Qs(e,u,0,null),Ec(e,0)}if(function a2(n){for(let e=Ee(n);null!==e;e=Ty(e)){if(!e[hs])continue;const t=e[Ho];for(let r=0;r<t.length;r++){lh(t[r])}}}(e),YA(e,2),null!==n.contentQueries&&$A(n,e),o){const u=n.contentCheckHooks;null!==u&&le(e,u)}else{const u=n.contentHooks;null!==u&&Qs(e,u,1),Ec(e,1)}!function OF(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=DA(e,Te);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Cs(~s);else{const o=s,a=t[++i],c=t[++i];wc(a,o),r.dirty=!1;const u=Xd(r);try{c(2,e[o])}finally{$l(r,u)}}}}finally{null===e[Te]&&SA(e,Te),Cs(-1)}}(n,e);const a=n.components;null!==a&&JA(e,a,0);const c=n.viewQuery;if(null!==c&&E_(2,c,r),o){const u=n.viewCheckHooks;null!==u&&le(e,u)}else{const u=n.viewHooks;null!==u&&Qs(e,u,2),Ec(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[xe]&=-73,uh(e)}finally{xc()}}}function YA(n,e){for(let t=Ee(n);null!==t;t=Ty(t))for(let r=fn;r<t.length;r++)ZA(t[r],e)}function c2(n,e,t){ZA(zn(e,n),t)}function ZA(n,e){if(!function Ew(n){return 128==(128&n[xe])}(n))return;const t=n[K],r=n[xe];if(80&r&&0===e||1024&r||2===e)WA(t,n,t.template,n[at]);else if(n[ki]>0){YA(n,1);const i=t.components;null!==i&&JA(n,i,1)}}function JA(n,e,t){for(let r=0;r<e.length;r++)c2(n,e[r],t)}class pg{get rootNodes(){const e=this._lView,t=e[K];return gg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[at]}set context(e){this._lView[at]=e}get destroyed(){return 256==(256&this._lView[xe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[dt];if(Nn(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(so(e,r),au(t,r))}this._attachedToViewContainer=!1}ct(this._lView[K],this._lView)}onDestroy(e){!function Gn(n,e){if(256==(256&n[xe]))throw new W(911,!1);null===n[or]&&(n[or]=[]),n[or].push(e)}(this._lView,e)}markForCheck(){dg(this._cdRefInjectingView||this._lView)}detach(){this._lView[xe]&=-129}reattach(){this._lView[xe]|=128}detectChanges(){dv(this._lView[K],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function CC(n,e){ua(n,e,e[de],2,null,null)}(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e}}class l2 extends pg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;dv(e[K],e,e[at],!1)}checkNoChanges(){}get context(){return null}}class XA extends rv{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=$e(e);return new mg(t,this.ngModule)}}function KA(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class f2{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Al(r);const i=this.injector.get(e,c_,r);return i!==c_||t===c_?i:this.parentInjector.get(e,t,r)}}class mg extends rA{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=KA(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return KA(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Sm(n){return n.map(Ol).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ir?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new f2(e,s):e,a=o.get(sA,null);if(null===a)throw new W(407,!1);const h={rendererFactory:a,sanitizer:o.get(aF,null),effectManager:o.get(GA,null),afterRenderEventManager:o.get(p_,null)},g=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",y=r?function RF(n,e,t,r){const s=r.get(CA,!1)||t===zr.ShadowDom,o=n.selectRootElement(e,s);return function LF(n){NA(n)}(o),o}(g,r,this.componentDef.encapsulation,o):wu(g,m,function u2(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(m)),_=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let C=null;null!==y&&(C=se(y,o,!0));const E=w_(0,null,null,1,0,null,null,null,null,null,null),A=lv(null,E,null,_,null,null,h,g,o,null,C);let P,L;Wo(A);try{const V=this.componentDef;let G,q=null;V.findHostDirectiveDefs?(G=[],q=new Map,V.findHostDirectiveDefs(V,G,q),G.push(V)):G=[V];const te=function h2(n,e){const t=n[K],r=Re;return n[r]=e,ju(t,r,2,"#host",null)}(A,y),Z=function g2(n,e,t,r,i,s,o){const a=i[K];!function p2(n,e,t,r){for(const i of n)e.mergedAttrs=bn(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(fv(e,e.mergedAttrs,!0),null!==t&&Lc(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=se(e,i[xr]));const u=s.rendererFactory.createRenderer(e,t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const h=lv(i,OA(t),null,d,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&__(a,n,r.length-1),uv(i,h),i[n.index]=h}(te,y,V,G,A,h,g);L=$m(E,Re),y&&function y2(n,e,t,r){if(r)Ye(n,t,["ng-version",cF.full]);else{const{attrs:i,classes:s}=function Nl(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Gr(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Ye(n,t,i),s&&s.length>0&&Gh(n,t,s.join(" "))}}(g,V,y,r),void 0!==t&&function v2(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(L,this.ngContentSelectors,t),P=function m2(n,e,t,r,i,s){const o=nn(),a=i[K],c=ue(o,i);kA(a,i,o,t,null,r);for(let d=0;d<t.length;d++)sn(xs(i,a,o.directiveStart+d,o),i);FA(a,i,o),c&&sn(c,i);const u=xs(i,a,o.directiveStart+o.componentOffset,o);if(n[at]=i[at]=u,null!==s)for(const d of s)d(u,e);return y_(a,o,n),u}(Z,V,G,q,A,[b2]),S_(E,A,null)}finally{xc()}return new d2(this.componentType,P,Lu(L,A),A,L)}}class d2 extends nv{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new l2(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;D_(s[K],s,i,e,t),this.previousInputValues.set(e,t),dg(zn(this._tNode.index,s))}}get injector(){return new Rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function b2(){const n=nn();Hi(H()[K],n)}function Zn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}let vM=function bM(n,e,t,r){return pi(!0),e[de].createComment("")};function Cg(n,e,t){const r=H();return Zn(r,function Xs(){return he.lFrame.bindingIndex++}(),e)&&function Kr(n,e,t,r,i,s,o,a){const c=ue(e,t);let d,u=e.inputs;!a&&null!=u&&(d=u[r])?(D_(n,t,d,r,i),Ws(e)&&function HF(n,e){const t=zn(e,n);16&t[xe]||(t[xe]|=64)}(t,e.index)):3&e.type&&(r=function VF(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}(Ve(),function ht(){const n=he.lFrame;return $m(n.tView,n.selectedIndex)}(),r,n,e,r[de],t,!1),Cg}function R_(n,e,t,r,i){const o=i?"class":"style";D_(n,t,e.inputs[o],o,r)}function Yu(n,e,t,r){const i=H(),s=Ve(),o=Re+n,a=i[de],c=s.firstCreatePass?function Q2(n,e,t,r,i,s){const o=e.consts,c=ju(e,n,2,r,ms(o,i));return C_(e,t,c,ms(o,s)),null!==c.attrs&&fv(c,c.attrs,!1),null!==c.mergedAttrs&&fv(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=wM(s,i,c,a,e,n);i[o]=u;const d=Fl(c);return Yr(c,!0),Lc(a,u,c),32!=(32&c.flags)&&Yo()&&_u(s,i,u,c),0===function Vm(){return he.lFrame.elementDepthCount}()&&sn(u,i),function gh(){he.lFrame.elementDepthCount++}(),d&&(v_(s,i,c),y_(s,c,i)),null!==r&&b_(i,c),Yu}function Zu(){let n=nn();Wl()?xn():(n=n.parent,Yr(n,!1));const e=n;(function bs(n){return he.skipHydrationRootTNode===n})(e)&&function zm(){he.skipHydrationRootTNode=null}(),function Hm(){he.lFrame.elementDepthCount--}();const t=Ve();return t.firstCreatePass&&(Hi(t,n),Gd(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Xm(n){return 0!=(8&n.flags)}(e)&&R_(t,e,H(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Rw(n){return 0!=(16&n.flags)}(e)&&R_(t,e,H(),e.stylesWithoutHost,!1),Zu}function Vc(n,e,t,r){return Yu(n,e,t,r),Zu(),Vc}let wM=(n,e,t,r,i,s)=>(pi(!0),wu(r,i,function gi(){return he.lFrame.currentNamespace}()));function bv(n,e,t){const r=H(),i=Ve(),s=n+Re,o=i.firstCreatePass?function nj(n,e,t,r,i){const s=e.consts,o=ms(s,r),a=ju(e,n,8,"ng-container",o);return null!==o&&fv(a,o,!0),C_(e,t,a,ms(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];Yr(o,!0);const a=_M(i,r,o,n);return r[s]=a,Yo()&&_u(i,r,a,o),sn(a,r),Fl(o)&&(v_(i,r,o),y_(i,o,r)),null!=t&&b_(r,o),bv}function wv(){let n=nn();const e=Ve();return Wl()?xn():(n=n.parent,Yr(n,!1)),e.firstCreatePass&&(Hi(e,n),Gd(n)&&e.queries.elementEnd(n)),wv}let _M=(n,e,t,r)=>(pi(!0),jh(e[de],""));function Cv(n){return!!n&&"function"==typeof n.then}function xM(n){return!!n&&"function"==typeof n.subscribe}function MM(n=1){return function Iw(n){return(he.lFrame.contextLView=function Ym(n,e){for(;n>0;)e=e[$o],n--;return e}(n,he.lFrame.contextLView))[at]}(n)}function aj(n,e){let t=null;const r=function cw(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?uc(n,s,!0):Pl(r,s))return i}else t=i}return t}function _v(n,e){return n<<17|e<<2}function va(n){return n>>17&32767}function F_(n){return 2|n}function Hc(n){return(131068&n)>>2}function j_(n,e){return-131069&n|e<<2}function B_(n){return 1|n}function $M(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?va(s):Hc(s),c=!1;for(;0!==a&&(!1===c||o);){const d=n[a+1];hj(n[a],e)&&(c=!0,n[a+1]=r?B_(d):F_(d)),a=r?va(d):Hc(d)}c&&(n[t+1]=r?F_(s):B_(s))}function hj(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ra(n,e)>=0}const gn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function VM(n){return n.substring(gn.key,gn.keyEnd)}function gj(n){return n.substring(gn.value,gn.valueEnd)}function UM(n,e){const t=gn.textEnd;let r=gn.key=Ju(n,e,t);return t===r?-1:(r=gn.keyEnd=function vj(n,e,t){let r;for(;e<t&&(45===(r=n.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(n,r,t),r=GM(n,r,t),r=gn.value=Ju(n,r,t),r=gn.valueEnd=function bj(n,e,t){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<t;){const c=n.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=qM(n,c,o,t):e===o-4&&85===s&&82===i&&76===r&&40===c?a=o=qM(n,41,o,t):c>32&&(a=o),s=i,i=r,r=-33&c}return a}(n,r,t),GM(n,r,t))}function Ju(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function GM(n,e,t,r){return(e=Ju(n,e,t))<t&&e++,e}function qM(n,e,t,r){let i=-1,s=t;for(;s<r;){const o=n.charCodeAt(s++);if(o==e&&92!==i)return s;i=92==o&&92===i?0:o}throw new Error}function qi(n){!function Yi(n,e,t,r){const i=Ve(),s=function Vi(n){const e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);i.firstUpdatePass&&function JM(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[_t()],o=ZM(n,t);e1(s,r)&&null===e&&!o&&(e=!1),e=function _j(n,e,t,r){const i=function Zl(n){const e=he.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=_g(t=$_(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=$_(i,n,e,t,r),null===s){let c=function xj(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Hc(r))return n[va(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=$_(null,n,e,c[1],r),c=_g(c,e.attrs,r),function Ej(n,e,t,r){n[va(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function Dj(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=_g(r,n[s].hostAttrs,t);return _g(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function fj(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=va(o),c=Hc(o);n[r]=t;let d,u=!1;if(Array.isArray(t)?(d=t[1],(null===d||ra(t,d)>0)&&(u=!0)):d=t,i)if(0!==c){const g=va(n[a+1]);n[r+1]=_v(g,a),0!==g&&(n[g+1]=j_(n[g+1],r)),n[a+1]=function lj(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=_v(a,0),0!==a&&(n[a+1]=j_(n[a+1],r)),a=r;else n[r+1]=_v(c,0),0===a?a=r:n[c+1]=j_(n[c+1],r),c=r;u&&(n[r+1]=F_(n[r+1])),$M(n,d,r,!0),$M(n,d,r,!1),function dj(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ra(s,e)>=0&&(t[r+1]=B_(t[r+1]))}(e,d,n,r,s),o=_v(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(i,null,s,r);const o=H();if(t!==Me&&Zn(o,s,t)){const a=i.data[_t()];if(e1(a,r)&&!ZM(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Cl(c,t||"")),R_(i,a,o,t,r)}else!function Mj(n,e,t,r,i,s,o,a){i===Me&&(i=He);let c=0,u=0,d=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==d||null!==h;){const g=c<i.length?i[c+1]:void 0,m=u<s.length?s[u+1]:void 0;let v,y=null;d===h?(c+=2,u+=2,g!==m&&(y=h,v=m)):null===h||null!==d&&d<h?(c+=2,y=d):(u+=2,y=h,v=m),null!==y&&KM(n,e,t,r,y,v,o,a),d=c<i.length?i[c]:null,h=u<s.length?s[u]:null}}(i,a,o,o[de],o[s+1],o[s+1]=function Sj(n,e,t){if(null==t||""===t)return He;const r=[],i=Ss(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(XM,wj,n,!1)}function wj(n,e){for(let t=function mj(n){return function zM(n){gn.key=0,gn.keyEnd=0,gn.value=0,gn.valueEnd=0,gn.textEnd=n.length}(n),UM(n,Ju(n,0,gn.textEnd))}(e);t>=0;t=UM(e,t))XM(n,VM(e),gj(e))}function ZM(n,e){return e>=n.expandoStartIndex}function $_(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=_g(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function _g(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),lr(n,o,!!t||e[++s]))}return void 0===n?null:n}function XM(n,e,t){lr(n,e,Ss(t))}function KM(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],d=function uj(n){return 1==(1&n)}(u)?QM(c,e,t,i,Hc(u),o):void 0;xv(d)||(xv(s)||function cj(n){return 2==(2&n)}(u)&&(s=QM(c,null,t,i,a,o)),function qe(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Jr.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Jr.Important),n.setStyle(t,r,i,s))}}(r,o,function qo(n,e){return et(e[n])}(_t(),t),i,s))}function QM(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),d=u?c[1]:c,h=null===d;let g=t[i+1];g===Me&&(g=h?He:void 0);let m=h?Th(g,r):d===r?g:void 0;if(u&&!xv(m)&&(m=Th(c,r)),xv(m)&&(a=m,o))return a;const y=n[i+1];i=o?va(y):Hc(y)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Th(c,r))}return a}function xv(n){return void 0!==n}function e1(n,e){return 0!=(n.flags&(e?8:16))}const Ku="en-US";let E1=Ku;class zc{}class J1{}class Y_ extends zc{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new XA(this);const i=ir(e);this._bootstrapComponents=fo(i.bootstrap),this._r3Injector=uA(e,t,[{provide:zc,useValue:this},{provide:rv,useValue:this.componentFactoryResolver},...r],Ht(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Z_ extends J1{constructor(e){super(),this.moduleType=e}create(e){return new Y_(this.moduleType,e,[])}}class X1 extends zc{constructor(e){super(),this.componentFactoryResolver=new XA(this),this.instance=null;const t=new Bc([...e.providers,{provide:zc,useValue:this},{provide:rv,useValue:this.componentFactoryResolver}],e.parent||Pu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function J_(n,e,t=null){return new X1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let t$=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Iu(0,t.type),i=r.length>0?J_([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(ne(Ir))})}return n})();function K1(n){n.getStandaloneInjector=e=>e.get(t$).getOrCreateStandaloneInjector(n)}function sI(n,e,t){const r=function rn(){const n=he.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}()+n,i=H();return i[r]===Me?function Is(n,e,t){return n[e]=t}(i,r,t?e.call(t):e()):function yg(n,e){return n[e]}(i,r)}function S$(){return this._results[Symbol.iterator]()}class K_{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new hr)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=K_.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=S$)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function Ar(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function ry(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function M$(n,e,t,r=!0){const i=e[K];if(function _C(n,e,t,r){const i=fn+r,s=t.length;r>0&&(t[i-1][sr]=e),r<s-fn?(e[sr]=t[i],iy(t,fn+r,e)):(t.push(e),e[sr]=null),e[dt]=t;const o=e[hc];null!==o&&t!==o&&function zi(n,e){const t=n[Ho];e[Pt]!==e[dt][dt][Pt]&&(n[hs]=!0),null===t?n[Ho]=[e]:t.push(e)}(o,e);const a=e[Vn];null!==a&&a.insertView(n),e[xe]|=128}(i,e,n,t),r){const s=Uh(t,n),o=e[de],a=la(o,n[ci]);null!==a&&function wC(n,e,t,r,i,s){r[At]=i,r[en]=e,ua(n,r,t,1,i,s)}(i,n[en],o,e,a,s)}}let go=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=P$}return n})();const I$=go,T$=class extends I${constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function A$(n,e,t,r){const i=e.tView,a=lv(n,i,t,4096&n[xe]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[hc]=n[e.index];const u=n[Vn];return null!==u&&(a[Vn]=u.createEmbeddedView(i)),S_(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new pg(i)}};function P$(){return Mv(nn(),H())}function Mv(n,e){return 4&n.type?new T$(e,n,Lu(n,e)):null}let Zi=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=F$}return n})();function F$(){return yI(nn(),H())}const j$=Zi,pI=class extends j${constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Lu(this._hostTNode,this._hostLView)}get injector(){return new Rn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ac(this._hostTNode,this._hostLView);if(Zr(e)){const t=Dc(e,this._hostLView),r=Gt(e);return new Rn(t[K].data[r+8],t)}return new Rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=mI(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-fn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Mc(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const v=t||{};a=v.index,r=v.injector,i=v.projectableNodes,s=v.environmentInjector||v.ngModuleRef}const c=o?e:new mg($e(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const w=(o?u:this.parentInjector).get(Ir,null);w&&(s=w)}$e(c.componentType??{});const m=c.create(u,i,null,s);return this.insertImpl(m.hostView,a,false),m}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Dr(n){return Nn(n[dt])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[dt],d=new pI(u,u[en],u[dt]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return M$(a,i,o,!r),e.attachToViewContainerRef(),iy(Q_(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=mI(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=so(this._lContainer,t);r&&(au(Q_(this._lContainer),t),ct(r[K],r))}detach(e){const t=this._adjustIndex(e,-1),r=so(this._lContainer,t);return r&&null!=au(Q_(this._lContainer),t)?new pg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function mI(n){return n[8]}function Q_(n){return n[8]||(n[8]=[])}function yI(n,e){let t;const r=e[n.index];return Nn(r)?t=r:(t=BA(r,e,null,n),e[n.index]=t,uv(e,t)),vI(t,e,n,r),new pI(t,n,e)}let vI=function bI(n,e,t,r){if(n[ci])return;let i;i=8&t.type?et(r):function B$(n,e){const t=n[de],r=t.createComment(""),i=ue(e,n);return oo(t,la(t,i),r,function EC(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ci]=i};class ex{constructor(e){this.queryList=e,this.matches=null}clone(){return new ex(this.queryList)}setDirty(){this.queryList.setDirty()}}class tx{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new tx(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==EI(e,t).matches&&this.queries[t].setDirty()}}class wI{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class nx{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new nx(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class rx{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new rx(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,H$(t,s)),this.matchTNodeWithReadOption(e,t,to(t,e,s,!1,!1))}else r===go?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,to(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===ya||i===Zi||i===go&&4&t.type)this.addMatch(t.index,-2);else{const s=to(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function H$(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function z$(n,e,t,r){return-1===t?function U$(n,e){return 11&n.type?Lu(n,e):4&n.type?Mv(n,e):null}(e,n):-2===t?function G$(n,e,t){return t===ya?Lu(e,n):t===go?Mv(e,n):t===Zi?yI(e,n):void 0}(n,e,r):xs(n,n[K],t,e)}function CI(n,e,t,r){const i=e[Vn].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const u=o[c];a.push(u<0?null:z$(e,s[u],o[c+1],t.metadata.read))}i.matches=a}return i.matches}function ix(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=CI(n,e,i,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const u=s[a+1],d=e[-c];for(let h=fn;h<d.length;h++){const g=d[h];g[hc]===g[dt]&&ix(g[K],g,u,r)}if(null!==d[Ho]){const h=d[Ho];for(let g=0;g<h.length;g++){const m=h[g];ix(m[K],m,u,r)}}}}}return r}function Qu(n){const e=H(),t=Ve(),r=Cc();Jl(r+1);const i=EI(t,r);if(n.dirty&&function xw(n){return 4==(4&n[xe])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?ix(t,e,r,[]):CI(t,e,i,r);n.reset(s,sF),n.notifyOnChanges()}return!0}return!1}function Tv(n,e,t){const r=Ve();r.firstCreatePass&&(xI(r,new wI(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),_I(r,H(),e)}function ef(){return function q$(n,e){return n[Vn].queries[e].queryList}(H(),Cc())}function _I(n,e,t){const r=new K_(4==(4&t));(function jF(n,e,t,r){const i=function VA(n){return n[Wr]||(n[Wr]=[])}(e);i.push(t),n.firstCreatePass&&function HA(n){return n.cleanup||(n.cleanup=[])}(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Vn]&&(e[Vn]=new tx),e[Vn].queries.push(new ex(r))}function xI(n,e,t){null===n.queries&&(n.queries=new nx),n.queries.track(new rx(e,t))}function EI(n,e){return n.queries.getByIndex(e)}const fx=new oe("Application Initializer");let dx=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=ee(fx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Cv(s))t.push(s);else if(xM(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VI=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const po=new oe("LocaleId",{providedIn:"root",factory:()=>ee(po,Ne.Optional|Ne.SkipSelf)||function pV(){return typeof $localize<"u"&&$localize.locale||Ku}()});let HI=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tr(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class vV{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let UI=(()=>{class n{compileModuleSync(t){return new Z_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=fo(ir(t).declarations).reduce((o,a)=>{const c=$e(a);return c&&o.push(new mg(c)),o},[]);return new vV(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const WI=new oe(""),Nv=new oe("");let yx,px=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yx||(function jV(n){yx=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(ne(pt),ne(mx),ne(Nv))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),mx=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return yx?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),ba=null;const YI=new oe("AllowMultipleToken"),vx=new oe("PlatformDestroyListeners"),bx=new oe("appBootstrapListener");class JI{constructor(e,t){this.name=e,this.token=t}}function KI(n,e,t=[]){const r=`Platform: ${e}`,i=new oe(r);return(s=[])=>{let o=wx();if(!o||o.injector.get(YI,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function VV(n){if(ba&&!ba.get(YI,!1))throw new W(400,!1);(function ZI(){!function mc(n){Hl=n}(()=>{throw new W(600,!1)})})(),ba=n;const e=n.get(eT);(function XI(n){n.get(ev,null)?.forEach(t=>t())})(n)}(function QI(n=[],e){return dr.create({name:e,providers:[{provide:ig,useValue:"platform"},{provide:vx,useValue:new Set([()=>ba=null])},...n]})}(a,r))}return function UV(n){const e=wx();if(!e)throw new W(401,!1);return e}()}}function wx(){return ba?.get(eT)??null}let eT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function zV(n="zone.js",e){return"noop"===n?new wF:"zone.js"===n?new pt(e):n}(r?.ngZone,function tT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function e$(n,e,t){return new Y_(n,e,t)}(t.moduleType,this.injector,function oT(n){return[{provide:pt,useFactory:n},{provide:co,multi:!0,useFactory:()=>{const e=ee(qV,{optional:!0});return()=>e.initialize()}},{provide:sT,useFactory:GV},{provide:pA,useFactory:mA}]}(()=>i)),o=s.injector.get(uo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{Rv(this._modules,s),a.unsubscribe()})}),function nT(n,e,t){try{const r=t();return Cv(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(dx);return a.runInitializers(),a.donePromise.then(()=>(function D1(n){rr(n,"Expected localeId to be defined"),"string"==typeof n&&(E1=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(po,Ku)||Ku),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=rT({},r);return function BV(n,e,t){const r=new Z_(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(rf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new W(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(vx,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(ne(dr))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function rT(n,e){return Array.isArray(e)?e.reduce(rT,n):{...n,...e}}let rf=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ee(sT),this.zoneIsStable=ee(pA),this.componentTypes=[],this.components=[],this.isStable=ee(HI).hasPendingTasks.pipe(jr(t=>t?ve(!1):this.zoneIsStable),function gm(n,e=br){return n=n??pm,$t((t,r)=>{let i,s=!0;t.subscribe(Ct(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}(),hm()),this._injector=ee(Ir)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof rA;if(!this._injector.get(dx).done)throw!i&&function ds(n){const e=$e(n)||Rt(n)||Qt(n);return null!==e&&e.standalone}(t),new W(405,!1);let o;o=i?t:this._injector.get(rv).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function $V(n){return n.isBoundToModule}(o)?void 0:this._injector.get(zc),u=o.create(dr.NULL,[],r||o.selector,a),d=u.location.nativeElement,h=u.injector.get(WI,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Rv(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new W(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Rv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(bx,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Rv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const sT=new oe("",{providedIn:"root",factory:()=>ee(uo).handleError.bind(void 0)});function GV(){const n=ee(pt),e=ee(uo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let qV=(()=>{class n{constructor(){this.zone=ee(pt),this.applicationRef=ee(rf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Cx=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=YV}return n})();function YV(n){return function ZV(n,e,t){if(Ws(n)&&!t){const r=zn(n.index,e);return new pg(r,r)}return 47&n.type?new pg(e[Pt],e):null}(nn(),H(),16==(16&n))}const cH=KI(null,"core",[]);let lH=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(ne(rf))};static#t=this.\u0275mod=qr({type:n});static#n=this.\u0275inj=ls({})}return n})(),Mx=null;function sf(){return Mx}class xH{}const wi=new oe("DocumentToken");let Ix=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:function(){return ee(DH)},providedIn:"platform"})}return n})();const EH=new oe("Location Initialized");let DH=(()=>{class n extends Ix{constructor(){super(),this._doc=ee(wi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sf().getBaseHref(this._doc)}onPopState(t){const r=sf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=sf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function Tx(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ET(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function mo(n){return n&&"?"!==n[0]?"?"+n:n}let qc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:function(){return ee(ST)},providedIn:"root"})}return n})();const DT=new oe("appBaseHref");let ST=(()=>{class n extends qc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ee(wi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Tx(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+mo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+mo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+mo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(Ix),ne(DT,8))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SH=(()=>{class n extends qc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Tx(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(Ix),ne(DT,8))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Px=(()=>{class n{constructor(t){this._subject=new hr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function IH(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(ET(AT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+mo(r))}normalize(t){return n.stripTrailingSlash(function MH(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,AT(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=mo;static#t=this.joinWithSlash=Tx;static#n=this.stripTrailingSlash=ET;static#r=this.\u0275fac=function(r){return new(r||n)(ne(qc))};static#i=this.\u0275prov=re({token:n,factory:function(){return function AH(){return new Px(ne(qc))}()},providedIn:"root"})}return n})();function AT(n){return n.replace(/\/index.html$/,"")}let BT=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vU,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$T("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$T("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(me(Zi),me(go))};static#t=this.\u0275dir=On({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class vU{constructor(){this.$implicit=null,this.ngIf=null}}function $T(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ht(e)}'.`)}let UU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qr({type:n});static#n=this.\u0275inj=ls({})}return n})();function zT(n){return"server"===n}let WU=(()=>{class n{static#e=this.\u0275prov=re({token:n,providedIn:"root",factory:()=>new YU(ne(wi),window)})}return n})();class YU{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ZU(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class b3 extends xH{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Yx extends b3{static makeCurrent(){!function _H(n){Mx||(Mx=n)}(new Yx)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function w3(){return kg=kg||document.querySelector("base"),kg?kg.getAttribute("href"):null}();return null==t?null:function C3(n){Xv=Xv||document.createElement("a"),Xv.setAttribute("href",n);const e=Xv.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){kg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function hU(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Xv,kg=null,x3=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})();const Zx=new oe("EventManagerPlugins");let ZT=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(ne(Zx),ne(pt))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})();class JT{constructor(e){this._doc=e}}const Jx="ng-app-id";let XT=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zT(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Jx}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Jx),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Jx,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(wi),ne(Nu),ne(tv,8),ne(pa))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})();const Xx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kx=/%COMP%/g,A3=new oe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function QT(n,e){return e.map(t=>t.replace(Kx,n))}let eP=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=zT(a),this.defaultRenderer=new Qx(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===zr.ShadowDom&&(r={...r,encapsulation:zr.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof nP?i.applyToHost(t):i instanceof eE&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case zr.Emulated:s=new nP(c,u,r,this.appId,d,o,a,h);break;case zr.ShadowDom:return new P3(c,u,t,r,o,a,this.nonce,h);default:s=new eE(c,u,r,d,o,a,h)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(ne(ZT),ne(XT),ne(Nu),ne(A3),ne(wi),ne(pa),ne(pt),ne(tv))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})();class Qx{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Xx[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(tP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(tP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Xx[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Xx[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Jr.DashCase|Jr.Important)?e.style.setProperty(t,r,i&Jr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Jr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=sf().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function tP(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class P3 extends Qx{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=QT(i.id,i.styles);for(const d of u){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class eE extends Qx{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?QT(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class nP extends eE{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function M3(n){return"_ngcontent-%COMP%".replace(Kx,n)}(u),this.hostAttr=function I3(n){return"_nghost-%COMP%".replace(Kx,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let O3=(()=>{class n extends JT{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(wi))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})();const rP=["alt","control","meta","shift"],N3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},R3={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let L3=(()=>{class n extends JT{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sf().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),rP.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=N3[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),rP.forEach(o=>{o!==i&&(0,R3[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(ne(wi))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})();const sP=[{provide:pa,useValue:"browser"},{provide:ev,useValue:function k3(){Yx.makeCurrent()},multi:!0},{provide:wi,useFactory:function j3(){return function TC(n){Wh=n}(document),document},deps:[]}],B3=KI(cH,"browser",sP),$3=new oe(""),oP=[{provide:Nv,useClass:class _3{addToWindow(e){st.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new W(5103,!1);return s},st.getAllAngularTestabilities=()=>e.getAllTestabilities(),st.getAllAngularRootElements=()=>e.getAllRootElements(),st.frameworkStabilizers||(st.frameworkStabilizers=[]),st.frameworkStabilizers.push(r=>{const i=st.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?sf().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:WI,useClass:px,deps:[pt,mx,Nv]},{provide:px,useClass:px,deps:[pt,mx,Nv]}],aP=[{provide:ig,useValue:"root"},{provide:uo,useFactory:function F3(){return new uo},deps:[]},{provide:Zx,useClass:O3,multi:!0,deps:[wi,pt,pa]},{provide:Zx,useClass:L3,multi:!0,deps:[wi]},eP,XT,ZT,{provide:sA,useExisting:eP},{provide:class JU{},useClass:x3,deps:[]},[]];let V3=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Nu,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ne($3,12))};static#t=this.\u0275mod=qr({type:n});static#n=this.\u0275inj=ls({providers:[...aP,...oP],imports:[UU,lH]})}return n})(),cP=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(ne(wi))};static#t=this.\u0275prov=re({token:n,factory:function(r){let i=null;return i=r?new r:function U3(){return new cP(ne(wi))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:Z3}=Array,{getPrototypeOf:J3,prototype:X3,keys:K3}=Object;const{isArray:tz}=Array;function nE(...n){const e=Ja(n),t=function Sd(n){return Ke(vl(n))?n.pop():void 0}(n),{args:r,keys:i}=function Q3(n){if(1===n.length){const e=n[0];if(Z3(e))return{args:e,keys:null};if(function ez(n){return n&&"object"==typeof n&&J3(n)===X3}(e)){const t=K3(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return Vt([],e);const s=new St(function sz(n,e,t=br){return r=>{dP(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)dP(e,()=>{const u=Vt(n[c],e);let d=!1;u.subscribe(Ct(r,h=>{s[c]=h,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function iz(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,o):br));return t?s.pipe(function rz(n){return Ge(e=>function nz(n,e){return tz(e)?n(...e):n(e)}(n,e))}(t)):s}function dP(n,e,t){n?si(t,n,e):e()}const Kv=Bn(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function rE(...n){return function oz(){return Lo(1)}()(Vt(n,Ja(n)))}function hP(n){return new St(e=>{wr(n()).subscribe(e)})}function Fg(n,e){const t=Ke(n)?n:()=>n,r=i=>i.error(t());return new St(e?i=>e.schedule(r,0,i):r)}function iE(){return $t((n,e)=>{let t=null;n._refCount++;const r=Ct(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class gP extends St{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,vd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Dt;const t=this.getSubject();e.add(this.source.subscribe(Ct(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Dt.EMPTY)}return e}refCount(){return iE()(this)}}function cf(n){return n<=0?()=>oi:$t((e,t)=>{let r=0;e.subscribe(Ct(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ca(n,e){return $t((t,r)=>{let i=0;t.subscribe(Ct(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Qv(n){return $t((e,t)=>{let r=!1;e.subscribe(Ct(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pP(n=cz){return $t((e,t)=>{let r=!1;e.subscribe(Ct(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cz(){return new Kv}function Wc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ca((i,s)=>n(i,s,r)):br,cf(1),t?Qv(e):pP(()=>new Kv))}function jg(n,e){return Ke(e)?un(n,e,1):un(n,1)}function Jn(n,e,t){const r=Ke(n)||e||t?{next:n,error:e,complete:t}:n;return r?$t((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ct(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):br}function Yc(n){return $t((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Ct(t,void 0,void 0,o=>{s=wr(n(o,Yc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function sE(n){return n<=0?()=>oi:$t((e,t)=>{let r=[];e.subscribe(Ct(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function oE(n){return $t((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Oe="primary",Bg=Symbol("RouteTitle");class gz{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function lf(n){return new gz(n)}function pz(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ps(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!mP(n[i],e[i]))return!1;return!0}function mP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function yP(n){return n.length>0?n[n.length-1]:null}function _a(n){return function Y3(n){return!!n&&(n instanceof St||Ke(n.lift)&&Ke(n.subscribe))}(n)?n:Cv(n)?Vt(Promise.resolve(n)):ve(n)}const yz={exact:function wP(n,e,t){if(!Zc(n.segments,e.segments)||!eb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!wP(n.children[r],e.children[r],t))return!1;return!0},subset:CP},vP={exact:function vz(n,e){return Ps(n,e)},subset:function bz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>mP(n[t],e[t]))},ignored:()=>!0};function bP(n,e,t){return yz[t.paths](n.root,e.root,t.matrixParams)&&vP[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function CP(n,e,t){return _P(n,e,e.segments,t)}function _P(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Zc(i,t)||e.hasChildren()||!eb(i,t,r))}if(n.segments.length===t.length){if(!Zc(n.segments,t)||!eb(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!CP(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Zc(n.segments,i)&&eb(n.segments,i,r)&&n.children[Oe])&&_P(n.children[Oe],e,s,r)}}function eb(n,e,t){return e.every((r,i)=>vP[t](n[i].parameters,r.parameters))}class uf{constructor(e=new nt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lf(this.queryParams)),this._queryParamMap}toString(){return _z.serialize(this)}}class nt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tb(this)}}class $g{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=lf(this.parameters)),this._parameterMap}toString(){return DP(this)}}function Zc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Vg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:function(){return new aE},providedIn:"root"})}return n})();class aE{parse(e){const t=new Nz(e);return new uf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Hg(e.root,!0)}`,r=function Dz(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${nb(t)}=${nb(i)}`).join("&"):`${nb(t)}=${nb(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function xz(n){return encodeURI(n)}(e.fragment)}`:""}`}}const _z=new aE;function tb(n){return n.segments.map(e=>DP(e)).join("/")}function Hg(n,e){if(!n.hasChildren())return tb(n);if(e){const t=n.children[Oe]?Hg(n.children[Oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Oe&&r.push(`${i}:${Hg(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Cz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Oe&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Oe?[Hg(n.children[Oe],!1)]:[`${i}:${Hg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Oe]?`${tb(n)}/${t[0]}`:`${tb(n)}/(${t.join("//")})`}}function xP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nb(n){return xP(n).replace(/%3B/gi,";")}function cE(n){return xP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rb(n){return decodeURIComponent(n)}function EP(n){return rb(n.replace(/\+/g,"%20"))}function DP(n){return`${cE(n.path)}${function Ez(n){return Object.keys(n).map(e=>`;${cE(e)}=${cE(n[e])}`).join("")}(n.parameters)}`}const Sz=/^[^\/()?;#]+/;function lE(n){const e=n.match(Sz);return e?e[0]:""}const Az=/^[^\/()?;=#]+/,Iz=/^[^=?&#]+/,Pz=/^[^&#]+/;class Nz{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Oe]=new nt(e,t)),r}parseSegment(){const e=lE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new $g(rb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Mz(n){const e=n.match(Az);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=lE(this.remaining);i&&(r=i,this.capture(r))}e[rb(t)]=rb(r)}parseQueryParam(e){const t=function Tz(n){const e=n.match(Iz);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Oz(n){const e=n.match(Pz);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=EP(t),s=EP(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=lE(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Oe);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Oe]:new nt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}}function SP(n){return n.segments.length>0?new nt([],{[Oe]:n}):n}function AP(n){const e={};for(const r of Object.keys(n.children)){const s=AP(n.children[r]);if(r===Oe&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Rz(n){if(1===n.numberOfChildren&&n.children[Oe]){const e=n.children[Oe];return new nt(n.segments.concat(e.segments),e.children)}return n}(new nt(n.segments,e))}function Jc(n){return n instanceof uf}function MP(n){let e;const i=SP(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new nt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function IP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return uE(i,i,i,t,r);const s=function kz(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new PP(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new PP(t,e,r)}(e);if(s.toRoot())return uE(i,i,new nt([],{}),t,r);const o=function Fz(n,e,t){if(n.isAbsolute)return new sb(e,!0,0);if(!t)return new sb(e,!1,NaN);if(null===t.parent)return new sb(t,!0,0);const r=ib(n.commands[0])?0:1;return function jz(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new sb(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?zg(o.segmentGroup,o.index,s.commands):OP(o.segmentGroup,o.index,s.commands);return uE(i,o.segmentGroup,a,t,r)}function ib(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ug(n){return"object"==typeof n&&null!=n&&n.outlets}function uE(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),o=n===e?t:TP(n,e,t);const a=SP(AP(o));return new uf(a,s,i)}function TP(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:TP(s,e,t)}),new nt(n.segments,r)}class PP{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ib(r[0]))throw new W(4003,!1);const i=r.find(Ug);if(i&&i!==yP(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sb{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function OP(n,e,t){if(n||(n=new nt([],{})),0===n.segments.length&&n.hasChildren())return zg(n,e,t);const r=function $z(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Ug(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!RP(c,u,o))return s;r+=2}else{if(!RP(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new nt(n.segments.slice(0,r.pathIndex),{});return s.children[Oe]=new nt(n.segments.slice(r.pathIndex),n.children),zg(s,0,i)}return r.match&&0===i.length?new nt(n.segments,{}):r.match&&!n.hasChildren()?fE(n,e,t):r.match?zg(n,0,i):fE(n,e,t)}function zg(n,e,t){if(0===t.length)return new nt(n.segments,{});{const r=function Bz(n){return Ug(n[0])?n[0].outlets:{[Oe]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Oe)&&n.children[Oe]&&1===n.numberOfChildren&&0===n.children[Oe].segments.length){const s=zg(n.children[Oe],e,t);return new nt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=OP(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new nt(n.segments,i)}}function fE(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Ug(s)){const c=Vz(s.outlets);return new nt(r,c)}if(0===i&&ib(t[0])){r.push(new $g(n.segments[e].path,NP(t[0]))),i++;continue}const o=Ug(s)?s.outlets[Oe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ib(a)?(r.push(new $g(o,NP(a))),i+=2):(r.push(new $g(o,{})),i++)}return new nt(r,{})}function Vz(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=fE(new nt([],{}),0,r))}),e}function NP(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function RP(n,e,t){return n==t.path&&Ps(e,t.parameters)}const Gg="imperative";class Os{constructor(e,t){this.id=e,this.url=t}}class ob extends Os{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xa extends Os{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qg extends Os{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ff extends Os{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class ab extends Os{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class LP extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hz extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uz extends Os{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zz extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gz extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qz{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wz{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Yz{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zz{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jz{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xz{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kP{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class dE{}class hE{constructor(e){this.url=e}}class Kz{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Wg,this.attachRef=null}}let Wg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Kz,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class FP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=gE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=gE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pE(e,this._root).map(t=>t.value)}}function gE(n,e){if(n===e.value)return e;for(const t of e.children){const r=gE(n,t);if(r)return r}return null}function pE(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pE(n,t);if(r.length)return r.unshift(e),r}return[]}class bo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function df(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class jP extends FP{constructor(e,t){super(e),this.snapshot=t,mE(this,e)}toString(){return this.snapshot.toString()}}function BP(n,e){const t=function Qz(n,e){const o=new cb([],{},{},"",{},Oe,e,null,{});return new VP("",new bo(o,[]))}(0,e),r=new tr([new $g("",{})]),i=new tr({}),s=new tr({}),o=new tr({}),a=new tr(""),c=new hf(r,i,o,a,s,Oe,e,t.root);return c.snapshot=t.root,new jP(new bo(c,[]),t)}class hf{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ge(u=>u[Bg]))??ve(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ge(e=>lf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ge(e=>lf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $P(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function eG(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cb{get title(){return this.data?.[Bg]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class VP extends FP{constructor(e,t){super(t),this.url=e,mE(this,t)}toString(){return HP(this._root)}}function mE(n,e){e.value._routerState=n,e.children.forEach(t=>mE(n,t))}function HP(n){const e=n.children.length>0?` { ${n.children.map(HP).join(", ")} } `:"";return`${n.value}${e}`}function yE(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ps(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ps(e.params,t.params)||n.paramsSubject.next(t.params),function mz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ps(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ps(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vE(n,e){const t=Ps(n.params,e.params)&&function wz(n,e){return Zc(n,e)&&n.every((t,r)=>Ps(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||vE(n.parent,e.parent))}let bE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Oe,this.activateEvents=new hr,this.deactivateEvents=new hr,this.attachEvents=new hr,this.detachEvents=new hr,this.parentContexts=ee(Wg),this.location=ee(Zi),this.changeDetector=ee(Cx),this.environmentInjector=ee(Ir),this.inputBinder=ee(lb,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new tG(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=On({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ui]})}return n})();class tG{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===hf?this.route:e===Wg?this.childContexts:this.parent.get(e,t)}}const lb=new oe("");let UP=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=nE([r.queryParams,r.params,r.data]).pipe(jr(([s,o,a],c)=>(a={...s,...o,...a},0===c?ve(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function CH(n){const e=$e(n);if(!e)return null;const t=new mg(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function Yg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function rG(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Yg(n,r,i);return Yg(n,r)})}(n,e,t);return new bo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Yg(n,a)),o}}const r=function iG(n){return new hf(new tr(n.url),new tr(n.params),new tr(n.queryParams),new tr(n.fragment),new tr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Yg(n,s));return new bo(r,i)}}const wE="ngNavigationCancelingError";function zP(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Jc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=GP(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function GP(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[wE]=!0,r.cancellationCode=e,t&&(r.url=t),r}function qP(n){return n&&n[wE]}let WP=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Gs({type:n,selectors:[["ng-component"]],standalone:!0,features:[K1],decls:1,vars:0,template:function(r,i){1&r&&Vc(0,"router-outlet")},dependencies:[bE],encapsulation:2})}return n})();function CE(n){const e=n.children&&n.children.map(CE),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Oe&&(t.component=WP),t}function Ki(n){return n.outlet||Oe}function Zg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class dG{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),yE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=df(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=df(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=df(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=df(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Xz(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zz(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(yE(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),yE(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Zg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class YP{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ub{constructor(e,t){this.component=e,this.route=t}}function hG(n,e,t){const r=n._root;return Jg(r,e?e._root:null,t,[r.value])}function gf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function us(n){return null!==Qa(n)}(n)?e.get(n):n:r}function Jg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=df(e);return n.children.forEach(o=>{(function pG(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function mG(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Zc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zc(n.url,e.url)||!Ps(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vE(n,e)||!Ps(n.queryParams,e.queryParams);default:return!vE(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new YP(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Jg(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ub(a.outlet.component,o))}else o&&Xg(e,a,i),i.canActivateChecks.push(new YP(r)),Jg(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Xg(a,t.getContext(o),i)),i}function Xg(n,e,t){const r=df(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Xg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new ub(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Kg(n){return"function"==typeof n}function ZP(n){return n instanceof Kv||"EmptyError"===n?.name}const fb=Symbol("INITIAL_VALUE");function pf(){return jr(n=>nE(n.map(e=>e.pipe(cf(1),function az(...n){const e=Ja(n);return $t((t,r)=>{(e?rE(n,t,e):rE(n,t)).subscribe(r)})}(fb)))).pipe(Ge(e=>{for(const t of e)if(!0!==t){if(t===fb)return fb;if(!1===t||t instanceof uf)return t}return!0}),Ca(e=>e!==fb),cf(1)))}function JP(n){return function Ga(...n){return Fp(n)}(Jn(e=>{if(Jc(e))throw zP(0,e)}),Ge(e=>!0===e))}class db{constructor(e){this.segmentGroup=e||null}}class XP{constructor(e){this.urlTree=e}}function mf(n){return Fg(new db(n))}function KP(n){return Fg(new XP(n))}class kG{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new W(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ve(r);if(i.numberOfChildren>1||!i.children[Oe])return Fg(new W(4e3,!1));i=i.children[Oe]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new uf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new nt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const _E={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FG(n,e,t,r,i){const s=xE(n,e,t);return s.matched?(r=function oG(n,e){return n.providers&&!n._injector&&(n._injector=J_(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function NG(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ve(i.map(o=>{const a=gf(o,n);return _a(function _G(n){return n&&Kg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(pf(),JP()):ve(!0)}(r,e,t).pipe(Ge(o=>!0===o?s:{..._E}))):ve(s)}function xE(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{..._E}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||pz)(t,n,e);if(!i)return{..._E};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function QP(n,e,t,r){return t.length>0&&function $G(n,e,t){return t.some(r=>hb(n,e,r)&&Ki(r)!==Oe)}(n,t,r)?{segmentGroup:new nt(e,BG(r,new nt(t,n.children))),slicedSegments:[]}:0===t.length&&function VG(n,e,t){return t.some(r=>hb(n,e,r))}(n,t,r)?{segmentGroup:new nt(n.segments,jG(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new nt(n.segments,n.children),slicedSegments:t}}function jG(n,e,t,r,i){const s={};for(const o of r)if(hb(n,t,o)&&!i[Ki(o)]){const a=new nt([],{});s[Ki(o)]=a}return{...i,...s}}function BG(n,e){const t={};t[Oe]=e;for(const r of n)if(""===r.path&&Ki(r)!==Oe){const i=new nt([],{});t[Ki(r)]=i}return t}function hb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class GG{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new kG(this.urlSerializer,this.urlTree)}noMatchError(e){return new W(4002,!1)}recognize(){const e=QP(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Oe).pipe(Yc(t=>{if(t instanceof XP)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof db?this.noMatchError(t):t}),Ge(t=>{const r=new cb([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Oe,this.rootComponentType,null,{}),i=new bo(r,t),s=new VP("",i),o=function Lz(n,e,t=null,r=null){return IP(MP(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Oe).pipe(Yc(r=>{throw r instanceof db?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=$P(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Vt(i).pipe(jg(s=>{const o=r.children[s],a=function uG(n,e){const t=n.filter(r=>Ki(r)===e);return t.push(...n.filter(r=>Ki(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),function uz(n,e){return $t(function lz(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(Ct(o,d=>{const h=u++;c=a?n(c,d,h):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),Qv(null),function fz(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ca((i,s)=>n(i,s,r)):br,sE(1),t?Qv(e):pP(()=>new Kv))}(),un(s=>{if(null===s)return mf(r);const o=eO(s);return function qG(n){n.sort((e,t)=>e.value.outlet===Oe?-1:t.value.outlet===Oe?1:e.value.outlet.localeCompare(t.value.outlet))}(o),ve(o)}))}processSegment(e,t,r,i,s,o){return Vt(t).pipe(jg(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Yc(c=>{if(c instanceof db)return ve(null);throw c}))),Wc(a=>!!a),Yc(a=>{if(ZP(a))return function UG(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?ve([]):mf(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function HG(n,e,t,r){return!!(Ki(n)===r||r!==Oe&&hb(e,t,n))&&("**"===n.path||xE(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):mf(i):mf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?KP(s):this.applyRedirects.lineralizeSegments(r,s).pipe(un(o=>{const a=new nt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:d}=xE(t,i,s);if(!a)return mf(t);const h=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,d);return i.redirectTo.startsWith("/")?KP(h):this.applyRedirects.lineralizeSegments(i,h).pipe(un(g=>this.processSegment(e,r,t,g.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?yP(i).parameters:{};a=ve({snapshot:new cb(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tO(r),Ki(r),r.component??r._loadedComponent??null,r,nO(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=FG(t,r,i,e).pipe(Ge(({matched:c,consumedSegments:u,remainingSegments:d,parameters:h})=>c?{snapshot:new cb(u,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tO(r),Ki(r),r.component??r._loadedComponent??null,r,nO(r)),consumedSegments:u,remainingSegments:d}:null));return a.pipe(jr(c=>null===c?mf(t):this.getChildConfig(e=r._injector??e,r,i).pipe(jr(({routes:u})=>{const d=r._loadedInjector??e,{snapshot:h,consumedSegments:g,remainingSegments:m}=c,{segmentGroup:y,slicedSegments:v}=QP(t,g,m,u);if(0===v.length&&y.hasChildren())return this.processChildren(d,u,y).pipe(Ge(_=>null===_?null:[new bo(h,_)]));if(0===u.length&&0===v.length)return ve([new bo(h,[])]);const w=Ki(r)===s;return this.processSegment(d,u,y,v,w?Oe:s,!0).pipe(Ge(_=>[new bo(h,_)]))}))))}getChildConfig(e,t,r){return t.children?ve({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ve({routes:t._loadedRoutes,injector:t._loadedInjector}):function OG(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ve(!0):ve(i.map(o=>{const a=gf(o,n);return _a(function vG(n){return n&&Kg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(pf(),JP())}(e,t,r).pipe(un(i=>i?this.configLoader.loadChildren(e,t).pipe(Jn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function LG(n){return Fg(GP(!1,3))}())):ve({routes:[],injector:e})}}function WG(n){const e=n.value.routeConfig;return e&&""===e.path}function eO(n){const e=[],t=new Set;for(const r of n){if(!WG(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=eO(r.children);e.push(new bo(r.value,i))}return e.filter(r=>!t.has(r))}function tO(n){return n.data||{}}function nO(n){return n.resolve||{}}function rO(n){return"string"==typeof n.title||null===n.title}function EE(n){return jr(e=>{const t=n(e);return t?Vt(t).pipe(Ge(()=>e)):ve(e)})}const yf=new oe("ROUTES");let DE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ee(UI)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ve(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=_a(t.loadComponent()).pipe(Ge(iO),Jn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),oE(()=>{this.componentLoaders.delete(t)})),i=new gP(r,()=>new kr).pipe(iE());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function e8(n,e,t,r){return _a(n.loadChildren()).pipe(Ge(iO),un(i=>i instanceof J1||Array.isArray(i)?ve(i):Vt(e.compileModuleAsync(i))),Ge(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(yf,[],{optional:!0,self:!0}).flat()),{routes:o.map(CE),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(oE(()=>{this.childrenLoaders.delete(r)})),o=new gP(s,()=>new kr).pipe(iE());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iO(n){return function t8(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let gb=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new kr,this.transitionAbortSubject=new kr,this.configLoader=ee(DE),this.environmentInjector=ee(Ir),this.urlSerializer=ee(Vg),this.rootContexts=ee(Wg),this.inputBindingEnabled=null!==ee(lb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ve(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Wz(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new qz(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new tr({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Gg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ca(s=>0!==s.id),Ge(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),jr(s=>{this.currentTransition=s;let o=!1,a=!1;return ve(s).pipe(Jn(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),jr(c=>{const u=c.currentBrowserUrl.toString(),d=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!d&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new ff(c.id,this.urlSerializer.serialize(c.rawUrl),g,0)),c.resolve(null),oi}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ve(c).pipe(jr(g=>{const m=this.transitions?.getValue();return this.events.next(new ob(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?oi:Promise.resolve(g)}),function YG(n,e,t,r,i,s){return un(o=>function zG(n,e,t,r,i,s,o="emptyOnly"){return new GG(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Ge(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Jn(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const m=new LP(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(d&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:g,extractedUrl:m,source:y,restoredState:v,extras:w}=c,_=new ob(g,this.urlSerializer.serialize(m),y,v);this.events.next(_);const C=BP(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:C,urlAfterRedirects:m,extras:{...w,skipLocationChange:!1,replaceUrl:!1}},ve(s)}{const g="";return this.events.next(new ff(c.id,this.urlSerializer.serialize(c.extractedUrl),g,1)),c.resolve(null),oi}}),Jn(c=>{const u=new Hz(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ge(c=>(this.currentTransition=s={...c,guards:hG(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function EG(n,e){return un(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ve({...t,guardsResult:!0}):function DG(n,e,t,r){return Vt(n).pipe(un(i=>function PG(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ve(s.map(a=>{const c=Zg(e)??i,u=gf(a,c);return _a(function CG(n){return n&&Kg(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(Wc())})).pipe(pf()):ve(!0)}(i.component,i.route,t,e,r)),Wc(i=>!0!==i,!0))}(o,r,i,n).pipe(un(a=>a&&function yG(n){return"boolean"==typeof n}(a)?function SG(n,e,t,r){return Vt(e).pipe(jg(i=>rE(function MG(n,e){return null!==n&&e&&e(new Yz(n)),ve(!0)}(i.route.parent,r),function AG(n,e){return null!==n&&e&&e(new Jz(n)),ve(!0)}(i.route,r),function TG(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function gG(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>hP(()=>ve(o.guards.map(c=>{const u=Zg(o.node)??t,d=gf(c,u);return _a(function wG(n){return n&&Kg(n.canActivateChild)}(d)?d.canActivateChild(r,n):u.runInContext(()=>d(r,n))).pipe(Wc())})).pipe(pf())));return ve(s).pipe(pf())}(n,i.path,t),function IG(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ve(!0);const i=r.map(s=>hP(()=>{const o=Zg(e)??t,a=gf(s,o);return _a(function bG(n){return n&&Kg(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Wc())}));return ve(i).pipe(pf())}(n,i.route,t))),Wc(i=>!0!==i,!0))}(r,s,n,e):ve(a)),Ge(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Jn(c=>{if(s.guardsResult=c.guardsResult,Jc(c.guardsResult))throw zP(0,c.guardsResult);const u=new Uz(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Ca(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),EE(c=>{if(c.guards.canActivateChecks.length)return ve(c).pipe(Jn(u=>{const d=new zz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),jr(u=>{let d=!1;return ve(u).pipe(function ZG(n,e){return un(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ve(t);let s=0;return Vt(i).pipe(jg(o=>function JG(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!rO(i)&&(s[Bg]=i.title),function XG(n,e,t,r){const i=function KG(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ve({});const s={};return Vt(i).pipe(un(o=>function QG(n,e,t,r){const i=Zg(e)??r,s=gf(n,i);return _a(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Wc(),Jn(a=>{s[o]=a}))),sE(1),function dz(n){return Ge(()=>n)}(s),Yc(o=>ZP(o)?oi:Fg(o)))}(s,n,e,r).pipe(Ge(o=>(n._resolvedData=o,n.data=$P(n,t).resolve,i&&rO(i)&&(n.data[Bg]=i.title),null)))}(o.route,r,n,e)),Jn(()=>s++),sE(1),un(o=>s===i.length?ve(t):oi))})}(t.paramsInheritanceStrategy,this.environmentInjector),Jn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",2)}}))}),Jn(u=>{const d=new Gz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),EE(c=>{const u=d=>{const h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Jn(g=>{d.component=g}),Ge(()=>{})));for(const g of d.children)h.push(...u(g));return h};return nE(u(c.targetSnapshot.root)).pipe(Qv(),cf(1))}),EE(()=>this.afterPreactivation()),Ge(c=>{const u=function nG(n,e,t){const r=Yg(n,e._root,t?t._root:void 0);return new jP(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},s}),Jn(()=>{this.events.next(new dE)}),((n,e,t,r)=>Ge(i=>(new dG(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),cf(1),Jn({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xa(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),function hz(n){return $t((e,t)=>{wr(n).subscribe(Ct(t,()=>t.complete(),md)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Jn(c=>{throw c}))),oE(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Yc(c=>{if(a=!0,qP(c))this.events.next(new qg(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function sG(n){return qP(n)&&Jc(n.url)}(c)?this.events.next(new hE(c.url)):s.resolve(!1);else{this.events.next(new ab(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){s.reject(u)}}return oi}))}))}cancelNavigationTransition(t,r,i){const s=new qg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sO(n){return n!==Gg}let oO=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Oe);return r}getResolvedTitleForRoute(t){return t.data[Bg]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:function(){return ee(n8)},providedIn:"root"})}return n})(),n8=(()=>{class n extends oO{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(cP))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),r8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:function(){return ee(s8)},providedIn:"root"})}return n})();class i8{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let s8=(()=>{class n extends i8{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=function ty(n){return Ri(()=>{const e=n.prototype.constructor,t=e[J]||Mh(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[J]||Mh(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(n)))(i||n)}}();static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const pb=new oe("",{providedIn:"root",factory:()=>({})});let o8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:function(){return ee(a8)},providedIn:"root"})}return n})(),a8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Qg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Qg||{});function aO(n,e){n.events.pipe(Ca(t=>t instanceof xa||t instanceof qg||t instanceof ab||t instanceof ff),Ge(t=>t instanceof xa||t instanceof ff?Qg.COMPLETE:t instanceof qg&&(0===t.code||1===t.code)?Qg.REDIRECTING:Qg.FAILED),Ca(t=>t!==Qg.REDIRECTING),cf(1)).subscribe(()=>{e()})}function c8(n){throw n}function l8(n,e,t){return e.parse("/")}const u8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},f8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ee(VI),this.isNgZoneEnabled=!1,this._events=new kr,this.options=ee(pb,{optional:!0})||{},this.pendingTasks=ee(HI),this.errorHandler=this.options.errorHandler||c8,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||l8,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ee(o8),this.routeReuseStrategy=ee(r8),this.titleStrategy=ee(oO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ee(yf,{optional:!0})?.flat()??[],this.navigationTransitions=ee(gb),this.urlSerializer=ee(Vg),this.location=ee(Px),this.componentInputBindingEnabled=!!ee(lb,{optional:!0}),this.eventsSubscription=new Dt,this.isNgZoneEnabled=ee(pt)instanceof pt&&pt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new uf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BP(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(cO(r)&&this._events.next(r));if(r instanceof ob)sO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof ff)this.rawUrlTree=i.rawUrl;else if(r instanceof LP){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof dE)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof qg)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof hE){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sO(i.source)};this.scheduleNavigation(s,Gg,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof ab&&this.restoreHistory(i,!0),r instanceof xa&&(this.navigated=!0),cO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Gg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(CE),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let h,d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}null!==d&&(d=this.removeEmptyProps(d));try{h=MP(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),h=this.currentUrlTree.root}return IP(h,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Jc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Gg,null,r)}navigate(t,r={skipLocationChange:!1}){return function d8(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new W(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...u8}:!1===r?{...f8}:r,Jc(t))return bP(this.currentUrlTree,t,i);const s=this.parseUrl(t);return bP(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((h,g)=>{a=h,c=g});const d=this.pendingTasks.add();return aO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cO(n){return!(n instanceof dE||n instanceof hE)}class lO{}let p8=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ca(t=>t instanceof xa),jg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=J_(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Vt(i).pipe(Lo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ve(null);const s=i.pipe(un(o=>null===o?ve(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?Vt([s,this.loader.loadComponent(r)]).pipe(Lo()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(ne(xi),ne(UI),ne(Ir),ne(lO),ne(DE))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const AE=new oe("");let uO=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ob?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ff&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof kP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new kP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function TA(){throw new Error("invalid")}()};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function wo(n,e){return{\u0275kind:n,\u0275providers:e}}function dO(){const n=ee(dr);return e=>{const t=n.get(rf);if(e!==t.components[0])return;const r=n.get(xi),i=n.get(hO);1===n.get(ME)&&r.initialNavigation(),n.get(gO,null,Ne.Optional)?.setUpPreloading(),n.get(AE,null,Ne.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const hO=new oe("",{factory:()=>new kr}),ME=new oe("",{providedIn:"root",factory:()=>1}),gO=new oe("");function b8(n){return wo(0,[{provide:gO,useExisting:p8},{provide:lO,useExisting:n}])}const pO=new oe("ROUTER_FORROOT_GUARD"),C8=[Px,{provide:Vg,useClass:aE},xi,Wg,{provide:hf,useFactory:function fO(n){return n.routerState.root},deps:[xi]},DE,[]];function _8(){return new JI("Router",xi)}let mO=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[C8,[],{provide:yf,multi:!0,useValue:t},{provide:pO,useFactory:S8,deps:[[xi,new lu,new ia]]},{provide:pb,useValue:r||{}},r?.useHash?{provide:qc,useClass:SH}:{provide:qc,useClass:ST},{provide:AE,useFactory:()=>{const n=ee(WU),e=ee(pt),t=ee(pb),r=ee(gb),i=ee(Vg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new uO(i,r,n,e,t)}},r?.preloadingStrategy?b8(r.preloadingStrategy).\u0275providers:[],{provide:JI,multi:!0,useFactory:_8},r?.initialNavigation?A8(r):[],r?.bindToComponentInputs?wo(8,[UP,{provide:lb,useExisting:UP}]).\u0275providers:[],[{provide:yO,useFactory:dO},{provide:bx,multi:!0,useExisting:yO}]]}}static forChild(t){return{ngModule:n,providers:[{provide:yf,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ne(pO,8))};static#t=this.\u0275mod=qr({type:n});static#n=this.\u0275inj=ls({})}return n})();function S8(n){return"guarded"}function A8(n){return["disabled"===n.initialNavigation?wo(3,[{provide:fx,multi:!0,useFactory:()=>{const e=ee(xi);return()=>{e.setUpLocationChangeListener()}}},{provide:ME,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?wo(2,[{provide:ME,useValue:0},{provide:fx,multi:!0,deps:[dr],useFactory:e=>{const t=e.get(EH,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(xi),s=e.get(hO);aO(i,()=>{r(!0)}),e.get(gb).afterPreactivation=()=>(r(!0),s.closed?ve(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const yO=new oe("");function vO(n,e,t,r,i,s,o){try{var a=n[s](o),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function Se(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(c){vO(s,r,i,o,a,"next",c)}function a(c){vO(s,r,i,o,a,"throw",c)}o(void 0)})}}var vf,bf,wf,bO,wO;!function(n){const e="\u8282\u70b9\u64cd\u4f5c";n.ADD_NODE={id:"xflow:add-node",label:"\u6dfb\u52a0\u8282\u70b9",category:e},n.DEL_NODE={id:"xflow:del-node",label:"\u5220\u9664\u8282\u70b9",category:e},n.UPDATE_NODE_PORT={id:"xflow:update-node-port",label:"\u5220\u9664\u8fde\u63a5\u6869",category:e},n.UPDATE_NODE={id:"xflow:update-node",label:"\u66f4\u65b0\u8282\u70b9",category:e},n.HIGHLIGHT_NODE={id:"xflow:highlight-node",label:"\u9ad8\u4eae\u8282\u70b9",category:e},n.SELECT_NODE={id:"xflow:select-node",label:"\u9009\u4e2d\u8282\u70b9",category:e},n.MOVE_NODE={id:"xflow:move-node",label:"Move Node",category:e},n.CENTER_NODE={id:"xflow:center-node",label:"\u5c45\u4e2d\u8282\u70b9",category:e},n.FRONT_NODE={id:"xflow:front-node",label:"\u524d\u7f6e\u8282\u70b9",category:e},n.BACK_NODE={id:"xflow:back-node",label:"\u540e\u7f6e\u8282\u70b9",category:e}}(vf||(vf={})),function(n){const e="\u8fb9\u64cd\u4f5c";n.ADD_EDGE={id:"xflow:add-edge",label:"\u6dfb\u52a0\u8fb9",category:e},n.DEL_EDGE={id:"xflow:del-edge",label:"\u5220\u9664\u8fb9",category:e},n.UPDATE_EDGE={id:"xflow:update-edge",label:"\u66f4\u65b0\u8fb9",category:e},n.HIGHLIGHT_EDGE={id:"xflow:highlight-edge",label:"\u9ad8\u4eae\u8fb9",category:e},n.FRONT_EDGE={id:"xflow:front-edge",label:"\u524d\u7f6e\u53d8",category:e},n.BACK_EDGE={id:"xflow:back-edge",label:"\u540e\u7f6e\u8fb9",category:e}}(bf||(bf={})),function(n){const e="\u753b\u5e03\u64cd\u4f5c";n.LOAD_META={id:"xflow:load-meta",label:"\u83b7\u53d6\u5143\u6570\u636e",category:e},n.LOAD_DATA={id:"xflow:load-data",label:"\u83b7\u53d6\u56fe\u6570\u636e",category:e},n.SAVE_GRAPH_DATA={id:"xflow:save-graph-data",label:"\u4fdd\u5b58",category:e},n.GRAPH_LAYOUT={id:"xflow:layout",label:"\u8ba1\u7b97\u5e03\u5c40",category:e},n.GRAPH_RENDER={id:"xflow:graph-render",label:"\u6e32\u67d3\u753b\u5e03",category:e},n.UNDO_CMD={id:"xflow:undo-cmd",label:"\u64a4\u9500",category:e},n.REDO_CMD={id:"xflow:redo-cmd",label:"\u91cd\u505a",category:e},n.GRAPH_INSTANCE_COMMAND={id:"xflow:graph-instacne-cmd",label:"Graph\u901a\u7528Command",category:e},n.GRAPH_ZOOM={id:"xflow:graph-zoom",label:"\u7f29\u653e\u753b\u5e03",category:e},n.GRAPH_FULLSCREEN={id:"xflow:graph-fullscreen",label:"\u5168\u5c4f",category:e},n.GRAPH_RESIZE={id:"xflow:graph-resize",label:"\u8c03\u6574\u7a97\u53e3\u5927\u5c0f",category:e},n.GRAPH_COPY={id:"xflow:graph-copy-selection",label:"\u590d\u5236",category:e},n.GRAPH_PASTE={id:"xflow:graph-paste-selection",label:"\u7c98\u8d34",category:e},n.GRAPH_TOGGLE_MULTI_SELECT={id:"xflow:graph-toggle-multi-select",label:"\u542f\u7528\u6846\u9009",category:e},n.GRAPH_ADD_TOOL={id:"xflow:add-tool",label:"\u6dfb\u52a0\u5de5\u5177",category:e},n.GRAPH_DEL_TOOL={id:"xflow:del-tool",label:"\u5220\u9664\u5de5\u5177",category:e},n.GRAPH_HISTORY_UNDO={id:"xflow:history-undo",label:"history undo",category:e},n.GRAPH_HISTORY_REDO={id:"xflow:history-redo",label:"history redo",category:e},n.GRAPH_HISTORY_RESET={id:"xflow:history-reset",label:"history reset",category:e},n.GRAPH_HISTORY_TOGGLE={id:"xflow:history-toggle",label:"history toggle",category:e}}(wf||(wf={})),(bO||(bO={})).UPDATE_MODEL={id:"xflow:update-model",label:"\u8bbe\u7f6e\u72b6\u6001\u503c",category:"\u72b6\u6001\u64cd\u4f5c"},function(n){const e="\u7fa4\u7ec4\u64cd\u4f5c";n.INIT_GROUP={id:"xflow:init-group",label:"\u521d\u59cb\u5316\u7fa4\u7ec4",category:e},n.ADD_GROUP={id:"xflow:add-group",label:"\u65b0\u5efa\u7fa4\u7ec4",category:e},n.DEL_GROUP={id:"xflow:del-group",label:"\u89e3\u6563\u7fa4\u7ec4",category:e},n.COLLAPSE_GROUP={id:"xflow:collapse-group",label:"\u6298\u53e0\u7fa4\u7ec4",category:e}}(wO||(wO={}));class I8{constructor(){this.CONFIG_TYPE="GraphConfig",this.nodeRender=new Map,this.edgeRender=new Map,this.events=[],this.setX6Config=e=>{const t=this.getDefaultGraphOptions();this.x6Options={...t,...e}},this.getDefaultGraphOptions=()=>({rotating:!1,resizing:!1,connecting:{snap:!0,dangling:!1,highlight:!1,connectionPoint:"rect",router:{name:"er"},connector:{name:"rounded",args:{radius:15}}},background:{},grid:{visible:!0},selecting:{strict:!0,enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},snapline:{enabled:!1},history:{enabled:!1},clipboard:{enabled:!0,useLocalStorage:!0},scroller:{enabled:!1},mousewheel:{enabled:!0,minScale:.01,maxScale:1.5,factor:1.1,modifiers:["ctrl","meta"]},panning:{enabled:!0},scaling:{min:.01,max:1.5},keyboard:{enabled:!0},interacting:{nodeMovable:!0,edgeLabelMovable:!1},async:!1}),this.graphId=function T8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=16*Math.random()|0;return("x"==n?e:3&e|8).toString(16)})}()}setAppContainer(e){this.appContainer=e}setRootContainer(e){this.rootContainer=e}setGraphContainer(e){this.graphContainer=e}}var Cf=Be(990);let P8=(()=>{class n{constructor(){this.token=wf.GRAPH_RENDER.id}execute(){var t=this;return Se(function*(){const{args:r,hooks:i}=t.ctx.getArgs();yield t.ctx.getHooks().graphRender.call(r,function(){var o=Se(function*(a){const c=yield t.ctx.getX6Graph(),{graphData:d,isNodeEqual:h,isEdgeEqual:g}=a;return yield t.doLoadGraph(c,d,h,g),{}});return function(a){return o.apply(this,arguments)}}(),i)})()}doLoadGraph(t,r,i,s){var o=this;return Se(function*(){const a=o.ctx.getCommands(),{addNodeConfigs:c,addEdgeConfigs:u,updateNodes:g,updateEdges:m}=o.graphDataDiff(t,r,i,s);for(const y of g){const v=y?.getData();yield a.executeCommand(m0.UPDATE_NODE.id,{nodeConfig:v})}for(const y of m){const v=y?.getData();yield a.executeCommand(y0.UPDATE_EDGE.id,{edgeConfig:v})}for(const y of c)yield a.executeCommand(m0.ADD_NODE.id,{nodeConfig:y,options:{isRenderGraph:!0}},{name:"remove servcie",handler:function(){var v=Se(function*(w){delete w.createNodeService});return function(_){return v.apply(this,arguments)}}()});console.log("addEdgeConfigs>>>",u);for(const y of u)yield a.executeCommand(y0.ADD_EDGE.id,{edgeConfig:y,options:{isRenderGraph:!0}},{name:"remove servcie",handler:function(){var v=Se(function*(w){delete w.createEdgeService});return function(_){return v.apply(this,arguments)}}()})})()}graphDataDiff(t,r,i,s){const{nodes:o,edges:a}=r,c=[];for(const C of o)t.getCellById(C?.id)||c.push(C);const u=[],d=[],h=[],g=t.getNodes();for(const C of g){const E=o.find(A=>A?.id===C?.id);if(E){let A=!0;s?A=i(C?.data,E):C?.data&&E&&(A=mb.isNodeEqual(C?.data,E)),A||C.setData(E,{deep:!1}),A?u.push(C):d.push(C)}else h.push(C)}const m=[];console.log("edgeConfigs>>>",a);for(const C of a)t.getCellById(C?.id)||m.push(C);const y=[],v=[],w=[],_=t.getEdges();for(const C of _){const E=a.find(A=>A?.id===C?.id);if(E){let A=!0;s?A=s(C?.data,E):C?.data&&E&&(A=mb.isEdgeEqual(C?.data,E)),A||C.setData(E,{deep:!1}),A?y.push(C):v.push(C)}else w.push(C)}return{addNodeConfigs:c,addEdgeConfigs:m,retainNodes:u,retainEdges:y,removeNodes:h,removeEdges:w,updateNodes:d,updateEdges:v}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var IE,mb,n;(n=IE||(IE={})).command=wf.GRAPH_RENDER,n.hookKey="graphRender",function(n){n.isNodeEqual=function e(r,i){return(0,Cf.isEqual)(r,i)},n.isEdgeEqual=function t(r,i){return(0,Cf.isEqual)(r,i)}}(mb||(mb={}));let O8=(()=>{class n{constructor(){this.token=wf.LOAD_DATA.id}execute(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const N8=[IE];let R8=(()=>{class n{constructor(){var t=this;this.token=vf.ADD_NODE.id,this.execute=Se(function*(){const{args:r,hooks:i}=t.ctx.getArgs();yield t.ctx.getHooks().addNode.call(r,function(){var o=Se(function*(a){const{createNodeService:c,cellFactory:u,options:h}=a,g=yield t.ctx.getX6Graph();let m=a.nodeConfig;if(c){const _=yield c(a);if("boolean"==typeof _)return{err:"createNodeService rejected"};m=_}const y=yield t.processNodeConfig(m);let v;const w={...h,isCommand:!0};if(u){const _=yield u(y,t);v=g.addNode(_,w)}else v=g.addNode(y,w);return{nodeConfig:y,nodeCell:v}});return function(a){return o.apply(this,arguments)}}(),i)}),this.processNodeConfig=function(){var r=Se(function*(i){return i.data={...i},i});return function(i){return r.apply(this,arguments)}}()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var TE;!function(n){n.command=vf.ADD_NODE,n.hookKey="addNode"}(TE||(TE={})),Be(825);class Ea{get disposed(){return!0===this._disposed}dispose(){this._disposed=!0}}!function(n){n.dispose=function e(){return(t,r,i)=>{const s=i.value,o=t.__proto__;i.value=function(...a){this.disposed||(s.call(this,...a),o.dispose.call(this))}}}}(Ea||(Ea={}));class xO{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(e=>{e.dispose()}),this.items.clear())}contains(e){return this.items.has(e)}add(e){this.items.add(e)}remove(e){this.items.delete(e)}clear(){this.items.clear()}}!function(n){n.from=function e(t){const r=new n;return t.forEach(i=>{r.add(i)}),r}}(xO||(xO={}));const Ft=function L8(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},EO="object"==typeof global&&global&&global.Object===Object&&global;var F8="object"==typeof self&&self&&self.Object===Object&&self;const Qi=EO||F8||Function("return this")(),PE=function(){return Qi.Date.now()};var $8=/\s/;var U8=/^\s+/;const G8=function z8(n){return n&&n.slice(0,function V8(n){for(var e=n.length;e--&&$8.test(n.charAt(e)););return e}(n)+1).replace(U8,"")},Ei=Qi.Symbol;var DO=Object.prototype,W8=DO.hasOwnProperty,Y8=DO.toString,ep=Ei?Ei.toStringTag:void 0;var K8=Object.prototype.toString;var SO=Ei?Ei.toStringTag:void 0;const Da=function r6(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":SO&&SO in Object(n)?function Z8(n){var e=W8.call(n,ep),t=n[ep];try{n[ep]=void 0;var r=!0}catch{}var i=Y8.call(n);return r&&(e?n[ep]=t:delete n[ep]),i}(n):function Q8(n){return K8.call(n)}(n)},es=function i6(n){return null!=n&&"object"==typeof n},Ns=function o6(n){return"symbol"==typeof n||es(n)&&"[object Symbol]"==Da(n)};var a6=/^[-+]0x[0-9a-f]+$/i,c6=/^0b[01]+$/i,l6=/^0o[0-7]+$/i,u6=parseInt;const tp=function f6(n){if("number"==typeof n)return n;if(Ns(n))return NaN;if(Ft(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=Ft(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=G8(n);var t=c6.test(n);return t||l6.test(n)?u6(n.slice(2),t?2:8):a6.test(n)?NaN:+n};var h6=Math.max,g6=Math.min;const b6=function v6(n,e,t){var r=!0,i=!0;if("function"!=typeof n)throw new TypeError("Expected a function");return Ft(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),function p6(n,e,t){var r,i,s,o,a,c,u=0,d=!1,h=!1,g=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function m(L){var V=r,G=i;return r=i=void 0,u=L,o=n.apply(G,V)}function w(L){var V=L-c;return void 0===c||V>=e||V<0||h&&L-u>=s}function _(){var L=PE();if(w(L))return C(L);a=setTimeout(_,function v(L){var q=e-(L-c);return h?g6(q,s-(L-u)):q}(L))}function C(L){return a=void 0,g&&r?m(L):(r=i=void 0,o)}function P(){var L=PE(),V=w(L);if(r=arguments,i=this,c=L,V){if(void 0===a)return function y(L){return u=L,a=setTimeout(_,e),d?m(L):o}(c);if(h)return clearTimeout(a),a=setTimeout(_,e),m(c)}return void 0===a&&(a=setTimeout(_,e)),o}return e=tp(e)||0,Ft(t)&&(d=!!t.leading,s=(h="maxWait"in t)?h6(tp(t.maxWait)||0,e):s,g="trailing"in t?!!t.trailing:g),P.cancel=function E(){void 0!==a&&clearTimeout(a),u=0,r=c=i=a=void 0},P.flush=function A(){return void 0===a?o:C(PE())},P}(n,e,{leading:r,maxWait:e,trailing:i})};function MO(n,e,t){if(t)switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2]);case 4:return n.call(e,t[0],t[1],t[2],t[3]);case 5:return n.call(e,t[0],t[1],t[2],t[3],t[4]);case 6:return n.call(e,t[0],t[1],t[2],t[3],t[4],t[5]);default:return n.apply(e,t)}return n.call(e)}function _e(n,e,...t){return MO(n,e,t)}function IO(n){return null!=n&&(n instanceof Promise||function w6(n){return"object"==typeof n&&n.then&&"function"==typeof n.then}(n))}function OE(...n){const e=[];if(n.forEach(r=>{Array.isArray(r)?e.push(...r):e.push(r)}),e.some(r=>IO(r))){const r=e.map(i=>IO(i)?i:Promise.resolve(!1!==i));return Promise.all(r).then(i=>i.reduce((s,o)=>!1!==o&&s,!0))}return e.every(r=>!1!==r)}function NE(n,e){const t=[];for(let r=0;r<n.length;r+=2){const a=MO(n[r],n[r+1],Array.isArray(e)?e:[e]);t.push(a)}return OE(t)}class C6{constructor(){this.listeners={}}on(e,t,r){return null==t||(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t,r)),this}once(e,t,r){const i=(...s)=>(this.off(e,i),NE([t,r],s));return this.on(e,i,this)}off(e,t,r){if(!(e||t||r))return this.listeners={},this;const i=this.listeners;return(e?[e]:Object.keys(i)).forEach(o=>{const a=i[o];if(a){if(!t&&!r)return void delete i[o];for(let c=a.length-2;c>=0;c-=2)t&&a[c]!==t||r&&a[c+1]!==r||a.splice(c,2)}}),this}trigger(e,...t){let r=!0;if("*"!==e){const s=this.listeners[e];null!=s&&(r=NE([...s],t))}const i=this.listeners["*"];return null!=i?OE([r,NE([...i],[e,...t])]):r}emit(e,...t){return this.trigger(e,...t)}}var x6=Object.prototype.hasOwnProperty;const D6=function E6(n,e){return null!=n&&x6.call(n,e)},Xn=Array.isArray;var A6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M6=/^\w*$/;const RE=function I6(n,e){if(Xn(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!Ns(n))||M6.test(n)||!A6.test(n)||null!=e&&n in Object(e)},LE=function R6(n){if(!Ft(n))return!1;var e=Da(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},kE=Qi["__core-js_shared__"];var TO=function(){var n=/[^.]+$/.exec(kE&&kE.keys&&kE.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();var B6=Function.prototype.toString;const Xc=function $6(n){if(null!=n){try{return B6.call(n)}catch{}try{return n+""}catch{}}return""};var H6=/^\[object .+?Constructor\]$/,W6=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Z6=function Y6(n){return!(!Ft(n)||function k6(n){return!!TO&&TO in n}(n))&&(LE(n)?W6:H6).test(Xc(n))},Kc=function K6(n,e){var t=function J6(n,e){return n?.[e]}(n,e);return Z6(t)?t:void 0},np=Kc(Object,"create");var o4=Object.prototype.hasOwnProperty;var u4=Object.prototype.hasOwnProperty;function _f(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}_f.prototype.clear=function e4(){this.__data__=np?np(null):{},this.size=0},_f.prototype.delete=function n4(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},_f.prototype.get=function a4(n){var e=this.__data__;if(np){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return o4.call(e,n)?e[n]:void 0},_f.prototype.has=function f4(n){var e=this.__data__;return np?void 0!==e[n]:u4.call(e,n)},_f.prototype.set=function g4(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=np&&void 0===e?"__lodash_hash_undefined__":e,this};const PO=_f,xf=function v4(n,e){return n===e||n!=n&&e!=e},yb=function b4(n,e){for(var t=n.length;t--;)if(xf(n[t][0],e))return t;return-1};var C4=Array.prototype.splice;function Ef(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ef.prototype.clear=function m4(){this.__data__=[],this.size=0},Ef.prototype.delete=function _4(n){var e=this.__data__,t=yb(e,n);return!(t<0||(t==e.length-1?e.pop():C4.call(e,t,1),--this.size,0))},Ef.prototype.get=function E4(n){var e=this.__data__,t=yb(e,n);return t<0?void 0:e[t][1]},Ef.prototype.has=function S4(n){return yb(this.__data__,n)>-1},Ef.prototype.set=function M4(n,e){var t=this.__data__,r=yb(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const vb=Ef,rp=Kc(Qi,"Map"),bb=function L4(n,e){var t=n.__data__;return function N4(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Df(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Df.prototype.clear=function P4(){this.size=0,this.__data__={hash:new PO,map:new(rp||vb),string:new PO}},Df.prototype.delete=function k4(n){var e=bb(this,n).delete(n);return this.size-=e?1:0,e},Df.prototype.get=function j4(n){return bb(this,n).get(n)},Df.prototype.has=function $4(n){return bb(this,n).has(n)},Df.prototype.set=function H4(n,e){var t=bb(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const wb=Df;function FE(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(FE.Cache||wb),t}FE.Cache=wb;const G4=FE;var Z4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J4=/\\(\\)?/g,X4=function W4(n){var e=G4(n,function(r){return 500===t.size&&t.clear(),r}),t=e.cache;return e}(function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(Z4,function(t,r,i,s){e.push(i?s.replace(J4,"$1"):r||t)}),e});const K4=X4,ip=function Q4(n,e){for(var t=-1,r=null==n?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i};var OO=Ei?Ei.prototype:void 0,NO=OO?OO.toString:void 0;const t5=function RO(n){if("string"==typeof n)return n;if(Xn(n))return ip(n,RO)+"";if(Ns(n))return NO?NO.call(n):"";var e=n+"";return"0"==e&&1/n==-1/0?"-0":e},Sf=function n5(n){return null==n?"":t5(n)},Cb=function r5(n,e){return Xn(n)?n:RE(n,e)?[n]:K4(Sf(n))},LO=function s5(n){return es(n)&&"[object Arguments]"==Da(n)};var kO=Object.prototype,o5=kO.hasOwnProperty,a5=kO.propertyIsEnumerable,c5=LO(function(){return arguments}())?LO:function(n){return es(n)&&o5.call(n,"callee")&&!a5.call(n,"callee")};const Af=c5;var u5=/^(?:0|[1-9]\d*)$/;const _b=function f5(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&u5.test(n))&&n>-1&&n%1==0&&n<e},jE=function h5(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991},sp=function p5(n){if("string"==typeof n||Ns(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e},FO=function m5(n,e,t){for(var r=-1,i=(e=Cb(e,n)).length,s=!1;++r<i;){var o=sp(e[r]);if(!(s=null!=n&&t(n,o)))break;n=n[o]}return s||++r!=i?s:!!(i=null==n?0:n.length)&&jE(i)&&_b(o,i)&&(Xn(n)||Af(n))},xb=function y5(n,e){return null!=n&&FO(n,e,D6)},Eb=function v5(n,e){for(var t=0,r=(e=Cb(e,n)).length;null!=n&&t<r;)n=n[sp(e[t++])];return t&&t==r?n:void 0};var b5=function(){try{var n=Kc(Object,"defineProperty");return n({},"",{}),n}catch{}}();const Db=b5,Sb=function w5(n,e,t){"__proto__"==e&&Db?Db(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var _5=Object.prototype.hasOwnProperty;const BE=function x5(n,e,t){var r=n[e];(!_5.call(n,e)||!xf(r,t)||void 0===t&&!(e in n))&&Sb(n,e,t)},D5=function E5(n,e,t,r){if(!Ft(n))return n;for(var i=-1,s=(e=Cb(e,n)).length,o=s-1,a=n;null!=a&&++i<s;){var c=sp(e[i]),u=t;if("__proto__"===c||"constructor"===c||"prototype"===c)return n;if(i!=o){var d=a[c];void 0===(u=r?r(d,c,a):void 0)&&(u=Ft(d)?d:_b(e[i+1])?[]:{})}BE(a,c,u),a=a[c]}return n},I5=function M5(n,e){return null!=n&&e in Object(n)},jO=function T5(n,e){return null!=n&&FO(n,e,I5)},O5=function P5(n,e){return function S5(n,e,t){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=Eb(n,o);t(a,o)&&D5(s,Cb(o,n),a)}return s}(n,e,function(t,r){return jO(n,r)})},$E=function N5(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n};var BO=Ei?Ei.isConcatSpreadable:void 0;const L5=function R5(n){return Xn(n)||Af(n)||!!(BO&&n&&n[BO])},Ab=function $O(n,e,t,r,i){var s=-1,o=n.length;for(t||(t=L5),i||(i=[]);++s<o;){var a=n[s];e>0&&t(a)?e>1?$O(a,e-1,t,r,i):$E(i,a):r||(i[i.length]=a)}return i},F5=function k5(n){return null!=n&&n.length?Ab(n,1):[]},VO=function j5(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)};var HO=Math.max;const UO=function B5(n,e,t){return e=HO(void 0===e?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=HO(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),VO(n,this,a)}},V5=function $5(n){return function(){return n}},Mf=function H5(n){return n};var U5=Db?function(n,e){return Db(n,"toString",{configurable:!0,enumerable:!1,value:V5(e),writable:!0})}:Mf,W5=Date.now,Z5=function Y5(n){var e=0,t=0;return function(){var r=W5(),i=16-(r-t);if(t=r,i>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}(U5);const zO=Z5;!function J5(n){zO(UO(n,void 0,F5),n+"")}(function(n,e){return null==n?{}:O5(n,e)});function If(n){var e=this.__data__=new vb(n);this.size=e.size}If.prototype.clear=function K5(){this.__data__=new vb,this.size=0},If.prototype.delete=function eq(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},If.prototype.get=function nq(n){return this.__data__.get(n)},If.prototype.has=function iq(n){return this.__data__.has(n)},If.prototype.set=function aq(n,e){var t=this.__data__;if(t instanceof vb){var r=t.__data__;if(!rp||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new wb(r)}return t.set(n,e),this.size=t.size,this};const Tf=If,VE=function lq(n,e,t){(void 0!==t&&!xf(n[e],t)||void 0===t&&!(e in n))&&Sb(n,e,t)};var fq=function uq(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var c=o[n?a:++i];if(!1===t(s[c],c,s))break}return e}}();const GO=fq;var qO="object"==typeof exports&&exports&&!exports.nodeType&&exports,WO=qO&&"object"==typeof module&&module&&!module.nodeType&&module,YO=WO&&WO.exports===qO?Qi.Buffer:void 0,ZO=YO?YO.allocUnsafe:void 0;const JO=function hq(n,e){if(e)return n.slice();var t=n.length,r=ZO?ZO(t):new n.constructor(t);return n.copy(r),r},Mb=Qi.Uint8Array,HE=function pq(n){var e=new n.constructor(n.byteLength);return new Mb(e).set(new Mb(n)),e},XO=function mq(n,e){var t=e?HE(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)},KO=function yq(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e};var QO=Object.create,vq=function(){function n(){}return function(e){if(!Ft(e))return{};if(QO)return QO(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const bq=vq,eN=function wq(n,e){return function(t){return n(e(t))}},UE=eN(Object.getPrototypeOf,Object);var _q=Object.prototype;const Ib=function xq(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||_q)},tN=function Eq(n){return"function"!=typeof n.constructor||Ib(n)?{}:bq(UE(n))},Qc=function Dq(n){return null!=n&&jE(n.length)&&!LE(n)},Tb=function Sq(n){return es(n)&&Qc(n)};var nN="object"==typeof exports&&exports&&!exports.nodeType&&exports,rN=nN&&"object"==typeof module&&module&&!module.nodeType&&module,iN=rN&&rN.exports===nN?Qi.Buffer:void 0;const Pf=(iN?iN.isBuffer:void 0)||function Aq(){return!1};var sN=Function.prototype.toString,Lq=Object.prototype.hasOwnProperty,kq=sN.call(Object);const Rs=function Fq(n){if(!es(n)||"[object Object]"!=Da(n))return!1;var e=UE(n);if(null===e)return!0;var t=Lq.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&sN.call(t)==kq};var xt={};xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Arguments]"]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object Boolean]"]=xt["[object DataView]"]=xt["[object Date]"]=xt["[object Error]"]=xt["[object Function]"]=xt["[object Map]"]=xt["[object Number]"]=xt["[object Object]"]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object WeakMap]"]=!1;const op=function uW(n){return function(e){return n(e)}};var oN="object"==typeof exports&&exports&&!exports.nodeType&&exports,ap=oN&&"object"==typeof module&&module&&!module.nodeType&&module,zE=ap&&ap.exports===oN&&EO.process;const Of=function(){try{return ap&&ap.require&&ap.require("util").types||zE&&zE.binding&&zE.binding("util")}catch{}}();var aN=Of&&Of.isTypedArray;const Pb=aN?op(aN):function cW(n){return es(n)&&jE(n.length)&&!!xt[Da(n)]},GE=function gW(n,e){if(("constructor"!==e||"function"!=typeof n[e])&&"__proto__"!=e)return n[e]},cp=function pW(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=r?r(t[a],n[a],a,t,n):void 0;void 0===c&&(c=n[a]),i?Sb(t,a,c):BE(t,a,c)}return t};var bW=Object.prototype.hasOwnProperty;const cN=function wW(n,e){var t=Xn(n),r=!t&&Af(n),i=!t&&!r&&Pf(n),s=!t&&!r&&!i&&Pb(n),o=t||r||i||s,a=o?function mW(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],c=a.length;for(var u in n)(e||bW.call(n,u))&&(!o||!("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_b(u,c)))&&a.push(u);return a};var EW=Object.prototype.hasOwnProperty;const SW=function DW(n){if(!Ft(n))return function CW(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=Ib(n),t=[];for(var r in n)"constructor"==r&&(e||!EW.call(n,r))||t.push(r);return t},Nf=function AW(n){return Qc(n)?cN(n,!0):SW(n)},PW=function TW(n,e,t,r,i,s,o){var a=GE(n,t),c=GE(e,t),u=o.get(c);if(u)VE(n,t,u);else{var d=s?s(a,c,t+"",n,e,o):void 0,h=void 0===d;if(h){var g=Xn(c),m=!g&&Pf(c),y=!g&&!m&&Pb(c);d=c,g||m||y?Xn(a)?d=a:Tb(a)?d=KO(a):m?(h=!1,d=JO(c,!0)):y?(h=!1,d=XO(c,!0)):d=[]:Rs(c)||Af(c)?(d=a,Af(a)?d=function MW(n){return cp(n,Nf(n))}(a):(!Ft(a)||LE(a))&&(d=tN(c))):h=!1}h&&(o.set(c,d),i(d,c,r,s,o),o.delete(c)),VE(n,t,d)}},qE=function lN(n,e,t,r,i){n!==e&&GO(e,function(s,o){if(i||(i=new Tf),Ft(s))PW(n,e,o,t,lN,r,i);else{var a=r?r(GE(n,o),s,o+"",n,e,i):void 0;void 0===a&&(a=s),VE(n,o,a)}},Nf)},Rf=function OW(n,e){return zO(UO(n,e,Mf),n+"")},Ob=function NW(n,e,t){if(!Ft(t))return!1;var r=typeof e;return!!("number"==r?Qc(t)&&_b(e,t.length):"string"==r&&e in t)&&xf(t[e],n)},uN=function RW(n){return Rf(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&"function"==typeof s?(i--,s):void 0,o&&Ob(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})};var LW=uN(function(n,e,t){qE(n,e,t)});const cn=LW;function Nb(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new wb;++e<t;)this.add(n[e])}Nb.prototype.add=Nb.prototype.push=function FW(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Nb.prototype.has=function BW(n){return this.__data__.has(n)};const WE=Nb,HW=function VW(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1},YE=function UW(n,e){return n.has(e)},fN=function qW(n,e,t,r,i,s){var o=1&t,a=n.length,c=e.length;if(a!=c&&!(o&&c>a))return!1;var u=s.get(n),d=s.get(e);if(u&&d)return u==e&&d==n;var h=-1,g=!0,m=2&t?new WE:void 0;for(s.set(n,e),s.set(e,n);++h<a;){var y=n[h],v=e[h];if(r)var w=o?r(v,y,h,e,n,s):r(y,v,h,n,e,s);if(void 0!==w){if(w)continue;g=!1;break}if(m){if(!HW(e,function(_,C){if(!YE(m,C)&&(y===_||i(y,_,t,r,s)))return m.push(C)})){g=!1;break}}else if(y!==v&&!i(y,v,t,r,s)){g=!1;break}}return s.delete(n),s.delete(e),g},YW=function WW(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t},ZE=function ZW(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t};var dN=Ei?Ei.prototype:void 0,JE=dN?dN.valueOf:void 0;const hN=function f9(n,e,t){var r=e(n);return Xn(n)?r:$E(r,t(n))},gN=function g9(){return[]};var m9=Object.prototype.propertyIsEnumerable,pN=Object.getOwnPropertySymbols,y9=pN?function(n){return null==n?[]:(n=Object(n),function d9(n,e){for(var t=-1,r=null==n?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}(pN(n),function(e){return m9.call(n,e)}))}:gN;const XE=y9,b9=eN(Object.keys,Object);var C9=Object.prototype.hasOwnProperty;const mN=function _9(n){if(!Ib(n))return b9(n);var e=[];for(var t in Object(n))C9.call(n,t)&&"constructor"!=t&&e.push(t);return e},lp=function x9(n){return Qc(n)?cN(n):mN(n)},KE=function E9(n){return hN(n,lp,XE)};var A9=Object.prototype.hasOwnProperty;const QE=Kc(Qi,"DataView"),eD=Kc(Qi,"Promise"),Lf=Kc(Qi,"Set"),tD=Kc(Qi,"WeakMap");var yN="[object Map]",vN="[object Promise]",bN="[object Set]",wN="[object WeakMap]",CN="[object DataView]",L9=Xc(QE),k9=Xc(rp),F9=Xc(eD),j9=Xc(Lf),B9=Xc(tD),el=Da;(QE&&el(new QE(new ArrayBuffer(1)))!=CN||rp&&el(new rp)!=yN||eD&&el(eD.resolve())!=vN||Lf&&el(new Lf)!=bN||tD&&el(new tD)!=wN)&&(el=function(n){var e=Da(n),t="[object Object]"==e?n.constructor:void 0,r=t?Xc(t):"";if(r)switch(r){case L9:return CN;case k9:return yN;case F9:return vN;case j9:return bN;case B9:return wN}return e});const kf=el;var _N="[object Arguments]",xN="[object Array]",Rb="[object Object]",EN=Object.prototype.hasOwnProperty;const U9=function H9(n,e,t,r,i,s){var o=Xn(n),a=Xn(e),c=o?xN:kf(n),u=a?xN:kf(e),d=(c=c==_N?Rb:c)==Rb,h=(u=u==_N?Rb:u)==Rb,g=c==u;if(g&&Pf(n)){if(!Pf(e))return!1;o=!0,d=!1}if(g&&!d)return s||(s=new Tf),o||Pb(n)?fN(n,e,t,r,i,s):function l9(n,e,t,r,i,s,o){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!s(new Mb(n),new Mb(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xf(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var a=YW;case"[object Set]":if(a||(a=ZE),n.size!=e.size&&!(1&r))return!1;var u=o.get(n);if(u)return u==e;r|=2,o.set(n,e);var d=fN(a(n),a(e),r,i,s,o);return o.delete(n),d;case"[object Symbol]":if(JE)return JE.call(n)==JE.call(e)}return!1}(n,e,c,t,r,i,s);if(!(1&t)){var m=d&&EN.call(n,"__wrapped__"),y=h&&EN.call(e,"__wrapped__");if(m||y){var v=m?n.value():n,w=y?e.value():e;return s||(s=new Tf),i(v,w,t,r,s)}}return!!g&&(s||(s=new Tf),function M9(n,e,t,r,i,s){var o=1&t,a=KE(n),c=a.length;if(c!=KE(e).length&&!o)return!1;for(var h=c;h--;){var g=a[h];if(!(o?g in e:A9.call(e,g)))return!1}var m=s.get(n),y=s.get(e);if(m&&y)return m==e&&y==n;var v=!0;s.set(n,e),s.set(e,n);for(var w=o;++h<c;){var _=n[g=a[h]],C=e[g];if(r)var E=o?r(C,_,g,e,n,s):r(_,C,g,n,e,s);if(!(void 0===E?_===C||i(_,C,t,r,s):E)){v=!1;break}w||(w="constructor"==g)}if(v&&!w){var A=n.constructor,P=e.constructor;A!=P&&"constructor"in n&&"constructor"in e&&!("function"==typeof A&&A instanceof A&&"function"==typeof P&&P instanceof P)&&(v=!1)}return s.delete(n),s.delete(e),v}(n,e,t,r,i,s))},nD=function DN(n,e,t,r,i){return n===e||(null==n||null==e||!es(n)&&!es(e)?n!=n&&e!=e:U9(n,e,t,r,DN,i))},Co=function z9(n,e){return nD(n,e)};var Y9=Object.prototype.hasOwnProperty;const SN=function Z9(n){if(null==n)return!0;if(Qc(n)&&(Xn(n)||"string"==typeof n||"function"==typeof n.splice||Pf(n)||Pb(n)||Af(n)))return!n.length;var e=kf(n);if("[object Map]"==e||"[object Set]"==e)return!n.size;if(Ib(n))return!mN(n).length;for(var t in n)if(Y9.call(n,t))return!1;return!0};var s7=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)$E(e,XE(n)),n=UE(n);return e}:gN;const AN=s7,l7=function c7(n){return hN(n,Nf,AN)};var f7=Object.prototype.hasOwnProperty;var m7=/\w*$/;var MN=Ei?Ei.prototype:void 0,IN=MN?MN.valueOf:void 0;const V7=function $7(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return HE(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function g7(n,e){var t=e?HE(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return XO(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function y7(n){var e=new n.constructor(n.source,m7.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function b7(n){return IN?Object(IN.call(n)):{}}(n)}};var TN=Of&&Of.isMap;const q7=TN?op(TN):function U7(n){return es(n)&&"[object Map]"==kf(n)};var PN=Of&&Of.isSet;const X7=PN?op(PN):function Y7(n){return es(n)&&"[object Set]"==kf(n)};var ON="[object Arguments]",NN="[object Function]",RN="[object Object]",vt={};vt[ON]=vt["[object Array]"]=vt["[object ArrayBuffer]"]=vt["[object DataView]"]=vt["[object Boolean]"]=vt["[object Date]"]=vt["[object Float32Array]"]=vt["[object Float64Array]"]=vt["[object Int8Array]"]=vt["[object Int16Array]"]=vt["[object Int32Array]"]=vt["[object Map]"]=vt["[object Number]"]=vt[RN]=vt["[object RegExp]"]=vt["[object Set]"]=vt["[object String]"]=vt["[object Symbol]"]=vt["[object Uint8Array]"]=vt["[object Uint8ClampedArray]"]=vt["[object Uint16Array]"]=vt["[object Uint32Array]"]=!0,vt["[object Error]"]=vt[NN]=vt["[object WeakMap]"]=!1;const LN=function Lb(n,e,t,r,i,s){var o,a=1&e,c=2&e,u=4&e;if(t&&(o=i?t(n,r,i,s):t(n)),void 0!==o)return o;if(!Ft(n))return n;var d=Xn(n);if(d){if(o=function d7(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&f7.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!a)return KO(n,o)}else{var h=kf(n),g=h==NN||"[object GeneratorFunction]"==h;if(Pf(n))return JO(n,a);if(h==RN||h==ON||g&&!i){if(o=c||g?{}:tN(n),!a)return c?function o7(n,e){return cp(n,AN(n),e)}(n,function e7(n,e){return n&&cp(e,Nf(e),n)}(o,n)):function n7(n,e){return cp(n,XE(n),e)}(n,function K9(n,e){return n&&cp(e,lp(e),n)}(o,n))}else{if(!vt[h])return i?n:{};o=V7(n,h,a)}}s||(s=new Tf);var m=s.get(n);if(m)return m;s.set(n,o),X7(n)?n.forEach(function(w){o.add(Lb(w,e,t,w,n,s))}):q7(n)&&n.forEach(function(w,_){o.set(_,Lb(w,e,t,_,n,s))});var v=d?void 0:(u?c?l7:KE:c?Nf:lp)(n);return function J9(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(v||n,function(w,_){v&&(w=n[_=w]),BE(o,_,Lb(w,e,t,_,n,s))}),o},rD=function DY(n){return LN(n,4)},jt=function MY(n){return LN(n,5)};var kN=Object.prototype,IY=kN.hasOwnProperty,TY=Rf(function(n,e){n=Object(n);var t=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Ob(e[0],e[1],i)&&(r=1);++t<r;)for(var s=e[t],o=Nf(s),a=-1,c=o.length;++a<c;){var u=o[a],d=n[u];(void 0===d||xf(d,kN[u])&&!IY.call(n,u))&&(n[u]=s[u])}return n});const PY=TY,OY=function FN(n,e,t,r,i,s){return Ft(n)&&Ft(e)&&(s.set(e,n),qE(n,e,void 0,FN,s),s.delete(e)),n};var NY=uN(function(n,e,t,r){qE(n,e,t,r)});const RY=NY;var LY=Rf(function(n){return n.push(void 0,OY),VO(RY,void 0,n)});const jN=LY,FY=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},$Y=/^\s*class\s+/.test(`${class BY{}}`)||/^\s*class\s*\{/.test(`${class{}}`);function iD(n,e){let t;return $Y?t=class extends e{}:(t=function(){return e.apply(this,arguments)},function jY(n,e){function t(){this.constructor=n}FY(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(t,e)),Object.defineProperty(t,"name",{value:n}),t}function BN(n){return"__proto__"===n}function sD(n,e,t="/"){let r;const i=Array.isArray(e)?e:e.split(t);if(i.length)for(r=n;i.length;){const s=i.shift();if(Object(r)!==r||!s||!(s in r))return;r=r[s]}return r}function Ff(n,e,t,r="/"){const i=Array.isArray(e)?e:e.split(r),s=i.pop();if(s&&!BN(s)){let o=n;i.forEach(a=>{BN(a)||(null==o[a]&&(o[a]={}),o=o[a])}),o[s]=t}return n}function $N(n,e,t="/"){const r=Array.isArray(e)?e.slice():e.split(t),i=r.pop();if(i)if(r.length>0){const s=sD(n,r);s&&delete s[i]}else delete n[i];return n}class Di extends C6{}(function(n){n.dispose=Ea.dispose})(Di||(Di={})),function kY(n,...e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{"constructor"!==r&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})})}(Di,Ea);const qY=function GY(n){return n!=n},VN=function XY(n,e){return!(null==n||!n.length)&&function ZY(n,e,t){return e==e?function WY(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}(n,e,t):function UY(n,e,t,r){for(var i=n.length,s=t+(r?1:-1);r?s--:++s<i;)if(e(n[s],s,n))return s;return-1}(n,qY,t)}(n,e,0)>-1},HN=function KY(n,e,t){for(var r=-1,i=null==n?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1};var nZ=Lf&&1/ZE(new Lf([,-0]))[1]==1/0?function(n){return new Lf(n)}:function QY(){};const rZ=nZ,UN=function sZ(n,e,t){var r=-1,i=VN,s=n.length,o=!0,a=[],c=a;if(t)o=!1,i=HN;else if(s>=200){var u=e?null:rZ(n);if(u)return ZE(u);o=!1,i=YE,c=new WE}else c=e?[]:a;e:for(;++r<s;){var d=n[r],h=e?e(d):d;if(d=t||0!==d?d:0,o&&h==h){for(var g=c.length;g--;)if(c[g]===h)continue e;e&&c.push(h),a.push(d)}else i(c,h,t)||(c!==a&&c.push(h),a.push(d))}return a},zN=function oZ(n){return n&&n.length?UN(n):[]};var aZ=Rf(function(n){return UN(Ab(n,1,Tb,!0))});const GN=aZ;var uZ=Math.floor,fZ=Math.min;const qN=function dZ(n,e,t,r){var i=0,s=null==n?0:n.length;if(0===s)return 0;for(var o=(e=t(e))!=e,a=null===e,c=Ns(e),u=void 0===e;i<s;){var d=uZ((i+s)/2),h=t(n[d]),g=void 0!==h,m=null===h,y=h==h,v=Ns(h);if(o)var w=r||y;else w=u?y&&(r||g):a?y&&g&&(r||!m):c?y&&g&&!m&&(r||!v):!m&&!v&&(r?h<=e:h<e);w?i=d+1:s=d}return fZ(s,4294967294)},vZ=function yZ(n,e){return function pZ(n,e,t){var r=0,i=null==n?r:n.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=n[s];null!==o&&!Ns(o)&&(t?o<=e:o<e)?r=s+1:i=s}return i}return qN(n,e,Mf,t)}(n,e)},WN=function xZ(n){return n==n&&!Ft(n)},YN=function SZ(n,e){return function(t){return null!=t&&t[n]===e&&(void 0!==e||n in Object(t))}},MZ=function AZ(n){var e=function EZ(n){for(var e=lp(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,WN(i)]}return e}(n);return 1==e.length&&e[0][2]?YN(e[0][0],e[0][1]):function(t){return t===n||function CZ(n,e,t,r){var i=t.length,s=i,o=!r;if(null==n)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){var c=(a=t[i])[0],u=n[c],d=a[1];if(o&&a[2]){if(void 0===u&&!(c in n))return!1}else{var h=new Tf;if(r)var g=r(u,d,c,n,e,h);if(!(void 0===g?nD(d,u,3,r,h):g))return!1}}return!0}(t,n,e)}},RZ=function NZ(n,e){return RE(n)&&WN(e)?YN(sp(n),e):function(t){var r=function IZ(n,e,t){var r=null==n?void 0:Eb(n,e);return void 0===r?t:r}(t,n);return void 0===r&&r===e?jO(t,n):nD(e,r,3)}},$Z=function BZ(n){return RE(n)?function LZ(n){return function(e){return e?.[n]}}(sp(n)):function FZ(n){return function(e){return Eb(e,n)}}(n)},oD=function VZ(n){return"function"==typeof n?n:null==n?Mf:"object"==typeof n?Xn(n)?RZ(n[0],n[1]):MZ(n):$Z(n)};var WZ=function qZ(n,e){return function(t,r){if(null==t)return t;if(!Qc(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&!1!==r(o[s],s,o););return t}}(function zZ(n,e){return n&&GO(n,e,lp)});const ZN=WZ,QZ=function KZ(n,e){if(n!==e){var t=void 0!==n,r=null===n,i=n==n,s=Ns(n),o=void 0!==e,a=null===e,c=e==e,u=Ns(e);if(!a&&!u&&!s&&n>e||s&&o&&c&&!a&&!u||r&&o&&c||!t&&c||!i)return 1;if(!r&&!s&&!u&&n<e||u&&t&&i&&!r&&!s||a&&t&&i||!o&&i||!c)return-1}return 0},rJ=function nJ(n,e,t){e=e.length?ip(e,function(s){return Xn(s)?function(o){return Eb(o,1===s.length?s[0]:s)}:s}):[Mf];var r=-1;e=ip(e,op(oD));var i=function YZ(n,e){var t=-1,r=Qc(n)?Array(n.length):[];return ZN(n,function(i,s,o){r[++t]=e(i,s,o)}),r}(n,function(s,o,a){return{criteria:ip(e,function(u){return u(s)}),index:++r,value:s}});return function JZ(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}(i,function(s,o){return function eJ(n,e,t){for(var r=-1,i=n.criteria,s=e.criteria,o=i.length,a=t.length;++r<o;){var c=QZ(i[r],s[r]);if(c)return r>=a?c:c*("desc"==t[r]?-1:1)}return n.index-e.index}(s,o,t)})};var iJ=Rf(function(n,e){if(null==n)return[];var t=e.length;return t>1&&Ob(n,e[0],e[1])?e=[]:t>2&&Ob(e[0],e[1],e[2])&&(e=[e[0]]),rJ(n,Ab(e,1),[])});const sJ=iJ,aJ=function oJ(n,e,t,r){for(var i=-1,s=null==n?0:n.length;++i<s;){var o=n[i];e(r,o,t(o),n)}return r},lJ=function cJ(n,e,t,r){return ZN(n,function(i,s,o){e(r,i,t(i),o)}),r};var hJ=Object.prototype.hasOwnProperty,gJ=function uJ(n,e){return function(t,r){var i=Xn(t)?aJ:lJ,s=e?e():{};return i(t,n,oD(r),s)}}(function(n,e,t){hJ.call(n,t)?n[t].push(e):Sb(n,t,[e])});const JN=gJ;var vJ=Rf(function(n,e){return Tb(n)?function mJ(n,e,t,r){var i=-1,s=VN,o=!0,a=n.length,c=[],u=e.length;if(!a)return c;t&&(e=ip(e,op(t))),r?(s=HN,o=!1):e.length>=200&&(s=YE,o=!1,e=new WE(e));e:for(;++i<a;){var d=n[i],h=null==t?d:t(d);if(d=r||0!==d?d:0,o&&h==h){for(var g=u;g--;)if(e[g]===h)continue e;c.push(d)}else s(e,h,r)||c.push(d)}return c}(n,Ab(e,1,Tb,!0)):[]});const bJ=vJ,xJ=function _J(n,e){return n>e},DJ=function EJ(n){return n&&n.length?function wJ(n,e,t){for(var r=-1,i=n.length;++r<i;){var s=n[r],o=e(s);if(null!=o&&(void 0===a?o==o&&!Ns(o):t(o,a)))var a=o,c=s}return c}(n,Mf,xJ):void 0},RJ=function TJ(n){return function(e){return n?.[e]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"});var LJ=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,VJ=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var zJ=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var WJ=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var XN="\\ud800-\\udfff",KN="\\u2700-\\u27bf",QN="a-z\\xdf-\\xf6\\xf8-\\xff",eR="A-Z\\xc0-\\xd6\\xd8-\\xde",tR="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rR="["+tR+"]",iR="\\d+",oX="["+KN+"]",sR="["+QN+"]",oR="[^"+XN+tR+iR+KN+QN+eR+"]",aR="(?:\\ud83c[\\udde6-\\uddff]){2}",cR="[\\ud800-\\udbff][\\udc00-\\udfff]",jf="["+eR+"]",lR="(?:"+sR+"|"+oR+")",fX="(?:"+jf+"|"+oR+")",uR="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",fR="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",dR="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",hR="[\\ufe0e\\ufe0f]?",pX=hR+dR+"(?:\\u200d(?:"+["[^"+XN+"]",aR,cR].join("|")+")"+hR+dR+")*",mX="(?:"+[oX,aR,cR].join("|")+")"+pX,yX=RegExp([jf+"?"+sR+"+"+uR+"(?="+[rR,jf,"$"].join("|")+")",fX+"+"+fR+"(?="+[rR,jf+lR,"$"].join("|")+")",jf+"?"+lR+"+"+uR,jf+"+"+fR,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",iR,mX].join("|"),"g");const CX=function wX(n,e,t){return n=Sf(n),void 0===(e=t?void 0:e)?function YJ(n){return WJ.test(n)}(n)?function vX(n){return n.match(yX)||[]}(n):function GJ(n){return n.match(zJ)||[]}(n):n.match(e)||[]};var xX=RegExp("['\u2019]","g");const kb=function EX(n){return function(e){return function MJ(n,e,t,r){var i=-1,s=null==n?0:n.length;for(r&&s&&(t=n[++i]);++i<s;)t=e(t,n[i],i,n);return t}(CX(function HJ(n){return(n=Sf(n))&&n.replace(LJ,RJ).replace(VJ,"")}(e).replace(xX,"")),n,"")}},MX=function AX(n,e,t){var r=n.length;return t=void 0===t?r:t,!e&&t>=r?n:function DX(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),(t=t>i?i:t)<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}(n,e,t)};var kX=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const gR=function FX(n){return kX.test(n)};var pR="\\ud800-\\udfff",GX="["+pR+"]",aD="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",cD="\\ud83c[\\udffb-\\udfff]",mR="[^"+pR+"]",yR="(?:\\ud83c[\\udde6-\\uddff]){2}",vR="[\\ud800-\\udbff][\\udc00-\\udfff]",bR="(?:"+aD+"|"+cD+")?",wR="[\\ufe0e\\ufe0f]?",ZX=wR+bR+"(?:\\u200d(?:"+[mR,yR,vR].join("|")+")"+wR+bR+")*",JX="(?:"+[mR+aD+"?",aD,yR,vR,GX].join("|")+")",XX=RegExp(cD+"(?="+cD+")|"+JX+ZX,"g");const tK=function eK(n){return gR(n)?function KX(n){return n.match(XX)||[]}(n):function jX(n){return n.split("")}(n)},CR=function nK(n){return function(e){e=Sf(e);var t=gR(e)?tK(e):void 0,r=t?t[0]:e.charAt(0),i=t?MX(t,1).join(""):e.slice(1);return r[n]()+i}},up=CR("toUpperCase");var iK=kb(function(n,e,t){return n+(t?" ":"")+up(e)});const _R=iK;var aK=kb(function(n,e,t){return e=e.toLowerCase(),n+(t?function sK(n){return up(Sf(n).toLowerCase())}(e):e)});const fp=aK;var cK=kb(function(n,e,t){return n+(t?" ":"")+e.toUpperCase()});const lK=cK;var uK=kb(function(n,e,t){return n+(t?" ":"")+e.toLowerCase()});const lD=uK,dK=CR("toLowerCase"),tl=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},xR=tl(n=>n.replace(/\B([A-Z])/g,"-$1").toLowerCase()),uD=tl(n=>_R(fp(n)).replace(/ /g,""));function fD(n){let e=2166136261,t=!1,r=n;for(let i=0,s=r.length;i<s;i+=1){let o=r.charCodeAt(i);o>127&&!t&&(r=unescape(encodeURIComponent(r)),o=r.charCodeAt(i),t=!0),e^=o,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function Fb(){let n="";for(let t=0,r=36;t<r;t+=1){const i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t],s=16*Math.random()|0;n+=("x"===i?s:"y"===i?3&s|8:i).toString(16)}return n}function gK(n,e,t){let r=new Array(e.length+1),i=new Array(e.length+1);const s=t+1;for(let a=0;a<=e.length;a+=1)r[a]=a;for(let a=1;a<=n.length;a+=1){const c=n.charCodeAt(a-1),u=a>t?a-t:1,d=e.length>t+a?t+a:e.length;i[0]=a;let h=a;for(let m=1;m<u;m+=1)i[m]=s;for(let m=u;m<=d;m+=1){const y=c===e.charCodeAt(m-1)?r[m-1]:Math.min(r[m]+1,i[m-1]+1,r[m-1]+2);i[m]=y,h=Math.min(h,y)}for(let m=d+1;m<=e.length;m+=1)i[m]=s;if(h>t)return;const g=r;r=i,i=g}const o=r[e.length];return o>t?void 0:o}tl(n=>lK(n).replace(/ /g,"_")),tl(n=>lD(n).replace(/ /g,".")),tl(n=>lD(n).replace(/ /g,"/")),tl(n=>up(lD(n))),tl(n=>_R(fp(n)));const ER=function mK(n){return"number"==typeof n||es(n)&&"[object Number]"==Da(n)},Si=function bK(n,e,t){return void 0===t&&(t=e,e=void 0),void 0!==t&&(t=(t=tp(t))==t?t:0),void 0!==e&&(e=(e=tp(e))==e?e:0),function yK(n,e,t){return n==n&&(void 0!==t&&(n=n<=t?n:t),void 0!==e&&(n=n>=e?n:e)),n}(tp(n),e,t)};function _o(n){return"string"==typeof n&&"%"===n.slice(-1)}function ts(n,e){if(null==n)return 0;let t;if("string"==typeof n){if(t=parseFloat(n),_o(n)&&(t/=100,Number.isFinite(t)))return t*e}else t=n;return Number.isFinite(t)?t>0&&t<1?t*e:t:0}function nl(n){if("object"==typeof n){let t=0,r=0,i=0,s=0;return null!=n.vertical&&Number.isFinite(n.vertical)&&(r=s=n.vertical),null!=n.horizontal&&Number.isFinite(n.horizontal)&&(i=t=n.horizontal),null!=n.left&&Number.isFinite(n.left)&&(t=n.left),null!=n.top&&Number.isFinite(n.top)&&(r=n.top),null!=n.right&&Number.isFinite(n.right)&&(i=n.right),null!=n.bottom&&Number.isFinite(n.bottom)&&(s=n.bottom),{top:r,right:i,bottom:s,left:t}}let e=0;return null!=n&&Number.isFinite(n)&&(e=n),{top:e,right:e,bottom:e,left:e}}let dD=!1,DR=!1,SR=!1,AR=!1,MR=!1,IR=!1,TR=!1,PR=!1,OR=!1,NR=!1,RR=!1,LR=!1,kR=!1,FR=!1,jR=!1,BR=!1;if("object"==typeof navigator){const n=navigator.userAgent;dD=n.indexOf("Macintosh")>=0,DR=!!n.match(/(iPad|iPhone|iPod)/g),SR=n.indexOf("Windows")>=0,AR=n.indexOf("MSIE")>=0,MR=!!n.match(/Trident\/7\./),IR=!!n.match(/Edge\//),TR=n.indexOf("Mozilla/")>=0&&n.indexOf("MSIE")<0&&n.indexOf("Edge/")<0,OR=n.indexOf("Chrome/")>=0&&n.indexOf("Edge/")<0,NR=n.indexOf("Opera/")>=0||n.indexOf("OPR/")>=0,RR=n.indexOf("Firefox/")>=0,LR=n.indexOf("AppleWebKit/")>=0&&n.indexOf("Chrome/")<0&&n.indexOf("Edge/")<0,"object"==typeof document&&(BR=!document.createElementNS||"[object SVGForeignObjectElement]"!=`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`||n.indexOf("Opera/")>=0)}if("object"==typeof window&&(PR=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,FR=null!=window.PointerEvent&&!dD),"object"==typeof document){kR="ontouchstart"in document.documentElement;try{const n=Object.defineProperty({},"passive",{get(){jR=!0}}),e=document.createElement("div");e.addEventListener&&e.addEventListener("click",()=>{},n)}catch{}}var Sa;(function(n){n.IS_MAC=dD,n.IS_IOS=DR,n.IS_WINDOWS=SR,n.IS_IE=AR,n.IS_IE11=MR,n.IS_EDGE=IR,n.IS_NETSCAPE=TR,n.IS_CHROME_APP=PR,n.IS_CHROME=OR,n.IS_OPERA=NR,n.IS_FIREFOX=RR,n.IS_SAFARI=LR,n.SUPPORT_TOUCH=kR,n.SUPPORT_POINTER=FR,n.SUPPORT_PASSIVE=jR,n.NO_FOREIGNOBJECT=BR,n.SUPPORT_FOREIGNOBJECT=!n.NO_FOREIGNOBJECT})(Sa||(Sa={})),function(n){function e(){const s=window.module;return null!=s&&null!=s.hot&&null!=s.hot.status?s.hot.status():"unkonwn"}n.getHMRStatus=e,n.isApplyingHMR=function t(){return"apply"===e()};const r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};n.isEventSupported=function i(s){const o=document.createElement(r[s]||"div"),a=`on${s}`;let c=a in o;return c||(o.setAttribute(a,"return;"),c="function"==typeof o[a]),c}}(Sa||(Sa={}));const hD=/[\t\r\n\f]/g,gD=/\S+/g,Bf=n=>` ${n} `;function $f(n){return n&&n.getAttribute&&n.getAttribute("class")||""}function Vf(n,e){if(null==n||null==e)return!1;const t=Bf($f(n)),r=Bf(e);return 1===n.nodeType&&t.replace(hD," ").includes(r)}function ze(n,e){if(null!=n&&null!=e){if("function"==typeof e)return ze(n,e($f(n)));if("string"==typeof e&&1===n.nodeType){const t=e.match(gD)||[],r=Bf($f(n)).replace(hD," ");let i=t.reduce((s,o)=>s.indexOf(Bf(o))<0?`${s}${o} `:s,r);i=i.trim(),r!==i&&n.setAttribute("class",i)}}}function Ai(n,e){if(null!=n){if("function"==typeof e)return Ai(n,e($f(n)));if((!e||"string"==typeof e)&&1===n.nodeType){const t=(e||"").match(gD)||[],r=Bf($f(n)).replace(hD," ");let i=t.reduce((s,o)=>{const a=Bf(o);return s.indexOf(a)>-1?s.replace(a," "):s},r);i=e?i.trim():"",r!==i&&n.setAttribute("class",i)}}}function $R(n,e,t){if(null!=n&&null!=e){if(null!=t&&"string"==typeof e)return void(t?ze(n,e):Ai(n,e));if("function"==typeof e)return $R(n,e($f(n),t),t);"string"==typeof e&&(e.match(gD)||[]).forEach(i=>{Vf(n,i)?Ai(n,i):ze(n,i)})}}let VR=0;function pD(n){return(null==n.id||""===n.id)&&(n.id=function wK(){return VR+=1,`v${VR}`}()),n.id}function Aa(n){return null!=n&&"function"==typeof n.getScreenCTM&&n instanceof SVGElement}const Sn={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"};function UR(n,e=document){return e.createElement(n)}function mD(n,e=Sn.xhtml,t=document){return t.createElementNS(e,n)}function xo(n,e=document){return mD(n,Sn.svg,e)}function jb(n){if(n){const t=`<svg xmlns="${Sn.svg}" xmlns:xlink="${Sn.xlink}" version="1.1">${n}</svg>`,{documentElement:r}=function CK(n,e={}){let t;try{const r=new DOMParser;null!=e.async&&(r.async=e.async),t=r.parseFromString(n,e.mimeType||"text/xml")}catch{t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${n}`);return t}(t,{async:!1});return r}const e=document.createElementNS(Sn.svg,"svg");return e.setAttributeNS(Sn.xmlns,"xmlns:xlink",Sn.xlink),e.setAttribute("version","1.1"),e}function yD(n){let e=0,t=n.previousSibling;for(;t;)1===t.nodeType&&(e+=1),t=t.previousSibling;return e}function zR(n,e,t){const r=n.ownerSVGElement;let i=n.parentNode;for(;i&&i!==t&&i!==r;){if(Vf(i,e))return i;i=i.parentNode}return null}function GR(n,e){const t=e&&e.parentNode;return n===t||!!(t&&1===t.nodeType&&16&n.compareDocumentPosition(t))}function Hf(n){n&&(Array.isArray(n)?n:[n]).forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)})}function dp(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function hp(n,e){(Array.isArray(e)?e:[e]).forEach(r=>{null!=r&&n.appendChild(r)})}function vD(n,e){const t=n.parentNode;t&&(Array.isArray(e)?e:[e]).forEach(i=>{null!=i&&t.insertBefore(i,n)})}function qR(n){try{return n instanceof HTMLElement}catch{return"object"==typeof n&&1===n.nodeType&&"object"==typeof n.style&&"object"==typeof n.ownerDocument}}const WR=["viewBox","attributeName","attributeType","repeatCount","textLength","lengthAdjust","gradientUnits"];function YR(n,e){const t=JR(e);t.ns?n.hasAttributeNS(t.ns,t.local)&&n.removeAttributeNS(t.ns,t.local):n.hasAttribute(e)&&n.removeAttribute(e)}function bD(n,e,t){if(null==t)return YR(n,e);const r=JR(e);r.ns&&"string"==typeof t?n.setAttributeNS(r.ns,e,t):"id"===e?n.id=`${t}`:n.setAttribute(e,`${t}`)}function ZR(n,e){Object.keys(e).forEach(t=>{bD(n,t,e[t])})}function ut(n,e,t){if(null==e){const r=n.attributes,i={};for(let s=0;s<r.length;s+=1)i[r[s].name]=r[s].value;return i}if("string"==typeof e&&void 0===t)return n.getAttribute(e);"object"==typeof e?ZR(n,e):bD(n,e,t)}function JR(n){if(-1!==n.indexOf(":")){const e=n.split(":");return{ns:Sn[e[0]],local:e[1]}}return{ns:null,local:n}}function gp(n){const e={};return Object.keys(n).forEach(t=>{const r=WR.includes(t)?t:xR(t);e[r]=n[t]}),e}function Bb(n){const e={};return n.split(";").forEach(r=>{const i=r.trim();if(i){const s=i.split("=");s.length&&(e[s[0].trim()]=s[1]?s[1].trim():"")}}),e}function wD(n,e){return Object.keys(e).forEach(t=>{if("class"===t)n[t]=n[t]?`${n[t]} ${e[t]}`:e[t];else if("style"===t){const r="object"==typeof n[t],i="object"==typeof e[t];let s,o;r&&i?(s=n[t],o=e[t]):r?(s=n[t],o=Bb(e[t])):i?(s=Bb(n[t]),o=e[t]):(s=Bb(n[t]),o=Bb(e[t])),n[t]=wD(s,o)}else n[t]=e[t]}),n}function IK(n,e,t={}){const r=t.offset||0,i=[],s=[];let o,a,c=null;for(let u=0;u<n.length;u+=1){o=s[u]=n[u];for(let d=0,h=e.length;d<h;d+=1){const g=e[d];u>=g.start+r&&u<g.end+r&&("string"==typeof o?o=s[u]={t:n[u],attrs:g.attrs}:o.attrs=wD(wD({},o.attrs),g.attrs),t.includeAnnotationIndices&&(null==o.annotations&&(o.annotations=[]),o.annotations.push(d)))}a=s[u-1],a?Ft(o)&&Ft(a)?JSON.stringify(o.attrs)===JSON.stringify(a.attrs)?c.t+=o.t:(i.push(c),c=o):Ft(o)||Ft(a)?(i.push(c),c=o):c=(c||"")+o:c=o}return null!=c&&i.push(c),i}var XR;let rl;!function(n){function e(u){return"data:"===u.substr(0,5)}function r(u){let d=u.replace(/\s/g,"");d=decodeURIComponent(d);const h=d.indexOf(","),g=d.slice(0,h),m=g.split(":")[1].split(";")[0],y=d.slice(h+1);let v;v=g.indexOf("base64")>=0?atob(y):unescape(encodeURIComponent(y));const w=new Uint8Array(v.length);for(let _=0;_<v.length;_+=1)w[_]=v.charCodeAt(_);return new Blob([w],{type:m})}function i(u,d){const h=window.navigator.msSaveBlob;if(h)h(u,d);else{const g=window.URL.createObjectURL(u),m=document.createElement("a");m.href=g,m.download=d,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(g)}}function a(u){const d=parseFloat(u);return Number.isNaN(d)?null:d}n.isDataUrl=e,n.imageToDataUri=function t(u,d){if(!u||e(u))return void setTimeout(()=>d(null,u));const h=()=>{d(new Error(`Failed to load image: ${u}`))},g=window.FileReader?y=>{if(200===y.status){const v=new FileReader;v.onload=w=>{d(null,w.target.result)},v.onerror=h,v.readAsDataURL(y.response)}else h()}:y=>{if(200===y.status){let w=u.split(".").pop()||"png";"svg"===w&&(w="svg+xml");const _=`data:image/${w};base64,`,C=new Uint8Array(y.response),E=_+btoa((w=>{const C=[];for(let E=0;E<w.length;E+=32768)C.push(String.fromCharCode.apply(null,w.subarray(E,E+32768)));return C.join("")})(C));d(null,E)}else h()},m=new XMLHttpRequest;m.responseType=window.FileReader?"blob":"arraybuffer",m.open("GET",u,!0),m.addEventListener("error",h),m.addEventListener("load",()=>g(m)),m.send()},n.dataUriToBlob=r,n.downloadBlob=i,n.downloadDataUri=function s(u,d){i(r(u),d)},n.svgToDataUrl=function c(u,d={}){let h=null;const g=E=>(null==h&&(h=function o(u){const d=u.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return d&&d[2]?d[2].replace(/\s+/," ").split(" "):null}(u)),null!=h?a(h[E]):null),m=E=>{const A=u.match(E);return A&&A[2]?a(A[2]):null};let y=d.width;if(null==y&&(y=m(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==y&&(y=g(2)),null==y)throw new Error("Can not parse width from svg string");let v=d.height;if(null==v&&(v=m(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==v&&(v=g(3)),null==v)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(u).replace(/'/g,"%27").replace(/"/g,"%22")}`}}(XR||(XR={}));const PK={px:n=>n,mm:n=>rl*n,cm:n=>rl*n*10,in:n=>rl*n*25.4,pt:n=>rl*(25.4*n/72),pc:n=>rl*(25.4*n/6)};var KR;!function(n){function e(r,i,s){const o=document.createElement("div"),a=o.style;a.display="inline-block",a.position="absolute",a.left="-15000px",a.top="-15000px",a.width=r+(s||"px"),a.height=i+(s||"px"),document.body.appendChild(o);const c=o.getBoundingClientRect(),u={width:c.width||0,height:c.height||0};return document.body.removeChild(o),u}n.measure=e,n.toPx=function t(r,i){null==rl&&(rl=e("1","1","mm").width);const s=i?PK[i]:null;return s?s(r):r}}(KR||(KR={}));const OK=/-(.)/g,CD={},QR=["webkit","ms","moz","o"],eL=document?document.createElement("div").style:{};function _D(n,e){const t=n.ownerDocument&&n.ownerDocument.defaultView&&n.ownerDocument.defaultView.opener?n.ownerDocument.defaultView.getComputedStyle(n,null):window.getComputedStyle(n,null);return t&&e?t.getPropertyValue(e)||t[e]:t}document.selection||window;const LK={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function pp(n,e,t){if("string"!=typeof e)for(const r in e)pp(n,r,e[r]);else{const r=function kK(n){return/^--/.test(n)}(e);if(r||(e=function tL(n){const e=function NK(n){return n.replace(OK,(e,t)=>t.toUpperCase())}(n);if(null==CD[e]){const t=e.charAt(0).toUpperCase()+e.slice(1);CD[e]=e in eL?e:function RK(n){for(let e=0;e<QR.length;e+=1){const t=QR[e]+n;if(t in eL)return t}return null}(t)}return CD[e]}(e)),void 0===t)return function $b(n,e,t){const r=window.getComputedStyle(n,null);return t?r.getPropertyValue(e)||void 0:r[e]||n.style[e]}(n,e,r);r||(t=function FK(n,e){return LK[n]||"number"!=typeof e?e:`${e}px`}(e,t));const i=n.style;r?i.setProperty(e,t):i[e]=t}}const Hb=new WeakMap;function nL(n,e){const t=fp(e),r=Hb.get(n);if(r)return r[t]}function il(n,e,t){if(!e){const r={};return Object.keys(Hb).forEach(i=>{r[i]=nL(n,i)}),r}if("string"==typeof e)return void 0===t?nL(n,e):void function jK(n,e,t){const r=fp(e),i=Hb.get(n);i?i[r]=t:Hb.set(n,{[r]:t})}(n,e,t);for(const r in e)il(n,r,e[r])}class we{get[Symbol.toStringTag](){return we.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(e){this.node.id=e}constructor(e,t,r){if(!e)throw new TypeError("Invalid element to create vector");let i;if(we.isVector(e))i=e.node;else if("string"==typeof e)if("svg"===e.toLowerCase())i=jb();else if("<"===e[0]){const s=jb(e);i=document.importNode(s.firstChild,!0)}else i=document.createElementNS(Sn.svg,e);else i=e;this.node=i,t&&this.setAttributes(t),r&&this.append(r)}transform(e,t){return null==e?zf(this.node):(zf(this.node,e,t),this)}translate(e,t=0,r={}){return null==e?dL(this.node):(dL(this.node,e,t,r),this)}rotate(e,t,r,i={}){return null==e?DD(this.node):(DD(this.node,e,t,r,i),this)}scale(e,t){return null==e?SD(this.node):(SD(this.node,e,t),this)}getTransformToElement(e){const t=we.toNode(e);return bp(this.node,t)}removeAttribute(e){return YR(this.node,e),this}getAttribute(e){return function MK(n,e){return n.getAttribute(e)}(this.node,e)}setAttribute(e,t){return bD(this.node,e,t),this}setAttributes(e){return ZR(this.node,e),this}attr(e,t){return null==e?ut(this.node):"string"==typeof e&&void 0===t?ut(this.node,e):("object"==typeof e?ut(this.node,e):ut(this.node,e,t),this)}svg(){return this.node instanceof SVGSVGElement?this:we.create(this.node.ownerSVGElement)}defs(){const e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?we.create(t):we.create("defs").appendTo(e)}text(e,t={}){return sL(this.node,e,t),this}tagName(){return function _K(n,e=!0){const t=n.nodeName;return e?t.toLowerCase():t.toUpperCase()}(this.node)}clone(){return we.create(this.node.cloneNode(!0))}remove(){return Hf(this.node),this}empty(){return dp(this.node),this}append(e){return hp(this.node,we.toNodes(e)),this}appendTo(e){return function SK(n,e){e?.appendChild(n)}(this.node,we.isVector(e)?e.node:e),this}prepend(e){return function DK(n,e){const t=n.firstChild;t?vD(t,e):hp(n,e)}(this.node,we.toNodes(e)),this}before(e){return vD(this.node,we.toNodes(e)),this}replace(e){return this.node.parentNode&&this.node.parentNode.replaceChild(we.toNode(e),this.node),we.create(e)}first(){return this.node.firstChild?we.create(this.node.firstChild):null}last(){return this.node.lastChild?we.create(this.node.lastChild):null}get(e){const t=this.node.childNodes[e];return t?we.create(t):null}indexOf(e){return Array.prototype.slice.call(this.node.childNodes).indexOf(we.toNode(e))}find(e){const t=[],r=function xK(n,e){return n.querySelectorAll(e)}(this.node,e);if(r)for(let i=0,s=r.length;i<s;i+=1)t.push(we.create(r[i]));return t}findOne(e){const t=function EK(n,e){return n.querySelector(e)}(this.node,e);return t?we.create(t):null}findParentByClass(e,t){const r=zR(this.node,e,t);return r?we.create(r):null}matches(e){const t=this.node,i=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return i&&i.call(t,e)}contains(e){return GR(this.node,we.isVector(e)?e.node:e)}wrap(e){const t=we.create(e),r=this.node.parentNode;return r?.insertBefore(t.node,this.node),t.append(this)}parent(e){let t=this;if(null==t.node.parentNode)return null;if(t=we.create(t.node.parentNode),null==e)return t;do{if("string"==typeof e?t.matches(e):t instanceof e)return t}while(t=we.create(t.node.parentNode));return t}children(){const e=this.node.childNodes,t=[];for(let r=0;r<e.length;r+=1)1===e[r].nodeType&&t.push(we.create(e[r]));return t}eachChild(e,t){const r=this.children();for(let i=0,s=r.length;i<s;i+=1)e.call(r[i],r[i],i,r),t&&r[i].eachChild(e,t);return this}index(){return yD(this.node)}hasClass(e){return Vf(this.node,e)}addClass(e){return ze(this.node,e),this}removeClass(e){return Ai(this.node,e),this}toggleClass(e,t){return $R(this.node,e,t),this}toLocalPoint(e,t){return function oQ(n,e,t){const r=n instanceof SVGSVGElement?n:n.ownerSVGElement,i=r.createSVGPoint();i.x=e,i.y=t;try{const s=r.getScreenCTM(),o=i.matrixTransform(s.inverse()),a=bp(n,r).inverse();return o.matrixTransform(a)}catch{return i}}(this.node,e,t)}sample(e=1){return this.node instanceof SVGPathElement?function zK(n,e=1){const t=n.getTotalLength(),r=[];let s,i=0;for(;i<t;)s=n.getPointAtLength(i),r.push({distance:i,x:s.x,y:s.y}),i+=e;return r}(this.node,e):[]}toPath(){return we.create(function XK(n){const e=xo("path");ut(e,ut(n));const t=uL(n);return t&&e.setAttribute("d",t),e}(this.node))}toPathData(){return uL(this.node)}}!function(n){function e(o){if(null==o)return!1;if(o instanceof n)return!0;const a=o[Symbol.toStringTag];return(null==a||a===n.toStringTag)&&o.node instanceof SVGElement&&"function"==typeof o.sample&&"function"==typeof o.toPath}function t(o,a,c){return new n(o,a,c)}function i(o){return e(o)?o.node:o}n.toStringTag=`X6.${n.name}`,n.isVector=e,n.create=t,n.createVectors=function r(o){if("<"===o[0]){const a=jb(o),c=[];for(let u=0,d=a.childNodes.length;u<d;u+=1)c.push(t(document.importNode(a.childNodes[u],!0)));return c}return[t(o)]},n.toNode=i,n.toNodes=function s(o){return Array.isArray(o)?o.map(a=>i(a)):[i(o)]}}(we||(we={}));const rL=document.createElement("canvas").getContext("2d");function HK(n,e,t){const r=t.eol,i=t.baseSize,s=t.lineHeight;let a,o=0;const c={},u=e.length-1;for(let d=0;d<=u;d+=1){let h=e[d],g=null;if("object"==typeof h){const m=h.attrs,y=we.create("tspan",m);a=y.node;let v=h.t;r&&d===u&&(v+=r),a.textContent=v;const w=m.class;w&&y.addClass(w),t.includeAnnotationIndices&&y.attr("annotations",h.annotations.join(",")),g=parseFloat(m["font-size"]),void 0===g&&(g=i),g&&g>o&&(o=g)}else r&&d===u&&(h+=r),a=document.createTextNode(h||" "),i&&i>o&&(o=i);n.appendChild(a)}return o&&(c.maxFontSize=o),s?c.lineHeight=s:o&&(c.lineHeight=1.2*o),c}const iL=/em$/;function Ub(n,e){const t=parseFloat(n);return iL.test(n)?t*e:t}function sL(n,e,t={}){e=function TK(n){return n.replace(/ /g,"\xa0")}(e);const r=t.eol;let i=t.textPath;const s=t.textVerticalAnchor,o="middle"===s||"bottom"===s||"top"===s;let a=t.x;void 0===a&&(a=n.getAttribute("x")||0);const c=t.includeAnnotationIndices;let u=t.annotations;u&&!Array.isArray(u)&&(u=[u]);const d=t.lineHeight,h="auto"===d,g=h?"1.5em":d||"1em";let m=!0;const y=n.childNodes;if(1===y.length){const q=y[0];q&&"TITLE"===q.tagName.toUpperCase()&&(m=!1)}m&&dp(n),ut(n,{"xml:space":"preserve",display:e||t.displayEmpty?null:"none"});const v=ut(n,"font-size");let _,w=parseFloat(v);w||(w=16,(o||u)&&!v&&ut(n,"font-size",`${w}`)),i?("string"==typeof i&&(i={d:i}),_=function VK(n,e){const t=we.create(e),r=we.create("textPath"),i=n.d;if(i&&void 0===n["xlink:href"]){const s=we.create("path").attr("d",i).appendTo(t.defs());r.attr("xlink:href",`#${s.id}`)}return"object"==typeof n&&r.attr(n),r.node}(i,n)):_=document.createDocumentFragment();let C,A,E=0;const P=e.split("\n"),L=[],V=P.length-1;for(let q=0;q<=V;q+=1){C=g;let te="v-line";const Z=xo("tspan");let ie,wt=P[q];if(wt)if(u){ie=HK(Z,IK(wt,u,{offset:-E,includeAnnotationIndices:c}),{eol:q!==V&&r,baseSize:w,lineHeight:h?null:g,includeAnnotationIndices:c});const F=ie.lineHeight;F&&h&&0!==q&&(C=F),0===q&&(A=.8*ie.maxFontSize)}else r&&q!==V&&(wt+=r),Z.textContent=wt;else{Z.textContent="-",te+=" v-empty-line";const je=Z.style;je.fillOpacity=0,je.strokeOpacity=0,u&&(ie={})}ie&&L.push(ie),q>0&&Z.setAttribute("dy",C),(q>0||i)&&Z.setAttribute("x",a),Z.className.baseVal=te,_.appendChild(Z),E+=wt.length+1}if(o)if(u)C=function UK(n,e,t,r){if(!Array.isArray(e))return 0;const i=e.length;if(!i)return 0;let s=e[0];const o=Ub(s.maxFontSize,t)||t;let a=0;const c=Ub(r,t);for(let h=1;h<i;h+=1)s=e[h],a+=Ub(s.lineHeight,t)||c;const u=Ub(s.maxFontSize,t)||t;let d;switch(n){case"middle":d=o/2-.15*u-a/2;break;case"bottom":d=-.25*u-a;break;default:d=.8*o}return d}(s,L,w,g);else if("top"===s)C="0.8em";else{let q;switch(V>0?(q=parseFloat(g)||1,q*=V,iL.test(g)||(q/=w)):q=0,s){case"middle":C=.3-q/2+"em";break;case"bottom":C=-q-.3+"em"}}else 0===s?C="0em":s?C=s:(C=0,null==n.getAttribute("y")&&n.setAttribute("y",`${A||"0.8em"}`));_.firstChild.setAttribute("dy",C),n.appendChild(_)}function mp(n,e={}){if(!n)return{width:0};const t=[],r=e["font-size"]?`${parseFloat(e["font-size"])}px`:"14px";return t.push(e["font-style"]||"normal"),t.push(e["font-variant"]||"normal"),t.push(e["font-weight"]||400),t.push(r),t.push(e["font-family"]||"sans-serif"),rL.font=t.join(" "),rL.measureText(n)}function oL(n,e,t,r={}){if(e>=t)return[n,""];const i=n.length,s={};let o=Math.round(e/t*i-1);for(o<0&&(o=0);o>=0&&o<i;){const a=n.slice(0,o),c=s[a]||mp(a,r).width,u=n.slice(0,o+1),d=s[u]||mp(u,r).width;if(s[a]=c,s[u]=d,c>e)o-=1;else{if(!(d<=e))break;o+=1}}return[n.slice(0,o),n.slice(o)]}function aL(n,e,t={},r={}){const i=e.width,s=e.height,o=r.eol||"\n",a=t.fontSize||14,c=t.lineHeight?parseFloat(t.lineHeight):Math.ceil(1.4*a),u=Math.floor(s/c);if(n.indexOf(o)>-1){const w=Fb(),_=[];return n.split(o).map(C=>{const E=aL(C,Object.assign(Object.assign({},e),{height:Number.MAX_SAFE_INTEGER}),t,Object.assign(Object.assign({},r),{eol:w}));E&&_.push(...E.split(w))}),_.slice(0,u).join(o)}const{width:d}=mp(n,t);if(d<i)return n;const h=[];let g=n,m=d,y=r.ellipsis,v=0;y&&("string"!=typeof y&&(y="\u2026"),v=mp(y,t).width);for(let w=0;w<u;w+=1){if(!(m>i)){h.push(g);break}if(w===u-1){const[C]=oL(g,i-v,m,t);h.push(y?`${C}${y}`:C)}else{const[C,E]=oL(g,i,m,t);h.push(C),g=E,m=mp(g,t).width}}return h.join(o)}const xD=.551784;function kn(n,e,t=NaN){const r=n.getAttribute(e);if(null==r)return t;const i=parseFloat(r);return Number.isNaN(i)?t:i}function cL(n){return`M ${n.map(t=>`${t.x} ${t.y}`).join(" L")}`}function zb(n){const e=[],t=n.points;if(t)for(let r=0,i=t.numberOfItems;r<i;r+=1)e.push(t.getItem(r));return e}function lL(n){let e;const t=n.x,r=n.y,i=n.width,s=n.height,o=Math.min(n.rx||n["top-rx"]||0,i/2),a=Math.min(n.rx||n["bottom-rx"]||0,i/2),c=Math.min(n.ry||n["top-ry"]||0,s/2),u=Math.min(n.ry||n["bottom-ry"]||0,s/2);return e=o||a||c||u?["M",t,r+c,"v",s-c-u,"a",a,u,0,0,0,a,u,"h",i-2*a,"a",a,u,0,0,0,a,-u,"v",-(s-u-c),"a",o,c,0,0,0,-o,-c,"h",-(i-2*o),"a",o,c,0,0,0,-o,c,"Z"]:["M",t,r,"H",t+i,"V",r+s,"H",t,"V",r,"Z"],e.join(" ")}function uL(n){const e=n.tagName.toLowerCase();switch(e){case"path":return n.getAttribute("d");case"line":return function GK(n){return["M",kn(n,"x1"),kn(n,"y1"),"L",kn(n,"x2"),kn(n,"y2")].join(" ")}(n);case"polygon":return function qK(n){const e=zb(n);return 0===e.length?null:`${cL(e)} Z`}(n);case"polyline":return function WK(n){const e=zb(n);return 0===e.length?null:cL(e)}(n);case"ellipse":return function ZK(n){const e=kn(n,"cx",0),t=kn(n,"cy",0),r=kn(n,"rx"),i=kn(n,"ry")||r,s=r*xD,o=i*xD;return["M",e,t-i,"C",e+s,t-i,e+r,t-o,e+r,t,"C",e+r,t+o,e+s,t+i,e,t+i,"C",e-s,t+i,e-r,t+o,e-r,t,"C",e-r,t-o,e-s,t-i,e,t-i,"Z"].join(" ")}(n);case"circle":return function YK(n){const e=kn(n,"cx",0),t=kn(n,"cy",0),r=kn(n,"r"),i=r*xD;return["M",e,t-r,"C",e+i,t-r,e+r,t-i,e+r,t,"C",e+r,t+i,e+i,t+r,e,t+r,"C",e-i,t+r,e-r,t+i,e-r,t,"C",e-r,t-i,e-i,t-r,e,t-r,"Z"].join(" ")}(n);case"rect":return function JK(n){return lL({x:kn(n,"x",0),y:kn(n,"y",0),width:kn(n,"width",0),height:kn(n,"height",0),rx:kn(n,"rx",0),ry:kn(n,"ry",0)})}(n)}throw new Error(`"${e}" cannot be converted to svg path element.`)}const Gb=xo("svg"),KK=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,fL=/[ ,]+/,QK=/^(\w+)\((.*)\)/;function An(n){const e=Gb.createSVGMatrix();if(null!=n){const t=n,r=e;for(const i in t)r[i]=t[i]}return e}function yp(n){return null!=n?(n instanceof DOMMatrix||(n=An(n)),Gb.createSVGTransformFromMatrix(n)):Gb.createSVGTransform()}function vp(n){let e=An();const t=null!=n&&n.match(KK);if(!t)return e;for(let r=0,i=t.length;r<i;r+=1){const o=t[r].match(QK);if(o){let a,c,u,d,h,g=An();const m=o[2].split(fL);switch(o[1].toLowerCase()){case"scale":a=parseFloat(m[0]),c=void 0===m[1]?a:parseFloat(m[1]),g=g.scaleNonUniform(a,c);break;case"translate":u=parseFloat(m[0]),d=parseFloat(m[1]),g=g.translate(u,d);break;case"rotate":h=parseFloat(m[0]),u=parseFloat(m[1])||0,d=parseFloat(m[2])||0,g=0!==u||0!==d?g.translate(u,d).rotate(h).translate(-u,-d):g.rotate(h);break;case"skewx":h=parseFloat(m[0]),g=g.skewX(h);break;case"skewy":h=parseFloat(m[0]),g=g.skewY(h);break;case"matrix":g.a=parseFloat(m[0]),g.b=parseFloat(m[1]),g.c=parseFloat(m[2]),g.d=parseFloat(m[3]),g.e=parseFloat(m[4]),g.f=parseFloat(m[5]);break;default:continue}e=e.multiply(g)}}return e}function Uf(n){const e=n||{};return`matrix(${null!=e.a?e.a:1},${null!=e.b?e.b:0},${null!=e.c?e.c:0},${null!=e.d?e.d:1},${null!=e.e?e.e:0},${null!=e.f?e.f:0})`}function qb(n){let e,t,r;if(n){const s=fL;if(n.trim().indexOf("matrix")>=0){const a=function tQ(n){const e=ED(n,{x:0,y:1}),t=ED(n,{x:1,y:0}),r=180/Math.PI*Math.atan2(e.y,e.x)-90;return{skewX:r,skewY:180/Math.PI*Math.atan2(t.y,t.x),translateX:n.e,translateY:n.f,scaleX:Math.sqrt(n.a*n.a+n.b*n.b),scaleY:Math.sqrt(n.c*n.c+n.d*n.d),rotation:r}}(vp(n));e=[a.translateX,a.translateY],t=[a.rotation],r=[a.scaleX,a.scaleY];const c=[];(0!==e[0]||0!==e[1])&&c.push(`translate(${e.join(",")})`),(1!==r[0]||1!==r[1])&&c.push(`scale(${r.join(",")})`),0!==t[0]&&c.push(`rotate(${t[0]})`),n=c.join(" ")}else{const o=n.match(/translate\((.*?)\)/);o&&(e=o[1].split(s));const a=n.match(/rotate\((.*?)\)/);a&&(t=a[1].split(s));const c=n.match(/scale\((.*?)\)/);c&&(r=c[1].split(s))}}const i=r&&r[0]?parseFloat(r[0]):1;return{raw:n||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:t&&t[0]?parseInt(t[0],10):0,cx:t&&t[1]?parseInt(t[1],10):void 0,cy:t&&t[2]?parseInt(t[2],10):void 0},scale:{sx:i,sy:r&&r[1]?parseFloat(r[1]):i}}}function ED(n,e){return{x:e.x*n.a+e.y*n.c+0,y:e.x*n.b+e.y*n.d+0}}function zf(n,e,t={}){if(null==e)return vp(ut(n,"transform"));if(t.absolute)return void n.setAttribute("transform",Uf(e));const r=n.transform,i=yp(e);r.baseVal.appendItem(i)}function dL(n,e,t=0,r={}){let i=ut(n,"transform");const s=qb(i);if(null==e)return s.translation;i=s.raw,i=i.replace(/translate\([^)]*\)/g,"").trim(),n.setAttribute("transform",`translate(${r.absolute?e:s.translation.tx+e},${r.absolute?t:s.translation.ty+t}) ${i}`.trim())}function DD(n,e,t,r,i={}){let s=ut(n,"transform");const o=qb(s);if(null==e)return o.rotation;s=o.raw,s=s.replace(/rotate\([^)]*\)/g,"").trim(),e%=360,n.setAttribute("transform",`${s} rotate(${i.absolute?e:o.rotation.angle+e}${null!=t&&null!=r?`,${t},${r}`:""})`.trim())}function SD(n,e,t){let r=ut(n,"transform");const i=qb(r);if(null==e)return i.scale;t=t??e,r=i.raw,r=r.replace(/scale\([^)]*\)/g,"").trim(),n.setAttribute("transform",`${r} scale(${e},${t})`.trim())}function bp(n,e){if(Aa(e)&&Aa(n)){const t=e.getScreenCTM(),r=n.getScreenCTM();if(t&&r)return t.inverse().multiply(r)}return An()}var Mi,sl,Ie,Gf,wp,yr,Cp;!function(n){const e={};n.get=function t(s){return e[s]||{}},n.register=function r(s,o){e[s]=o},n.unregister=function i(s){delete e[s]}}(Mi||(Mi={})),function(n){const e=new WeakMap;n.ensure=function t(s){return e.has(s)||e.set(s,{events:Object.create(null)}),e.get(s)},n.get=function r(s){return e.get(s)},n.remove=function i(s){return e.delete(s)}}(sl||(sl={})),function(n){n.returnTrue=()=>!0,n.returnFalse=()=>!1,n.stopPropagationCallback=function e(i){i.stopPropagation()},n.addEventListener=function t(i,s,o){null!=i.addEventListener&&i.addEventListener(s,o)},n.removeEventListener=function r(i,s,o){null!=i.removeEventListener&&i.removeEventListener(s,o)}}(Ie||(Ie={})),function(n){const e=/[^\x20\t\r\n\f]+/g,t=/^([^.]*)(?:\.(.+)|)/;n.splitType=function r(a){return(a||"").match(e)||[""]},n.normalizeType=function i(a){const c=t.exec(a)||[];return{originType:c[1]?c[1].trim():c[1],namespaces:c[2]?c[2].split(".").map(u=>u.trim()).sort():[]}},n.isValidTarget=function s(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},n.isValidSelector=function o(a,c){return!c||null!=a.querySelector&&null!=a.querySelector(c)}}(Ie||(Ie={})),function(n){let e=0;const t=new WeakMap;n.ensureHandlerId=function r(a){return t.has(a)||(t.set(a,e),e+=1),t.get(a)},n.getHandlerId=function i(a){return t.get(a)},n.removeHandlerId=function s(a){return t.delete(a)},n.setHandlerId=function o(a,c){return t.set(a,c)}}(Ie||(Ie={})),function(n){n.getHandlerQueue=function e(t,r){const i=[],s=sl.get(t),o=s&&s.events&&s.events[r.type],a=o&&o.handlers||[],c=o?o.delegateCount:0;if(c>0&&!("click"===r.type&&"number"==typeof r.button&&r.button>=1))for(let u=r.target;u!==t;u=u.parentNode||t)if(1===u.nodeType&&("click"!==r.type||!0!==u.disabled)){const d=[],h={};for(let g=0;g<c;g+=1){const m=a[g],y=m.selector;if(null!=y&&null==h[y]){const w=[];t.querySelectorAll(y).forEach(_=>{w.push(_)}),h[y]=w.includes(u)}h[y]&&d.push(m)}d.length&&i.push({elem:u,handlers:d})}return c<a.length&&i.push({elem:t,handlers:a.slice(c)}),i}}(Ie||(Ie={})),function(n){n.isWindow=function e(t){return null!=t&&t===t.window}}(Ie||(Ie={})),function(n){n.contains=function e(t,r){const i=9===t.nodeType?t.documentElement:t,s=r&&r.parentNode;return t===s||!(!s||1!==s.nodeType||!(i.contains?i.contains(s):t.compareDocumentPosition&&16&t.compareDocumentPosition(s)))}}(Ie||(Ie={}));class Ls{constructor(e,t){this.isDefaultPrevented=Ie.returnFalse,this.isPropagationStopped=Ie.returnFalse,this.isImmediatePropagationStopped=Ie.returnFalse,this.isSimulated=!1,this.preventDefault=()=>{const r=this.originalEvent;this.isDefaultPrevented=Ie.returnTrue,r&&!this.isSimulated&&r.preventDefault()},this.stopPropagation=()=>{const r=this.originalEvent;this.isPropagationStopped=Ie.returnTrue,r&&!this.isSimulated&&r.stopPropagation()},this.stopImmediatePropagation=()=>{const r=this.originalEvent;this.isImmediatePropagationStopped=Ie.returnTrue,r&&!this.isSimulated&&r.stopImmediatePropagation(),this.stopPropagation()},"string"==typeof e?this.type=e:e.type&&(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Ie.returnTrue:Ie.returnFalse,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.timeStamp=e.timeStamp),t&&Object.assign(this,t),this.timeStamp||(this.timeStamp=Date.now())}}(function(n){n.create=function e(t){return t instanceof n?t:new n(t)}})(Ls||(Ls={})),function(n){n.addProperty=function e(t,r){Object.defineProperty(n.prototype,t,{enumerable:!0,configurable:!0,get:"function"==typeof r?function(){if(this.originalEvent)return r(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set(i){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:i})}})}}(Ls||(Ls={})),function(n){const e={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(e).forEach(t=>n.addProperty(t,e[t]))}(Ls||(Ls={})),Gf||(Gf={}),Mi.register("load",{noBubble:!0}),Gf||(Gf={}),Mi.register("beforeunload",{postDispatch(e,t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}),Gf||(Gf={}),Mi.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(e,t){let r;const i=t.relatedTarget,s=t.handleObj;return(!i||i!==e&&!Ie.contains(e,i))&&(t.type=s.originType,r=s.handler.call(e,t),t.type="mouseover"),r}}),Mi.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(e,t){let r;const i=t.relatedTarget,s=t.handleObj;return(!i||i!==e&&!Ie.contains(e,i))&&(t.type=s.originType,r=s.handler.call(e,t),t.type="mouseout"),r}}),function(n){let e;function i(o,a,...c){const u=Ls.create(a);u.delegateTarget=o;const d=Mi.get(u.type);if(d.preDispatch&&!1===d.preDispatch(o,u))return;const h=Ie.getHandlerQueue(o,u);for(let g=0,m=h.length;g<m&&!u.isPropagationStopped();g+=1){const y=h[g];u.currentTarget=y.elem;for(let v=0,w=y.handlers.length;v<w&&!u.isImmediatePropagationStopped();v+=1){const _=y.handlers[v];if(null==u.rnamespace||_.namespace&&u.rnamespace.test(_.namespace)){u.handleObj=_,u.data=_.data;const C=Mi.get(_.originType).handle,E=C?C(y.elem,u,...c):_.handler.call(y.elem,u,...c);void 0!==E&&(u.result=E,!1===E&&(u.preventDefault(),u.stopPropagation()))}}}return d.postDispatch&&d.postDispatch(o,u),u.result}n.on=function t(o,a,c,u,d){if(!Ie.isValidTarget(o))return;let h;if("function"!=typeof c){const{handler:v,selector:w}=c,_=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(c,["handler","selector"]);c=v,d=w,h=_}const g=sl.ensure(o);let m=g.handler;null==m&&(m=g.handler=function(v,...w){return e!==v.type?i(o,v,...w):void 0});const y=Ie.ensureHandlerId(c);Ie.splitType(a).forEach(v=>{const{originType:w,namespaces:_}=Ie.normalizeType(v);if(!w)return;let C=w,E=Mi.get(C);C=(d?E.delegateType:E.bindType)||C,E=Mi.get(C);const A=Object.assign({type:C,originType:w,data:u,selector:d,guid:y,handler:c,namespace:_.join(".")},h),P=g.events;let L=P[C];L||(L=P[C]={handlers:[],delegateCount:0},(!E.setup||!1===E.setup(o,u,_,m))&&Ie.addEventListener(o,C,m)),E.add&&(Ie.removeHandlerId(A.handler),E.add(o,A),Ie.setHandlerId(A.handler,y)),d?(L.handlers.splice(L.delegateCount,0,A),L.delegateCount+=1):L.handlers.push(A)})},n.off=function r(o,a,c,u,d){const h=sl.get(o);if(!h)return;const g=h.events;g&&(Ie.splitType(a).forEach(m=>{const{originType:y,namespaces:v}=Ie.normalizeType(m);if(!y)return void Object.keys(g).forEach(P=>{r(o,P+m,c,u,!0)});let w=y;const _=Mi.get(w);w=(u?_.delegateType:_.bindType)||w;const C=g[w]||{},E=v.length>0?new RegExp(`(^|\\.)${v.join("\\.(?:.*\\.|)")}(\\.|$)`):null,A=C.handlers.length;for(let P=C.handlers.length-1;P>=0;P-=1){const L=C.handlers[P];(d||y===L.originType)&&(!c||Ie.getHandlerId(c)===L.guid)&&(null==E||L.namespace&&E.test(L.namespace))&&(null==u||u===L.selector||"**"===u&&L.selector)&&(C.handlers.splice(P,1),L.selector&&(C.delegateCount-=1),_.remove&&_.remove(o,L))}A&&0===C.handlers.length&&((!_.teardown||!1===_.teardown(o,v,h.handler))&&Ie.removeEventListener(o,w,h.handler),delete g[w])}),0===Object.keys(g).length&&sl.remove(o))},n.dispatch=i,n.trigger=function s(o,a,c,u){let d=o,h="string"==typeof o?o:o.type,g="string"==typeof o||null==d.namespace?[]:d.namespace.split(".");const m=c;if(3===m.nodeType||8===m.nodeType)return;h.indexOf(".")>-1&&(g=h.split("."),h=g.shift(),g.sort());const y=h.indexOf(":")<0&&`on${h}`;d=o instanceof Ls?o:new Ls(h,"object"==typeof o?o:null),d.namespace=g.join("."),d.rnamespace=d.namespace?new RegExp(`(^|\\.)${g.join("\\.(?:.*\\.|)")}(\\.|$)`):null,d.result=void 0,d.target||(d.target=m);const v=[d];Array.isArray(a)?v.push(...a):v.push(a);const w=Mi.get(h);if(!u&&w.trigger&&!1===w.trigger(m,d,a))return;let _;const C=[m];if(!u&&!w.noBubble&&!Ie.isWindow(m)){_=w.delegateType||h;let A=m,P=m.parentNode;for(;null!=P;)C.push(P),A=P,P=P.parentNode;if(A===(m.ownerDocument||document)){const V=A.defaultView||A.parentWindow||window;C.push(V)}}let E=m;for(let A=0,P=C.length;A<P&&!d.isPropagationStopped();A+=1){const L=C[A];E=L,d.type=A>1?_:w.bindType||h;const V=sl.get(L);V&&V.events[d.type]&&V.handler&&V.handler.call(L,...v);const G=y&&L[y]||null;G&&Ie.isValidTarget(L)&&(d.result=G.call(L,...v),!1===d.result&&d.preventDefault())}if(d.type=h,!u&&!d.isDefaultPrevented()){const A=w.preventDefault;if((null==A||!1===A(C.pop(),d,a))&&Ie.isValidTarget(m)&&y&&"function"==typeof m[h]&&!Ie.isWindow(m)){const P=m[y];P&&(m[y]=null),e=h,d.isPropagationStopped()&&E.addEventListener(h,Ie.stopPropagationCallback),m[h](),d.isPropagationStopped()&&E.removeEventListener(h,Ie.stopPropagationCallback),e=void 0,P&&(m[y]=P)}}return d.result}}(wp||(wp={})),function(n){n.on=function e(s,o,a,c,u){return Cp.on(s,o,a,c,u),s},n.once=function t(s,o,a,c,u){return Cp.on(s,o,a,c,u,!0),s},n.off=function r(s,o,a,c){return Cp.off(s,o,a,c),s},n.trigger=function i(s,o,a,c){return wp.trigger(o,a,s,c),s}}(yr||(yr={})),function(n){n.on=function e(r,i,s,o,a,c){if("object"==typeof i)return"string"!=typeof s&&(o=o||s,s=void 0),void Object.keys(i).forEach(u=>e(r,u,s,o,i[u],c));if(null==o&&null==a?(a=s,o=s=void 0):null==a&&("string"==typeof s?(a=o,o=void 0):(a=o,o=s,s=void 0)),!1===a)a=Ie.returnFalse;else if(!a)return;if(c){const u=a;Ie.setHandlerId(a=function(d,...h){return n.off(r,d),u.call(this,d,...h)},Ie.ensureHandlerId(u))}wp.on(r,i,a,o,s)},n.off=function t(r,i,s,o){if(i&&null!=i.preventDefault&&null!=i.handleObj){const c=i.handleObj;t(i.delegateTarget,c.namespace?`${c.originType}.${c.namespace}`:c.originType,c.selector,c.handler)}else if("object"!=typeof i)(!1===s||"function"==typeof s)&&(o=s,s=void 0),!1===o&&(o=Ie.returnFalse),wp.off(r,i,o,s);else{const c=i;Object.keys(c).forEach(u=>t(r,u,s,c[u]))}}}(Cp||(Cp={}));class hL{constructor(e,t,r){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=Sa.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=t,this.onWheelGuard=r,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(e){if(null!=this.onWheelGuard&&!this.onWheelGuard(e))return;let t;this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault(),(0!==this.deltaX||0!==this.deltaY)&&(e.stopPropagation(),t=!0),!0===t&&0===this.animationFrameId&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(e)}))}didWheel(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function pL(n,e=60){let t=null;return(...r)=>{t&&clearTimeout(t),t=window.setTimeout(()=>{n.apply(this,r)},e)}}const uQ=typeof ResizeObserver<"u"?function lQ(n){let e=null,t=[];const r=pL(()=>{t.forEach(c=>{c(n)})}),o=()=>{e&&(e.disconnect(),t=[],e=null)};return{element:n,bind:c=>{e||(e=(()=>{const c=new ResizeObserver(r);return c.observe(n),r(),c})()),-1===t.indexOf(c)&&t.push(c)},destroy:o,unbind:c=>{const u=t.indexOf(c);-1!==u&&t.splice(u,1),0===t.length&&e&&o()}}}:function cQ(n){let e=null,t=[];const i=pL(()=>{t.forEach(c=>c(n))}),o=()=>{e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",i),e.parentNode.removeChild(e),e=null,t=[])};return{element:n,bind:c=>{e||(e=(()=>{"static"===getComputedStyle(n).position&&(n.style.position="relative");const c=document.createElement("object");return c.onload=()=>{c.contentDocument.defaultView.addEventListener("resize",i),i()},c.style.display="block",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.height="100%",c.style.width="100%",c.style.overflow="hidden",c.style.pointerEvents="none",c.style.zIndex="-1",c.style.opacity="0",c.setAttribute("tabindex","-1"),c.type="text/html",n.appendChild(c),c.data="about:blank",c})()),-1===t.indexOf(c)&&t.push(c)},destroy:o,unbind:c=>{const u=t.indexOf(c);-1!==u&&t.splice(u,1),0===t.length&&e&&o()}}};var Wb,AD,qf;!function(n){const e=new WeakMap;function t(i){let s=e.get(i);return s||(s=uQ(i),e.set(i,s),s)}n.bind=(i,s)=>{const o=t(i);return o.bind(s),()=>o.unbind(s)},n.clear=i=>{!function r(i){i.destroy(),e.delete(i.element)}(t(i))}}(Wb||(Wb={}));class _p{constructor(e={}){this.comparator=e.comparator||_p.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}isEmpty(){return 0===this.data.length}insert(e,t,r){const i={priority:e,value:t},s=this.data.length;return r&&(i.id=r,this.index[r]=s),this.data.push(i),this.bubbleUp(s),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(e,t){const r=this.index[e];if(typeof r>"u")throw new Error(`Node with id '${e}' was not found in the heap.`);const i=this.data,o=this.comparator(t,i[r].priority);o<0?(i[r].priority=t,this.bubbleUp(r)):o>0&&(i[r].priority=t,this.bubbleDown(r))}remove(){const e=this.data,t=e[0],r=e.pop();return t.id&&delete this.index[t.id],e.length>0&&(e[0]=r,r.id&&(this.index[r.id]=0),this.bubbleDown(0)),t?t.value:null}heapify(){for(let e=0;e<this.data.length;e+=1)this.bubbleUp(e)}bubbleUp(e){const t=this.data;let r,i,s=e;for(;s>0&&(i=s-1>>>1,this.comparator(t[s].priority,t[i].priority)<0);){r=t[i],t[i]=t[s];let o=t[s].id;null!=o&&(this.index[o]=i),t[s]=r,o=t[s].id,null!=o&&(this.index[o]=s),s=i}}bubbleDown(e){const t=this.data,r=t.length-1;let i=e;for(;;){const s=1+(i<<1),o=s+1;let a=i;if(s<=r&&this.comparator(t[s].priority,t[a].priority)<0&&(a=s),o<=r&&this.comparator(t[o].priority,t[a].priority)<0&&(a=o),a===i)break;{const c=t[a];t[a]=t[i];let u=t[i].id;null!=u&&(this.index[u]=a),t[i]=c,u=t[i].id,null!=u&&(this.index[u]=i),i=a}}}}!function(n){n.defaultComparator=(e,t)=>e-t}(_p||(_p={})),function(n){n.run=function e(t,r,i=((s,o)=>1)){const s={},o={},a={},c=new _p;for(s[r]=0,Object.keys(t).forEach(u=>{u!==r&&(s[u]=1/0),c.insert(s[u],u,u)});!c.isEmpty();){const u=c.remove();a[u]=!0;const d=t[u]||[];for(let h=0;h<d.length;h+=1){const g=d[h];if(!a[g]){const m=s[u]+i(u,g);m<s[g]&&(s[g]=m,o[g]=u,c.updatePriority(g,m))}}}return o}}(AD||(AD={}));class Eo{constructor(e,t,r,i){return null==e?this.set(255,255,255,1):"number"==typeof e?this.set(e,t,r,i):"string"==typeof e?Eo.fromString(e)||this:Array.isArray(e)?this.set(e):void this.set(e.r,e.g,e.b,null==e.a?1:e.a)}blend(e,t,r){this.set(e.r+(t.r-e.r)*r,e.g+(t.g-e.g)*r,e.b+(t.b-e.b)*r,e.a+(t.a-e.a)*r)}lighten(e){const t=Eo.lighten(this.toArray(),e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}darken(e){this.lighten(-e)}set(e,t,r,i){const s=Array.isArray(e)?e[0]:e,o=Array.isArray(e)?e[1]:t,a=Array.isArray(e)?e[2]:r,c=Array.isArray(e)?e[3]:i;return this.r=Math.round(Si(s,0,255)),this.g=Math.round(Si(o,0,255)),this.b=Math.round(Si(a,0,255)),this.a=null==c?1:Si(c,0,1),this}toHex(){return`#${["r","g","b"].map(t=>{const r=this[t].toString(16);return r.length<2?`0${r}`:r}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return Eo.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(e){const t=`${this.r},${this.g},${this.b},`;return e?`rgb(${t})`:`rgba(${t},${this.a})`}toGrey(){return Eo.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(n){function t(E){return new n([...y(E),1])}function r(E){const A=E.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(A){const P=A[1].split(/\s*,\s*/).map(L=>parseInt(L,10));return new n(P)}return null}function i(E,A,P){P<0&&++P,P>1&&--P;const L=6*P;return L<1?E+(A-E)*L:2*P<1?A:3*P<2?E+(A-E)*(2/3-P)*6:E}function s(E){const A=E.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(A){const P=A[2].split(/\s*,\s*/),L=(parseFloat(P[0])%360+360)%360/360,V=parseFloat(P[1])/100,G=parseFloat(P[2])/100,q=null==P[3]?1:parseInt(P[3],10);return new n(u(L,V,G,q))}return null}function u(E,A,P,L){const V=Array.isArray(E)?E[0]:E,G=Array.isArray(E)?E[1]:A,q=Array.isArray(E)?E[2]:P,te=Array.isArray(E)?E[3]:L,Z=q<=.5?q*(G+1):q+G-q*G,ie=2*q-Z;return[256*i(ie,Z,V+1/3),256*i(ie,Z,V),256*i(ie,Z,V-1/3),te??1]}function d(E){return new n(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),E?void 0:parseFloat(Math.random().toFixed(2)))}function y(E){const A=0===E.indexOf("#")?E:`#${E}`;let P=+`0x${A.substr(1)}`;if(4!==A.length&&7!==A.length||Number.isNaN(P))throw new Error("Invalid hex color.");const L=4===A.length?4:8,V=(1<<L)-1,G=["b","g","r"].map(()=>{const q=P&V;return P>>=L,4===L?17*q:q});return[G[2],G[1],G[0]]}function v(E,A,P){const L=V=>V.length<2?`0${V}`:V;return`${L(E.toString(16))}${L(A.toString(16))}${L(P.toString(16))}`}function C(E,A){if("string"==typeof E){const V="#"===E[0],G=parseInt(V?E.substr(1):E,16),q=Si((G>>16)+A,0,255),te=Si((G>>8&255)+A,0,255);return`${V?"#":""}${(Si((255&G)+A,0,255)|te<<8|q<<16).toString(16)}`}const L=y(C(v(E[0],E[1],E[2]),A));return[L[0],L[1],L[2],E[3]]}n.fromArray=function e(E){return new n(E)},n.fromHex=t,n.fromRGBA=r,n.fromHSLA=s,n.fromString=function o(E){if(E.startsWith("#"))return t(E);if(E.startsWith("rgb"))return r(E);const A=n.named[E];return A?t(A):s(E)},n.makeGrey=function a(E,A){return n.fromArray([E,E,E,A])},n.rgba2hsla=function c(E,A,P,L){const V=Array.isArray(E)?E[0]:E,G=Array.isArray(E)?E[1]:A,q=Array.isArray(E)?E[2]:P,te=Array.isArray(E)?E[3]:L,Z=Math.max(V,G,q),ie=Math.min(V,G,q),wt=(Z+ie)/2;let je=0,F=0;if(ie!==Z){const z=Z-ie;switch(F=wt>.5?z/(2-Z-ie):z/(Z+ie),Z){case V:je=(G-q)/z+(G<q?6:0);break;case G:je=(q-V)/z+2;break;case q:je=(V-G)/z+4}je/=6}return[je,F,wt,te??1]},n.hsla2rgba=u,n.random=d,n.randomHex=function h(){let A="#";for(let P=0;P<6;P+=1)A+="0123456789ABCDEF"[Math.floor(16*Math.random())];return A},n.randomRGBA=function g(E){return d(E).toString()},n.invert=function m(E,A){if("string"==typeof E){const q="#"===E[0],[te,Z,ie]=y(E);return A?.299*te+.587*Z+.114*ie>186?"#000000":"#ffffff":`${q?"#":""}${v(255-te,255-Z,255-ie)}`}const P=E[0],L=E[1],V=E[2],G=E[3];return A?.299*P+.587*L+.114*V>186?[0,0,0,G]:[255,255,255,G]:[255-P,255-L,255-V,G]},n.lighten=function w(E,A){return C(E,A)},n.darken=function _(E,A){return C(E,-A)}})(Eo||(Eo={})),function(n){n.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(Eo||(Eo={}));class MD{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t),this.arr.push(e)}delete(e){const t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);const r=this.map.get(e);return this.map.delete(e),r}each(e){this.arr.forEach(t=>{const r=this.map.get(t);e(r,t)})}dispose(){this.clear()}}!function(n){function e(i){const s=[],o=[];return Array.isArray(i)?s.push(...i):i.split("|").forEach(a=>{-1===a.indexOf("&")?s.push(a):o.push(...a.split("&"))}),{or:s,and:o}}n.parse=e,n.equals=function t(i,s){if(null!=i&&null!=s){const o=e(i),a=e(s),c=o.or.sort(),u=a.or.sort(),d=o.and.sort(),h=a.and.sort(),g=(m,y)=>m.length===y.length&&(0===m.length||m.every((v,w)=>v===y[w]));return g(c,u)&&g(d,h)}return null==i&&null==s},n.isMatch=function r(i,s,o){if(null==s||Array.isArray(s)&&0===s.length)return!o||!0!==i.altKey&&!0!==i.ctrlKey&&!0!==i.metaKey&&!0!==i.shiftKey;const{or:a,and:c}=e(s),u=d=>{const h=`${d.toLowerCase()}Key`;return!0===i[h]};return a.some(d=>u(d))&&c.every(d=>u(d))}}(qf||(qf={}));var Wf=function(n){return n.linear=e=>e,n.quad=e=>e*e,n.cubic=e=>e*e*e,n.inout=e=>{if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)},n.exponential=e=>Math.pow(2,10*(e-1)),n.bounce=e=>{for(let t=0,r=1;;t+=r,r/=2)if(e>=(7-4*t)/11){const i=(11-6*t-11*e)/4;return-i*i+r*r}},n}(Wf||{});(function(n){n.decorators={reverse:e=>t=>1-e(1-t),reflect:e=>t=>.5*(t<.5?e(2*t):2-e(2-2*t)),clamp:(e,t=0,r=1)=>i=>{const s=e(i);return s<t?t:s>r?r:s},back:(e=1.70158)=>t=>t*t*((e+1)*t-e),elastic:(e=1.5)=>t=>Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}})(Wf||(Wf={})),function(n){function ie(F){const z=F/1;if(z<1/2.75)return 7.5625*z*z;if(z<2/2.75){const Ae=z-.5454545454545454;return 7.5625*Ae*Ae+.75}if(z<2.5/2.75){const Ae=z-.8181818181818182;return 7.5625*Ae*Ae+.9375}{const Ae=z-.9545454545454546;return 7.5625*Ae*Ae+.984375}}function wt(F){return 1-ie(1-F)}n.easeInSine=function e(F){return-1*Math.cos(F*(Math.PI/2))+1},n.easeOutSine=function t(F){return Math.sin(F*(Math.PI/2))},n.easeInOutSine=function r(F){return-.5*(Math.cos(Math.PI*F)-1)},n.easeInQuad=function i(F){return F*F},n.easeOutQuad=function s(F){return F*(2-F)},n.easeInOutQuad=function o(F){return F<.5?2*F*F:(4-2*F)*F-1},n.easeInCubic=function a(F){return F*F*F},n.easeOutCubic=function c(F){const z=F-1;return z*z*z+1},n.easeInOutCubic=function u(F){return F<.5?4*F*F*F:(F-1)*(2*F-2)*(2*F-2)+1},n.easeInQuart=function d(F){return F*F*F*F},n.easeOutQuart=function h(F){const z=F-1;return 1-z*z*z*z},n.easeInOutQuart=function g(F){const z=F-1;return F<.5?8*F*F*F*F:1-8*z*z*z*z},n.easeInQuint=function m(F){return F*F*F*F*F},n.easeOutQuint=function y(F){const z=F-1;return 1+z*z*z*z*z},n.easeInOutQuint=function v(F){const z=F-1;return F<.5?16*F*F*F*F*F:1+16*z*z*z*z*z},n.easeInExpo=function w(F){return 0===F?0:Math.pow(2,10*(F-1))},n.easeOutExpo=function _(F){return 1===F?1:1-Math.pow(2,-10*F)},n.easeInOutExpo=function C(F){if(0===F||1===F)return F;const z=2*F,Ae=z-1;return z<1?.5*Math.pow(2,10*Ae):.5*(2-Math.pow(2,-10*Ae))},n.easeInCirc=function E(F){return-1*(Math.sqrt(1-F/1*F)-1)},n.easeOutCirc=function A(F){const z=F-1;return Math.sqrt(1-z*z)},n.easeInOutCirc=function P(F){const z=2*F,Ae=z-2;return z<1?-.5*(Math.sqrt(1-z*z)-1):.5*(Math.sqrt(1-Ae*Ae)+1)},n.easeInBack=function L(F,z=1.70158){return F*F*((z+1)*F-z)},n.easeOutBack=function V(F,z=1.70158){const Ae=F/1-1;return Ae*Ae*((z+1)*Ae+z)+1},n.easeInOutBack=function G(F,z=1.70158){const Ae=2*F,It=Ae-2,Tt=1.525*z;return Ae<1?.5*Ae*Ae*((Tt+1)*Ae-Tt):.5*(It*It*((Tt+1)*It+Tt)+2)},n.easeInElastic=function q(F,z=.7){if(0===F||1===F)return F;const It=F/1-1,Tt=1-z,yn=Tt/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*It)*Math.sin((It-yn)*(2*Math.PI)/Tt)},n.easeOutElastic=function te(F,z=.7){const Ae=1-z,It=2*F;if(0===F||1===F)return F;const Tt=Ae/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*It)*Math.sin((It-Tt)*(2*Math.PI)/Ae)+1},n.easeInOutElastic=function Z(F,z=.65){const Ae=1-z;if(0===F||1===F)return F;const It=2*F,Tt=It-1,yn=Ae/(2*Math.PI)*Math.asin(1);return It<1?Math.pow(2,10*Tt)*Math.sin((Tt-yn)*(2*Math.PI)/Ae)*-.5:Math.pow(2,-10*Tt)*Math.sin((Tt-yn)*(2*Math.PI)/Ae)*.5+1},n.easeOutBounce=ie,n.easeInBounce=wt,n.easeInOutBounce=function je(F){return F<.5?.5*wt(2*F):.5*ie(2*F-1)+.5}}(Wf||(Wf={}));var Yf=function(n){return n.number=(e,t)=>{const r=t-e;return i=>e+r*i},n.object=(e,t)=>{const r=Object.keys(e);return i=>{const s={};for(let o=r.length-1;-1!==o;o-=1){const a=r[o];s[a]=e[a]+(t[a]-e[a])*i}return s}},n.unit=(e,t)=>{const r=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=r.exec(e),s=r.exec(t),o=s?s[1]:"",a=i?+i[1]:0,c=s?+s[1]:0,u=o.indexOf("."),d=u>0?o[1].length-u-1:0,h=c-a,g=i?i[2]:"";return m=>(a+h*m).toFixed(d)+g},n.color=(e,t)=>{const r=parseInt(e.slice(1),16),i=parseInt(t.slice(1),16),s=255&r,o=(255&i)-s,a=65280&r,c=(65280&i)-a,u=16711680&r,d=(16711680&i)-u;return h=>`#${(1<<24|s+o*h&255|a+c*h&65280|u+d*h&16711680).toString(16).slice(1)}`},n}(Yf||{});const xp=[];var bt,ft;!function(n){n.toDeg=function e(r){return 180*r/Math.PI%360},n.toRad=function(r,i=!1){return(i?r:r%360)*Math.PI/180},n.normalize=function t(r){return r%360+(r<0?360:0)}}(bt||(bt={})),function(n){n.round=function e(a,c=0){return Number.isInteger(a)?a:+a.toFixed(c)},n.random=function t(a,c){let u,d;if(null==c?(d=a??1,u=0):(d=c,u=a??0),d<u){const h=u;u=d,d=h}return Math.floor(Math.random()*(d-u+1)+u)},n.clamp=function r(a,c,u){return Number.isNaN(a)?NaN:Number.isNaN(c)||Number.isNaN(u)?0:c<u?a<c?c:a>u?u:a:a<u?u:a>c?c:a},n.snapToGrid=function i(a,c){return c*Math.round(a/c)},n.containsPoint=function s(a,c){return null!=c&&null!=a&&c.x>=a.x&&c.x<=a.x+a.width&&c.y>=a.y&&c.y<=a.y+a.height},n.squaredLength=function o(a,c){const u=a.x-c.x,d=a.y-c.y;return u*u+d*d}}(ft||(ft={}));class Ma{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class T extends Ma{constructor(e,t){super(),this.x=e??0,this.y=t??0}round(e=0){return this.x=ft.round(this.x,e),this.y=ft.round(this.y,e),this}add(e,t){const r=T.create(e,t);return this.x+=r.x,this.y+=r.y,this}update(e,t){const r=T.create(e,t);return this.x=r.x,this.y=r.y,this}translate(e,t){const r=T.create(e,t);return this.x+=r.x,this.y+=r.y,this}rotate(e,t){const r=T.rotate(this,e,t);return this.x=r.x,this.y=r.y,this}scale(e,t,r=new T){const i=T.create(r);return this.x=i.x+e*(this.x-i.x),this.y=i.y+t*(this.y-i.y),this}closest(e){if(1===e.length)return T.create(e[0]);let t=null,r=1/0;return e.forEach(i=>{const s=this.squaredDistance(i);s<r&&(t=i,r=s)}),t?T.create(t):null}distance(e){return Math.sqrt(this.squaredDistance(e))}squaredDistance(e){const t=T.create(e),r=this.x-t.x,i=this.y-t.y;return r*r+i*i}manhattanDistance(e){const t=T.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(e=new T){const t=T.create(e);let s=Math.atan2(-(t.y-this.y),t.x-this.x);return s<0&&(s=2*Math.PI+s),180*s/Math.PI}angleBetween(e,t){if(this.equals(e)||this.equals(t))return NaN;let r=this.theta(t)-this.theta(e);return r<0&&(r+=360),r}vectorAngle(e){return new T(0,0).angleBetween(this,e)}toPolar(e){return this.update(T.toPolar(this,e)),this}changeInAngle(e,t,r=new T){return this.clone().translate(-e,-t).theta(r)-this.theta(r)}adhereToRect(e){return ft.containsPoint(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const t=T.create(e),r=bt.toRad(this.y),i=bt.toRad(t.y),a=bt.toRad(t.x-this.x),c=Math.sin(a)*Math.cos(i),u=Math.cos(r)*Math.sin(i)-Math.sin(r)*Math.cos(i)*Math.cos(a);let g=bt.toDeg(Math.atan2(c,u))-22.5;return g<0&&(g+=360),g=parseInt(g/45,10),["NE","E","SE","S","SW","W","NW","N"][g]}cross(e,t){if(null!=e&&null!=t){const r=T.create(e),i=T.create(t);return(i.x-this.x)*(r.y-this.y)-(i.y-this.y)*(r.x-this.x)}return NaN}dot(e){const t=T.create(e);return this.x*t.x+this.y*t.y}diff(e,t){if("number"==typeof e)return new T(this.x-e,this.y-t);const r=T.create(e);return new T(this.x-r.x,this.y-r.y)}lerp(e,t){const r=T.create(e);return new T((1-t)*this.x+t*r.x,(1-t)*this.y+t*r.y)}normalize(e=1){const t=e/this.magnitude();return this.scale(t,t)}move(e,t){const r=T.create(e),i=bt.toRad(r.theta(this));return this.translate(Math.cos(i)*t,-Math.sin(i)*t)}reflection(e){return T.create(e).move(this,this.distance(e))}snapToGrid(e,t){return this.x=ft.snapToGrid(this.x,e),this.y=ft.snapToGrid(this.y,t??e),this}equals(e){const t=T.create(e);return null!=t&&t.x===this.x&&t.y===this.y}clone(){return T.clone(this)}toJSON(){return T.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(n){n.isPoint=function e(t){return null!=t&&t instanceof n}})(T||(T={})),function(n){n.isPointLike=function e(r){return null!=r&&"object"==typeof r&&"number"==typeof r.x&&"number"==typeof r.y},n.isPointData=function t(r){return null!=r&&Array.isArray(r)&&2===r.length&&"number"==typeof r[0]&&"number"==typeof r[1]}}(T||(T={})),function(n){function t(h){return n.isPoint(h)?new n(h.x,h.y):Array.isArray(h)?new n(h[0],h[1]):new n(h.x,h.y)}function o(h,g){return h===g||null!=h&&null!=g&&h.x===g.x&&h.y===g.y}function d(h,g,m,y=new n){const v=t(h),w=t(y),_=v.x-w.x,C=v.y-w.y;return new n(_*g-C*m+w.x,C*g+_*m+w.y)}n.create=function e(h,g){return null==h||"number"==typeof h?new n(h,g):t(h)},n.clone=t,n.toJSON=function r(h){return n.isPoint(h)?{x:h.x,y:h.y}:Array.isArray(h)?{x:h[0],y:h[1]}:{x:h.x,y:h.y}},n.fromPolar=function i(h,g,m=new n){let y=Math.abs(h*Math.cos(g)),v=Math.abs(h*Math.sin(g));const w=t(m),_=bt.normalize(bt.toDeg(g));return _<90?v=-v:_<180?(y=-y,v=-v):_<270&&(y=-y),new n(w.x+y,w.y+v)},n.toPolar=function s(h,g=new n){const m=t(h),y=t(g),v=m.x-y.x,w=m.y-y.y;return new n(Math.sqrt(v*v+w*w),bt.toRad(y.theta(m)))},n.equals=o,n.equalPoints=function a(h,g){if(null==h&&null!=g||null!=h&&null==g||null!=h&&null!=g&&h.length!==g.length)return!1;if(null!=h&&null!=g)for(let m=0,y=h.length;m<y;m+=1)if(!o(h[m],g[m]))return!1;return!0},n.random=function c(h,g,m,y){return new n(ft.random(h,g),ft.random(m,y))},n.rotate=function u(h,g,m){const y=bt.toRad(bt.normalize(-g)),v=Math.sin(y);return d(h,Math.cos(y),v,m)},n.rotateEx=d}(T||(T={}));class Y extends Ma{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new T(this.x,this.y)}get topLeft(){return new T(this.x,this.y)}get topCenter(){return new T(this.x+this.width/2,this.y)}get topRight(){return new T(this.x+this.width,this.y)}get center(){return new T(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new T(this.x,this.y+this.height)}get bottomCenter(){return new T(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new T(this.x+this.width,this.y+this.height)}get corner(){return new T(this.x+this.width,this.y+this.height)}get rightMiddle(){return new T(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new T(this.x,this.y+this.height/2)}get topLine(){return new Q(this.topLeft,this.topRight)}get rightLine(){return new Q(this.topRight,this.bottomRight)}get bottomLine(){return new Q(this.bottomLeft,this.bottomRight)}get leftLine(){return new Q(this.topLeft,this.bottomLeft)}constructor(e,t,r,i){super(),this.x=e??0,this.y=t??0,this.width=r??0,this.height=i??0}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const t=bt.toRad(e),r=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t)),s=this.width*i+this.height*r,o=this.width*r+this.height*i;return new Y(this.x+(this.width-s)/2,this.y+(this.height-o)/2,s,o)}round(e=0){return this.x=ft.round(this.x,e),this.y=ft.round(this.y,e),this.width=ft.round(this.width,e),this.height=ft.round(this.height,e),this}add(e,t,r,i){const s=Y.create(e,t,r,i),o=Math.min(this.x,s.x),a=Math.min(this.y,s.y),c=Math.max(this.x+this.width,s.x+s.width),u=Math.max(this.y+this.height,s.y+s.height);return this.x=o,this.y=a,this.width=c-o,this.height=u-a,this}update(e,t,r,i){const s=Y.create(e,t,r,i);return this.x=s.x,this.y=s.y,this.width=s.width,this.height=s.height,this}inflate(e,t){const r=e,i=t??e;return this.x-=r,this.y-=i,this.width+=2*r,this.height+=2*i,this}snapToGrid(e,t){const r=this.origin.snapToGrid(e,t),i=this.corner.snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=i.x-r.x,this.height=i.y-r.y,this}translate(e,t){const r=T.create(e,t);return this.x+=r.x,this.y+=r.y,this}scale(e,t,r=new T){const i=this.origin.scale(e,t,r);return this.x=i.x,this.y=i.y,this.width*=e,this.height*=t,this}rotate(e,t=this.getCenter()){if(0!==e){const r=bt.toRad(e),i=Math.cos(r),s=Math.sin(r);let o=this.getOrigin(),a=this.getTopRight(),c=this.getBottomRight(),u=this.getBottomLeft();o=T.rotateEx(o,i,s,t),a=T.rotateEx(a,i,s,t),c=T.rotateEx(c,i,s,t),u=T.rotateEx(u,i,s,t);const d=new Y(o.x,o.y,0,0);d.add(a.x,a.y,0,0),d.add(c.x,c.y,0,0),d.add(u.x,u.y,0,0),this.update(d)}return this}rotate90(){const e=(this.width-this.height)/2;this.x+=e,this.y-=e;const t=this.width;return this.width=this.height,this.height=t,this}moveAndExpand(e){const t=Y.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}getMaxScaleToFit(e,t=this.center){const r=Y.clone(e),i=t.x,s=t.y;let o=1/0,a=1/0,c=1/0,u=1/0,d=1/0,h=1/0,g=1/0,m=1/0;const y=r.topLeft;y.x<i&&(o=(this.x-i)/(y.x-i)),y.y<s&&(d=(this.y-s)/(y.y-s));const v=r.bottomRight;v.x>i&&(a=(this.x+this.width-i)/(v.x-i)),v.y>s&&(h=(this.y+this.height-s)/(v.y-s));const w=r.topRight;w.x>i&&(c=(this.x+this.width-i)/(w.x-i)),w.y<s&&(g=(this.y-s)/(w.y-s));const _=r.bottomLeft;return _.x<i&&(u=(this.x-i)/(_.x-i)),_.y>s&&(m=(this.y+this.height-s)/(_.y-s)),{sx:Math.min(o,a,c,u),sy:Math.min(d,h,g,m)}}getMaxUniformScaleToFit(e,t=this.center){const r=this.getMaxScaleToFit(e,t);return Math.min(r.sx,r.sy)}containsPoint(e,t){return ft.containsPoint(this,T.create(e,t))}containsRect(e,t,r,i){const s=Y.create(e,t,r,i),o=this.x,a=this.y,c=this.width,u=this.height,d=s.x,h=s.y,g=s.width,m=s.height;return 0!==c&&0!==u&&0!==g&&0!==m&&d>=o&&h>=a&&d+g<=o+c&&h+m<=a+u}intersectsWithLine(e){const r=[],i=[];return[this.topLine,this.rightLine,this.bottomLine,this.leftLine].forEach(s=>{const o=e.intersectsWithLine(s);null!==o&&i.indexOf(o.toString())<0&&(r.push(o),i.push(o.toString()))}),r.length>0?r:null}intersectsWithLineFromCenterToPoint(e,t){const r=T.clone(e),i=this.center;let s=null;null!=t&&0!==t&&r.rotate(t,i);const o=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],a=new Q(i,r);for(let c=o.length-1;c>=0;c-=1){const u=o[c].intersectsWithLine(a);if(null!==u){s=u;break}}return s&&null!=t&&0!==t&&s.rotate(-t,i),s}intersectsWithRect(e,t,r,i){const s=Y.create(e,t,r,i);if(!this.isIntersectWithRect(s))return null;const o=this.origin,a=this.corner,c=s.origin,u=s.corner,d=Math.max(o.x,c.x),h=Math.max(o.y,c.y);return new Y(d,h,Math.min(a.x,u.x)-d,Math.min(a.y,u.y)-h)}isIntersectWithRect(e,t,r,i){const s=Y.create(e,t,r,i),o=this.origin,a=this.corner,c=s.origin,u=s.corner;return!(u.x<=o.x||u.y<=o.y||c.x>=a.x||c.y>=a.y)}normalize(){let e=this.x,t=this.y,r=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,i=-this.height),this.x=e,this.y=t,this.width=r,this.height=i,this}union(e){const t=Y.clone(e),r=this.origin,i=this.corner,s=t.origin,o=t.corner,a=Math.min(r.x,s.x),c=Math.min(r.y,s.y),u=Math.max(i.x,o.x),d=Math.max(i.y,o.y);return new Y(a,c,u-a,d-c)}getNearestSideToPoint(e){const t=T.clone(e),i=this.x+this.width-t.x,s=t.y-this.y;let a=t.x-this.x,c="left";return i<a&&(a=i,c="right"),s<a&&(a=s,c="top"),this.y+this.height-t.y<a&&(c="bottom"),c}getNearestPointToPoint(e){const t=T.clone(e);if(this.containsPoint(t)){const r=this.getNearestSideToPoint(t);if("left"===r)return new T(this.x,t.y);if("top"===r)return new T(t.x,this.y);if("right"===r)return new T(this.x+this.width,t.y);if("bottom"===r)return new T(t.x,this.y+this.height)}return t.adhereToRect(this)}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}clone(){return new Y(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(n){n.isRectangle=function e(t){return null!=t&&t instanceof n}})(Y||(Y={})),function(n){n.isRectangleLike=function e(t){return null!=t&&"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height}}(Y||(Y={})),function(n){function t(o){return n.isRectangle(o)?o.clone():Array.isArray(o)?new n(o[0],o[1],o[2],o[3]):new n(o.x,o.y,o.width,o.height)}n.create=function e(o,a,c,u){return null==o||"number"==typeof o?new n(o,a,c,u):t(o)},n.clone=t,n.fromEllipse=function r(o){return new n(o.x-o.a,o.y-o.b,2*o.a,2*o.b)},n.fromSize=function i(o){return new n(0,0,o.width,o.height)},n.fromPositionAndSize=function s(o,a){return new n(o.x,o.y,a.width,a.height)}}(Y||(Y={}));class Q extends Ma{get center(){return new T((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(e,t,r,i){super(),"number"==typeof e&&"number"==typeof t?(this.start=new T(e,t),this.end=new T(r,i)):(this.start=T.create(e),this.end=T.create(t))}getCenter(){return this.center}round(e=0){return this.start.round(e),this.end.round(e),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}rotate(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}scale(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}setLength(e){const t=this.length();if(!t)return this;const r=e/t;return this.scale(r,r,this.start)}parallel(e){const t=this.clone();if(!t.isDifferentiable())return t;const{start:r,end:i}=t,s=r.clone().rotate(270,i),o=i.clone().rotate(90,r);return r.move(o,e),i.move(s,e),t}vector(){return new T(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const e=new T(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}bbox(){const e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),r=Math.max(this.start.x,this.end.x),i=Math.max(this.start.y,this.end.y);return new Y(e,t,r-e,i-t)}bearing(){return this.start.bearing(this.end)}closestPoint(e){return this.pointAt(this.closestPointNormalizedLength(e))}closestPointLength(e){return this.closestPointNormalizedLength(e)*this.length()}closestPointTangent(e){return this.tangentAt(this.closestPointNormalizedLength(e))}closestPointNormalizedLength(e){const t=this.vector().dot(new Q(this.start,e).vector()),r=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(r)?0:r}pointAt(e){const t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)}pointAtLength(e){const t=this.start,r=this.end;let i=!0;e<0&&(i=!1,e=-e);const s=this.length();return e>=s?i?r.clone():t.clone():this.pointAt((i?e:s-e)/s)}divideAt(e){const t=this.pointAt(e);return[new Q(this.start,t),new Q(t,this.end)]}divideAtLength(e){const t=this.pointAtLength(e);return[new Q(this.start,t),new Q(t,this.end)]}containsPoint(e){const t=this.start,r=this.end;if(0!==t.cross(e,r))return!1;const i=this.length();return!(new Q(t,e).length()>i||new Q(e,r).length()>i)}intersect(e,t){const r=e.intersectsWithLine(this,t);return r?Array.isArray(r)?r:[r]:null}intersectsWithLine(e){const t=new T(this.end.x-this.start.x,this.end.y-this.start.y),r=new T(e.end.x-e.start.x,e.end.y-e.start.y),i=t.x*r.y-t.y*r.x,s=new T(e.start.x-this.start.x,e.start.y-this.start.y),o=s.x*r.y-s.y*r.x,a=s.x*t.y-s.y*t.x;if(0===i||o*i<0||a*i<0)return null;if(i>0){if(o>i||a>i)return null}else if(o<i||a<i)return null;return new T(this.start.x+o*t.x/i,this.start.y+o*t.y/i)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(e){const t=T.clone(e),r=this.start,i=this.end;return((i.x-r.x)*(t.y-r.y)-(i.y-r.y)*(t.x-r.x))/this.length()}pointSquaredDistance(e,t){const r=T.create(e,t);return this.closestPoint(r).squaredDistance(r)}pointDistance(e,t){const r=T.create(e,t);return this.closestPoint(r).distance(r)}tangentAt(e){if(!this.isDifferentiable())return null;const t=this.start,r=this.end,i=this.pointAt(e),s=new Q(t,r);return s.translate(i.x-t.x,i.y-t.y),s}tangentAtLength(e){if(!this.isDifferentiable())return null;const t=this.start,r=this.end,i=this.pointAtLength(e),s=new Q(t,r);return s.translate(i.x-t.x,i.y-t.y),s}relativeCcw(e,t){const r=T.create(e,t);let i=r.x-this.start.x,s=r.y-this.start.y;const o=this.end.x-this.start.x,a=this.end.y-this.start.y;let c=i*a-s*o;return 0===c&&(c=i*o+s*a,c>0&&(i-=o,s-=a,c=i*o+s*a,c<0&&(c=0))),c<0?-1:c>0?1:0}equals(e){return null!=e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}clone(){return new Q(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}!function(n){n.isLine=function e(t){return null!=t&&t instanceof n}}(Q||(Q={}));class ns extends Ma{get center(){return new T(this.x,this.y)}constructor(e,t,r,i){super(),this.x=e??0,this.y=t??0,this.a=r??0,this.b=i??0}bbox(){return Y.fromEllipse(this)}getCenter(){return this.center}inflate(e,t){const i=t??e;return this.a+=2*e,this.b+=2*i,this}normalizedDistance(e,t){const r=T.create(e,t),i=r.x-this.x,s=r.y-this.y,o=this.a,a=this.b;return i*i/(o*o)+s*s/(a*a)}containsPoint(e,t){return this.normalizedDistance(e,t)<=1}intersectsWithLine(e){const t=[],r=this.a,i=this.b,s=e.start,o=e.end,a=e.vector(),c=s.diff(new T(this.x,this.y)),u=new T(a.x/(r*r),a.y/(i*i)),d=new T(c.x/(r*r),c.y/(i*i)),h=a.dot(u),g=a.dot(d),y=g*g-h*(c.dot(d)-1);if(y<0)return null;if(y>0){const v=Math.sqrt(y),w=(-g-v)/h,_=(-g+v)/h;if((w<0||w>1)&&(_<0||_>1))return null;w>=0&&w<=1&&t.push(s.lerp(o,w)),_>=0&&_<=1&&t.push(s.lerp(o,_))}else{const v=-g/h;if(!(v>=0&&v<=1))return null;t.push(s.lerp(o,v))}return t}intersectsWithLineFromCenterToPoint(e,t=0){const r=T.clone(e);t&&r.rotate(t,this.getCenter());const i=r.x-this.x,s=r.y-this.y;let o;if(0===i)return o=this.bbox().getNearestPointToPoint(r),t?o.rotate(-t,this.getCenter()):o;const a=s/i;let h=Math.sqrt(1/(1/(this.a*this.a)+a*a/(this.b*this.b)));return h=i<0?-h:h,o=new T(this.x+h,this.y+a*h),t?o.rotate(-t,this.getCenter()):o}tangentTheta(e){const t=T.clone(e),r=t.x,i=t.y,s=this.a,o=this.b,a=this.bbox().center,c=a.x,u=a.y;let m,y;return r>a.x+s/2||r<a.x-s/2?(y=r>a.x?i-30:i+30,m=s*s/(r-c)-s*s*(i-u)*(y-u)/(o*o*(r-c))+c):(m=i>a.y?r+30:r-30,y=o*o/(i-u)-o*o*(r-c)*(m-c)/(s*s*(i-u))+u),new T(m,y).theta(t)}scale(e,t){return this.a*=e,this.b*=t,this}rotate(e,t){const r=Y.fromEllipse(this);r.rotate(e,t);const i=ns.fromRect(r);return this.a=i.a,this.b=i.b,this.x=i.x,this.y=i.y,this}translate(e,t){const r=T.create(e,t);return this.x+=r.x,this.y+=r.y,this}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}clone(){return new ns(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(n){n.isEllipse=function e(t){return null!=t&&t instanceof n}})(ns||(ns={})),function(n){function t(i){return n.isEllipse(i)?i.clone():Array.isArray(i)?new n(i[0],i[1],i[2],i[3]):new n(i.x,i.y,i.a,i.b)}n.create=function e(i,s,o,a){return null==i||"number"==typeof i?new n(i,s,o,a):t(i)},n.parse=t,n.fromRect=function r(i){const s=i.center;return new n(s.x,s.y,i.width/2,i.height/2)}}(ns||(ns={}));const hQ=new RegExp("^[\\s\\dLMCZz,.]*$");function gQ(n){return"string"==typeof n&&hQ.test(n)}function ID(n,e){return(n%e+e)%e}function mL(n,e={}){const t=[];return n&&n.length&&n.forEach(r=>{Array.isArray(r)?t.push({x:r[0],y:r[1]}):t.push({x:r.x,y:r.y})}),function pQ(n,e,t,r,i){const s=[],o=n[n.length-1],a=null!=e&&e>0,c=e||0;if(r&&a){const h=(n=n.slice())[0],g=new T(o.x+(h.x-o.x)/2,o.y+(h.y-o.y)/2);n.splice(0,0,g)}let u=n[0],d=1;for(s.push(t?"M":"L",u.x,u.y);d<(r?n.length:n.length-1);){let h=n[ID(d,n.length)],g=u.x-h.x,m=u.y-h.y;if(a&&(0!==g||0!==m)&&(null==i||i.indexOf(d-1)<0)){let y=Math.sqrt(g*g+m*m);const v=g*Math.min(c,y/2)/y,w=m*Math.min(c,y/2)/y;s.push("L",h.x+v,h.y+w);let E=n[ID(d+1,n.length)];for(;d<n.length-2&&0===Math.round(E.x-h.x)&&0===Math.round(E.y-h.y);)E=n[ID(d+2,n.length)],d+=1;g=E.x-h.x,m=E.y-h.y,y=Math.max(1,Math.sqrt(g*g+m*m));const A=g*Math.min(c,y/2)/y,P=m*Math.min(c,y/2)/y,L=h.x+A,V=h.y+P;s.push("Q",h.x,h.y,L,V),h=new T(L,V)}else s.push("L",h.x,h.y);u=h,d+=1}return r?s.push("Z"):s.push("L",o.x,o.y),s.map(h=>"string"==typeof h?h:+h.toFixed(3)).join(" ")}(t,e.round,null==e.initialMove||e.initialMove,e.close,e.exclude)}function Yb(n,e,t,r,i=0,s=0,o=0,a,c){if(0===t||0===r)return[];a-=n,c-=e,t=Math.abs(t),r=Math.abs(r);const u=-a/2,d=-c/2,h=Math.cos(i*Math.PI/180),g=Math.sin(i*Math.PI/180),m=h*u+g*d,y=-1*g*u+h*d,v=m*m,w=y*y,_=t*t,C=r*r,E=v/_+w/C;let A;if(E>1)t=Math.sqrt(E)*t,r=Math.sqrt(E)*r,A=0;else{let To=1;s===o&&(To=-1),A=To*Math.sqrt((_*C-_*w-C*v)/(_*w+C*v))}const P=A*t*y/r,L=-1*A*r*m/t,V=h*P-g*L+a/2,G=g*P+h*L+c/2;let q=Math.atan2((y-L)/r,(m-P)/t)-Math.atan2(0,1),te=q>=0?q:2*Math.PI+q;q=Math.atan2((-y-L)/r,(-m-P)/t)-Math.atan2((y-L)/r,(m-P)/t);let Z=q>=0?q:2*Math.PI+q;0===o&&Z>0?Z-=2*Math.PI:0!==o&&Z<0&&(Z+=2*Math.PI);const ie=2*Z/Math.PI,wt=Math.ceil(ie<0?-1*ie:ie),je=Z/wt,F=8/3*Math.sin(je/4)*Math.sin(je/4)/Math.sin(je/2),z=h*t,Ae=h*r,It=g*t,Tt=g*r;let yn=Math.cos(te),er=Math.sin(te),x0=-F*(z*er+Tt*yn),E0=-F*(It*er-Ae*yn),$a=0,kp=0;const Io=[];for(let To=0;To<wt;To+=1){te+=je,yn=Math.cos(te),er=Math.sin(te),$a=z*yn-Tt*er+V,kp=It*yn+Ae*er+G;const eF=-F*(z*er+Tt*yn),tF=-F*(It*er-Ae*yn),dd=6*To;Io[dd]=Number(x0+n),Io[dd+1]=Number(E0+e),Io[dd+2]=Number($a-eF+n),Io[dd+3]=Number(kp-tF+e),Io[dd+4]=Number($a+n),Io[dd+5]=Number(kp+e),x0=$a+eF,E0=kp+tF}return Io.map(To=>+To.toFixed(2))}function mQ(n,e,t,r,i=0,s=0,o=0,a,c){const u=[],d=Yb(n,e,t,r,i,s,o,a,c);if(null!=d)for(let h=0,g=d.length;h<g;h+=6)u.push("C",d[h],d[h+1],d[h+2],d[h+3],d[h+4],d[h+5]);return u.join(" ")}class Yt extends Ma{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(e){if(super(),null!=e){if("string"==typeof e)return Yt.parse(e);this.points=e.map(t=>T.create(t))}else this.points=[]}scale(e,t,r=new T){return this.points.forEach(i=>i.scale(e,t,r)),this}rotate(e,t){return this.points.forEach(r=>r.rotate(e,t)),this}translate(e,t){const r=T.create(e,t);return this.points.forEach(i=>i.translate(r.x,r.y)),this}round(e=0){return this.points.forEach(t=>t.round(e)),this}bbox(){if(0===this.points.length)return new Y;let e=1/0,t=-1/0,r=1/0,i=-1/0;const s=this.points;for(let o=0,a=s.length;o<a;o+=1){const c=s[o],u=c.x,d=c.y;u<e&&(e=u),u>t&&(t=u),d<r&&(r=d),d>i&&(i=d)}return new Y(e,r,t-e,i-r)}closestPoint(e){const t=this.closestPointLength(e);return this.pointAtLength(t)}closestPointLength(e){const t=this.points,r=t.length;if(0===r||1===r)return 0;let i=0,s=0,o=1/0;for(let a=0,c=r-1;a<c;a+=1){const u=new Q(t[a],t[a+1]),d=u.length(),h=u.closestPointNormalizedLength(e),m=u.pointAt(h).squaredDistance(e);m<o&&(o=m,s=i+h*d),i+=d}return s}closestPointNormalizedLength(e){const t=this.length();return 0===t?0:this.closestPointLength(e)/t}closestPointTangent(e){const t=this.closestPointLength(e);return this.tangentAtLength(t)}containsPoint(e){if(0===this.points.length)return!1;const t=T.clone(e),r=t.x,i=t.y,s=this.points,o=s.length;let a=o-1,c=0;for(let u=0;u<o;u+=1){const d=s[a],h=s[u];if(t.equals(d))return!0;const g=new Q(d,h);if(g.containsPoint(e))return!0;if(i<=d.y&&i>h.y||i>d.y&&i<=h.y){const m=d.x-r>h.x-r?d.x-r:h.x-r;if(m>=0){const y=new T(r+m,i),v=new Q(e,y);g.intersectsWithLine(v)&&(c+=1)}}a=u}return c%2==1}intersectsWithLine(e){const t=[];for(let r=0,i=this.points.length-1;r<i;r+=1){const a=e.intersectsWithLine(new Q(this.points[r],this.points[r+1]));a&&t.push(a)}return t.length>0?t:null}isDifferentiable(){for(let e=0,t=this.points.length-1;e<t;e+=1)if(new Q(this.points[e],this.points[e+1]).isDifferentiable())return!0;return!1}length(){let e=0;for(let t=0,r=this.points.length-1;t<r;t+=1)e+=this.points[t].distance(this.points[t+1]);return e}pointAt(e){const t=this.points,r=t.length;if(0===r)return null;if(1===r||e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();const s=this.length()*e;return this.pointAtLength(s)}pointAtLength(e){const t=this.points,r=t.length;if(0===r)return null;if(1===r)return t[0].clone();let i=!0;e<0&&(i=!1,e=-e);let s=0;for(let a=0,c=r-1;a<c;a+=1){const u=i?a:c-1-a,d=t[u],h=t[u+1],g=new Q(d,h),m=d.distance(h);if(e<=s+m)return g.pointAtLength((i?1:-1)*(e-s));s+=m}return(i?t[r-1]:t[0]).clone()}tangentAt(e){const r=this.points.length;if(0===r||1===r)return null;e<0&&(e=0),e>1&&(e=1);const s=this.length()*e;return this.tangentAtLength(s)}tangentAtLength(e){const t=this.points,r=t.length;if(0===r||1===r)return null;let i=!0;e<0&&(i=!1,e=-e);let s,o=0;for(let a=0,c=r-1;a<c;a+=1){const u=i?a:c-1-a,d=t[u],h=t[u+1],g=new Q(d,h),m=d.distance(h);if(g.isDifferentiable()){if(e<=o+m)return g.tangentAtLength((i?1:-1)*(e-o));s=g}o+=m}return s?s.tangentAt(i?1:0):null}simplify(e={}){const t=this.points;if(t.length<3)return this;const r=e.threshold||0;let i=0;for(;t[i+2];){const o=i+1,u=t[o];new Q(t[i],t[i+2]).closestPoint(u).distance(u)<=r?t.splice(o,1):i+=1}return this}toHull(){const e=this.points,t=e.length;if(0===t)return new Yt;let r=e[0];for(let g=1;g<t;g+=1)(e[g].y<r.y||e[g].y===r.y&&e[g].x>r.x)&&(r=e[g]);const i=[];for(let g=0;g<t;g+=1){let m=r.theta(e[g]);0===m&&(m=360),i.push([e[g],g,m])}i.sort((g,m)=>{let y=g[2]-m[2];return 0===y&&(y=m[1]-g[1]),y}),i.length>2&&i.unshift(i[i.length-1]);const s={},o=[],a=g=>`${g[0].toString()}@${g[1]}`;for(;0!==i.length;){const g=i.pop(),m=g[0];if(s[a(g)])continue;let y=!1;for(;!y;)if(o.length<2)o.push(g),y=!0;else{const v=o.pop(),w=v[0],_=o.pop(),C=_[0],E=C.cross(w,m);if(E<0)o.push(_),o.push(v),o.push(g),y=!0;else if(0===E){const P=w.angleBetween(C,m);Math.abs(P-180)<1e-10||w.equals(m)||C.equals(w)?(s[a(v)]=w,o.push(_)):Math.abs((P+1)%360-1)<1e-10&&(o.push(_),i.push(v))}else s[a(v)]=w,o.push(_)}}o.length>2&&o.pop();let c,u=-1;for(let g=0,m=o.length;g<m;g+=1){const y=o[g][1];(void 0===c||y<c)&&(c=y,u=g)}let d=[];if(u>0){const g=o.slice(u),m=o.slice(0,u);d=g.concat(m)}else d=o;const h=[];for(let g=0,m=d.length;g<m;g+=1)h.push(d[g][0]);return new Yt(h)}equals(e){return null!=e&&e.points.length===this.points.length&&e.points.every((t,r)=>t.equals(this.points[r]))}clone(){return new Yt(this.points.map(e=>e.clone()))}toJSON(){return this.points.map(e=>e.toJSON())}serialize(){return this.points.map(e=>`${e.serialize()}`).join(" ")}}(function(n){n.isPolyline=function e(t){return null!=t&&t instanceof n}})(Yt||(Yt={})),function(n){n.parse=function e(t){const r=t.trim();if(""===r)return new n;const i=[],s=r.split(/\s*,\s*|\s+/);for(let o=0,a=s.length;o<a;o+=2)i.push({x:+s[o],y:+s[o+1]});return new n(i)}}(Yt||(Yt={}));class Bt extends Ma{constructor(e,t,r,i){super(),this.PRECISION=3,this.start=T.create(e),this.controlPoint1=T.create(t),this.controlPoint2=T.create(r),this.end=T.create(i)}bbox(){const e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end,s=e.x,o=e.y,a=t.x,c=t.y,u=r.x,d=r.y,h=i.x,g=i.y,m=[],y=[],v=[[],[]];let w,_,C,E,A,P,L,V;for(let Ae=0;Ae<2;Ae+=1)if(0===Ae?(_=6*s-12*a+6*u,w=-3*s+9*a-9*u+3*h,C=3*a-3*s):(_=6*o-12*c+6*d,w=-3*o+9*c-9*d+3*g,C=3*c-3*o),Math.abs(w)<1e-12){if(Math.abs(_)<1e-12)continue;E=-C/_,E>0&&E<1&&y.push(E)}else L=_*_-4*C*w,V=Math.sqrt(L),!(L<0)&&(A=(-_+V)/(2*w),A>0&&A<1&&y.push(A),P=(-_-V)/(2*w),P>0&&P<1&&y.push(P));let G,q,te,Z=y.length;const ie=Z;for(;Z;)Z-=1,E=y[Z],te=1-E,G=te*te*te*s+3*te*te*E*a+3*te*E*E*u+E*E*E*h,v[0][Z]=G,q=te*te*te*o+3*te*te*E*c+3*te*E*E*d+E*E*E*g,v[1][Z]=q,m[Z]={X:G,Y:q};y[ie]=0,y[ie+1]=1,m[ie]={X:s,Y:o},m[ie+1]={X:h,Y:g},v[0][ie]=s,v[1][ie]=o,v[0][ie+1]=h,v[1][ie+1]=g,y.length=ie+2,v[0].length=ie+2,v[1].length=ie+2,m.length=ie+2;const wt=Math.min.apply(null,v[0]),je=Math.min.apply(null,v[1]),F=Math.max.apply(null,v[0]),z=Math.max.apply(null,v[1]);return new Y(wt,je,F-wt,z-je)}closestPoint(e,t={}){return this.pointAtT(this.closestPointT(e,t))}closestPointLength(e,t={}){const r=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,r),r)}closestPointNormalizedLength(e,t={}){const r=this.getOptions(t),i=this.closestPointLength(e,r);if(!i)return 0;const s=this.length(r);return 0===s?0:i/s}closestPointT(e,t={}){const r=this.getPrecision(t),i=this.getDivisions(t),s=Math.pow(10,-r);let o=null,a=0,c=0,u=0,d=0,h=0,g=null;const m=i.length;let y=m>0?1/m:0;for(i.forEach((v,w)=>{const _=v.start.distance(e),C=v.end.distance(e),E=_+C;(null==g||E<g)&&(o=v,a=w*y,c=(w+1)*y,u=_,d=C,g=E,h=v.endpointDistance())});;){const v=u?Math.abs(u-d)/u:0,w=null!=d?Math.abs(u-d)/d:0;if(v<s||w<s||!u||u<h*s||!d||d<h*s)return u<=d?a:c;const P=o.divide(.5);y/=2;const L=P[0].start.distance(e),V=P[0].end.distance(e),G=L+V,q=P[1].start.distance(e),te=P[1].end.distance(e);G<=q+te?(o=P[0],c-=y,u=L,d=V):(o=P[1],a+=y,u=q,d=te)}}closestPointTangent(e,t={}){return this.tangentAtT(this.closestPointT(e,t))}containsPoint(e,t={}){return this.toPolyline(t).containsPoint(e)}divideAt(e,t={}){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);const r=this.tAt(e,t);return this.divideAtT(r)}divideAtLength(e,t={}){const r=this.tAtLength(e,t);return this.divideAtT(r)}divide(e){return this.divideAtT(e)}divideAtT(e){const t=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end;if(e<=0)return[new Bt(t,t,t,t),new Bt(t,r,i,s)];if(e>=1)return[new Bt(t,r,i,s),new Bt(s,s,s,s)];const o=this.getSkeletonPoints(e),u=o.divider,d=o.dividerControlPoint1,h=o.dividerControlPoint2;return[new Bt(t,o.startControlPoint1,o.startControlPoint2,u),new Bt(u,d,h,s)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(e){const t=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:i.clone(),divider:s.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:s.clone()};const o=new Q(t,r).pointAt(e),a=new Q(r,i).pointAt(e),c=new Q(i,s).pointAt(e),u=new Q(o,a).pointAt(e),d=new Q(a,c).pointAt(e);return{startControlPoint1:o,startControlPoint2:u,divider:new Q(u,d).pointAt(e),dividerControlPoint1:d,dividerControlPoint2:c}}getSubdivisions(e={}){const t=this.getPrecision(e);let r=[new Bt(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===t)return r;let i=this.endpointDistance();const s=Math.pow(10,-t);let o=0;for(;;){o+=1;const a=[];r.forEach(d=>{const h=d.divide(.5);a.push(h[0],h[1])});const c=a.reduce((d,h)=>d+h.endpointDistance(),0);if(o>1&&(0!==c?(c-i)/c:0)<s)return a;r=a,i=c}}length(e={}){return this.getDivisions(e).reduce((r,i)=>r+i.endpointDistance(),0)}lengthAtT(e,t={}){if(e<=0)return 0;const r=void 0===t.precision?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:r})}pointAt(e,t={}){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const r=this.tAt(e,t);return this.pointAtT(r)}pointAtLength(e,t={}){const r=this.tAtLength(e,t);return this.pointAtT(r)}pointAtT(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}isDifferentiable(){const t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(this.start.equals(t)&&t.equals(r)&&r.equals(i))}tangentAt(e,t={}){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);const r=this.tAt(e,t);return this.tangentAtT(r)}tangentAtLength(e,t={}){if(!this.isDifferentiable())return null;const r=this.tAtLength(e,t);return this.tangentAtT(r)}tangentAtT(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);const t=this.getSkeletonPoints(e),r=t.startControlPoint2,s=t.divider,o=new Q(r,t.dividerControlPoint1);return o.translate(s.x-r.x,s.y-r.y),o}getPrecision(e={}){return null==e.precision?this.PRECISION:e.precision}getDivisions(e={}){if(null!=e.subdivisions)return e.subdivisions;const t=this.getPrecision(e);return this.getSubdivisions({precision:t})}getOptions(e={}){return{precision:this.getPrecision(e),subdivisions:this.getDivisions(e)}}tAt(e,t={}){if(e<=0)return 0;if(e>=1)return 1;const r=this.getOptions(t),s=this.length(r)*e;return this.tAtLength(s,r)}tAtLength(e,t={}){let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getDivisions(t),o={precision:i,subdivisions:s};let c,u,a=null,d=0,h=0,g=0;const m=s.length;let y=m>0?1/m:0;for(let _=0;_<m;_+=1){const C=r?_:m-1-_,E=s[_],A=E.endpointDistance();if(e<=g+A){a=E,c=C*y,u=(C+1)*y,d=r?e-g:A+g-e,h=r?A+g-e:e-g;break}g+=A}if(null==a)return r?1:0;const v=this.length(o),w=Math.pow(10,-i);for(;;){let _,C,E;if(_=0!==v?d/v:0,_<w)return c;if(_=0!==v?h/v:0,_<w)return u;const A=a.divide(.5);y/=2;const P=A[0].endpointDistance(),L=A[1].endpointDistance();d<=P?(a=A[0],u-=y,C=d,E=P-C):(a=A[1],c+=y,C=d-P,E=L-C),d=C,h=E}}toPoints(e={}){const t=this.getDivisions(e),r=[t[0].start.clone()];return t.forEach(i=>r.push(i.end.clone())),r}toPolyline(e={}){return new Yt(this.toPoints(e))}scale(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}rotate(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return null!=e&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}clone(){return new Bt(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(n){n.isCurve=function e(t){return null!=t&&t instanceof n}})(Bt||(Bt={})),function(n){function e(i){const s=i.length,o=[],a=[];let c=2;o[0]=i[0]/c;for(let u=1;u<s;u+=1)a[u]=1/c,c=(u<s-1?4:3.5)-a[u],o[u]=(i[u]-o[u-1])/c;for(let u=1;u<s;u+=1)o[s-u-1]-=a[s-u]*o[s-u];return o}n.throughPoints=function r(i){if(null==i||Array.isArray(i)&&i.length<2)throw new Error("At least 2 points are required");const s=function t(i){const s=i.map(g=>T.clone(g)),o=[],a=[],c=s.length-1;if(1===c)return o[0]=new T((2*s[0].x+s[1].x)/3,(2*s[0].y+s[1].y)/3),a[0]=new T(2*o[0].x-s[0].x,2*o[0].y-s[0].y),[o,a];const u=[];for(let g=1;g<c-1;g+=1)u[g]=4*s[g].x+2*s[g+1].x;u[0]=s[0].x+2*s[1].x,u[c-1]=(8*s[c-1].x+s[c].x)/2;const d=e(u);for(let g=1;g<c-1;g+=1)u[g]=4*s[g].y+2*s[g+1].y;u[0]=s[0].y+2*s[1].y,u[c-1]=(8*s[c-1].y+s[c].y)/2;const h=e(u);for(let g=0;g<c;g+=1)o.push(new T(d[g],h[g])),a.push(g<c-1?new T(2*s[g+1].x-d[g+1],2*s[g+1].y-h[g+1]):new T((s[c].x+d[c-1])/2,(s[c].y+h[c-1])/2));return[o,a]}(i),o=[];for(let a=0,c=s[0].length;a<c;a+=1){const u=new T(s[0][a].x,s[0][a].y),d=new T(s[1][a].x,s[1][a].y);o.push(new n(i[a],u,d,i[a+1]))}return o}}(Bt||(Bt={}));class Zb extends Ma{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(e,t){if(e<=0)return 0;const r=this.length();return e>=1?r:r*e}divideAtT(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class Kn extends Zb{constructor(e,t){super(),this.endPoint=Q.isLine(e)?e.end.clone().round(2):T.create(e,t).round(2)}get type(){return"L"}get line(){return new Q(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[new Kn(t[0]),new Kn(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[new Kn(t[0]),new Kn(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return null!=this.previousSegment&&!this.start.equals(this.end)}clone(){return new Kn(this.end)}scale(e,t,r){return this.end.scale(e,t,r),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}!function(n){n.create=function e(...t){const r=t.length,i=t[0];if(Q.isLine(i))return new n(i);if(T.isPointLike(i))return 1===r?new n(i):t.map(o=>new n(o));if(2===r)return new n(+t[0],+t[1]);const s=[];for(let o=0;o<r;o+=2)s.push(new n(+t[o],+t[o+1]));return s}}(Kn||(Kn={}));class Zf extends Zb{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new Q(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[t[1].isDifferentiable()?new Kn(t[0]):this.clone(),new Kn(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new Kn(t[0]):this.clone(),new Kn(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))}scale(){return this}rotate(){return this}translate(){return this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}clone(){return new Zf}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}!function(n){n.create=function e(){return new n}}(Zf||(Zf={}));class Jf extends Zb{constructor(e,t){super(),this.isVisible=!1,this.isSubpathStart=!0,this.endPoint=Q.isLine(e)||Bt.isCurve(e)?e.end.clone().round(2):T.create(e,t).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(e,t,r){return this.end.scale(e,t,r),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}clone(){return new Jf(this.end)}equals(e){return this.type===e.type&&this.end.equals(e.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}!function(n){n.create=function e(...t){const r=t.length,i=t[0];if(Q.isLine(i))return new n(i);if(Bt.isCurve(i))return new n(i);if(T.isPointLike(i)){if(1===r)return new n(i);const o=[];for(let a=0;a<r;a+=1)o.push(0===a?new n(t[a]):new Kn(t[a]));return o}if(2===r)return new n(+t[0],+t[1]);const s=[];for(let o=0;o<r;o+=2){const a=+t[o],c=+t[o+1];s.push(0===o?new n(a,c):new Kn(a,c))}return s}}(Jf||(Jf={}));class Ii extends Zb{constructor(e,t,r,i,s,o){super(),Bt.isCurve(e)?(this.controlPoint1=e.controlPoint1.clone().round(2),this.controlPoint2=e.controlPoint2.clone().round(2),this.endPoint=e.end.clone().round(2)):"number"==typeof e?(this.controlPoint1=new T(e,t).round(2),this.controlPoint2=new T(r,i).round(2),this.endPoint=new T(s,o).round(2)):(this.controlPoint1=T.create(e).round(2),this.controlPoint2=T.create(t).round(2),this.endPoint=T.create(r).round(2))}get type(){return"C"}get curve(){return new Bt(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(e){return this.curve.closestPoint(e)}closestPointLength(e){return this.curve.closestPointLength(e)}closestPointNormalizedLength(e){return this.curve.closestPointNormalizedLength(e)}closestPointTangent(e){return this.curve.closestPointTangent(e)}length(){return this.curve.length()}divideAt(e,t={}){const r=this.curve.divideAt(e,t);return[new Ii(r[0]),new Ii(r[1])]}divideAtLength(e,t={}){const r=this.curve.divideAtLength(e,t);return[new Ii(r[0]),new Ii(r[1])]}divideAtT(e){const t=this.curve.divideAtT(e);return[new Ii(t[0]),new Ii(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.curve.pointAt(e)}pointAtLength(e){return this.curve.pointAtLength(e)}tangentAt(e){return this.curve.tangentAt(e)}tangentAtLength(e){return this.curve.tangentAtLength(e)}isDifferentiable(){if(!this.previousSegment)return!1;const t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(this.start.equals(t)&&t.equals(r)&&r.equals(i))}scale(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}rotate(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}clone(){return new Ii(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.controlPoint1,t=this.controlPoint2,r=this.end;return[this.type,e.x,e.y,t.x,t.y,r.x,r.y].join(" ")}}function Jb(n,e,t){return{x:n*Math.cos(t)-e*Math.sin(t),y:n*Math.sin(t)+e*Math.cos(t)}}function yL(n,e,t,r,i,s){const o=.3333333333333333,a=2/3;return[o*n+a*t,o*e+a*r,o*i+a*t,o*s+a*r,i,s]}function vL(n,e,t,r,i,s,o,a,c,u){const d=120*Math.PI/180,h=Math.PI/180*(+i||0);let m,y,v,w,_,g=[];if(u)y=u[0],v=u[1],w=u[2],_=u[3];else{m=Jb(n,e,-h),n=m.x,e=m.y,m=Jb(a,c,-h);const je=(n-(a=m.x))/2,F=(e-(c=m.y))/2;let z=je*je/(t*t)+F*F/(r*r);z>1&&(z=Math.sqrt(z),t*=z,r*=z);const Ae=t*t,It=r*r,Tt=(s===o?-1:1)*Math.sqrt(Math.abs((Ae*It-Ae*F*F-It*je*je)/(Ae*F*F+It*je*je)));w=Tt*t*F/r+(n+a)/2,_=Tt*-r*je/t+(e+c)/2,y=Math.asin((e-_)/r),v=Math.asin((c-_)/r),y=n<w?Math.PI-y:y,v=a<w?Math.PI-v:v,y<0&&(y=2*Math.PI+y),v<0&&(v=2*Math.PI+v),o&&y>v&&(y-=2*Math.PI),!o&&v>y&&(v-=2*Math.PI)}let C=v-y;if(Math.abs(C)>d){const je=v,F=a,z=c;v=y+d*(o&&v>y?1:-1),g=vL(a=w+t*Math.cos(v),c=_+r*Math.sin(v),t,r,i,0,o,F,z,[v,je,w,_])}C=v-y;const E=Math.cos(y),A=Math.sin(y),P=Math.cos(v),L=Math.sin(v),V=Math.tan(C/4),G=4/3*(t*V),q=4/3*(r*V),te=[n,e],Z=[n+G*A,e-q*E],ie=[a+G*L,c-q*P],wt=[a,c];if(Z[0]=2*te[0]-Z[0],Z[1]=2*te[1]-Z[1],u)return[Z,ie,wt].concat(g);{g=[Z,ie,wt].concat(g).join().split(",");const je=[],F=g.length;for(let z=0;z<F;z+=1)je[z]=z%2?Jb(+g[z-1],+g[z],h).y:Jb(+g[z],+g[z+1],h).x;return je}}function bQ(n){const e=function vQ(n){const e=function yQ(n){if(!n)return null;const e="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",t=new RegExp(`([a-z])[${e},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${e}]*,?[${e}]*)+)`,"ig"),r=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${e}]*,?[${e}]*`,"ig"),i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return n.replace(t,(o,a,c)=>{const u=[];let d=a.toLowerCase();c.replace(r,(g,m)=>(m&&u.push(+m),g)),"m"===d&&u.length>2&&(s.push([a,...u.splice(0,2)]),d="l",a="m"===a?"l":"L");const h=i[d];for(;u.length>=h&&(s.push([a,...u.splice(0,h)]),h););return o}),s}(n);if(!e||!e.length)return[["M",0,0]];let t=0,r=0,i=0,s=0;const o=[];for(let a=0,c=e.length;a<c;a+=1){const u=[];o.push(u);const d=e[a],h=d[0];if(h!==h.toUpperCase())switch(u[0]=h.toUpperCase(),u[0]){case"A":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+d[6]+t,u[7]=+d[7]+r;break;case"V":u[1]=+d[1]+r;break;case"H":u[1]=+d[1]+t;break;case"M":i=+d[1]+t,s=+d[2]+r;for(let g=1,m=d.length;g<m;g+=1)u[g]=+d[g]+(g%2?t:r);break;default:for(let g=1,m=d.length;g<m;g+=1)u[g]=+d[g]+(g%2?t:r)}else for(let g=0,m=d.length;g<m;g+=1)u[g]=d[g];switch(u[0]){case"Z":t=+i,r=+s;break;case"H":t=u[1];break;case"V":r=u[1];break;case"M":i=u[u.length-2],s=u[u.length-1],t=u[u.length-2],r=u[u.length-1];break;default:t=u[u.length-2],r=u[u.length-1]}}return o}(n),t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function r(c,u,d){let h,g;if(!c)return["C",u.x,u.y,u.x,u.y,u.x,u.y];switch(c[0]in{T:1,Q:1}||(u.qx=null,u.qy=null),c[0]){case"M":u.X=c[1],u.Y=c[2];break;case"A":return 0===parseFloat(c[1])||0===parseFloat(c[2])?["L",c[6],c[7]]:["C"].concat(vL.apply(0,[u.x,u.y].concat(c.slice(1))));case"S":return"C"===d||"S"===d?(h=2*u.x-u.bx,g=2*u.y-u.by):(h=u.x,g=u.y),["C",h,g].concat(c.slice(1));case"T":return"Q"===d||"T"===d?(u.qx=2*u.x-u.qx,u.qy=2*u.y-u.qy):(u.qx=u.x,u.qy=u.y),["C"].concat(yL(u.x,u.y,u.qx,u.qy,c[1],c[2]));case"Q":return u.qx=c[1],u.qy=c[2],["C"].concat(yL(u.x,u.y,c[1],c[2],c[3],c[4]));case"H":return["L"].concat(c[1],u.y);case"V":return["L"].concat(u.x,c[1])}return c}function i(c,u){if(c[u].length>7){c[u].shift();const d=c[u];for(;d.length;)s[u]="A",c.splice(u+=1,0,["C"].concat(d.splice(0,6)));c.splice(u,1),a=e.length}}const s=[];let o="",a=e.length;for(let c=0;c<a;c+=1){let u="";e[c]&&(u=e[c][0]),"C"!==u&&(s[c]=u,c>0&&(o=s[c-1])),e[c]=r(e[c],t,o),"A"!==s[c]&&"C"===u&&(s[c]="C"),i(e,c);const d=e[c],h=d.length;t.x=d[h-2],t.y=d[h-1],t.bx=parseFloat(d[h-4])||t.x,t.by=parseFloat(d[h-3])||t.y}return(!e[0][0]||"M"!==e[0][0])&&e.unshift(["M",0,0]),e}function wQ(n){return bQ(n).map(e=>e.map(t=>"string"==typeof t?t:ft.round(t,2))).join(",").split(",").join(" ")}!function(n){n.create=function e(...t){const r=t.length,i=t[0];if(Bt.isCurve(i))return new n(i);if(T.isPointLike(i)){if(3===r)return new n(t[0],t[1],t[2]);const o=[];for(let a=0;a<r;a+=3)o.push(new n(t[a],t[a+1],t[a+2]));return o}if(6===r)return new n(t[0],t[1],t[2],t[3],t[4],t[5]);const s=[];for(let o=0;o<r;o+=6)s.push(new n(t[o],t[o+1],t[o+2],t[o+3],t[o+4],t[o+5]));return s}}(Ii||(Ii={}));class ae extends Ma{constructor(e){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(e))if(Q.isLine(e[0])||Bt.isCurve(e[0])){let t=null;e.forEach((i,s)=>{0===s&&this.appendSegment(ae.createSegment("M",i.start)),null!=t&&!t.end.equals(i.start)&&this.appendSegment(ae.createSegment("M",i.start)),Q.isLine(i)?this.appendSegment(ae.createSegment("L",i.end)):Bt.isCurve(i)&&this.appendSegment(ae.createSegment("C",i.controlPoint1,i.controlPoint2,i.end)),t=i})}else e.forEach(r=>{r.isSegment&&this.appendSegment(r)});else null!=e&&(Q.isLine(e)?(this.appendSegment(ae.createSegment("M",e.start)),this.appendSegment(ae.createSegment("L",e.end))):Bt.isCurve(e)?(this.appendSegment(ae.createSegment("M",e.start)),this.appendSegment(ae.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):Yt.isPolyline(e)?e.points&&e.points.length&&e.points.forEach((t,r)=>{const i=ae.createSegment(0===r?"M":"L",t);this.appendSegment(i)}):e.isSegment&&this.appendSegment(e))}get start(){const e=this.segments,t=e.length;if(0===t)return null;for(let r=0;r<t;r+=1){const i=e[r];if(i.isVisible)return i.start}return e[t-1].end}get end(){const e=this.segments,t=e.length;if(0===t)return null;for(let r=t-1;r>=0;r-=1){const i=e[r];if(i.isVisible)return i.end}return e[t-1].end}moveTo(...e){return this.appendSegment(Jf.create.call(null,...e))}lineTo(...e){return this.appendSegment(Kn.create.call(null,...e))}curveTo(...e){return this.appendSegment(Ii.create.call(null,...e))}arcTo(e,t,r,i,s,o,a){const c=this.end||new T,u="number"==typeof o?Yb(c.x,c.y,e,t,r,i,s,o,a):Yb(c.x,c.y,e,t,r,i,s,o.x,o.y);if(null!=u)for(let d=0,h=u.length;d<h;d+=6)this.curveTo(u[d],u[d+1],u[d+2],u[d+3],u[d+4],u[d+5]);return this}quadTo(e,t,r,i){const s=this.end||new T,o=["M",s.x,s.y];"number"==typeof e?o.push("Q",e,t,r,i):o.push("Q",e.x,e.y,t.x,t.y);const a=ae.parse(o.join(" "));return this.appendSegment(a.segments.slice(1)),this}close(){return this.appendSegment(Zf.create())}drawPoints(e,t={}){const r=mL(e,t),i=ae.parse(r);i&&i.segments&&this.appendSegment(i.segments)}bbox(){const e=this.segments,t=e.length;if(0===t)return null;let r;for(let s=0;s<t;s+=1){const o=e[s];if(o.isVisible){const a=o.bbox();null!=a&&(r=r?r.union(a):a)}}if(null!=r)return r;const i=e[t-1];return new Y(i.end.x,i.end.y,0,0)}appendSegment(e){const t=this.segments.length;let i,r=0!==t?this.segments[t-1]:null;if(Array.isArray(e))for(let o=0,a=e.length;o<a;o+=1)i=this.prepareSegment(e[o],r,null),this.segments.push(i),r=i;else null!=e&&e.isSegment&&(i=this.prepareSegment(e,r,null),this.segments.push(i));return this}insertSegment(e,t){const r=this.segments.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");let i,s=null,o=null;if(0!==r&&(e>=1?(s=this.segments[e-1],o=s.nextSegment):(s=null,o=this.segments[0])),Array.isArray(t))for(let a=0,c=t.length;a<c;a+=1)i=this.prepareSegment(t[a],s,o),this.segments.splice(e+a,0,i),s=i;else i=this.prepareSegment(t,s,o),this.segments.splice(e,0,i);return this}removeSegment(e){const t=this.fixIndex(e),r=this.segments.splice(t,1)[0],i=r.previousSegment,s=r.nextSegment;return i&&(i.nextSegment=s),s&&(s.previousSegment=i),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s),r}replaceSegment(e,t){const r=this.fixIndex(e);let i;const s=this.segments[r];let o=s.previousSegment;const a=s.nextSegment;let c=s.isSubpathStart;if(Array.isArray(t)){this.segments.splice(e,1);for(let u=0,d=t.length;u<d;u+=1)i=this.prepareSegment(t[u],o,a),this.segments.splice(e+u,0,i),o=i,c&&i.isSubpathStart&&(c=!1)}else i=this.prepareSegment(t,o,a),this.segments.splice(r,1,i),c&&i.isSubpathStart&&(c=!1);c&&a&&this.updateSubpathStartSegment(a)}getSegment(e){const t=this.fixIndex(e);return this.segments[t]}fixIndex(e){const t=this.segments.length;if(0===t)throw new Error("Path has no segments.");let r=e;for(;r<0;)r=t+r;if(r>=t||r<0)throw new Error("Index out of range.");return r}segmentAt(e,t={}){const r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null}segmentAtLength(e,t={}){const r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null}segmentIndexAt(e,t={}){if(0===this.segments.length)return null;const r=ft.clamp(e,0,1),i=this.getOptions(t),o=this.length(i)*r;return this.segmentIndexAtLength(o,i)}segmentIndexAtLength(e,t={}){const r=this.segments.length;if(0===r)return null;let i=!0;e<0&&(i=!1,e=-e);const s=this.getPrecision(t),o=this.getSubdivisions(t);let a=0,c=null;for(let u=0;u<r;u+=1){const d=i?u:r-1-u,h=this.segments[d],m=h.length({precision:s,subdivisions:o[d]});if(h.isVisible){if(e<=a+m)return d;c=d}a+=m}return c}getSegmentSubdivisions(e={}){const t=this.getPrecision(e),r=[];for(let i=0,s=this.segments.length;i<s;i+=1){const a=this.segments[i].getSubdivisions({precision:t});r.push(a)}return r}updateSubpathStartSegment(e){let t=e.previousSegment,r=e;for(;r&&!r.isSubpathStart;)r.subpathStartSegment=null!=t?t.subpathStartSegment:null,t=r,r=r.nextSegment}prepareSegment(e,t,r){e.previousSegment=t,e.nextSegment=r,null!=t&&(t.nextSegment=e),null!=r&&(r.previousSegment=e);let i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=r),null!=i&&this.updateSubpathStartSegment(i),e}closestPoint(e,t={}){const r=this.closestPointT(e,t);return r?this.pointAtT(r):null}closestPointLength(e,t={}){const r=this.getOptions(t),i=this.closestPointT(e,r);return i?this.lengthAtT(i,r):0}closestPointNormalizedLength(e,t={}){const r=this.getOptions(t),i=this.closestPointLength(e,r);if(0===i)return 0;const s=this.length(r);return 0===s?0:i/s}closestPointT(e,t={}){if(0===this.segments.length)return null;const r=this.getPrecision(t),i=this.getSubdivisions(t);let s,o=1/0;for(let a=0,c=this.segments.length;a<c;a+=1){const u=this.segments[a];if(u.isVisible){const h=u.closestPointT(e,{precision:r,subdivisions:i[a]}),g=u.pointAtT(h),m=ft.squaredLength(g,e);m<o&&(s={segmentIndex:a,value:h},o=m)}}return s||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,t={}){if(0===this.segments.length)return null;const r=this.getPrecision(t),i=this.getSubdivisions(t);let s,o=1/0;for(let a=0,c=this.segments.length;a<c;a+=1){const u=this.segments[a],d=i[a];if(u.isDifferentiable()){const h=u.closestPointT(e,{precision:r,subdivisions:d}),g=u.pointAtT(h),m=ft.squaredLength(g,e);m<o&&(s=u.tangentAtT(h),o=m)}}return s||null}containsPoint(e,t={}){const r=this.toPolylines(t);if(!r)return!1;let i=0;for(let s=0,o=r.length;s<o;s+=1)r[s].containsPoint(e)&&(i+=1);return i%2==1}pointAt(e,t={}){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const r=this.getOptions(t),s=this.length(r)*e;return this.pointAtLength(s,r)}pointAtLength(e,t={}){if(0===this.segments.length)return null;if(0===e)return this.start.clone();let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let o,a=0;for(let u=0,d=this.segments.length;u<d;u+=1){const h=r?u:d-1-u,g=this.segments[h],m=s[h],y=g.length({precision:i,subdivisions:m});if(g.isVisible){if(e<=a+y)return g.pointAtLength((r?1:-1)*(e-a),{precision:i,subdivisions:m});o=g}a+=y}return o?r?o.end:o.start:this.segments[this.segments.length-1].end.clone()}pointAtT(e){const t=this.segments,r=t.length;if(0===r)return null;const i=e.segmentIndex;if(i<0)return t[0].pointAtT(0);if(i>=r)return t[r-1].pointAtT(1);const s=ft.clamp(e.value,0,1);return t[i].pointAtT(s)}divideAt(e,t={}){if(0===this.segments.length)return null;const r=ft.clamp(e,0,1),i=this.getOptions(t),o=this.length(i)*r;return this.divideAtLength(o,i)}divideAtLength(e,t={}){if(0===this.segments.length)return null;let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let a,c,u,d,h,o=0;for(let P=0,L=this.segments.length;P<L;P+=1){const V=r?P:L-1-P,G=this.getSegment(V),te={precision:i,subdivisions:s[V]},Z=G.length(te);if(G.isDifferentiable()&&(u=G,d=V,e<=o+Z)){c=V,a=G.divideAtLength((r?1:-1)*(e-o),te);break}o+=Z}if(!u)return null;a||(c=d,h=r?1:0,a=u.divideAtT(h));const g=this.clone(),m=c;g.replaceSegment(m,a);const y=m;let v=m+1,w=m+2;a[0].isDifferentiable()||(g.removeSegment(y),v-=1,w-=1);const _=g.getSegment(v).start;g.insertSegment(v,ae.createSegment("M",_)),w+=1,a[1].isDifferentiable()||(g.removeSegment(w-1),w-=1);const C=w-y-1;for(let P=w,L=g.segments.length;P<L;P+=1){const V=this.getSegment(P-C),G=g.getSegment(P);if("Z"===G.type&&!V.subpathStartSegment.end.equals(G.subpathStartSegment.end)){const q=ae.createSegment("L",V.end);g.replaceSegment(P,q)}}return[new ae(g.segments.slice(0,v)),new ae(g.segments.slice(v))]}intersectsWithLine(e,t={}){const r=this.toPolylines(t);if(null==r)return null;let i=null;for(let s=0,o=r.length;s<o;s+=1){const c=e.intersect(r[s]);c&&(null==i&&(i=[]),Array.isArray(c)?i.push(...c):i.push(c))}return i}isDifferentiable(){for(let e=0,t=this.segments.length;e<t;e+=1)if(this.segments[e].isDifferentiable())return!0;return!1}isValid(){const e=this.segments;return 0===e.length||"M"===e[0].type}length(e={}){if(0===this.segments.length)return 0;const t=this.getSubdivisions(e);let r=0;for(let i=0,s=this.segments.length;i<s;i+=1)r+=this.segments[i].length({subdivisions:t[i]});return r}lengthAtT(e,t={}){const r=this.segments.length;if(0===r)return 0;let i=e.segmentIndex;if(i<0)return 0;let s=ft.clamp(e.value,0,1);i>=r&&(i=r-1,s=1);const o=this.getPrecision(t),a=this.getSubdivisions(t);let c=0;for(let h=0;h<i;h+=1)c+=this.segments[h].length({precision:o,subdivisions:a[h]});return c+=this.segments[i].lengthAtT(s,{precision:o,subdivisions:a[i]}),c}tangentAt(e,t={}){if(0===this.segments.length)return null;const r=ft.clamp(e,0,1),i=this.getOptions(t),o=this.length(i)*r;return this.tangentAtLength(o,i)}tangentAtLength(e,t={}){if(0===this.segments.length)return null;let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let o,a=0;for(let c=0,u=this.segments.length;c<u;c+=1){const d=r?c:u-1-c,h=this.segments[d],g=s[d],m=h.length({precision:i,subdivisions:g});if(h.isDifferentiable()){if(e<=a+m)return h.tangentAtLength((r?1:-1)*(e-a),{precision:i,subdivisions:g});o=h}a+=m}return o?o.tangentAtT(r?1:0):null}tangentAtT(e){const t=this.segments.length;if(0===t)return null;const r=e.segmentIndex;if(r<0)return this.segments[0].tangentAtT(0);if(r>=t)return this.segments[t-1].tangentAtT(1);const i=ft.clamp(e.value,0,1);return this.segments[r].tangentAtT(i)}getPrecision(e={}){return null==e.precision?this.PRECISION:e.precision}getSubdivisions(e={}){if(null==e.segmentSubdivisions){const t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}getOptions(e={}){return{precision:this.getPrecision(e),segmentSubdivisions:this.getSubdivisions(e)}}toPoints(e={}){const t=this.segments,r=t.length;if(0===r)return null;const i=this.getSubdivisions(e),s=[];let o=[];for(let a=0;a<r;a+=1){const c=t[a];if(c.isVisible){const u=i[a];u.length>0?u.forEach(d=>o.push(d.start)):o.push(c.start)}else o.length>0&&(o.push(t[a-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s}toPolylines(e={}){const t=this.toPoints(e);return t?t.map(r=>new Yt(r)):null}scale(e,t,r){return this.segments.forEach(i=>i.scale(e,t,r)),this}rotate(e,t){return this.segments.forEach(r=>r.rotate(e,t)),this}translate(e,t){return this.segments.forEach("number"==typeof e?r=>r.translate(e,t):r=>r.translate(e)),this}clone(){const e=new ae;return this.segments.forEach(t=>e.appendSegment(t.clone())),e}equals(e){if(null==e)return!1;const t=this.segments,r=e.segments,i=t.length;if(r.length!==i)return!1;for(let s=0;s<i;s+=1){const o=t[s],a=r[s];if(o.type!==a.type||!o.equals(a))return!1}return!0}toJSON(){return this.segments.map(e=>e.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(e=>e.serialize()).join(" ")}toString(){return this.serialize()}}(function(n){n.isPath=function e(t){return null!=t&&t instanceof n}})(ae||(ae={})),function(n){function t(r,...i){if("M"===r)return Jf.create.call(null,...i);if("L"===r)return Kn.create.call(null,...i);if("C"===r)return Ii.create.call(null,...i);if("z"===r||"Z"===r)return Zf.create();throw new Error(`Invalid path segment type "${r}"`)}n.parse=function e(r){if(!r)return new n;const i=new n,o=n.normalize(r).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=o)for(let a=0,c=o.length;a<c;a+=1){const h=o[a].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g);if(null!=h){const g=h[0],m=h.slice(1).map(v=>+v),y=t.call(null,g,...m);i.appendSegment(y)}}return i},n.createSegment=t}(ae||(ae={})),function(n){n.normalize=wQ,n.isValid=gQ,n.drawArc=mQ,n.drawPoints=mL,n.arcToCurves=Yb}(ae||(ae={}));class Zt{constructor(e){this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(e,t,r=!1){if("object"==typeof e)return void Object.entries(e).forEach(([o,a])=>{this.register(o,a,t)});this.exist(e)&&!r&&!Sa.isApplyingHMR()&&this.onDuplicated(e);const i=this.options.process,s=i?_e(i,this,e,t):t;return this.data[e]=s,s}unregister(e){const t=e?this.data[e]:null;return delete this.data[e],t}get(e){return e?this.data[e]:null}exist(e){return!!e&&null!=this.data[e]}onDuplicated(e){try{throw this.options.onConflict&&_e(this.options.onConflict,this,e),new Error(`${up(this.options.type)} with name '${e}' already registered.`)}catch(t){throw t}}onNotFound(e,t){throw new Error(this.getSpellingSuggestion(e,t))}getSpellingSuggestion(e,t){const r=this.getSpellingSuggestionForName(e),i=t?`${t} ${dK(this.options.type)}`:this.options.type;return`${up(i)} with name '${e}' does not exist.${r?` Did you mean '${r}'?`:""}`}getSpellingSuggestionForName(e){return function hK(n,e,t){const r=Math.min(2,Math.floor(.34*n.length));let s,i=Math.floor(.4*n.length)+1,o=!1;const a=n.toLowerCase();for(const c of e){const u=t(c);if(void 0!==u&&Math.abs(u.length-a.length)<=r){const d=u.toLowerCase();if(d===a){if(u===n)continue;return c}if(o||u.length<3)continue;const h=gK(a,d,i-1);if(void 0===h)continue;h<3?(o=!0,s=c):(i=h,s=c)}}return s}(e,Object.keys(this.data),t=>t)}}!function(n){n.create=function e(t){return new n(t)}}(Zt||(Zt={}));const CQ={color:"#aaaaaa",thickness:1,markup:"rect",update(n,e){const t=e.thickness*e.sx,r=e.thickness*e.sy;ut(n,{width:t,height:r,rx:t,ry:r,fill:e.color})}},_Q={color:"#aaaaaa",thickness:1,markup:"rect",update(n,e){const t=e.sx<=1?e.thickness*e.sx:e.thickness;ut(n,{width:t,height:t,rx:t,ry:t,fill:e.color})}},xQ={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,e){let t;const r=e.width,i=e.height,s=e.thickness;t=r-s>=0&&i-s>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",ut(n,{d:t,stroke:e.color,"stroke-width":e.thickness})}},EQ=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(n,e){let t;const r=e.width,i=e.height,s=e.thickness;t=r-s>=0&&i-s>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",ut(n,{d:t,stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(n,e){let t;const r=e.factor||1,i=e.width*r,s=e.height*r,o=e.thickness;t=i-o>=0&&s-o>=0?["M",i,0,"H0 M0 0 V0",s].join(" "):"M 0 0 0 0",e.width=i,e.height=s,ut(n,{d:t,stroke:e.color,"stroke-width":e.thickness})}}];class Ia{constructor(){this.patterns={},this.root=we.create(jb(),{width:"100%",height:"100%"},[xo("defs")]).node}add(e,t){const r=this.root.childNodes[0];r&&r.appendChild(t),this.patterns[e]=t,we.create("rect",{width:"100%",height:"100%",fill:`url(#${e})`}).appendTo(this.root)}get(e){return this.patterns[e]}has(e){return null!=this.patterns[e]}}!function(n){n.presets=ei,n.registry=Zt.create({type:"grid"}),n.registry.register(n.presets,!0)}(Ia||(Ia={}));const bL=function(n){const e=document.createElement("canvas"),t=n.width,r=n.height;e.width=2*t,e.height=r;const i=e.getContext("2d");return i.drawImage(n,0,0,t,r),i.translate(2*t,0),i.scale(-1,1),i.drawImage(n,0,0,t,r),e},wL=function(n){const e=document.createElement("canvas"),t=n.width,r=n.height;e.width=t,e.height=2*r;const i=e.getContext("2d");return i.drawImage(n,0,0,t,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(n,0,0,t,r),e},CL=function(n){const e=document.createElement("canvas"),t=n.width,r=n.height;e.width=2*t,e.height=2*r;const i=e.getContext("2d");return i.drawImage(n,0,0,t,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(n,0,0,t,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(n,0,0,t,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(n,0,0,t,r),e},DQ=function(n,e){const t=n.width,r=n.height,i=document.createElement("canvas");i.width=3*t,i.height=3*r;const s=i.getContext("2d"),a=bt.toRad(null!=e.angle?-e.angle:-20),c=i.width/4,u=i.height/4;for(let d=0;d<4;d+=1)for(let h=0;h<4;h+=1)(d+h)%2>0&&(s.setTransform(1,0,0,1,(2*d-1)*c,(2*h-1)*u),s.rotate(a),s.drawImage(n,-t/2,-r/2,t,r));return i};var Ep,Xf;function TD(n,e){return n??e}function Mn(n,e){return null!=n&&Number.isFinite(n)?n:e}function SQ(n={}){const e=TD(n.color,"blue"),t=Mn(n.width,1),r=Mn(n.margin,2);return`\n    <filter>\n      <feFlood flood-color="${e}" flood-opacity="${Mn(n.opacity,1)}" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${r+t}" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${r}" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  `.trim()}function AQ(n={}){const e=TD(n.color,"red"),t=Mn(n.blur,0),r=Mn(n.width,1);return`\n      <filter>\n        <feFlood flood-color="${e}" flood-opacity="${Mn(n.opacity,1)}" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${r}"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="${t}"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    `.trim()}function MQ(n={}){const e=Mn(n.x,2);return`\n    <filter>\n      <feGaussianBlur stdDeviation="${null!=n.y&&Number.isFinite(n.y)?[e,n.y]:e}"/>\n    </filter>\n  `.trim()}function IQ(n={}){const e=Mn(n.dx,0),t=Mn(n.dy,0),r=TD(n.color,"black"),i=Mn(n.blur,4),s=Mn(n.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>\n         <feDropShadow stdDeviation="${i}" dx="${e}" dy="${t}" flood-color="${r}" flood-opacity="${s}" />\n       </filter>`.trim():`<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="${i}" />\n         <feOffset dx="${e}" dy="${t}" result="offsetblur" />\n         <feFlood flood-color="${r}" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="${s}" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>`.trim()}function TQ(n={}){const e=Mn(n.amount,1),r=.7152-.7152*(1-e);return`\n    <filter>\n      <feColorMatrix type="matrix" values="${.2126+.7874*(1-e)} ${r} ${.0722-.0722*(1-e)} 0 0 ${.2126-.2126*(1-e)} ${.7152+.2848*(1-e)} ${.0722-.0722*(1-e)} 0 0 ${.2126-.2126*(1-e)} ${r} ${.0722+.9278*(1-e)} 0 0 0 0 0 1 0"/>\n    </filter>\n  `.trim()}function PQ(n={}){const e=Mn(n.amount,1);return`\n      <filter>\n        <feColorMatrix type="matrix" values="${.393+.607*(1-e)} ${.769-.769*(1-e)} ${.189-.189*(1-e)} 0 0 ${.349-.349*(1-e)} ${.686+.314*(1-e)} ${.168-.168*(1-e)} 0 0 ${.272-.272*(1-e)} ${.534-.534*(1-e)} ${.131+.869*(1-e)} 0 0 0 0 0 1 0"/>\n      </filter>\n    `.trim()}function OQ(n={}){return`\n      <filter>\n        <feColorMatrix type="saturate" values="${1-Mn(n.amount,1)}"/>\n      </filter>\n    `.trim()}function NQ(n={}){return`\n      <filter>\n        <feColorMatrix type="hueRotate" values="${Mn(n.angle,0)}"/>\n      </filter>\n    `.trim()}function RQ(n={}){const e=Mn(n.amount,1),t=1-e;return`\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="${e} ${t}"/>\n          <feFuncG type="table" tableValues="${e} ${t}"/>\n          <feFuncB type="table" tableValues="${e} ${t}"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim()}function LQ(n={}){const e=Mn(n.amount,1);return`\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="${e}"/>\n        <feFuncG type="linear" slope="${e}"/>\n        <feFuncB type="linear" slope="${e}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}function kQ(n={}){const e=Mn(n.amount,1),t=.5-e/2;return`\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="${e}" intercept="${t}"/>\n        <feFuncG type="linear" slope="${e}" intercept="${t}"/>\n        <feFuncB type="linear" slope="${e}" intercept="${t}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}!function(n){n.presets=Object.assign({},I),n.presets["flip-x"]=bL,n.presets["flip-y"]=wL,n.presets["flip-xy"]=CL,n.registry=Zt.create({type:"background pattern"}),n.registry.register(n.presets,!0)}(Ep||(Ep={})),function(n){n.presets=Va,n.registry=Zt.create({type:"filter"}),n.registry.register(n.presets,!0)}(Xf||(Xf={}));const FQ={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},jQ={},_L={position:Xb("x","width","origin")},xL={position:Xb("y","height","origin")},BQ={position:Xb("x","width","corner")},$Q={position:Xb("y","height","corner")},EL={set:Ta("width","width")},DL={set:Ta("height","height")},VQ={set:Ta("rx","width")},HQ={set:Ta("ry","height")},SL={set:(n=>{const e=Ta("r","width"),t=Ta("r","height");return function(r,i){const s=i.refBBox;return _e(s.height>s.width?e:t,this,r,i)}})()},UQ={set(n,{refBBox:e}){let t=parseFloat(n);const r=_o(n);r&&(t/=100);const i=Math.sqrt(e.height*e.height+e.width*e.width);let s;return Number.isFinite(t)&&(s=r||t>=0&&t<=1?t*i:Math.max(t+i,0)),{r:s}}},zQ={set:Ta("cx","width")},GQ={set:Ta("cy","height")},AL={set:TL({resetOffset:!0})},qQ={set:TL({resetOffset:!1})},ML={set:PL({resetOffset:!0})},WQ={set:PL({resetOffset:!1})},YQ=SL,ZQ=AL,JQ=ML,XQ=_L,KQ=xL,QQ=EL,eee=DL;function Xb(n,e,t){return(r,{refBBox:i})=>{if(null==r)return null;let s=parseFloat(r);const o=_o(r);let a;if(o&&(s/=100),Number.isFinite(s)){const u=i[t];a=o||s>0&&s<1?u[n]+i[e]*s:u[n]+s}const c=new T;return c[n]=a||0,c}}function Ta(n,e){return function(t,{refBBox:r}){let i=parseFloat(t);const s=_o(t);s&&(i/=100);const o={};if(Number.isFinite(i)){const a=s||i>=0&&i<=1?i*r[e]:Math.max(i+r[e],0);o[n]=a}return o}}function IL(n,e){const t="x6-shape",r=e&&e.resetOffset;return function(i,{elem:s,refBBox:o}){let a=il(s,t);if(!a||a.value!==i){const v=n(i);a={value:i,shape:v,shapeBBox:v.bbox()},il(s,t,a)}const c=a.shape.clone(),u=a.shapeBBox.clone(),d=u.getOrigin(),h=o.getOrigin();u.x=h.x,u.y=h.y;const g=o.getMaxScaleToFit(u,h);return c.scale(0===u.width||0===o.width?1:g.sx,0===u.height||0===o.height?1:g.sy,d),r&&c.translate(-d.x,-d.y),c}}function TL(n){const t=IL(function e(r){return ae.parse(r)},n);return(r,i)=>({d:t(r,i).serialize()})}function PL(n){const e=IL(t=>new Yt(t),n);return(t,r)=>({points:e(t,r).serialize()})}const tee={qualify:Rs,set:(n,{view:e})=>`url(#${e.graph.defineGradient(n)})`},nee={qualify:Rs,set(n,{view:e}){const t=e.cell,r=Object.assign({},n);if(t.isEdge()&&"linearGradient"===r.type){const s=e.sourcePoint,o=e.targetPoint;r.id=`gradient-${r.type}-${t.id}`,r.attrs=Object.assign(Object.assign({},r.attrs),{x1:s.x,y1:s.y,x2:o.x,y2:o.y,gradientUnits:"userSpaceOnUse"}),e.graph.defs.remove(r.id)}return`url(#${e.graph.defineGradient(r)})`}},OL={qualify:(n,{attrs:e})=>null==e.textWrap||!Rs(e.textWrap),set(n,{view:e,elem:t,attrs:r}){const i="x6-text",s=il(t,i),o=d=>{try{return JSON.parse(d)}catch{return d}},a={x:r.x,eol:r.eol,annotations:o(r.annotations),textPath:o(r["text-path"]||r.textPath),textVerticalAnchor:r["text-vertical-anchor"]||r.textVerticalAnchor,displayEmpty:"true"===(r["display-empty"]||r.displayEmpty),lineHeight:r["line-height"]||r.lineHeight},c=r["font-size"]||r.fontSize,u=JSON.stringify([n,a]);if(c&&t.setAttribute("font-size",c),null==s||s!==u){const d=a.textPath;if(null!=d&&"object"==typeof d){const h=d.selector;if("string"==typeof h){const g=e.find(h)[0];g instanceof SVGPathElement&&(pD(g),a.textPath=Object.assign({"xlink:href":`#${g.id}`},d))}}sL(t,`${n}`,a),il(t,i,u)}}},ree={qualify:Rs,set(n,{view:e,elem:t,attrs:r,refBBox:i}){const s=n,o=s.width||0;_o(o)?i.width*=parseFloat(o)/100:o<=0?i.width+=o:i.width=o;const a=s.height||0;_o(a)?i.height*=parseFloat(a)/100:a<=0?i.height+=a:i.height=a;let c,u=s.text;null==u&&(u=r.text||t?.textContent),c=null!=u?aL(`${u}`,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight},{ellipsis:s.ellipsis}):"",_e(OL.set,this,c,{view:e,elem:t,attrs:r,refBBox:i,cell:e.cell})}},Kf=(n,{attrs:e})=>void 0!==e.text,iee={qualify:Kf},see={qualify:Kf},oee={qualify:Kf},aee={qualify:Kf},cee={qualify:Kf},lee={qualify:Kf},uee={qualify:(n,{elem:e})=>e instanceof SVGElement,set(n,{elem:e}){const t="x6-title",r=`${n}`,i=il(e,t);if(null==i||i!==r){il(e,t,r);const s=e.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase())s.textContent=r;else{const o=document.createElementNS(e.namespaceURI,"title");o.textContent=r,e.insertBefore(o,s)}}}},fee={offset:NL("x","width","right")},dee={offset:NL("y","height","bottom")},hee={offset:(n,{refBBox:e})=>n?{x:-e.x,y:-e.y}:{x:0,y:0}};function NL(n,e,t){return(r,{refBBox:i})=>{const s=new T;let o;return o="middle"===r?i[e]/2:r===t?i[e]:"number"==typeof r&&Number.isFinite(r)?r>-1&&r<1?-i[e]*r:-r:_o(r)?i[e]*parseFloat(r)/100:0,s[n]=-(i[n]+o),s}}const gee={qualify:Rs,set(n,{elem:e}){pp(e,n)}},pee={set(n,{elem:e}){e.innerHTML=`${n}`}},mee={qualify:Rs,set:(n,{view:e})=>`url(#${e.graph.defineFilter(n)})`},yee={set:n=>null!=n&&"object"==typeof n&&n.id?n.id:n};function Pa(n,e,t){let r,i;"object"==typeof e?(r=e.x,i=e.y):(r=e,i=t);const s=ae.parse(n),o=s.bbox();if(o){let a=-o.height/2-o.y,c=-o.width/2-o.x;"number"==typeof r&&(c-=r),"number"==typeof i&&(a-=i),s.translate(c,a)}return s.serialize()}var RL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};const vee=n=>{var{size:e,width:t,height:r,offset:i,open:s}=n;return LL({size:e,width:t,height:r,offset:i},!0===s,!0,void 0,RL(n,["size","width","height","offset","open"]))},bee=n=>{var{size:e,width:t,height:r,offset:i,factor:s}=n;return LL({size:e,width:t,height:r,offset:i},!1,!1,s,RL(n,["size","width","height","offset","factor"]))};function LL(n,e,t,r=3/4,i={}){const s=n.size||10,o=n.width||s,a=n.height||s,c=new ae,u={};if(e)c.moveTo(o,0).lineTo(0,a/2).lineTo(o,a),u.fill="none";else{if(c.moveTo(0,a/2),c.lineTo(o,0),!t){const d=Si(r,0,1);c.lineTo(o*d,a/2)}c.lineTo(o,a),c.close()}return Object.assign(Object.assign(Object.assign({},u),i),{tagName:"path",d:Pa(c.serialize(),{x:null!=n.offset?n.offset:-o/2})})}const Cee=n=>{var{size:e,width:t,height:r,offset:i}=n,s=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["size","width","height","offset"]);const o=e||10,a=t||o,c=r||o,u=new ae;return u.moveTo(0,c/2).lineTo(a/2,0).lineTo(a,c/2).lineTo(a/2,c).close(),Object.assign(Object.assign({},s),{tagName:"path",d:Pa(u.serialize(),i??-a/2)})},xee=n=>{var{d:e,offsetX:t,offsetY:r}=n,i=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},i),{tagName:"path",d:Pa(e,t,r)})},Dee=n=>{var{size:e,width:t,height:r,offset:i}=n,s=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["size","width","height","offset"]);const o=e||10,a=t||o,c=r||o,u=new ae;return u.moveTo(0,0).lineTo(a,c).moveTo(0,c).lineTo(a,0),Object.assign(Object.assign({},s),{tagName:"path",fill:"none",d:Pa(u.serialize(),i||-a/2)})},Aee=n=>{var{width:e,height:t,offset:r,open:i,flip:s}=n,o=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["width","height","offset","open","flip"]);let a=t||6;const c=e||10,u=!0===i,d=!0===s,h=Object.assign(Object.assign({},o),{tagName:"path"});d&&(a=-a);const g=new ae;return g.moveTo(0,a).lineTo(c,0),u?h.fill="none":(g.lineTo(c,a),g.close()),h.d=Pa(g.serialize(),{x:r||-c/2,y:a/2}),h};var kL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};const FL=n=>{var{r:e}=n,t=kL(n,["r"]);const r=e||5;return Object.assign(Object.assign({cx:r},t),{tagName:"circle",r})},Mee=n=>{var{r:e}=n,t=kL(n,["r"]);const r=e||5,i=new ae;return i.moveTo(r,0).lineTo(r,2*r),i.moveTo(0,r).lineTo(2*r,r),{children:[Object.assign(Object.assign({},FL({r})),{fill:"none"}),Object.assign(Object.assign({},t),{tagName:"path",d:Pa(i.serialize(),-r)})]}},Tee=n=>{var{rx:e,ry:t}=n,r=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["rx","ry"]);const i=e||5,s=t||5;return Object.assign(Object.assign({cx:i},r),{tagName:"ellipse",rx:i,ry:s})};var Oa;function PD(n){return"string"==typeof n||Rs(n)}(function(n){n.presets=Ha,n.registry=Zt.create({type:"marker"}),n.registry.register(n.presets,!0)})(Oa||(Oa={})),function(n){n.normalize=Pa}(Oa||(Oa={}));const Oee={qualify:PD,set:(n,{view:e,attrs:t})=>OD("marker-start",n,e,t)},Nee={qualify:PD,set:(n,{view:e,attrs:t})=>OD("marker-end",n,e,t,{transform:"rotate(180)"})},Ree={qualify:PD,set:(n,{view:e,attrs:t})=>OD("marker-mid",n,e,t)};function OD(n,e,t,r,i={}){const s="string"==typeof e?{name:e}:e,{name:o,args:a}=s,c=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(s,["name","args"]);let u=c;if(o&&"string"==typeof o){const h=Oa.registry.get(o);if(!h)return Oa.registry.onNotFound(o);u=h(Object.assign(Object.assign({},c),a))}const d=Object.assign(Object.assign(Object.assign({},function Lee(n,e){const t={},r=n.stroke;"string"==typeof r&&(t.stroke=r,t.fill=r);let i=n.strokeOpacity;if(null==i&&(i=n["stroke-opacity"]),null==i&&(i=n.opacity),null!=i&&(t["stroke-opacity"]=i,t["fill-opacity"]=i),"marker-mid"!==e){const s=parseFloat(n.strokeWidth||n["stroke-width"]);if(Number.isFinite(s)&&s>1){const o=Math.ceil(s/2);t.refX="marker-start"===e?o:-o}}return t}(r,n)),i),u);return{[n]:`url(#${t.graph.defineMarker(d)})`}}const Dp=(n,{view:e})=>e.cell.isEdge(),kee={qualify:Dp,set(n,e){var t,r,i,s;const o=e.view,a=n.reverse||!1,c=n.stubs||0;let u;if(Number.isFinite(c)&&0!==c)if(a){let d,h;const g=o.getConnectionLength()||0;c<0?(d=(g+c)/2,h=-c):(d=c,h=g-2*c);const m=o.getConnection();u=null===(s=null===(i=null===(r=null===(t=m?.divideAtLength(d))||void 0===t?void 0:t[1])||void 0===r?void 0:r.divideAtLength(h))||void 0===i?void 0:i[0])||void 0===s?void 0:s.serialize()}else{let d;d=c<0?((o.getConnectionLength()||0)+c)/2:c;const h=o.getConnection();if(h){const g=h.divideAtLength(d),m=h.divideAtLength(-d);g&&m&&(u=`${g[0].serialize()} ${m[1].serialize()}`)}}return{d:u||o.getConnectionPathData()}}},jL={qualify:Dp,set:Kb("getTangentAtLength",{rotate:!0})},Fee={qualify:Dp,set:Kb("getTangentAtLength",{rotate:!1})},BL={qualify:Dp,set:Kb("getTangentAtRatio",{rotate:!0})},jee={qualify:Dp,set:Kb("getTangentAtRatio",{rotate:!1})},Bee=jL,$ee=BL;function Kb(n,e){const t={x:1,y:0};return(r,i)=>{let s,o;const a=i.view,c=a[n](Number(r));return c?(o=e.rotate?c.vector().vectorAngle(t):0,s=c.start):(s=a.path.start,o=0),0===o?{transform:`translate(${s.x},${s.y}')`}:{transform:`translate(${s.x},${s.y}') rotate(${o})`}}}var ks;(function(n){n.isValidDefinition=function e(t,r,i){return!(null==t||"string"!=typeof t&&"function"==typeof t.qualify&&!_e(t.qualify,this,r,i))}})(ks||(ks={})),function(n){n.presets=Object.assign(Object.assign({},FQ),hd),n.registry=Zt.create({type:"attribute definition"}),n.registry.register(n.presets,!0)}(ks||(ks={}));const Fn={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix:n=>`${Fn.prefixCls}-${n}`},$L=Fn.prefix("highlighted"),Vee={highlight(n,e,t){ze(e,t&&t.className||$L)},unhighlight(n,e,t){Ai(e,t&&t.className||$L)}},VL=Fn.prefix("highlight-opacity"),Hee={highlight(n,e){ze(e,VL)},unhighlight(n,e){Ai(e,VL)}};var rt;!function(n){const e=xo("svg");function t(m,y){const v=function eQ(n,e){const t=Gb.createSVGPoint();return t.x=n,t.y=e,t}(m.x,m.y).matrixTransform(y);return new T(v.x,v.y)}function s(m,y){const v=e.createSVGPoint();v.x=m.x,v.y=m.y;const w=v.matrixTransform(y);v.x=m.x+m.width,v.y=m.y;const _=v.matrixTransform(y);v.x=m.x+m.width,v.y=m.y+m.height;const C=v.matrixTransform(y);v.x=m.x,v.y=m.y+m.height;const E=v.matrixTransform(y),A=Math.min(w.x,_.x,C.x,E.x),P=Math.max(w.x,_.x,C.x,E.x),L=Math.min(w.y,_.y,C.y,E.y),V=Math.max(w.y,_.y,C.y,E.y);return new Y(A,L,P-A,V-L)}function a(m,y={}){let v;if(!m.ownerSVGElement||!Aa(m)){if(qR(m)){const{left:E,top:A,width:P,height:L}=c(m);return new Y(E,A,P,L)}return new Y(0,0,0,0)}let _=y.target;if(!y.recursive){try{v=m.getBBox()}catch{v={x:m.clientLeft,y:m.clientTop,width:m.clientWidth,height:m.clientHeight}}return _?s(v,bp(m,_)):Y.create(v)}{const E=m.childNodes,A=E.length;if(0===A)return a(m,{target:_});_||(_=m);for(let P=0;P<A;P+=1){const L=E[P];let V;V=a(L,0===L.childNodes.length?{target:_}:{target:_,recursive:!0}),v=v?v.union(V):V}return v}}function c(m){let y=0,v=0,w=0,_=0;if(m){let C=m;for(;C;)y+=C.offsetLeft,v+=C.offsetTop,C=C.offsetParent,C&&(y+=parseInt(_D(C,"borderLeft"),10),v+=parseInt(_D(C,"borderTop"),10));w=m.offsetWidth,_=m.offsetHeight}return{left:y,top:v,width:w,height:_}}function u(m){const y=v=>{const w=m.getAttribute(v),_=w?parseFloat(w):0;return Number.isNaN(_)?0:_};switch(m instanceof SVGElement&&m.nodeName.toLowerCase()){case"rect":return new Y(y("x"),y("y"),y("width"),y("height"));case"circle":return new ns(y("cx"),y("cy"),y("r"),y("r"));case"ellipse":return new ns(y("cx"),y("cy"),y("rx"),y("ry"));case"polyline":{const v=zb(m);return new Yt(v)}case"polygon":{const v=zb(m);return v.length>1&&v.push(v[0]),new Yt(v)}case"path":{let v=m.getAttribute("d");return ae.isValid(v)||(v=ae.normalize(v)),ae.parse(v)}case"line":return new Q(y("x1"),y("y1"),y("x2"),y("y2"))}return a(m)}function h(m){if(null==m)return null;let y=m;do{let v=y.tagName;if("string"!=typeof v)return null;if(v=v.toUpperCase(),Vf(y,"x6-port"))y=y.nextElementSibling;else if("G"===v)y=y.firstElementChild;else{if("TITLE"!==v)break;y=y.nextElementSibling}}while(y);return y}n.normalizeMarker=Pa,n.transformPoint=t,n.transformLine=function r(m,y){return new Q(t(m.start,y),t(m.end,y))},n.transformPolyline=function i(m,y){let v=m instanceof Yt?m.points:m;return Array.isArray(v)||(v=[]),new Yt(v.map(w=>t(w,y)))},n.transformRectangle=s,n.bbox=function o(m,y,v){let w;const _=m.ownerSVGElement;if(!_)return new Y(0,0,0,0);try{w=m.getBBox()}catch{w={x:m.clientLeft,y:m.clientTop,width:m.clientWidth,height:m.clientHeight}}return y?Y.create(w):s(w,bp(m,v||_))},n.getBBox=a,n.getBoundingOffsetRect=c,n.toGeometryShape=u,n.translateAndAutoOrient=function d(m,y,v,w){const _=T.create(y),C=T.create(v);w||(w=m instanceof SVGSVGElement?m:m.ownerSVGElement);const E=SD(m);m.setAttribute("transform","");const A=a(m,{target:w}).scale(E.sx,E.sy),P=yp();P.setTranslate(-A.x-A.width/2,-A.y-A.height/2);const L=yp(),V=_.angleBetween(C,_.clone().translate(1,0));V&&L.setRotate(V,0,0);const G=yp(),q=_.clone().move(C,A.width/2);G.setTranslate(2*_.x-q.x,2*_.y-q.y);const te=bp(m,w),Z=yp();Z.setMatrix(G.matrix.multiply(L.matrix.multiply(P.matrix.multiply(te.scale(E.sx,E.sy))))),m.setAttribute("transform",Uf(Z.matrix))},n.findShapeNode=h,n.getBBoxV2=function g(m){const y=h(m);if(!Aa(y)){if(qR(m)){const{left:_,top:C,width:E,height:A}=c(m);return new Y(_,C,E,A)}return new Y(0,0,0,0)}return u(y).bbox()||Y.create()}}(rt||(rt={}));const Uee={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},zee={highlight(n,e,t){const r=Na.getHighlighterId(e,t);if(Na.hasCache(r))return;t=jN({},t,Uee);const i=we.create(e);let s,o;try{s=i.toPathData()}catch{o=rt.bbox(i.node,!0),s=lL(Object.assign(Object.assign({},t),o))}const a=xo("path");if(ut(a,Object.assign({d:s,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},t.attrs?gp(t.attrs):null)),n.isEdgeElement(e))ut(a,"d",n.getConnectionPathData());else{let d=i.getTransformToElement(n.container);const h=t.padding;if(h){null==o&&(o=rt.bbox(i.node,!0));const g=o.x+o.width/2,m=o.y+o.height/2;o=rt.transformRectangle(o,d);const y=Math.max(o.width,1),v=Math.max(o.height,1),w=(y+h)/y,_=(v+h)/v,C=An({a:w,b:0,c:0,d:_,e:g-w*g,f:m-_*m});d=d.multiply(C)}zf(a,d)}ze(a,Fn.prefix("highlight-stroke"));const c=n.cell,u=()=>Na.removeHighlighter(r);c.on("removed",u),c.model&&c.model.on("reseted",u),n.container.appendChild(a),Na.setCache(r,a)},unhighlight(n,e,t){Na.removeHighlighter(Na.getHighlighterId(e,t))}};var Na,Do;function ND(n,e={}){return new T(ts(e.x,n.width),ts(e.y,n.height))}function RD(n,e,t){return Object.assign({angle:e,position:n.toJSON()},t)}!function(n){n.getHighlighterId=function e(o,a){return pD(o),o.id+JSON.stringify(a)};const t={};n.setCache=function r(o,a){t[o]=a},n.hasCache=function i(o){return null!=t[o]},n.removeHighlighter=function s(o){const a=t[o];a&&(Hf(a),delete t[o])}}(Na||(Na={})),function(n){n.check=function e(t,r){if("function"!=typeof r.highlight)throw new Error(`Highlighter '${t}' is missing required \`highlight()\` method`);if("function"!=typeof r.unhighlight)throw new Error(`Highlighter '${t}' is missing required \`unhighlight()\` method`)}}(Do||(Do={})),function(n){n.presets=jn,n.registry=Zt.create({type:"highlighter"}),n.registry.register(n.presets,!0)}(Do||(Do={}));const Gee=(n,e)=>n.map(({x:t,y:r,angle:i})=>RD(ND(e,{x:t,y:r}),i||0)),qee=(n,e,t)=>{const i=t.step||20;return HL(n,e,t.start||0,(s,o)=>(s+.5-o/2)*i)},Wee=(n,e,t)=>{const i=t.step||360/n.length;return HL(n,e,t.start||0,s=>s*i)};function HL(n,e,t,r){const i=e.getCenter(),s=e.getTopCenter(),o=e.width/e.height,a=ns.fromRect(e),c=n.length;return n.map((u,d)=>{const h=t+r(d,c),g=s.clone().rotate(-h,i).scale(o,1,i),m=u.compensateRotate?-a.tangentTheta(g):0;return(u.dx||u.dy)&&g.translate(u.dx||0,u.dy||0),u.dr&&g.move(i,u.dr),RD(g.round(),m,u)})}const Zee=(n,e,t)=>Sp(n,ND(e,t.start||e.getOrigin()),ND(e,t.end||e.getCorner()),t),Jee=(n,e,t)=>Sp(n,e.getTopLeft(),e.getBottomLeft(),t),Xee=(n,e,t)=>Sp(n,e.getTopRight(),e.getBottomRight(),t),Kee=(n,e,t)=>Sp(n,e.getTopLeft(),e.getTopRight(),t),Qee=(n,e,t)=>Sp(n,e.getBottomLeft(),e.getBottomRight(),t);function Sp(n,e,t,r){const i=new Q(e,t),s=n.length;return n.map((o,a)=>{var{strict:c}=o,u=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(o,["strict"]);const h=i.pointAt(c||r.strict?(a+1)/(s+1):(a+.5)/s);return(u.dx||u.dy)&&h.translate(u.dx||0,u.dy||0),RD(h.round(),0,u)})}var ol;!function(n){n.presets=gd,n.registry=Zt.create({type:"port layout"}),n.registry.register(n.presets,!0)}(ol||(ol={}));const ete={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Ra(n,e){const{x:t,y:r,angle:i,attrs:s}=e||{};return jN({},{angle:i,attrs:s,position:{x:t,y:r}},n,ete)}const tte=(n,e,t)=>Ra({position:e.getTopLeft()},t),nte=(n,e,t)=>Ra({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},t),rte=(n,e,t)=>Ra({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},t),ite=(n,e,t)=>Ra({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},t),ste=(n,e,t)=>Ra({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},t),ote=(n,e,t)=>UL(n,e,!1,t),ate=(n,e,t)=>UL(n,e,!0,t),cte=(n,e,t)=>zL(n,e,!1,t),lte=(n,e,t)=>zL(n,e,!0,t);function UL(n,e,t,r){const i=null!=r.offset?r.offset:15,s=e.getCenter().theta(n),o=GL(e);let a,c,u,d,h=0;return s<o[1]||s>o[2]?(a=".3em",c=i,u=0,d="start"):s<o[0]?(a="0",c=0,u=-i,t?(h=-90,d="start"):d="middle"):s<o[3]?(a=".3em",c=-i,u=0,d="end"):(a=".6em",c=0,u=i,t?(h=90,d="start"):d="middle"),Ra({position:{x:Math.round(c),y:Math.round(u)},angle:h,attrs:{".":{y:a,"text-anchor":d}}},r)}function zL(n,e,t,r){const i=null!=r.offset?r.offset:15,s=e.getCenter().theta(n),o=GL(e);let a,c,u,d,h=0;return s<o[1]||s>o[2]?(a=".3em",c=-i,u=0,d="end"):s<o[0]?(a=".6em",c=0,u=i,t?(h=90,d="start"):d="middle"):s<o[3]?(a=".3em",c=i,u=0,d="start"):(a="0em",c=0,u=-i,t?(h=-90,d="start"):d="middle"),Ra({position:{x:Math.round(c),y:Math.round(u)},angle:h,attrs:{".":{y:a,"text-anchor":d}}},r)}function GL(n){const e=n.getCenter(),t=e.theta(n.getTopLeft()),r=e.theta(n.getBottomLeft()),i=e.theta(n.getBottomRight());return[t,e.theta(n.getTopRight()),i,r]}const ute=(n,e,t)=>qL(n.diff(e.getCenter()),!1,t),fte=(n,e,t)=>qL(n.diff(e.getCenter()),!0,t);function qL(n,e,t){const r=null!=t.offset?t.offset:20,i=new T(0,0),s=-n.theta(i);let c,a=".3em",u=s;return(s+90)%180==0?(c=e?"end":"middle",!e&&-270===s&&(a="0em")):s>-270&&s<-90?(c="start",u=s-180):c="end",Ra({position:n.clone().move(i,r).diff(n).round().round().toJSON(),angle:e?u:0,attrs:{".":{y:a,"text-anchor":c}}},t)}var Qf,LD,Et;!function(n){n.presets=Ua,n.registry=Zt.create({type:"port label layout"}),n.registry.register(n.presets,!0)}(Qf||(Qf={}));class Ot extends Di{get priority(){return 2}constructor(){super(),this.cid=LD.uniqueId(),Ot.views[this.cid]=this}confirmUpdate(e,t){return 0}empty(e=this.container){return dp(e),this}unmount(e=this.container){return Hf(e),this}remove(e=this.container){return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete Ot.views[this.cid]),this.unmount(e),this}onRemove(){}setClass(e,t=this.container){t.classList.value=Array.isArray(e)?e.join(" "):e}addClass(e,t=this.container){return ze(t,Array.isArray(e)?e.join(" "):e),this}removeClass(e,t=this.container){return Ai(t,Array.isArray(e)?e.join(" "):e),this}setStyle(e,t=this.container){return pp(t,e),this}setAttrs(e,t=this.container){return null!=e&&null!=t&&ut(t,e),this}findAttr(e,t=this.container){let r=t;for(;r&&1===r.nodeType;){const i=r.getAttribute(e);if(null!=i)return i;if(r===this.container)return null;r=r.parentNode}return null}find(e,t=this.container,r=this.selectors){return Ot.find(e,t,r).elems}findOne(e,t=this.container,r=this.selectors){const i=this.find(e,t,r);return i.length>0?i[0]:null}findByAttr(e,t=this.container){let r=t;for(;r&&r.getAttribute;){const i=r.getAttribute(e);if((null!=i||r===this.container)&&"false"!==i)return r;r=r.parentNode}return null}getSelector(e,t){let r;if(e===this.container)return"string"==typeof t&&(r=`> ${t}`),r;if(e){const i=yD(e)+1;r=`${e.tagName.toLowerCase()}:nth-child(${i})`,t&&(r+=` > ${t}`),r=this.getSelector(e.parentNode,r)}return r}prefixClassName(e){return Fn.prefix(e)}delegateEvents(e,t){if(null==e)return this;t||this.undelegateEvents();const r=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(i=>{const s=i.match(r);if(null==s)return;const o=this.getEventHandler(e[i]);"function"==typeof o&&this.delegateEvent(s[1],s[2],o)}),this}undelegateEvents(){return yr.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(e,t){return this.addEventListeners(document,e,t),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(e,t,r){return yr.on(this.container,e+this.getEventNamespace(),t,r),this}undelegateEvent(e,t,r){const i=e+this.getEventNamespace();return null==t?yr.off(this.container,i):"string"==typeof t?yr.off(this.container,i,t,r):yr.off(this.container,i,t),this}addEventListeners(e,t,r){if(null==t)return this;const i=this.getEventNamespace();return Object.keys(t).forEach(s=>{const o=this.getEventHandler(t[s]);"function"==typeof o&&yr.on(e,s+i,r,o)}),this}removeEventListeners(e){return null!=e&&yr.off(e,this.getEventNamespace()),this}getEventNamespace(){return`.${Fn.prefixCls}-event-${this.cid}`}getEventHandler(e){let t;if("string"==typeof e){const r=this[e];"function"==typeof r&&(t=(...i)=>r.call(this,...i))}else t=(...r)=>e.call(this,...r);return t}getEventTarget(e,t={}){const{target:r,type:i,clientX:s=0,clientY:o=0}=e;return t.fromPoint||"touchmove"===i||"touchend"===i?document.elementFromPoint(s,o):r}stopPropagation(e){return this.setEventData(e,{propagationStopped:!0}),this}isPropagationStopped(e){return!0===this.getEventData(e).propagationStopped}getEventData(e){return this.eventData(e)}setEventData(e,t){return this.eventData(e,t)}eventData(e,t){if(null==e)throw new TypeError("Event object required");let r=e.data;const i=`__${this.cid}__`;return null==t?null==r?{}:r[i]||{}:(null==r&&(r=e.data={}),r[i]=Object.assign(null==r[i]?{}:Object.assign({},r[i]),t),r[i])}normalizeEvent(e){return Ot.normalizeEvent(e)}}(function(n){n.createElement=function e(i,s){return s?xo(i||"g"):mD(i||"div")},n.find=function t(i,s,o){if(!i||"."===i)return{elems:[s]};if(o){const a=o[i];if(a)return{elems:Array.isArray(a)?a:[a]}}if(Fn.useCSSSelector){const a=i.includes(">")?`:scope ${i}`:i;return{isCSSSelector:!0,elems:Array.prototype.slice.call(s.querySelectorAll(a))}}return{elems:[]}},n.normalizeEvent=function r(i){let s=i;const o=i.originalEvent,a=o&&o.changedTouches&&o.changedTouches[0];if(a){for(const c in i)void 0===a[c]&&(a[c]=i[c]);s=a}return s}})(Ot||(Ot={})),function(n){n.views={},n.getView=function e(t){return n.views[t]||null}}(Ot||(Ot={})),function(n){let e=0;n.uniqueId=function t(){const r=`v${e}`;return e+=1,r}}(LD||(LD={}));class dte{constructor(e){this.view=e,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new MD,this.pathCache={}}get(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}getData(e){const t=this.get(e);return t.data||(t.data={}),t.data}getMatrix(e){const t=this.get(e);return null==t.matrix&&(t.matrix=function sQ(n,e){let t=An();if(Aa(e)&&Aa(n)){let r=n;const i=[];for(;r&&r!==e;){const o=vp(r.getAttribute("transform")||null);i.push(o),r=r.parentNode}i.reverse().forEach(s=>{t=t.multiply(s)})}return t}(e,this.view.container)),An(t.matrix)}getShape(e){const t=this.get(e);return null==t.shape&&(t.shape=rt.toGeometryShape(e)),t.shape.clone()}getBoundingRect(e){const t=this.get(e);return null==t.boundingRect&&(t.boundingRect=rt.getBBoxV2(e)),t.boundingRect.clone()}}(function(n){function t(u){return null!=u&&"string"==typeof u}function s(u,d={ns:Sn.svg}){const h=document.createDocumentFragment(),g={},m={},y=[{markup:Array.isArray(u)?u:[u],parent:h,ns:d.ns}];for(;y.length>0;){const v=y.pop();let w=v.ns||Sn.svg;const C=v.parent;v.markup.forEach(E=>{const A=E.tagName;if(!A)throw new TypeError("Invalid tagName");E.ns&&(w=E.ns);const P=w?mD(A,w):UR(A),L=E.attrs;L&&ut(P,gp(L));const V=E.style;V&&pp(P,V);const G=E.className;null!=G&&P.setAttribute("class",Array.isArray(G)?G.join(" "):G),E.textContent&&(P.textContent=E.textContent);const q=E.selector;if(null!=q){if(m[q])throw new TypeError("Selector must be unique");m[q]=P}if(E.groupSelector){let Z=E.groupSelector;Array.isArray(Z)||(Z=[Z]),Z.forEach(ie=>{g[ie]||(g[ie]=[]),g[ie].push(P)})}C.appendChild(P);const te=E.children;Array.isArray(te)&&y.push({ns:w,markup:te,parent:P})})}return Object.keys(g).forEach(v=>{if(m[v])throw new Error("Ambiguous group selector");m[v]=g[v]}),{fragment:h,selectors:m,groups:g}}function o(u){return u instanceof SVGElement?xo("g"):UR("div")}n.isJSONMarkup=function e(u){return null!=u&&!t(u)},n.isStringMarkup=t,n.clone=function r(u){return null==u||t(u)?u:jt(u)},n.sanitize=function i(u){return`${u}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")},n.parseJSONMarkup=s,n.renderMarkup=function a(u){if(t(u)){const m=we.createVectors(u),y=m.length;if(1===y)return{elem:m[0].node};if(y>1){const v=o(m[0].node);return m.forEach(w=>{v.appendChild(w.node)}),{elem:v}}return{}}const d=s(u),h=d.fragment;let g=null;return h.childNodes.length>1?(g=o(h.firstChild),g.appendChild(h)):g=h.firstChild,{elem:g,selectors:d.selectors}},n.parseLabelStringMarkup=function c(u){const d=we.createVectors(u),h=document.createDocumentFragment();for(let g=0,m=d.length;g<m;g+=1)h.appendChild(d[g].node);return{fragment:h,selectors:{}}}})(Et||(Et={})),function(n){n.getSelector=function e(t,r,i){if(null!=t){let s;const o=t.tagName.toLowerCase();if(t===r)return s="string"==typeof i?`> ${o} > ${i}`:`> ${o}`,s;const a=t.parentNode;return s=a&&a.childNodes.length>1?`${o}:nth-child(${yD(t)+1})`:o,i&&(s+=` > ${i}`),e(t.parentNode,r,s)}return i}}(Et||(Et={})),function(n){n.getPortContainerMarkup=function e(){return"g"},n.getPortMarkup=function t(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},n.getPortLabelMarkup=function r(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}}(Et||(Et={})),function(n){n.getEdgeMarkup=function e(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}}(Et||(Et={})),function(n){n.getForeignObjectMarkup=function e(t=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:Sn.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:Sn.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}}(Et||(Et={}));class WL{constructor(e){this.view=e}get cell(){return this.view.cell}getDefinition(e){return this.cell.getAttrDefinition(e)}processAttrs(e,t){let r,i,s,o;const a=[];return Object.keys(t).forEach(c=>{const u=t[c],d=this.getDefinition(c),h=_e(ks.isValidDefinition,this.view,d,u,{elem:e,attrs:t,cell:this.cell,view:this.view});if(d&&h)"string"==typeof d?(null==r&&(r={}),r[d]=u):null!==u&&a.push({name:c,definition:d});else{null==r&&(r={});const g=WR.includes(c)?c:xR(c);r[g]=u}}),a.forEach(({name:c,definition:u})=>{const d=t[c];"function"==typeof u.set&&(null==i&&(i={}),i[c]=d),"function"==typeof u.offset&&(null==s&&(s={}),s[c]=d),"function"==typeof u.position&&(null==o&&(o={}),o[c]=d)}),{raw:t,normal:r,set:i,offset:s,position:o}}mergeProcessedAttrs(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);const r=e.normal&&e.normal.transform;null!=r&&t.normal&&(t.normal.transform=r),e.normal=t.normal}findAttrs(e,t,r,i){const s=[],o=new MD;return Object.keys(e).forEach(a=>{const c=e[a];if(!Rs(c))return;const{isCSSSelector:u,elems:d}=Ot.find(a,t,i);r[a]=d;for(let h=0,g=d.length;h<g;h+=1){const m=d[h],y=i&&i[a]===m,v=o.get(m);if(v){v.array||(s.push(m),v.array=!0,v.attrs=[v.attrs],v.priority=[v.priority]);const w=v.attrs,_=v.priority;if(y)w.unshift(c),_.unshift(-1);else{const C=vZ(_,u?-1:g);w.splice(C,0,c),_.splice(C,0,g)}}else o.set(m,{elem:m,attrs:c,priority:y?-1:g,array:!1})}}),s.forEach(a=>{const c=o.get(a);c.attrs=c.attrs.reduceRight((d,h)=>cn(d,h),{})}),o}updateRelativeAttrs(e,t,r){const i=t.raw||{};let s=t.normal||{};const o=t.set,a=t.position,c=t.offset,u=()=>({elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:r.clone()});if(null!=o&&Object.keys(o).forEach(w=>{const _=o[w],C=this.getDefinition(w);if(null!=C){const E=_e(C.set,this.view,_,u());"object"==typeof E?s=Object.assign(Object.assign({},s),E):null!=E&&(s[w]=E)}}),e instanceof HTMLElement)return void this.view.setAttrs(s,e);const d=s.transform,g=vp(d?`${d}`:null),m=new T(g.e,g.f);d&&(delete s.transform,g.e=0,g.f=0);let y=!1;null!=a&&Object.keys(a).forEach(w=>{const _=a[w],C=this.getDefinition(w);if(null!=C){const E=_e(C.position,this.view,_,u());null!=E&&(y=!0,m.translate(T.create(E)))}}),this.view.setAttrs(s,e);let v=!1;if(null!=c){const w=this.view.getBoundingRectOfElement(e);if(w.width>0&&w.height>0){const _=rt.transformRectangle(w,g);Object.keys(c).forEach(C=>{const E=c[C],A=this.getDefinition(C);if(null!=A){const P=_e(A.offset,this.view,E,{elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:_});null!=P&&(v=!0,m.translate(T.create(P)))}})}}(null!=d||y||v)&&(m.round(1),g.e=m.x,g.f=m.y,e.setAttribute("transform",Uf(g)))}update(e,t,r){const i={},s=this.findAttrs(r.attrs||t,e,i,r.selectors),o=r.attrs?this.findAttrs(t,e,i,r.selectors):s,a=[];s.each(d=>{const h=d.elem,g=d.attrs,m=this.processAttrs(h,g);if(null==m.set&&null==m.position&&null==m.offset)this.view.setAttrs(m.normal,h);else{const y=o.get(h),v=y?y.attrs:null,w=v&&null==g.ref?v.ref:g.ref;let _;if(w){if(_=(i[w]||this.view.find(w,e,r.selectors))[0],!_)throw new Error(`"${w}" reference does not exist.`)}else _=null;const C={node:h,refNode:_,attributes:v,processedAttributes:m},E=a.findIndex(A=>A.refNode===h);E>-1?a.splice(E,0,C):a.push(C)}});const c=new MD;let u;a.forEach(d=>{const h=d.node,g=d.refNode;let m;const y=null!=g&&null!=r.rotatableNode&&GR(r.rotatableNode,g);let v;g&&(m=c.get(g)),m||(m=g?rt.getBBox(g,{target:y?r.rotatableNode:e}):r.rootBBox,g&&c.set(g,m)),r.attrs&&d.attributes?(v=this.processAttrs(h,d.attributes),this.mergeProcessedAttrs(v,d.processedAttributes)):v=d.processedAttributes;let w=m;y&&null!=r.rotatableNode&&!r.rotatableNode.contains(h)&&(u||(u=vp(ut(r.rotatableNode,"transform"))),w=rt.transformRectangle(m,u)),this.updateRelativeAttrs(h,v,w)})}}class YL{get cell(){return this.view.cell}constructor(e,t,r=[]){this.view=e;const i={},s={};let o=0;Object.keys(t).forEach(c=>{let u=t[c];Array.isArray(u)||(u=[u]),u.forEach(d=>{let h=i[d];h||(o+=1,h=i[d]=1<<o),s[c]|=h})});let a=r;if(Array.isArray(a)||(a=[a]),a.forEach(c=>{i[c]||(o+=1,i[c]=1<<o)}),o>25)throw new Error("Maximum number of flags exceeded.");this.flags=i,this.attrs=s,this.bootstrap=r}getFlag(e){const t=this.flags;return null==t?0:Array.isArray(e)?e.reduce((r,i)=>r|t[i],0):0|t[e]}hasAction(e,t){return e&this.getFlag(t)}removeAction(e,t){return e^e&this.getFlag(t)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let e=0;return this.attrs&&Object.keys(this.attrs).forEach(t=>{this.cell.hasChanged(t)&&(e|=this.attrs[t])}),e}}let Qn=(()=>{class n extends Ot{static getDefaults(){return this.defaults}static config(t){this.defaults=this.getOptions(t)}static getOptions(t){const r=(d,h)=>null!=h?zN([...Array.isArray(d)?d:[d],...Array.isArray(h)?h:[h]]):Array.isArray(d)?[...d]:[d],i=jt(this.getDefaults()),{bootstrap:s,actions:o,events:a,documentEvents:c}=t,u=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["bootstrap","actions","events","documentEvents"]);return s&&(i.bootstrap=r(i.bootstrap,s)),o&&Object.entries(o).forEach(([d,h])=>{const g=i.actions[d];h&&g?i.actions[d]=r(g,h):h&&(i.actions[d]=r(h))}),a&&(i.events=Object.assign(Object.assign({},i.events),a)),t.documentEvents&&(i.documentEvents=Object.assign(Object.assign({},i.documentEvents),c)),cn(i,u)}get[Symbol.toStringTag](){return n.toStringTag}constructor(t,r={}){super(),this.cell=t,this.options=this.ensureOptions(r),this.graph=this.options.graph,this.attr=new WL(this),this.flag=new YL(this,this.options.actions,this.options.bootstrap),this.cache=new dte(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(t){return this.getConstructor().getOptions(t)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return Ot.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(t){if(this.container!==t){this.undelegateEvents(),this.container=t,null!=this.options.events&&this.delegateEvents(this.options.events);const r=this.getContainerAttrs();null!=r&&this.setAttrs(r,t);const i=this.getContainerStyle();null!=i&&this.setStyle(i,t);const s=this.getContainerClassName();null!=s&&this.addClass(s,t)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(t,r={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(t){return this.flag.getFlag(t)}hasAction(t,r){return this.flag.hasAction(t,r)}removeAction(t,r){return this.flag.removeAction(t,r)}handleAction(t,r,i,s){if(this.hasAction(t,r)){i();const o=[r];return s&&("string"==typeof s?o.push(s):o.push(...s)),this.removeAction(t,o)}return t}setup(){this.cell.on("changed",({options:t})=>this.onAttrsChange(t))}onAttrsChange(t){let r=this.flag.getChangedFlag();t.updated||!r||(t.dirty&&this.hasAction(r,"update")&&(r|=this.getFlag("render")),t.toolId&&(t.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,r,t))}parseJSONMarkup(t,r){const i=Et.parseJSONMarkup(t),s=i.selectors,o=this.rootSelector;if(r&&o){if(s[o])throw new Error("Invalid root selector");s[o]=r}return i}can(t){let r=this.graph.options.interacting;if("function"==typeof r&&(r=_e(r,this.graph,this)),"object"==typeof r){let i=r[t];return"function"==typeof i&&(i=_e(i,this.graph,this)),!1!==i}return"boolean"==typeof r&&r}cleanCache(){return this.cache.clean(),this}getCache(t){return this.cache.get(t)}getDataOfElement(t){return this.cache.getData(t)}getMatrixOfElement(t){return this.cache.getMatrix(t)}getShapeOfElement(t){return this.cache.getShape(t)}getBoundingRectOfElement(t){return this.cache.getBoundingRect(t)}getBBoxOfElement(t){const r=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),s=this.getRootRotatedMatrix(),o=this.getRootTranslatedMatrix();return rt.transformRectangle(r,o.multiply(s).multiply(i))}getUnrotatedBBoxOfElement(t){const r=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),s=this.getRootTranslatedMatrix();return rt.transformRectangle(r,s.multiply(i))}getBBox(t={}){let r;if(t.useCellGeometry){const i=this.cell,s=i.isNode()?i.getAngle():0;r=i.getBBox().bbox(s)}else r=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(r)}getRootTranslatedMatrix(){const t=this.cell,r=t.isNode()?t.getPosition():{x:0,y:0};return An().translate(r.x,r.y)}getRootRotatedMatrix(){let t=An();const r=this.cell,i=r.isNode()?r.getAngle():0;if(i){const s=r.getBBox(),o=s.width/2,a=s.height/2;t=t.translate(o,a).rotate(i).translate(-o,-a)}return t}findMagnet(t=this.container){return this.findByAttr("magnet",t)}updateAttrs(t,r,i={}){null==i.rootBBox&&(i.rootBBox=new Y),null==i.selectors&&(i.selectors=this.selectors),this.attr.update(t,r,i)}isEdgeElement(t){return this.cell.isEdge()&&(null==t||t===this.container)}prepareHighlight(t,r={}){const i=t||this.container;return r.partial=i===this.container,i}highlight(t,r={}){const i=this.prepareHighlight(t,r);return this.notify("cell:highlight",{magnet:i,options:r,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:i,options:r,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:i,options:r,view:this,node:this.cell,cell:this.cell}),this}unhighlight(t,r={}){const i=this.prepareHighlight(t,r);return this.notify("cell:unhighlight",{magnet:i,options:r,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:i,options:r,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:i,options:r,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(t,r){}getEdgeTerminal(t,r,i,s,o){const a=this.cell,c=this.findAttr("port",t),u=t.getAttribute("data-selector"),d={cell:a.id};return null!=u&&(d.magnet=u),null!=c?(d.port=c,a.isNode()&&!a.hasPort(c)&&null==u&&(d.selector=this.getSelector(t))):null==u&&this.container!==t&&(d.selector=this.getSelector(t)),d}getMagnetFromEdgeTerminal(t){const r=this.cell,i=this.container,s=t.port;let a,o=t.magnet;return null!=s&&r.isNode()&&r.hasPort(s)?a=this.findPortElem(s,o)||i:(o||(o=t.selector),!o&&null!=s&&(o=`[port="${s}"]`),a=this.findOne(o,i,this.selectors)),a}hasTools(t){const r=this.tools;return null!=r&&(null==t||r.name===t)}addTools(t){if(this.removeTools(),t){if(!this.can("toolsAddable"))return this;const r=ln.isToolsView(t)?t:new ln(t);this.tools=r,r.config({view:this}),r.mount()}return this}updateTools(t={}){return this.tools&&this.tools.update(t),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}notify(t,r){return this.trigger(t,r),this.graph.trigger(t,r),this}getEventArgs(t,r,i){const s=this,o=s.cell;return null==r||null==i?{e:t,view:s,cell:o}:{e:t,x:r,y:i,view:s,cell:o}}onClick(t,r,i){this.notify("cell:click",this.getEventArgs(t,r,i))}onDblClick(t,r,i){this.notify("cell:dblclick",this.getEventArgs(t,r,i))}onContextMenu(t,r,i){this.notify("cell:contextmenu",this.getEventArgs(t,r,i))}onMouseDown(t,r,i){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,r,i))}onMouseUp(t,r,i){this.notify("cell:mouseup",this.getEventArgs(t,r,i)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(t,r,i){this.notify("cell:mousemove",this.getEventArgs(t,r,i))}onMouseOver(t){this.notify("cell:mouseover",this.getEventArgs(t))}onMouseOut(t){this.notify("cell:mouseout",this.getEventArgs(t))}onMouseEnter(t){this.notify("cell:mouseenter",this.getEventArgs(t))}onMouseLeave(t){this.notify("cell:mouseleave",this.getEventArgs(t))}onMouseWheel(t,r,i,s){this.notify("cell:mousewheel",Object.assign({delta:s},this.getEventArgs(t,r,i)))}onCustomEvent(t,r,i,s){this.notify("cell:customevent",Object.assign({name:r},this.getEventArgs(t,i,s))),this.notify(r,Object.assign({},this.getEventArgs(t,i,s)))}onMagnetMouseDown(t,r,i,s){}onMagnetDblClick(t,r,i,s){}onMagnetContextMenu(t,r,i,s){}onLabelMouseDown(t,r,i){}checkMouseleave(t){const r=this.getEventTarget(t,{fromPoint:!0}),i=this.graph.findViewByElem(r);i!==this&&(this.onMouseLeave(t),i&&i.onMouseEnter(t))}}return n.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},n})();(function(n){n.Flag=YL,n.Attr=WL})(Qn||(Qn={})),function(n){n.toStringTag=`X6.${n.name}`,n.isCellView=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate}}(Qn||(Qn={})),function(n){n.priority=function e(r){return function(i){i.config({priority:r})}},n.bootstrap=function t(r){return function(i){i.config({bootstrap:r})}}}(Qn||(Qn={})),function(n){n.registry=Zt.create({type:"view"})}(Qn||(Qn={}));class ln extends Ot{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return ln.toStringTag}constructor(e={}){super(),this.svgContainer=this.createContainer(!0,e),this.htmlContainer=this.createContainer(!1,e),this.config(e)}createContainer(e,t){const r=e?Ot.createElement("g",!0):Ot.createElement("div",!1);return ze(r,this.prefixClassName("cell-tools")),t.className&&ze(r,t.className),r}config(e){if(this.options=Object.assign(Object.assign({},this.options),e),!Qn.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(ze(this.svgContainer,this.prefixClassName("edge-tools")),ze(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(ze(this.svgContainer,this.prefixClassName("node-tools")),ze(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];const r=[];t.forEach(i=>{ln.ToolItem.isToolItem(i)?"vertices"===i.name?r.unshift(i):r.push(i):"vertices"===("object"==typeof i?i.name:i)?r.unshift(i):r.push(i)});for(let i=0;i<r.length;i+=1){const s=r[i];let o;if(ln.ToolItem.isToolItem(s))o=s;else{const a="object"==typeof s?s.name:s,c="object"==typeof s&&s.args||{};if(a)if(this.cell.isNode()){const u=td.registry.get(a);if(!u)return td.registry.onNotFound(a);o=new u(c)}else if(this.cell.isEdge()){const u=nd.registry.get(a);if(!u)return nd.registry.onNotFound(a);o=new u(c)}}o&&(o.config(this.cellView,this),o.render(),(!1!==o.options.isSVGElement?this.svgContainer:this.htmlContainer).appendChild(o.container),this.tools.push(o))}return this}update(e={}){const t=this.tools;return t&&t.forEach(r=>{e.toolId!==r.cid&&r.isVisible()&&r.update()}),this}focus(e){const t=this.tools;return t&&t.forEach(r=>{e===r?r.show():r.hide()}),this}blur(e){const t=this.tools;return t&&t.forEach(r=>{r!==e&&!r.isVisible()&&(r.show(),r.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const e=this.tools;return e&&(e.forEach(t=>t.remove()),this.tools=null),Hf(this.svgContainer),Hf(this.htmlContainer),super.remove()}mount(){const e=this.tools,t=this.cellView;if(t&&e){const r=e.some(s=>!1!==s.options.isSVGElement),i=e.some(s=>!1===s.options.isSVGElement);r&&(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer),i&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(n){n.toStringTag=`X6.${n.name}`,n.isToolsView=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&null!=t.graph&&null!=t.cell&&"function"==typeof t.config&&"function"==typeof t.update&&"function"==typeof t.focus&&"function"==typeof t.blur&&"function"==typeof t.show&&"function"==typeof t.hide}})(ln||(ln={})),function(n){let e=(()=>{class t extends Ot{static getDefaults(){return this.defaults}static config(i){this.defaults=this.getOptions(i)}static getOptions(i){return cn(jt(this.getDefaults()),i)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return t.toStringTag}constructor(i={}){super(),this.visible=!0,this.options=this.getOptions(i),this.container=Ot.createElement(this.options.tagName||"g",!1!==this.options.isSVGElement),ze(this.container,this.prefixClassName("cell-tool")),"string"==typeof this.options.className&&ze(this.container,this.options.className),this.init()}init(){}getOptions(i){return this.constructor.getOptions(i)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(i,s){return this.cellView=i,this.parent=s,this.stamp(this.container),this.cell.isEdge()?ze(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&ze(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const i=this.options.markup;if(i){const s=Et.parseJSONMarkup(i);this.container.appendChild(s.fragment),this.childNodes=s.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(i){i&&i.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const i=this.options.focusOpacity;return null!=i&&Number.isFinite(i)&&(this.container.style.opacity=`${i}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(i){return null==this.graph||null==this.cellView||this.graph.view.guard(i,this.cellView)}}return t.defaults={isSVGElement:!0,tagName:"g"},t})();var t;n.ToolItem=e,function(t){let r=0;t.define=function s(o){const a=iD(function i(o){return o?uD(o):(r+=1,`CustomTool${r}`)}(o.name),this);return a.config(o),a}}(e=n.ToolItem||(n.ToolItem={})),(t=e=n.ToolItem||(n.ToolItem={})).toStringTag=`X6.${t.name}`,t.isToolItem=function r(i){if(null==i)return!1;if(i instanceof t)return!0;const s=i[Symbol.toStringTag];return(null==s||s===t.toStringTag)&&null!=i.graph&&null!=i.cell&&"function"==typeof i.config&&"function"==typeof i.update&&"function"==typeof i.focus&&"function"==typeof i.blur&&"function"==typeof i.show&&"function"==typeof i.hide&&"function"==typeof i.isVisible}}(ln||(ln={}));const gte=n=>n;function ZL(n,e){return 0===e?"0%":`${Math.round(n/e*100)}%`}function JL(n){return(t,r,i,s)=>r.isEdgeElement(i)?function mte(n,e,t,r,i){const s=t.getConnection();if(!s)return e;const o=s.closestPointLength(i);if(n){const a=s.length();e.anchor={name:"ratio",args:{ratio:o/a}}}else e.anchor={name:"length",args:{length:o}};return e}(n,t,r,0,s):function pte(n,e,t,r,i){const s=t.cell,o=s.getAngle(),a=t.getUnrotatedBBoxOfElement(r),c=s.getBBox().getCenter(),u=T.create(i).rotate(o,c);let d=u.x-a.x,h=u.y-a.y;return n&&(d=ZL(d,a.width),h=ZL(h,a.height)),e.anchor={name:"topLeft",args:{dx:d,dy:h,rotate:!0}},e}(n,t,r,i,s)}const yte=JL(!0),vte=JL(!1);var kD;function XL(n,e,t,r){return _e(kD.presets.pinRelative,this.graph,{},e,t,n,this.cell,r,{}).anchor}function KL(n,e){return e?n.cell.getBBox():n.cell.isEdge()?n.getConnection().bbox():n.getUnrotatedBBoxOfElement(n.container)}!function(n){n.presets=pd,n.registry=Zt.create({type:"connection strategy"}),n.registry.register(n.presets,!0)}(kD||(kD={}));class La extends ln.ToolItem{onRender(){ze(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();zf(this.container,t,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:r=0,y:i=0}=t;const{offset:s,useCellGeometry:o,rotate:a}=t;let c=KL(e,o);const u=e.cell.getAngle();a||(c=c.bbox(u));let d=0,h=0;"number"==typeof s?(d=s,h=s):"object"==typeof s&&(d=s.x,h=s.y),r=ts(r,c.width),i=ts(i,c.height);let g=An().translate(c.x+c.width/2,c.y+c.height/2);return a&&(g=g.rotate(u)),g=g.translate(r+d-c.width/2,i+h-c.height/2),g}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:r=0,distance:i=0,rotate:s}=t;let o,a,c;const u=ts(i,1);o=u>=0&&u<=1?e.getTangentAtRatio(u):e.getTangentAtLength(u),o?(a=o.start,c=o.vector().vectorAngle(new T(1,0))||0):(a=e.getConnection().start,c=0);let d=An().translate(a.x,a.y).rotate(c);return d="object"==typeof r?d.translate(r.x||0,r.y||0):d.translate(0,r),s||(d=d.rotate(-c)),d}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;"function"==typeof t&&_e(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(n){n.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(La||(La={})),function(n){n.Remove=n.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}})}(La||(La={}));class Qb extends ln.ToolItem{onRender(){if(ze(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,r=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(e,["class"]);ut(this.container,gp(r)),t&&ze(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:r,rotate:i}=t,s=nl(t.padding);let o=KL(e,r).moveAndExpand({x:-s.left,y:-s.top,width:s.left+s.right,height:s.top+s.bottom});const a=e.cell;if(a.isNode()){const c=a.getAngle();if(c)if(i){const u=a.getBBox().getCenter();DD(this.container,c,u.x,u.y,{absolute:!0})}else o=o.bbox(c)}return ut(this.container,o.toJSON()),this}}!function(n){n.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})}(Qb||(Qb={}));class Ap extends ln.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}renderHandles(){const e=this.vertices;for(let t=0,r=e.length;t<r;t+=1){const i=e[t],o=this.options.processHandle,a=(0,this.options.createHandle)({index:t,graph:this.graph,guard:c=>this.guard(c),attrs:this.options.attrs||{}});o&&o(a),a.updatePosition(i.x,i.y),this.stamp(a.container),this.container.appendChild(a.container),this.handles.push(a),this.startHandleListening(a)}}updateHandles(){const e=this.vertices;for(let t=0,r=e.length;t<r;t+=1){const i=e[t],s=this.handles[t];s&&s.updatePosition(i.x,i.y)}}updatePath(){const e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}stopHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}getNeighborPoints(e){const t=this.cellView,r=this.vertices,s=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:T.create(e>0?r[e-1]:t.sourceAnchor),next:T.create(s)}}getMouseEventArgs(e){const t=this.normalizeEvent(e),{x:r,y:i}=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:r,y:i}}onHandleChange({e}){this.focus();const t=this.cellView;if(t.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:r,x:i,y:s}=this.getMouseEventArgs(e);this.eventData(r,{start:{x:i,y:s}}),t.notifyMouseDown(r,i,s)}}onHandleChanging({handle:e,e:t}){const r=this.cellView,i=e.options.index,{e:s,x:o,y:a}=this.getMouseEventArgs(t),c={x:o,y:a};this.snapVertex(c,i),r.cell.setVertexAt(i,c,{ui:!0,toolId:this.cid}),e.updatePosition(c.x,c.y),this.options.stopPropagation||r.notifyMouseMove(s,o,a)}stopBatch(e){this.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),e&&this.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid})}onHandleChanged({e}){const t=this.options,r=this.cellView;if(t.addable&&this.updatePath(),!t.removeRedundancies)return void this.stopBatch(this.eventData(e).vertexAdded);r.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),this.stopBatch(this.eventData(e).vertexAdded);const{e:s,x:o,y:a}=this.getMouseEventArgs(e);if(!this.options.stopPropagation){r.notifyMouseUp(s,o,a);const{start:c}=this.eventData(s);if(c){const{x:u,y:d}=c;u===o&&d===a&&r.onClick(s,o,a)}}r.checkMouseleave(s),t.onChanged&&t.onChanged({edge:r.cell,edgeView:r})}snapVertex(e,t){const r=this.options.snapRadius||0;if(r>0){const i=this.getNeighborPoints(t),s=i.prev,o=i.next;Math.abs(e.x-s.x)<r?e.x=s.x:Math.abs(e.x-o.x)<r&&(e.x=o.x),Math.abs(e.y-s.y)<r?e.y=i.prev.y:Math.abs(e.y-o.y)<r&&(e.y=o.y)}}onHandleRemove({handle:e,e:t}){if(this.options.removable){const i=this.cellView;i.cell.removeVertexAt(e.options.index,{ui:!0}),this.options.addable&&this.updatePath(),i.checkMouseleave(this.normalizeEvent(t))}}allowAddVertex(e){const t=this.guard(e),r=this.options.addable&&this.cellView.can("vertexAddable"),i=!this.options.modifiers||qf.isMatch(e,this.options.modifiers);return!t&&r&&i}onPathMouseDown(e){const t=this.cellView;if(!this.allowAddVertex(e))return;e.stopPropagation(),e.preventDefault();const r=this.normalizeEvent(e),i=this.graph.snapToGrid(r.clientX,r.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const s=t.getVertexIndex(i.x,i.y);this.snapVertex(i,s),t.cell.insertVertex(i,s,{ui:!0,toolId:this.cid}),this.render();const o=this.handles[s];this.eventData(r,{vertexAdded:!0}),o.onMouseDown(r)}onRemove(){this.resetHandles()}}(function(n){n.Handle=class e extends Ot{get graph(){return this.options.graph}constructor(r){super(),this.options=r,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=Ot.createElement("circle",!0);const r=this.options.attrs;if("function"==typeof r){const i=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(r,i){this.setAttrs({cx:r,cy:i})}onMouseDown(r){this.options.guard(r)||(r.stopPropagation(),r.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data),this.emit("change",{e:r,handle:this}))}onMouseMove(r){this.emit("changing",{e:r,handle:this})}onMouseUp(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(r){this.emit("remove",{e:r,handle:this})}}})(Ap||(Ap={})),function(n){const e=Fn.prefix("edge-tool-vertex-path");n.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:t=>new n.Handle(t),markup:[{tagName:"path",selector:"connection",className:e,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${e}`]:"onPathMouseDown",[`touchstart .${e}`]:"onPathMouseDown"}})}(Ap||(Ap={}));class Mp extends ln.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){ze(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const e=this.cellView,t=[...this.vertices];t.unshift(e.sourcePoint),t.push(e.targetPoint);for(let r=0,i=t.length;r<i-1;r+=1){const a=this.renderHandle(t[r],t[r+1],r);this.stamp(a.container),this.handles.push(a)}return this}renderHandle(e,t,r){const i=this.options.createHandle({index:r,graph:this.graph,guard:s=>this.guard(s),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(i),this.updateHandle(i,e,t),this.container.appendChild(i.container),this.startHandleListening(i),i}startHandleListening(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}stopHandleListening(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}shiftHandleIndexes(e){const t=this.handles;for(let r=0,i=t.length;r<i;r+=1)t[r].options.index+=e}resetAnchor(e,t){const r=this.cellView.cell,i={ui:!0,toolId:this.cid};t?r.prop([e,"anchor"],t,i):r.removeProp([e,"anchor"],i)}snapHandle(e,t,r){const i=e.options.axis,s=e.options.index,c=this.cellView.cell.getVertices(),u=c[s-2]||r.sourceAnchor,d=c[s+1]||r.targetAnchor,h=this.options.snapRadius;return Math.abs(t[i]-u[i])<h?t[i]=u[i]:Math.abs(t[i]-d[i])<h&&(t[i]=d[i]),t}onHandleChanging({handle:e,e:t}){const r=this.graph,i=this.options,s=this.cellView,o=i.anchor,a=e.options.axis,c=e.options.index-1,u=this.getEventData(t),d=this.normalizeEvent(t),h=r.snapToGrid(d.clientX,d.clientY),g=this.snapHandle(e,h.clone(),u),m=jt(this.vertices);let y=m[c],v=m[c+1];const w=s.sourceView,_=s.sourceBBox;let C=!1,E=!1;if(y?0===c?_.containsPoint(y)?(m.shift(),this.shiftHandleIndexes(-1),C=!0):(y[a]=g[a],E=!0):y[a]=g[a]:(y=s.sourceAnchor.toJSON(),y[a]=g[a],_.containsPoint(y)?C=!0:(m.unshift(y),this.shiftHandleIndexes(1),E=!0)),"function"==typeof o&&w){if(C){const G=u.sourceAnchor.clone();G[a]=g[a];const q=_e(o,s,G,w,s.sourceMagnet||w.container,"source",s,this);this.resetAnchor("source",q)}E&&this.resetAnchor("source",u.sourceAnchorDef)}const A=s.targetView,P=s.targetBBox;let L=!1,V=!1;if(v?c===m.length-2?P.containsPoint(v)?(m.pop(),L=!0):(v[a]=g[a],V=!0):v[a]=g[a]:(v=s.targetAnchor.toJSON(),v[a]=g[a],P.containsPoint(v)?L=!0:(m.push(v),V=!0)),"function"==typeof o&&A){if(L){const G=u.targetAnchor.clone();G[a]=g[a];const q=_e(o,s,G,A,s.targetMagnet||A.container,"target",s,this);this.resetAnchor("target",q)}V&&this.resetAnchor("target",u.targetAnchorDef)}T.equalPoints(m,this.vertices)||this.cellView.cell.setVertices(m,{ui:!0,toolId:this.cid}),this.updateHandle(e,y,v,0),i.stopPropagation||s.notifyMouseMove(d,h.x,h.y)}onHandleChange({handle:e,e:t}){const r=this.options,i=this.handles,s=this.cellView,o=e.options.index;if(Array.isArray(i)){for(let a=0,c=i.length;a<c;a+=1)a!==o&&i[a].hide();if(this.focus(),this.setEventData(t,{sourceAnchor:s.sourceAnchor.clone(),targetAnchor:s.targetAnchor.clone(),sourceAnchorDef:jt(this.cell.prop(["source","anchor"])),targetAnchorDef:jt(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!r.stopPropagation){const a=this.normalizeEvent(t),c=this.graph.snapToGrid(a.clientX,a.clientY);s.notifyMouseDown(a,c.x,c.y)}}}onHandleChanged({e}){const t=this.options,r=this.cellView;t.removeRedundancies&&r.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const i=this.normalizeEvent(e),s=this.graph.snapToGrid(i.clientX,i.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),t.stopPropagation||r.notifyMouseUp(i,s.x,s.y),r.checkMouseleave(i),t.onChanged&&t.onChanged({edge:r.cell,edgeView:r})}updateHandle(e,t,r,i=0){const s=this.options.precision||0,o=Math.abs(t.x-r.x)<s,a=Math.abs(t.y-r.y)<s;if(o||a){const c=new Q(t,r);if(c.length()<this.options.threshold)e.hide();else{const d=c.getCenter(),h=o?"x":"y";d[h]+=i||0;const g=c.vector().vectorAngle(new T(1,0));e.updatePosition(d.x,d.y,g,this.cellView),e.show(),e.options.axis=h}}else e.hide()}onRemove(){this.resetHandles()}}(function(n){n.Handle=class e extends Ot{constructor(r){super(),this.options=r,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=Ot.createElement("rect",!0);const r=this.options.attrs;if("function"==typeof r){const i=n.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(r,i,s,o){const a=o.getClosestPoint(new T(r,i))||new T(r,i);let c=An().translate(a.x,a.y);if(a.equals({x:r,y:i}))c=c.rotate(s);else{let d=new Q(r,i,a.x,a.y).vector().vectorAngle(new T(1,0));0!==d&&(d+=90),c=c.rotate(d)}this.setAttrs({transform:Uf(c),cursor:s%180==0?"row-resize":"col-resize"})}onMouseDown(r){this.options.guard(r)||(this.trigger("change",{e:r,handle:this}),r.stopPropagation(),r.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data))}onMouseMove(r){this.emit("changing",{e:r,handle:this})}onMouseUp(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}})(Mp||(Mp={})),function(n){n.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:e=>new n.Handle(e),anchor:XL})}(Mp||(Mp={}));class e0 extends ln.ToolItem{get type(){return this.options.type}onRender(){ze(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){return this.cellView.getTerminalView(this.type)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const r=this.type,i=this.cellView,s=this.options,o=i.getTerminalAnchor(r),a=i.cell.prop([r,"anchor"]);t.setAttribute("transform",`translate(${o.x}, ${o.y})`);const c=a?s.customAnchorAttrs:s.defaultAnchorAttrs;c&&Object.keys(c).forEach(u=>{t.setAttribute(u,c[u])})}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const r=this.type,i=this.cellView,s=i.getTerminalView(r);if(s){const o=s.cell,a=i.getTerminalMagnet(r);let u,d,h,c=this.options.areaPadding||0;Number.isFinite(c)||(c=0),s.isEdgeElement(a)?(u=s.getBBox(),d=0,h=u.getCenter()):(u=s.getUnrotatedBBoxOfElement(a),d=o.getAngle(),h=u.getCenter(),d&&h.rotate(-d,o.getBBox().getCenter())),u.inflate(c),ut(t,{x:-u.width/2,y:-u.height/2,width:u.width,height:u.height,transform:`translate(${h.x}, ${h.y}) rotate(${d})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,r=this.cell;e?r.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):r.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,r=this.cellView,i=r.getTerminalView(t);if(null==i)return;const s=this.normalizeEvent(e),o=i.cell,a=r.getTerminalMagnet(t);let c=this.graph.coord.clientToLocalPoint(s.clientX,s.clientY);const u=this.options.snap;if("function"==typeof u){const g=_e(u,r,c,i,a,t,r,this);c=T.create(g)}if(this.options.restrictArea)if(i.isEdgeElement(a)){const g=i.getClosestPoint(c);g&&(c=g)}else{const g=i.getUnrotatedBBoxOfElement(a),m=o.getAngle(),y=o.getBBox().getCenter(),v=c.clone().rotate(m,y);g.containsPoint(v)||(c=g.getNearestPointToPoint(v).rotate(-m,y))}let d;const h=this.options.anchor;"function"==typeof h&&(d=_e(h,r,c,i,a,t,r,this)),this.resetAnchor(d),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1),this.options.removeRedundancies&&this.cellView.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(!0===e?void 0:e),this.update()}}!function(n){n.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:XL,snap(e,t,r,i,s,o){const a=o.options.snapRadius||0,c="source"===i,d=this.cell.getVertexAt(c?0:-1)||this.getTerminalAnchor(c?"target":"source");return d&&(Math.abs(d.x-e.x)<a&&(e.x=d.x),Math.abs(d.y-e.y)<a&&(e.y=d.y)),e}})}(e0||(e0={}));const wte=e0.define({name:"source-anchor",type:"source"}),Cte=e0.define({name:"target-anchor",type:"target"});class t0 extends ln.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const e=this.options.attrs,{class:t}=e,r=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(e,["class"]);this.setAttrs(r,this.container),t&&ze(this.container,t)}}onRender(){ze(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const e=this.ratio,t=this.cellView,r=t.getTangentAtRatio(e),i=r?r.start:t.getPointAtRatio(e),s=r&&r.vector().vectorAngle(new T(1,0))||0;if(!i)return this;const o=An().translate(i.x,i.y).rotate(s);return zf(this.container,o,{absolute:!0}),this}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const r=this.graph.snapToGrid(e.clientX,e.clientY),i=t.prepareArrowheadDragging(this.type,{x:r.x,y:r.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(e,i),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(e){const t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,r.x,r.y),this.update()}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),r=this.cellView,i=this.graph.snapToGrid(t.clientX,t.clientY);r.onMouseUp(t,i.x,i.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",r.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}!function(n){n.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})}(t0||(t0={}));const xte=t0.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Ete=t0.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class ed extends ln.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5,this.dblClick=this.onCellDblClick.bind(this)}onRender(){const e=this.cellView;e&&e.on("cell:dblclick",this.dblClick)}createElement(){const e=[this.prefixClassName((this.cell.isEdge()?"edge":"node")+"-tool-editor"),this.prefixClassName("cell-tool-editor")];this.editor=ln.createElement("div",!1),this.addClass(e,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}removeElement(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}updateEditor(){const{cell:e,editor:t}=this;if(!t)return;const{style:r}=t;e.isNode()?this.updateNodeEditorTransform():e.isEdge()&&this.updateEdgeEditorTransform();const{attrs:i}=this.options;r.fontSize=`${i.fontSize}px`,r.fontFamily=i.fontFamily,r.color=i.color,r.backgroundColor=i.backgroundColor;const s=this.getCellText()||"";return t.innerText=s,this.setCellText(""),this}updateNodeEditorTransform(){const{graph:e,cell:t,editor:r}=this;if(!r)return;let i=T.create(),s=20,o="",{x:a,y:c}=this.options;const{width:u,height:d}=this.options;if(typeof a<"u"&&typeof c<"u"){const m=t.getBBox();a=ts(a,m.width),c=ts(c,m.height),i=m.topLeft.translate(a,c),s=m.width-2*a}else{const m=t.getBBox();i=m.center,s=m.width-4,o="translate(-50%, -50%)"}const h=e.scale(),{style:g}=r;i=e.localToGraph(i),g.left=`${i.x}px`,g.top=`${i.y}px`,g.transform=`scale(${h.sx}, ${h.sy}) ${o}`,g.minWidth=`${s}px`,"number"==typeof u&&(g.width=`${u}px`),"number"==typeof d&&(g.height=`${d}px`)}updateEdgeEditorTransform(){if(!this.event)return;const{graph:e,editor:t}=this;if(!t)return;let r=T.create(),i=20;const{style:s}=t,o=this.event.target,a=o.parentElement;if(a&&Vf(a,this.prefixClassName("edge-label"))){const d=a.getAttribute("data-index")||"0";this.labelIndex=parseInt(d,10);const h=a.getAttribute("transform"),{translation:g}=qb(h);r=new T(g.tx,g.ty),i=rt.getBBox(o).width}else{if(!this.options.labelAddable)return this;r=e.clientToLocal(T.create(this.event.clientX,this.event.clientY));const h=this.cellView.path.closestPointLength(r);this.distance=h,this.labelIndex=-1}r=e.localToGraph(r);const u=e.scale();s.left=`${r.x}px`,s.top=`${r.y}px`,s.minWidth=`${i}px`,s.transform=`scale(${u.sx}, ${u.sy}) translate(-50%, -50%)`}onDocumentMouseDown(e){if(this.editor&&e.target!==this.editor){const t=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(""!==t?t:null),this.removeElement()}}onCellDblClick({e}){e.stopPropagation(),this.removeElement(),this.event=e,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents)}onMouseDown(e){e.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor&&(this.editor.focus(),this.selectText())})}selectText(){if(window.getSelection&&this.editor){const e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}getCellText(){const{getText:e}=this.options;if("function"==typeof e)return _e(e,this.cellView,{cell:this.cell,index:this.labelIndex});if("string"==typeof e){if(this.cell.isNode())return this.cell.attr(e);if(this.cell.isEdge()&&-1!==this.labelIndex)return this.cell.prop(`labels/${this.labelIndex}/attrs/${e}`)}}setCellText(e){const t=this.options.setText;if("function"!=typeof t){if("string"==typeof t){if(this.cell.isNode())return void(null!==e&&this.cell.attr(t,e));if(this.cell.isEdge()){const r=this.cell;if(-1===this.labelIndex){if(e){const i={position:{distance:this.distance},attrs:{}};Ff(i,`attrs/${t}`,e),r.appendLabel(i)}}else null!==e?r.prop(`labels/${this.labelIndex}/attrs/${t}`,e):"number"==typeof this.labelIndex&&r.removeLabelAt(this.labelIndex)}}}else _e(t,this.cellView,{cell:this.cell,value:e,index:this.labelIndex,distance:this.distance})}onRemove(){const e=this.cellView;e&&e.off("cell:dblclick",this.dblClick),this.removeElement()}}(function(n){n.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(ed||(ed={})),function(n){n.NodeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:"text/text",setText:"text/text"}),n.EdgeEditor=n.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:"label/text",setText:"label/text"})}(ed||(ed={}));var td,nd,QL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};!function(n){n.presets={boundary:Qb,button:La,"button-remove":La.Remove,"node-editor":ed.NodeEditor},n.registry=Zt.create({type:"node tool",process(e,t){if("function"==typeof t)return t;let r=ln.ToolItem;const{inherit:i}=t,s=QL(t,["inherit"]);if(i){const o=this.get(i);null==o?this.onNotFound(i,"inherited"):r=o}return null==s.name&&(s.name=e),r.define.call(r,s)}}),n.registry.register(n.presets,!0)}(td||(td={})),function(n){n.presets={boundary:Qb,vertices:Ap,segments:Mp,button:La,"button-remove":La.Remove,"source-anchor":wte,"target-anchor":Cte,"source-arrowhead":xte,"target-arrowhead":Ete,"edge-editor":ed.EdgeEditor},n.registry=Zt.create({type:"edge tool",process(e,t){if("function"==typeof t)return t;let r=ln.ToolItem;const{inherit:i}=t,s=QL(t,["inherit"]);if(i){const o=this.get(i);null==o?this.onNotFound(i,"inherited"):r=o}return null==s.name&&(s.name=e),r.define.call(r,s)}}),n.registry.register(n.presets,!0)}(nd||(nd={}));const Dte=So("center"),Ste=So("topCenter"),Ate=So("bottomCenter"),Mte=So("leftMiddle"),Ite=So("rightMiddle"),Tte=So("topLeft"),Pte=So("topRight"),Ote=So("bottomLeft"),Nte=So("bottomRight");function So(n){return function(e,t,r,i={}){const s=i.rotate?e.getUnrotatedBBoxOfElement(t):e.getBBoxOfElement(t),o=s[n];o.x+=ts(i.dx,s.width),o.y+=ts(i.dy,s.height);const a=e.cell;return i.rotate?o.rotate(-a.getAngle(),a.getBBox().getCenter()):o}}function n0(n){return function(e,t,r,i){if(r instanceof Element){const s=this.graph.findViewByElem(r);let o;return o=s?s.isEdgeElement(r)?ek(s,null!=i.fixedAt?i.fixedAt:"50%"):s.getBBoxOfElement(r).getCenter():new T,n.call(this,e,t,o,i)}return n.apply(this,arguments)}}function ek(n,e){const t=_o(e),r="string"==typeof e?parseFloat(e):e;return t?n.getPointAtRatio(r/100):n.getPointAtLength(r)}const Rte=n0(function(n,e,t,r){const i=n.cell.getAngle(),s=n.getBBoxOfElement(e),o=s.getCenter(),a=s.getTopLeft(),c=s.getBottomRight();let u=r.padding;if(Number.isFinite(u)||(u=0),a.y+u<=t.y&&t.y<=c.y-u){const d=t.y-o.y;o.x+=0===i||180===i?0:1*d/Math.tan(bt.toRad(i)),o.y+=d}else if(a.x+u<=t.x&&t.x<=c.x-u){const d=t.x-o.x;o.y+=90===i||270===i?0:d*Math.tan(bt.toRad(i)),o.x+=d}return o}),Lte=function(n,e,t,r,i){const s=n.cell.getConnectionPoint(this.cell,i);return(r.dx||r.dy)&&s.translate(r.dx||0,r.dy||0),s},kte=n0(function(n,e,t,r){let i,o,s=0;const a=n.cell;r.rotate?(i=n.getUnrotatedBBoxOfElement(e),o=a.getBBox().getCenter(),s=a.getAngle()):i=n.getBBoxOfElement(e);const c=r.padding;null!=c&&Number.isFinite(c)&&i.inflate(c),r.rotate&&t.rotate(s,o);const u=i.getNearestSideToPoint(t);let d;switch(u){case"left":d=i.getLeftMiddle();break;case"right":d=i.getRightMiddle();break;case"top":d=i.getTopCenter();break;case"bottom":d=i.getBottomCenter()}const h=r.direction;return"H"===h?("top"===u||"bottom"===u)&&(d=t.x<=i.x+i.width?i.getLeftMiddle():i.getRightMiddle()):"V"===h&&(d=t.y<=i.y+i.height?i.getTopCenter():i.getBottomCenter()),r.rotate?d.rotate(-s,o):d});var rd;!function(n){n.presets=Po,n.registry=Zt.create({type:"node endpoint"}),n.registry.register(n.presets,!0)}(rd||(rd={}));const Fte=function(n,e,t,r){let i=null!=r.ratio?r.ratio:.5;return i>1&&(i/=100),n.getPointAtRatio(i)},jte=function(n,e,t,r){return n.getPointAtLength(null!=r.length?r.length:20)},tk=function(n,e,t,r){return n.getClosestPoint(t)??new T},Bte=n0(tk),$te=n0(function(n,e,t,r){const s=n.getConnection(),o=n.getConnectionSubdivisions(),a=new Q(t.clone().translate(0,1e6),t.clone().translate(0,-1e6)),c=new Q(t.clone().translate(1e6,0),t.clone().translate(-1e6,0)),u=a.intersect(s,{segmentSubdivisions:o}),d=c.intersect(s,{segmentSubdivisions:o}),h=[];return u&&h.push(...u),d&&h.push(...d),h.length>0?t.closest(h):null!=r.fallbackAt?ek(n,r.fallbackAt):_e(tk,this,n,e,t,r)});var id;function r0(n,e,t){let r;if("object"==typeof t){if(Number.isFinite(t.y)){const s=new Q(e,n),{start:o,end:a}=s.parallel(t.y);e=o,n=a}r=t.x}else r=t;if(null==r||!Number.isFinite(r))return n;const i=n.distance(e);return 0===r&&i>0?n:n.move(e,-Math.min(r,i-1))}function s0(n){const e=n.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}!function(n){n.presets=ti,n.registry=Zt.create({type:"edge endpoint"}),n.registry.register(n.presets,!0)}(id||(id={}));const nk=function(n,e,t,r){const i=e.getBBoxOfElement(t);r.stroked&&i.inflate(s0(t)/2);const s=n.intersect(i);return r0(s&&s.length?n.start.closest(s):n.end,n.start,r.offset)},Hte=function(n,e,t,r,i){const s=e.cell,o=s.isNode()?s.getAngle():0;if(0===o)return _e(nk,this,n,e,t,r,i);const a=e.getUnrotatedBBoxOfElement(t);r.stroked&&a.inflate(s0(t)/2);const c=a.getCenter(),u=n.clone().rotate(o,c),d=u.setLength(1e6).intersect(a);return r0(d&&d.length?u.start.closest(d).rotate(-o,c):n.end,n.start,r.offset)},Ute=function(n,e,t,r){let i,s;const o=n.end,a=r.selector;if(i="string"==typeof a?e.findOne(a):Array.isArray(a)?sD(t,a):function Vte(n){if(null==n)return null;let e=n;do{let t=e.tagName;if("string"!=typeof t)return null;if(t=t.toUpperCase(),"G"===t)e=e.firstElementChild;else{if("TITLE"!==t)break;e=e.nextElementSibling}}while(e);return e}(t),!Aa(i)){if(i===t||!Aa(t))return o;i=t}const c=e.getShapeOfElement(i),u=e.getMatrixOfElement(i),d=e.getRootTranslatedMatrix(),h=e.getRootRotatedMatrix(),g=d.multiply(h).multiply(u),m=g.inverse(),y=rt.transformLine(n,m),v=y.start.clone(),w=e.getDataOfElement(i);if(!1===r.insideout){null==w.shapeBBox&&(w.shapeBBox=c.bbox());const A=w.shapeBBox;if(null!=A&&A.containsPoint(v))return o}let _;if(!0===r.extrapolate&&y.setLength(1e6),ae.isPath(c)){const A=r.precision||2;null==w.segmentSubdivisions&&(w.segmentSubdivisions=c.getSegmentSubdivisions({precision:A})),_={precision:A,segmentSubdivisions:w.segmentSubdivisions},s=y.intersect(c,_)}else s=y.intersect(c);s?Array.isArray(s)&&(s=v.closest(s)):!0===r.sticky&&(s=Y.isRectangle(c)?c.getNearestPointToPoint(v):ns.isEllipse(c)?c.intersectsWithLineFromCenterToPoint(v):c.closestPoint(v,_));const C=s?rt.transformPoint(s,g):o;let E=r.offset||0;return!1!==r.stroked&&("object"==typeof E?(E=Object.assign({},E),null==E.x&&(E.x=0),E.x+=s0(i)/2):E+=s0(i)/2),r0(C,n.start,E)},Gte=function(n,e,t,r){const{alignOffset:i,align:s}=r;return s&&function zte(n,e,t=0){const{start:r,end:i}=n;let s,o,a,c;switch(e){case"left":c="x",s=i,o=r,a=-1;break;case"right":c="x",s=r,o=i,a=1;break;case"top":c="y",s=i,o=r,a=-1;break;case"bottom":c="y",s=r,o=i,a=1;break;default:return}r[c]<i[c]?s[c]=o[c]:o[c]=s[c],Number.isFinite(t)&&(s[c]+=a*t,o[c]+=a*t)}(n,s,i),r0(n.end,n.start,r.offset)};var sd;!function(n){n.presets=cl,n.registry=Zt.create({type:"connection point"}),n.registry.register(n.presets,!0)}(sd||(sd={}));const qte=function(n){return[...n]},Wte=function(n,e,t){const r=e.side||"bottom",i=nl(e.padding||40),s=t.sourceBBox,o=t.targetBBox,a=s.getCenter(),c=o.getCenter();let u,d,h;switch(r){case"top":h=-1,u="y",d="height";break;case"left":h=-1,u="x",d="width";break;case"right":h=1,u="x",d="width";break;default:h=1,u="y",d="height"}return a[u]+=h*(s[d]/2+i[r]),c[u]+=h*(o[d]/2+i[r]),h*(a[u]-c[u])>0?c[u]=a[u]:a[u]=c[u],[a.toJSON(),...n,c.toJSON()]};function o0(n){return new Y(n.x,n.y,0,0)}function a0(n={}){const e=nl(n.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function rk(n,e={}){return n.sourceBBox.clone().moveAndExpand(a0(e))}function ik(n,e={}){return n.targetBBox.clone().moveAndExpand(a0(e))}const sk=function(n,e,t){let r=rk(t,e),i=ik(t,e);const s=function Yte(n,e={}){return n.sourceAnchor?n.sourceAnchor:rk(n,e).getCenter()}(t,e),o=function Zte(n,e={}){return n.targetAnchor?n.targetAnchor:ik(n,e).getCenter()}(t,e);r=r.union(o0(s)),i=i.union(o0(o));const a=n.map(d=>T.create(d));a.unshift(s),a.push(o);let c=null;const u=[];for(let d=0,h=a.length-1;d<h;d+=1){let g=null;const m=a[d],y=a[d+1],v=null!=Ti.getBearing(m,y);if(0===d)d+1===h?r.intersectsWithRect(i.clone().inflate(1))?g=Ti.insideNode(m,y,r,i):v||(g=Ti.nodeToNode(m,y,r,i)):r.containsPoint(y)?g=Ti.insideNode(m,y,r,o0(y).moveAndExpand(a0(e))):v||(g=Ti.nodeToVertex(m,y,r));else if(d+1===h){const w=v&&Ti.getBearing(y,m)===c;i.containsPoint(m)||w?g=Ti.insideNode(m,y,o0(m).moveAndExpand(a0(e)),i,c):v||(g=Ti.vertexToNode(m,y,i,c))}else v||(g=Ti.vertexToVertex(m,y,c));g?(u.push(...g.points),c=g.direction):c=Ti.getBearing(m,y),d+1<h&&u.push(y)}return u};var Ti;!function(n){const e={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function r(h,g,m){let y=new T(h.x,g.y);return m.containsPoint(y)&&(y=new T(g.x,h.y)),y}function i(h,g){return h["W"===g||"E"===g?"width":"height"]}function s(h,g){return h.x===g.x?h.y>g.y?"N":"S":h.y===g.y?h.x>g.x?"W":"E":null}function o(h,g,m){const y=new T(h.x,g.y),v=new T(g.x,h.y),w=s(h,y),_=s(h,v),C=m?e[m]:null,E=w===m||w!==C&&(_===C||_!==m)?y:v;return{points:[E],direction:s(E,g)}}function a(h,g,m){const y=r(h,g,m);return{points:[y],direction:s(y,g)}}n.getBBoxSize=i,n.getBearing=s,n.vertexToVertex=o,n.nodeToVertex=a,n.vertexToNode=function c(h,g,m,y){const v=[new T(h.x,g.y),new T(g.x,h.y)],w=v.filter(E=>!m.containsPoint(E)),_=w.filter(E=>s(E,h)!==y);let C;if(_.length>0)return C=_.filter(E=>s(h,E)===y).pop(),C=C||_[0],{points:[C],direction:s(C,g)};{C=bJ(v,w)[0];const E=T.create(g).move(C,-i(m,y)/2);return{points:[r(E,h,m),E],direction:s(E,g)}}},n.nodeToNode=function u(h,g,m,y){let v=a(g,h,y);const w=v.points[0];if(m.containsPoint(w)){v=a(h,g,m);const _=v.points[0];if(y.containsPoint(_)){const C=T.create(h).move(_,-i(m,s(h,_))/2),E=T.create(g).move(w,-i(y,s(g,w))/2),A=new Q(C,E).getCenter(),P=a(h,A,m),L=o(A,g,P.direction);v.points=[P.points[0],L.points[0]],v.direction=L.direction}}return v},n.insideNode=function d(h,g,m,y,v){const w=m.union(y).inflate(1),_=w.getCenter(),C=_.distance(g)>_.distance(h),E=C?g:h,A=C?h:g;let P,L,V,G;return v?(P=T.fromPolar(w.width+w.height,t[v],E),P=w.getNearestPointToPoint(P).move(P,-1)):P=w.getNearestPointToPoint(E).move(E,1),L=r(P,A,w),P.round().equals(L.round())?(L=T.fromPolar(w.width+w.height,bt.toRad(P.theta(E))+Math.PI/2,A),L=w.getNearestPointToPoint(L).move(A,1).round(),V=r(P,L,w),G=C?[L,V,P]:[P,V,L]):G=C?[L,P]:[P,L],{points:G,direction:s(C?P:L,g)}}}(Ti||(Ti={}));const Jte={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return ka(this.step,this)},directions(){const n=ka(this.step,this),e=ka(this.cost,this);return[{cost:e,offsetX:n,offsetY:0},{cost:e,offsetX:-n,offsetY:0},{cost:e,offsetX:0,offsetY:n},{cost:e,offsetX:0,offsetY:-n}]},penalties(){const n=ka(this.step,this);return{0:0,45:n/2,90:n/2}},paddingBox(){const n=ka(this.step,this);return{x:-n,y:-n,width:2*n,height:2*n}},fallbackRouter:sk,draggingRouter:null,snapToGrid:!0};function ka(n,e){return"function"==typeof n?n.call(e):n}class Kte{constructor(){this.items=[],this.hash={},this.values={}}add(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=1,this.values[e]=t;const r=function HZ(n,e,t){return qN(n,e,oD(t))}(this.items,e,i=>this.values[i]);this.items.splice(r,0,e)}pop(){const e=this.items.shift();return e&&(this.hash[e]=2),e}isOpen(e){return 1===this.hash[e]}isClose(e){return 2===this.hash[e]}isEmpty(){return 0===this.items.length}}class Qte{constructor(e){this.options=e,this.mapGridSize=100,this.map={}}build(e,t){const r=this.options,i=r.excludeTerminals.reduce((u,d)=>{const h=t[d];if(h){const g=e.getCell(h.cell);g&&u.push(g)}return u},[]);let s=[];const o=e.getCell(t.getSourceCellId());o&&(s=GN(s,o.getAncestors().map(u=>u.id)));const a=e.getCell(t.getTargetCellId());a&&(s=GN(s,a.getAncestors().map(u=>u.id)));const c=this.mapGridSize;return e.getNodes().reduce((u,d)=>{const h=i.some(w=>w.id===d.id),g=!!d.shape&&r.excludeShapes.includes(d.shape),m=r.excludeNodes.some(w=>"string"==typeof w?d.id===w:w===d),y=s.includes(d.id);if(!(g||h||m||y)){const w=d.getBBox().moveAndExpand(r.paddingBox),_=w.getOrigin().snapToGrid(c),C=w.getCorner().snapToGrid(c);for(let E=_.x;E<=C.x;E+=c)for(let A=_.y;A<=C.y;A+=c){const P=new T(E,A).toString();null==u[P]&&(u[P]=[]),u[P].push(w)}}return u},this.map),this}isAccessible(e){const t=e.clone().snapToGrid(this.mapGridSize).toString(),r=this.map[t];return!r||r.every(i=>!i.containsPoint(e))}}function ck(n,e){const t=n.sourceBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function lk(n,e){const t=n.targetBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function uk(n,e){return n.sourceAnchor?n.sourceAnchor:ck(n,e).getCenter()}function FD(n,e,t,r,i){const s=360/t,o=n.theta(function tne(n,e,t,r){const i=r.step;return new T(n.x+(e.x-n.x)/t.x*i,n.y+(e.y-n.y)/t.y*i)}(n,e,r,i)),a=bt.normalize(o+s/2);return s*Math.floor(a/s)}function fk(n,e){const t=Math.abs(n-e);return t>180?360-t:t}function dk(n,e){if(!n)return e;const t=Math.abs(n),r=Math.round(t/e);return r?e+(t-r*e)/r:t}function Ip(n,e){return n.round(e)}function c0(n,e,t){return Ip(function ine(n,e){const t=e.source,r=ft.snapToGrid(n.x-t.x,e.x)+t.x,i=ft.snapToGrid(n.y-t.y,e.y)+t.y;return new T(r,i)}(n.clone(),e),t)}function Tp(n){return n.toString()}function jD(n){return new T(0===n.x?0:Math.abs(n.x)/n.x,0===n.y?0:Math.abs(n.y)/n.y)}function hk(n,e){let t=1/0;for(let r=0,i=e.length;r<i;r+=1){const s=n.manhattanDistance(e[r]);s<t&&(t=s)}return t}function gk(n,e,t,r,i){const s=i.precision,o=i.directionMap,a=n.diff(e.getCenter()),c=Object.keys(o).reduce((u,d)=>{if(t.includes(d)){const h=o[d],g=new T(n.x+h.x*(Math.abs(a.x)+e.width),n.y+h.y*(Math.abs(a.y)+e.height)),y=new Q(n,g).intersect(e)||[];let v,w=null;for(let _=0;_<y.length;_+=1){const C=y[_],E=n.squaredDistance(C);(null==v||E>v)&&(v=E,w=C)}if(w){let _=c0(w,r,s);e.containsPoint(_)&&(_=c0(_.translate(h.x*r.x,h.y*r.y),r,s)),u.push(_)}}return u},[]);return e.containsPoint(n)||c.push(c0(n,r,s)),c}function sne(n,e,t,r,i){const s=[];let u,o=jD(i.diff(t)),a=Tp(t),c=n[a];for(;c;){u=e[a];const g=jD(u.diff(c));g.equals(o)||(s.unshift(u),o=g),a=Tp(c),c=n[a]}const d=e[a];return jD(d.diff(r)).equals(o)||s.unshift(d),s}function one(n,e,t,r,i){const s=i.precision;let o,a;o=Y.isRectangle(e)?Ip(uk(n,i).clone(),s):Ip(e.clone(),s),a=Y.isRectangle(t)?Ip(function ene(n,e){return n.targetAnchor?n.targetAnchor:lk(n,e).getCenter()}(n,i).clone(),s):Ip(t.clone(),s);const c=function rne(n,e,t){return{source:e.clone(),x:dk(t.x-e.x,n),y:dk(t.y-e.y,n)}}(i.step,o,a),u=o,d=a;let h,g;if(h=Y.isRectangle(e)?gk(u,e,i.startDirections,c,i):[u],g=Y.isRectangle(t)?gk(a,t,i.endDirections,c,i):[d],h=h.filter(m=>r.isAccessible(m)),g=g.filter(m=>r.isAccessible(m)),h.length>0&&g.length>0){const m=new Kte,y={},v={},w={};for(let te=0,Z=h.length;te<Z;te+=1){const ie=h[te],wt=Tp(ie);m.add(wt,hk(ie,g)),y[wt]=ie,w[wt]=0}const _=i.previousDirectionAngle,C=void 0===_;let E,A;const P=function nne(n,e){const t=e.step;return e.directions.forEach(r=>{r.gridOffsetX=r.offsetX/t*n.x,r.gridOffsetY=r.offsetY/t*n.y}),e.directions}(c,i),L=P.length,V=g.reduce((te,Z)=>{const ie=Tp(Z);return te.push(ie),te},[]),G=T.equalPoints(h,g);let q=i.maxLoopCount;for(;!m.isEmpty()&&q>0;){const te=m.pop(),Z=y[te],ie=v[te],wt=w[te],je=Z.equals(u),F=null==ie;let z;if(z=F?C?je?null:FD(u,Z,L,c,i):_:FD(ie,Z,L,c,i),(!F||!G)&&V.indexOf(te)>=0)return i.previousDirectionAngle=z,sne(v,y,Z,u,d);for(let It=0;It<L;It+=1){E=P[It];const Tt=E.angle;if(A=fk(z,Tt),(!C||!je)&&A>i.maxDirectionChange)continue;const yn=c0(Z.clone().translate(E.gridOffsetX||0,E.gridOffsetY||0),c,s),er=Tp(yn);if(m.isClose(er)||!r.isAccessible(yn))continue;if(V.indexOf(er)>=0&&!yn.equals(d)&&fk(Tt,FD(yn,d,L,c,i))>i.maxDirectionChange)continue;const $a=wt+E.cost+(je?0:i.penalties[A]);(!m.isOpen(er)||$a<w[er])&&(y[er]=yn,v[er]=Z,w[er]=$a,m.add(er,$a+hk(yn,g)))}q-=1}}return i.fallbackRoute?_e(i.fallbackRoute,this,u,d,i):null}const cne=function(n,e,t){const r=function Xte(n){const e=Object.keys(n).reduce((t,r)=>(t[r]="fallbackRouter"===r||"draggingRouter"===r||"fallbackRoute"===r?n[r]:ka(n[r],n),t),{});if(e.padding){const t=nl(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}return e.directions.forEach(t=>{const r=new T(0,0),i=new T(t.offsetX,t.offsetY);t.angle=bt.normalize(r.theta(i))}),e}(e),i=ck(t,r),s=lk(t,r),o=uk(t,r),a=new Qte(r).build(t.graph.model,t.cell),c=n.map(m=>T.create(m)),u=[];let h,g,d=o;for(let m=0,y=c.length;m<=y;m+=1){let v=null;if(h=g||i,g=c[m],null==g){g=s;const _=t.cell;if((null==_.getSourceCellId()||null==_.getTargetCellId())&&"function"==typeof r.draggingRouter){const E=h===i?o:h,A=g.getOrigin();v=_e(r.draggingRouter,t,E,A,r)}}if(null==v&&(v=one(t,h,g,a,r)),null===v)return console.warn("Unable to execute manhattan algorithm, use orth instead"),_e(r.fallbackRouter,this,n,r,t);const w=v[0];w&&w.equals(d)&&v.shift(),d=v[v.length-1]||d,u.push(...v)}return r.snapToGrid?function ane(n,e=10){if(n.length<=1)return n;for(let t=0,r=n.length;t<r-1;t+=1){const i=n[t],s=n[t+1];if(i.x===s.x){const o=e*Math.round(i.x/e);i.x!==o&&(i.x=o,s.x=o)}else if(i.y===s.y){const o=e*Math.round(i.y/e);i.y!==o&&(i.y=o,s.y=o)}}return n}(u,t.graph.grid.getGridSize()):u},pk=function(n,e,t){return _e(cne,this,n,Object.assign(Object.assign({},Jte),e),t)},lne={maxDirectionChange:45,directions(){const n=ka(this.step,this),e=ka(this.cost,this),t=Math.ceil(Math.sqrt(n*n<<1));return[{cost:e,offsetX:n,offsetY:0},{cost:t,offsetX:n,offsetY:n},{cost:e,offsetX:0,offsetY:n},{cost:t,offsetX:-n,offsetY:n},{cost:e,offsetX:-n,offsetY:0},{cost:t,offsetX:-n,offsetY:-n},{cost:e,offsetX:0,offsetY:-n},{cost:t,offsetX:n,offsetY:-n}]},fallbackRoute(n,e,t){const r=n.theta(e),i=[];let s={x:e.x,y:n.y},o={x:n.x,y:e.y};if(r%180>90){const E=s;s=o,o=E}const a=r%90<45?s:o,c=new Q(n,a),u=90*Math.ceil(r/90),d=T.fromPolar(c.squaredLength(),bt.toRad(u+135),a),h=new Q(e,d),g=c.intersectsWithLine(h),m=g||e,v=360/t.directions.length,w=(g?m:n).theta(e),_=bt.normalize(w+v/2),C=v*Math.floor(_/v);return t.previousDirectionAngle=C,m&&i.push(m.round()),i.push(e),i}},une=function(n,e,t){return _e(pk,this,n,Object.assign(Object.assign({},lne),e),t)},fne=function(n,e,t){const r=e.offset||32,i=null==e.min?16:e.min;let s=0,o=e.direction;const a=t.sourceBBox,c=t.targetBBox,u=a.getCenter(),d=c.getCenter();if("number"==typeof r&&(s=r),null==o){let _=c.left-a.right,C=c.top-a.bottom;_>=0&&C>=0?o=_>=C?"L":"T":_<=0&&C>=0?(_=a.left-c.right,o=_>=0&&_>=C?"R":"T"):_>=0&&C<=0?(C=a.top-c.bottom,o=C>=0?_>=C?"L":"B":"L"):(_=a.left-c.right,C=a.top-c.bottom,o=_>=0&&C>=0?_>=C?"R":"B":_<=0&&C>=0?"B":_>=0&&C<=0||Math.abs(_)>Math.abs(C)?"R":"B")}let h,g,m;"H"===o?o=d.x-u.x>=0?"L":"R":"V"===o&&(o=d.y-u.y>=0?"T":"B"),"center"===r&&("L"===o?s=(c.left-a.right)/2:"R"===o?s=(a.left-c.right)/2:"T"===o?s=(c.top-a.bottom)/2:"B"===o&&(s=(a.top-c.bottom)/2));const y="L"===o||"R"===o;if(y){if(d.y===u.y)return[...n];m="L"===o?1:-1,h="x",g="width"}else{if(d.x===u.x)return[...n];m="T"===o?1:-1,h="y",g="height"}const v=u.clone(),w=d.clone();if(v[h]+=m*(a[g]/2+s),w[h]-=m*(c[g]/2+s),y){const _=v.x,C=w.x,E=a.width/2+i,A=c.width/2+i;d.x>u.x?C<=_&&(v.x=Math.max(C,u.x+E),w.x=Math.min(_,d.x-A)):C>=_&&(v.x=Math.min(C,u.x-E),w.x=Math.max(_,d.x+A))}else{const _=v.y,C=w.y,E=a.height/2+i,A=c.height/2+i;d.y>u.y?C<=_&&(v.y=Math.max(C,u.y+E),w.y=Math.min(_,d.y-A)):C>=_&&(v.y=Math.min(C,u.y-E),w.y=Math.max(_,d.y+A))}return[v.toJSON(),...n,w.toJSON()]};function od(n,e){if(null!=e&&!1!==e){const t="boolean"==typeof e?0:e;if(t>0){const r=T.create(n[1]).move(n[2],t),i=T.create(n[1]).move(n[0],t);return[r.toJSON(),...n,i.toJSON()]}{const r=n[1];return[Object.assign({},r),...n,Object.assign({},r)]}}return n}const dne=function(n,e,t){const r=e.width||50,s=(e.height||80)/2,o=e.angle||"auto",a=t.sourceAnchor,c=t.targetAnchor,u=t.sourceBBox,d=t.targetBBox;if(a.equals(c)){const h=_=>{const C=bt.toRad(_),E=Math.sin(C),A=Math.cos(C),P=new T(a.x+A*r,a.y+E*r),L=new T(P.x-A*s,P.y-E*s),V=L.clone().rotate(-90,P),G=L.clone().rotate(90,P);return[V.toJSON(),P.toJSON(),G.toJSON()]},g=_=>{const C=a.clone().move(_,-1),E=new Q(C,_);return!u.containsPoint(_)&&!u.intersectsWithLine(E)},m=[0,90,180,270,45,135,225,315];if("number"==typeof o)return od(h(o),e.merge);const y=u.getCenter();if(y.equals(a))return od(h(0),e.merge);const v=y.angleBetween(a,y.clone().translate(1,0));let w=h(v);if(g(w[1]))return od(w,e.merge);for(let _=1,C=m.length;_<C;_+=1)if(w=h(v+m[_]),g(w[1]))return od(w,e.merge);return od(w,e.merge)}{const h=new Q(a,c);let g=h.parallel(-r),m=g.getCenter(),y=g.start.clone().move(g.end,s),v=g.end.clone().move(g.start,s);const w=h.parallel(-1),_=new Q(w.start,m),C=new Q(w.end,m);if((u.containsPoint(m)||d.containsPoint(m)||u.intersectsWithLine(_)||u.intersectsWithLine(C)||d.intersectsWithLine(_)||d.intersectsWithLine(C))&&(g=h.parallel(r),m=g.getCenter(),y=g.start.clone().move(g.end,s),v=g.end.clone().move(g.start,s)),e.merge){const E=new Q(a,c),A=new Q(m,E.center).setLength(Number.MAX_SAFE_INTEGER),P=u.intersectsWithLine(A),L=d.intersectsWithLine(A),V=P?Array.isArray(P)?P:[P]:[];L&&(Array.isArray(L)?V.push(...L):V.push(L));const G=E.center.closest(V);G?(t.sourceAnchor=G.clone(),t.targetAnchor=G.clone()):(t.sourceAnchor=E.center.clone(),t.targetAnchor=E.center.clone())}return od([y.toJSON(),m.toJSON(),v.toJSON()],e.merge)}};var Fa;!function(n){n.presets=is,n.registry=Zt.create({type:"router"}),n.registry.register(n.presets,!0)}(Fa||(Fa={}));const hne=function(n,e,t,r={}){const i=[n,...t,e],s=new Yt(i),o=new ae(s);return r.raw?o:o.serialize()},gne=function(n,e,t,r={}){const i=3===t.length?0:1,s=T.create(t[0+i]),o=T.create(t[2+i]),a=T.create(t[1+i]);if(!T.equals(n,e)){const u=new T((n.x+e.x)/2,(n.y+e.y)/2),d=u.angleBetween(T.create(n).rotate(90,u),a);d>1&&(s.rotate(180-d,u),o.rotate(180-d,u),a.rotate(180-d,u))}const c=`\n     M ${n.x} ${n.y}\n     Q ${s.x} ${s.y} ${a.x} ${a.y}\n     Q ${o.x} ${o.y} ${e.x} ${e.y}\n  `;return r.raw?ae.parse(c):c},pne=function(n,e,t,r={}){const i=new ae;i.appendSegment(ae.createSegment("M",n));const s=1/3,o=2/3,a=r.radius||10;let c,u;for(let d=0,h=t.length;d<h;d+=1){const g=T.create(t[d]),m=t[d-1]||n,y=t[d+1]||e;c=u||g.distance(m)/2,u=g.distance(y)/2;const v=-Math.min(a,c),w=-Math.min(a,u),_=g.clone().move(m,v).round(),C=g.clone().move(y,w).round(),E=new T(s*_.x+o*g.x,o*g.y+s*_.y),A=new T(s*C.x+o*g.x,o*g.y+s*C.y);i.appendSegment(ae.createSegment("L",_)),i.appendSegment(ae.createSegment("C",E,A,C))}return i.appendSegment(ae.createSegment("L",e)),r.raw?i:i.serialize()},mne=function(n,e,t,r={}){let i,s=r.direction;if(t&&0!==t.length){const o=[n,...t,e],a=Bt.throughPoints(o);i=new ae(a)}else if(i=new ae,i.appendSegment(ae.createSegment("M",n)),s||(s=Math.abs(n.x-e.x)>=Math.abs(n.y-e.y)?"H":"V"),"H"===s){const o=(n.x+e.x)/2;i.appendSegment(ae.createSegment("C",o,n.y,o,e.y,e.x,e.y))}else{const o=(n.y+e.y)/2;i.appendSegment(ae.createSegment("C",n.x,o,e.x,o,e.x,e.y))}return r.raw?i:i.serialize()},l0=1/3,u0=2/3;function BD(n,e,t=[]){const r=[n,...t,e],i=[];return r.forEach((s,o)=>{const a=r[o+1];null!=a&&i.push(new Q(s,a))}),i}function yk(n,e){return new Q(n,e).squaredLength()}function vk(n,e,t,r){const i=new ae;let s;return s=ae.createSegment("M",n[0].start),i.appendSegment(s),n.forEach((o,a)=>{if(Pp.includes(o)){let c,u,d,h;if("arc"===t){c=-90,u=o.start.diff(o.end),(u.x<0||0===u.x&&u.y<0)&&(c+=180);const m=o.getCenter(),y=new Q(m,o.end).rotate(c,m);let v;v=new Q(o.start,m),d=v.pointAt(2/3).rotate(c,o.start),h=y.pointAt(1/3).rotate(-c,y.end),s=ae.createSegment("C",d,h,y.end),i.appendSegment(s),v=new Q(m,o.end),d=y.pointAt(1/3).rotate(c,y.end),h=v.pointAt(1/3).rotate(-c,o.end),s=ae.createSegment("C",d,h,o.end),i.appendSegment(s)}else if("gap"===t)s=ae.createSegment("M",o.end),i.appendSegment(s);else if("cubic"===t){c=o.start.theta(o.end);const g=.6*e;let m=1.35*e;u=o.start.diff(o.end),(u.x<0||0===u.x&&u.y<0)&&(m*=-1),d=new T(o.start.x+g,o.start.y+m).rotate(c,o.start),h=new T(o.end.x-g,o.end.y+m).rotate(c,o.end),s=ae.createSegment("C",d,h,o.end),i.appendSegment(s)}}else{const c=n[a+1];0===r||!c||Pp.includes(c)?(s=ae.createSegment("L",o.end),i.appendSegment(s)):function wne(n,e,t,r,i){const s=t.distance(r)/2,o=t.distance(i)/2,a=-Math.min(n,s),c=-Math.min(n,o),u=t.clone().move(r,a).round(),d=t.clone().move(i,c).round(),h=new T(l0*u.x+u0*t.x,u0*t.y+l0*u.y),g=new T(l0*d.x+u0*t.x,u0*t.y+l0*d.y);let m;m=ae.createSegment("L",u),e.appendSegment(m),m=ae.createSegment("C",h,g,d),e.appendSegment(m)}(r,i,o.end,o.start,c.end)}}),i}let Pp,f0;const Cne=function(n,e,t,r={}){Pp=[],f0=[],function yne(n){let e=n.graph._jumpOverUpdateList;if(null==e&&(e=n.graph._jumpOverUpdateList=[],n.graph.on("cell:mouseup",()=>{const t=n.graph._jumpOverUpdateList;setTimeout(()=>{for(let r=0;r<t.length;r+=1)t[r].update()})}),n.graph.on("model:reseted",()=>{e=n.graph._jumpOverUpdateList=[]})),e.indexOf(n)<0){e.push(n);const t=()=>e.splice(e.indexOf(n),1);n.cell.once("change:connector",t),n.cell.once("removed",t)}}(this);const i=r.size||5,s=r.type||"arc",o=r.radius||0,a=r.ignoreConnectors||["smooth"],c=this.graph,d=c.model.getEdges();if(1===d.length)return vk(BD(n,e,t),i,s,o);const h=this.cell,g=d.indexOf(h),m=c.options.connecting.connector||{},y=d.filter((A,P)=>{const L=A.getConnector()||m;return!(a.includes(L.name)||P>g&&"jumpover"===L.name)}),v=y.map(A=>c.findViewByCell(A)),w=BD(n,e,t),_=v.map(A=>null==A?[]:A===this?w:BD(A.sourcePoint,A.targetPoint,A.routePoints)),C=[];w.forEach(A=>{const P=y.reduce((L,V,G)=>{if(V!==h){const q=function vne(n,e){const t=[];return e.forEach(r=>{const i=n.intersectsWithLine(r);i&&t.push(i)}),t}(A,_[G]);L.push(...q)}return L},[]).sort((L,V)=>yk(A.start,L)-yk(A.start,V));P.length>0?C.push(...function bne(n,e,t){return e.reduce((r,i,s)=>{if(f0.includes(i))return r;const o=r.pop()||n,a=T.create(i).move(o.start,-t);let c=T.create(i).move(o.start,+t);const u=e[s+1];if(null!=u){const g=c.distance(u);g<=t&&(c=u.move(o.start,g),f0.push(u))}else if(a.distance(o.end)<2*t+1)return r.push(o),r;if(c.distance(o.start)<2*t+1)return r.push(o),r;const h=new Q(a,c);return Pp.push(h),r.push(new Q(o.start,a),h,new Q(c,o.end)),r},[])}(A,P,i)):C.push(A)});const E=vk(C,i,s,o);return Pp=[],f0=[],r.raw?E:E.serialize()};var al;!function(n){n.presets=ss,n.registry=Zt.create({type:"connector"}),n.registry.register(n.presets,!0)}(al||(al={}));class bk extends Di{constructor(e={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(jt(e)),this.changed={}}mutate(e,t={}){const r=!0===t.unset,i=!0===t.silent,s=[],o=this.changing;this.changing=!0,o||(this.previous=jt(this.data),this.changed={});const a=this.data,c=this.previous,u=this.changed;if(Object.keys(e).forEach(d=>{const h=d,g=e[h];Co(a[h],g)||s.push(h),Co(c[h],g)?delete u[h]:u[h]=g,r?delete a[h]:a[h]=g}),!i&&s.length>0&&(this.pending=!0,this.pendingOptions=t,s.forEach(d=>{this.emit("change:*",{key:d,options:t,store:this,current:a[d],previous:c[d]})})),o)return this;if(!i)for(;this.pending;)this.pending=!1,this.emit("changed",{current:a,previous:c,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(e,t){return null==e?this.data:this.data[e]??t}getPrevious(e){if(this.previous)return this.previous[e]??void 0}set(e,t,r){return null!=e&&("object"==typeof e?this.mutate(e,t):this.mutate({[e]:t},r)),this}remove(e,t){const i={};let s;if("string"==typeof e)i[e]=void 0,s=t;else if(Array.isArray(e))e.forEach(o=>i[o]=void 0),s=t;else{for(const o in this.data)i[o]=void 0;s=e}return this.mutate(i,Object.assign(Object.assign({},s),{unset:!0})),this}getByPath(e){return sD(this.data,e,"/")}setByPath(e,t,r={}){const i="/",s=Array.isArray(e)?[...e]:e.split(i),o=Array.isArray(e)?e.join(i):e,a=s[0],c=s.length;if(r.propertyPath=o,r.propertyValue=t,r.propertyPathArray=s,1===c)this.set(a,t,r);else{const u={};let d=u,h=a;for(let y=1;y<c;y+=1){const v=s[y],w=Number.isFinite(Number(v));d=d[h]=w?[]:{},h=v}Ff(u,s,t,i);const g=jt(this.data);r.rewrite&&$N(g,e,i);const m=cn(g,u);this.set(a,m[a],r)}return this}removeByPath(e,t){const r=Array.isArray(e)?e:e.split("/"),i=r[0];if(1===r.length)this.remove(i,t);else{const s=r.slice(1),o=jt(this.get(i));o&&$N(o,s),this.set(i,o,t)}return this}hasChanged(e){return null==e?Object.keys(this.changed).length>0:e in this.changed}getChanges(e){if(null==e)return this.hasChanged()?jt(this.changed):null;const t=this.changing?this.previous:this.data,r={};let i;for(const s in e){const o=e[s];Co(t[s],o)||(r[s]=o,i=!0)}return i?jt(r):null}toJSON(){return jt(this.data)}clone(){return new(0,this.constructor)(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([Di.dispose()],bk.prototype,"dispose",null);class Op{constructor(e){this.cell=e,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(e,t,r={},i="/"){const s=this.cell.getPropByPath(e),o=PY(r,Op.defaultOptions),a=this.getTiming(o.timing),c=this.getInterp(o.interp,s,t);let u=0;const d=Array.isArray(e)?e.join(i):e,h=Array.isArray(e)?e:e.split(i),g=()=>{const m=(new Date).getTime();0===u&&(u=m);let v=(m-u)/o.duration;v<1?this.ids[d]=requestAnimationFrame(g):v=1;const w=c(a(v));this.cell.setPropByPath(h,w),r.progress&&r.progress(Object.assign({progress:v,currentValue:w},this.getArgs(d))),1===v&&(this.cell.notify("transition:complete",this.getArgs(d)),r.complete&&r.complete(this.getArgs(d)),this.cell.notify("transition:finish",this.getArgs(d)),r.finish&&r.finish(this.getArgs(d)),this.clean(d))};return setTimeout(()=>{this.stop(e,void 0,i),this.cache[d]={startValue:s,targetValue:t,options:o},this.ids[d]=requestAnimationFrame(g),this.cell.notify("transition:start",this.getArgs(d)),r.start&&r.start(this.getArgs(d))},r.delay),this.stop.bind(this,e,i,r)}stop(e,t={},r="/"){const i=Array.isArray(e)?e:e.split(r);return Object.keys(this.ids).filter(s=>Co(i,s.split(r).slice(0,i.length))).forEach(s=>{cancelAnimationFrame(this.ids[s]);const o=this.cache[s],a=this.getArgs(s),c=Object.assign(Object.assign({},o.options),t),u=c.jumpedToEnd;u&&null!=o.targetValue&&(this.cell.setPropByPath(s,o.targetValue),this.cell.notify("transition:end",Object.assign({},a)),this.cell.notify("transition:complete",Object.assign({},a)),c.complete&&c.complete(Object.assign({},a)));const d=Object.assign({jumpedToEnd:u},a);this.cell.notify("transition:stop",Object.assign({},d)),c.stop&&c.stop(Object.assign({},d)),this.cell.notify("transition:finish",Object.assign({},a)),c.finish&&c.finish(Object.assign({},a)),this.clean(s)}),this}clean(e){delete this.ids[e],delete this.cache[e]}getTiming(e){return"string"==typeof e?Wf[e]:e}getInterp(e,t,r){return e?e(t,r):"number"==typeof r?Yf.number(t,r):"string"==typeof r?"#"===r[0]?Yf.color(t,r):Yf.unit(t,r):Yf.object(t,r)}getArgs(e){const t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}!function(n){n.defaultOptions={delay:10,duration:100,timing:"linear"}}(Op||(Op={}));var ad,wk=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};class Fe extends Di{static config(e){const{markup:t,propHooks:r,attrHooks:i}=e,s=wk(e,["markup","propHooks","attrHooks"]);null!=t&&(this.markup=t),r&&(this.propHooks=this.propHooks.slice(),Array.isArray(r)?this.propHooks.push(...r):"function"==typeof r?this.propHooks.push(r):Object.values(r).forEach(o=>{"function"==typeof o&&this.propHooks.push(o)})),i&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),i)),this.defaults=cn({},this.defaults,s)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:jt(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce((r,i)=>i?_e(i,e,r):r,t)}get[Symbol.toStringTag](){return Fe.toStringTag}constructor(e={}){super();const r=this.constructor.getDefaults(!0),i=cn({},this.preprocess(r),this.preprocess(e));this.id=i.id||Fb(),this.store=new bk(i),this.animation=new Op(this),this.setup(),this.init(),this.postprocess(e)}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const r=e.id,s=this.constructor.applyPropHooks(this,e);return null==r&&!0!==t&&(s.id=Fb()),s}postprocess(e){}setup(){this.store.on("change:*",e=>{const{key:t,current:r,previous:i,options:s}=e;this.notify("change:*",{key:t,options:s,current:r,previous:i,cell:this}),this.notify(`change:${t}`,{options:s,current:r,previous:i,cell:this}),("source"===t||"target"===t)&&this.notify("change:terminal",{type:t,current:r,previous:i,options:s,cell:this})}),this.store.on("changed",({options:e})=>this.notify("changed",{options:e,cell:this}))}notify(e,t){this.trigger(e,t);const r=this.model;return r&&(r.notify(`cell:${e}`,t),this.isNode()?r.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&r.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return null==e?this.store.get():this.store.get(e,t)}setProp(e,t,r){if("string"==typeof e)this.store.set(e,t,r);else{const i=this.preprocess(e,!0);this.store.set(cn({},this.getProp(),i),t),this.postprocess(e)}return this}removeProp(e,t){return"string"==typeof e||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return null==e?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,r={}){return this.model&&("children"===e?this._children=t?t.map(i=>this.model.getCell(i)).filter(i=>null!=i):null:"parent"===e&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,r),this}removePropByPath(e,t={}){const r=Array.isArray(e)?e:e.split("/");return"attrs"===r[0]&&(t.dirty=!0),this.store.removeByPath(r,t),this}prop(e,t,r){return null==e?this.getProp():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getPropByPath(e):null==t?this.removePropByPath(e,r||{}):this.setPropByPath(e,t,r||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){null==e?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let i,r=t.getMaxZIndex();e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this],r=r-i.length+1;const s=t.total();let o=t.indexOf(this)!==s-i.length;o||(o=i.some((a,c)=>a.getZIndex()!==r+c)),o&&this.batchUpdate("to-front",()=>{r+=i.length,i.forEach((a,c)=>{a.setZIndex(r+c,e)})})}return this}toBack(e={}){const t=this.model;if(t){let i,r=t.getMinZIndex();e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this];let s=0!==t.indexOf(this);s||(s=i.some((o,a)=>o.getZIndex()!==r+a)),s&&this.batchUpdate("to-back",()=>{r-=i.length,i.forEach((o,a)=>{o.setZIndex(r+a,e)})})}return this}get markup(){return this.getMarkup()}set markup(e){null==e?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");return null==e&&(e=this.constructor.getMarkup()),e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){null==e?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(null==e)this.removeAttrs(t);else{const r=i=>this.store.set("attrs",i,t);if(!0===t.overwrite)r(e);else{const i=this.getAttrs();r(!1===t.deep?Object.assign(Object.assign({},i),e):cn({},i,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const r=this.constructor.getAttrHooks()||{};let i=r[e]||ks.registry.get(e);if(!i){const s=fp(e);i=r[s]||ks.registry.get(s)}return i||null}getAttrByPath(e){return null==e||""===e?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,r={}){return this.setPropByPath(this.prefixAttrPath(e),t,r),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,r){return null==e?this.getAttrByPath():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getAttrByPath(e):null==t?this.removeAttrByPath(e,r||{}):this.setAttrByPath(e,t,r||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return!1!==this.store.get("visible")}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const i="boolean"==typeof e?t:e;return("boolean"==typeof e?e:!this.isVisible())?this.show(i):this.hide(i),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(null==e)this.removeData(t);else{const r=i=>this.store.set("data",i,t);if(!0===t.overwrite)r(e);else{const i=this.getData();r(!1===t.deep?"object"==typeof e?Object.assign(Object.assign({},i),e):e:cn({},i,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map(r=>{var i;return null===(i=this.model)||void 0===i?void 0:i.getCell(r)}).filter(r=>null!=r);return this._children=t,[...t]}return null}hasParent(){return null!=this.parent}isParentOf(e){return null!=e&&e.getParent()===this}isChildOf(e){return null!=e&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return null==this.children?0:this.children.length}getChildIndex(e){return null==this.children?-1:this.children.indexOf(e)}getChildAt(e){return null!=this.children&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let r=this.getParent();for(;r;)t.push(r),r=!1!==e.deep?r.getParent():null;return t}getDescendants(e={}){if(!1!==e.deep){if(e.breadthFirst){const t=[],r=this.getChildren()||[];for(;r.length>0;){const i=r.shift(),s=i.getChildren();t.push(i),s&&r.push(...s)}return t}{const t=this.getChildren()||[];return t.forEach(r=>{t.push(...r.getDescendants(e))}),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(null==e)return!1;if(!1!==t.deep){let r=this.getParent();for(;r;){if(r===e)return!0;r=r.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return null!=e&&e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return Fe.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,null!=e?this.store.set("children",e.map(r=>r.id),t):this.store.remove("children",t),this}unembed(e,t={}){const r=this.children;if(null!=r&&null!=e){const i=this.getChildIndex(e);-1!==i&&(r.splice(i,1),e.setParent(null,t),this.setChildren(r,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return Fe.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,r={}){return e.insertChild(this,t,r),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,r={}){if(null!=e&&e!==this){const i=e.getParent(),s=this!==i;let o=t;if(null==o&&(o=this.getChildCount(),s||(o-=1)),i){const c=i.getChildren();if(c){const u=c.indexOf(e);u>=0&&(e.setParent(null,r),c.splice(u,1),i.setChildren(c,r))}}let a=this.children;if(null==a?(a=[],a.push(e)):a.splice(o,0,e),e.setParent(this,r),this.setChildren(a,r),s&&this.model){const c=this.model.getIncomingEdges(this),u=this.model.getOutgoingEdges(this);c&&c.forEach(d=>d.updateParent(r)),u&&u.forEach(d=>d.updateParent(r))}this.model&&this.model.addCell(e,r)}return this}removeFromParent(e={}){const t=this.getParent();if(null!=t){const r=t.getChildIndex(this);t.removeChildAt(r,e)}return this}removeChild(e,t={}){const r=this.getChildIndex(e);return this.removeChildAt(r,t)}removeChildAt(e,t={}){const r=this.getChildAt(e);return null!=this.children&&null!=r&&(this.unembed(r,t),r.remove(t)),r}remove(e={}){return this.batchUpdate("remove",()=>{const t=this.getParent();t&&t.removeChild(this,e),!1!==e.deep&&this.eachChild(r=>r.remove(e)),this.model&&this.model.removeCell(this,e)}),this}transition(e,t,r={},i="/"){return this.animation.start(e,t,r,i)}stopTransition(e,t,r="/"){return this.animation.stop(e,t,r),this}getTransitions(){return this.animation.get()}translate(e,t,r){return this}scale(e,t,r,i){return this}addTools(e,t,r){const i=Array.isArray(e)?e:[e],s="string"==typeof t?t:null,o="object"==typeof t?t:"object"==typeof r?r:{};if(o.reset)return this.setTools({name:s,items:i,local:o.local},o);let a=jt(this.getTools());return null==a||null==s||a.name===s?(null==a&&(a={}),a.items||(a.items=[]),a.name=s,a.items=[...a.items,...i],this.setTools(Object.assign({},a),o)):void 0}setTools(e,t={}){return null==e?this.removeTools():this.store.set("tools",Fe.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return null!=t&&(null==e||t.name===e)}hasTool(e){const t=this.getTools();return null!=t&&t.items.some(r=>"string"==typeof r?r===e:r.name===e)}removeTool(e,t={}){const r=jt(this.getTools());if(r){let i=!1;const s=r.items.slice(),o=a=>{s.splice(a,1),i=!0};if("number"==typeof e)o(e);else for(let a=s.length-1;a>=0;a-=1){const c=s[a];("string"==typeof c?c===e:c.name===e)&&o(a)}i&&(r.items=s,this.setTools(r,t))}return this}getBBox(e){return new Y}getConnectionPoint(e,t){return new T}toJSON(e={}){const t=Object.assign({},this.store.get()),r=Object.prototype.toString,i=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const y=this.constructor;throw new Error(`Unable to serialize ${i} missing "shape" prop, check the ${i} "${y.name||r.call(y)}"`)}const o=!0===e.diff,a=t.attrs||{},c=this.constructor.getDefaults(!0),u=o?this.preprocess(c,!0):c,d=u.attrs||{},h={};Object.entries(t).forEach(([y,v])=>{if(null!=v&&!Array.isArray(v)&&"object"==typeof v&&!Rs(v))throw new Error(`Can only serialize ${i} with plain-object props, but got a "${r.call(v)}" type of key "${y}" on ${i} "${this.id}"`);"attrs"!==y&&"shape"!==y&&o&&Co(v,u[y])&&delete t[y]}),Object.keys(a).forEach(y=>{const v=a[y],w=d[y];Object.keys(v).forEach(_=>{const C=v[_],E=w?w[_]:null;null==C||"object"!=typeof C||Array.isArray(C)?(null==w||!Co(E,C))&&(null==h[y]&&(h[y]={}),h[y][_]=C):Object.keys(C).forEach(A=>{const P=C[A];null!=w&&null!=E&&Ft(E)&&Co(E[A],P)||(null==h[y]&&(h[y]={}),null==h[y][_]&&(h[y][_]={}),h[y][_][A]=P)})})});const g=Object.assign(Object.assign({},t),{attrs:SN(h)?void 0:h});null==g.attrs&&delete g.attrs;const m=g;return 0===m.angle&&delete m.angle,jt(m)}clone(e={}){if(!e.deep){const r=Object.assign({},this.store.get());return e.keepId||delete r.id,delete r.parent,delete r.children,new(0,this.constructor)(r)}return Fe.deepClone(this)[this.id]}findView(e){return e.findViewByCell(this)}startBatch(e,t={},r=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),r&&r.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},r=this.model){return r&&r.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,r){const i=this.model;this.startBatch(e,r,i);const s=t();return this.stopBatch(e,r,i),s}dispose(){this.removeFromParent(),this.store.dispose()}}Fe.defaults={},Fe.attrHooks={},Fe.propHooks=[],function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([Di.dispose()],Fe.prototype,"dispose",null),function(n){n.normalizeTools=function e(t){return"string"==typeof t?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}}(Fe||(Fe={})),function(n){n.toStringTag=`X6.${n.name}`,n.isCell=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr}}(Fe||(Fe={})),function(n){n.getCommonAncestor=function e(...s){const o=s.filter(c=>null!=c).map(c=>c.getAncestors()).sort((c,u)=>c.length-u.length);return o.shift().find(c=>o.every(u=>u.includes(c)))||null},n.getCellsBBox=function t(s,o={}){let a=null;for(let c=0,u=s.length;c<u;c+=1){const d=s[c];let h=d.getBBox(o);if(h){if(d.isNode()){const g=d.getAngle();null!=g&&0!==g&&(h=h.bbox(g))}a=null==a?h:a.union(h)}}return a},n.deepClone=function r(s){const o=[s,...s.getDescendants({deep:!0})];return n.cloneCells(o)},n.cloneCells=function i(s){const o=zN(s),a=o.reduce((c,u)=>(c[u.id]=u.clone(),c),{});return o.forEach(c=>{const u=a[c.id];if(u.isEdge()){const g=u.getSourceCellId(),m=u.getTargetCellId();g&&a[g]&&u.setSource(Object.assign(Object.assign({},u.getSource()),{cell:a[g].id})),m&&a[m]&&u.setTarget(Object.assign(Object.assign({},u.getTarget()),{cell:a[m].id}))}const d=c.getParent();d&&a[d.id]&&u.setParent(a[d.id]);const h=c.getChildren();if(h&&h.length){const g=h.reduce((m,y)=>(a[y.id]&&m.push(a[y.id]),m),[]);g.length>0&&u.setChildren(g)}}),a}}(Fe||(Fe={})),function(n){n.config({propHooks(e){var{tools:t}=e,r=wk(e,["tools"]);return t&&(r.tools=n.normalizeTools(t)),r}})}(Fe||(Fe={})),function(n){let e,t;n.exist=function r(o,a){return a?null!=e&&e.exist(o):null!=t&&t.exist(o)},n.setEdgeRegistry=function i(o){e=o},n.setNodeRegistry=function s(o){t=o}}(ad||(ad={}));class Ene{constructor(e){this.ports=[],this.groups={},this.init(jt(e))}getPorts(){return this.ports}getGroup(e){return null!=e?this.groups[e]:null}getPortsByGroup(e){return this.ports.filter(t=>t.group===e||null==t.group&&null==e)}getPortsLayoutByGroup(e,t){const r=this.getPortsByGroup(e),i=e?this.getGroup(e):null,s=i?i.position:null,o=s?s.name:null;let a;if(null!=o){const h=ol.registry.get(o);if(null==h)return ol.registry.onNotFound(o);a=h}else a=ol.presets.left;return a(r.map(h=>h&&h.position&&h.position.args||{}),t,s&&s.args||{}).map((h,g)=>{const m=r[g];return{portLayout:h,portId:m.id,portSize:m.size,portAttrs:m.attrs,labelSize:m.label.size,labelLayout:this.getPortLabelLayout(m,T.create(h.position),t)}})}init(e){const{groups:t,items:r}=e;null!=t&&Object.keys(t).forEach(i=>{this.groups[i]=this.parseGroup(t[i])}),Array.isArray(r)&&r.forEach(i=>{this.ports.push(this.parsePort(i))})}parseGroup(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}parsePort(e){const t=Object.assign({},e),r=this.getGroup(e.group)||{};return t.markup=t.markup||r.markup,t.attrs=cn({},r.attrs,t.attrs),t.position=this.createPosition(r,t),t.label=cn({},r.label,this.getLabel(t)),t.zIndex=this.getZIndex(r,t),t.size=Object.assign(Object.assign({},r.size),t.size),t}getZIndex(e,t){return"number"==typeof t.zIndex?t.zIndex:"number"==typeof e.zIndex||"auto"===e.zIndex?e.zIndex:"auto"}createPosition(e,t){return cn({name:"left",args:{}},e.position,{args:t.args})}getPortPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if("object"==typeof e)return e}return{args:{}}}getPortLabelPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if("object"==typeof e)return e}return{args:{}}}getLabel(e,t=!1){const r=e.label||{};return r.position=this.getPortLabelPosition(r.position,t),r}getPortLabelLayout(e,t,r){const s=e.label.position.args||{},o=Qf.registry.get(e.label.position.name||"left")||Qf.presets.left;return o?o(t,r,s):null}}var d0=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};let pn=(()=>{class n extends Fe{get[Symbol.toStringTag](){return n.toStringTag}constructor(t={}){super(t),this.initPorts()}preprocess(t,r){const{x:i,y:s,width:o,height:a}=t,c=d0(t,["x","y","width","height"]);if(null!=i||null!=s){const u=c.position;c.position=Object.assign(Object.assign({},u),{x:i??(u?u.x:0),y:s??(u?u.y:0)})}if(null!=o||null!=a){const u=c.size;c.size=Object.assign(Object.assign({},u),{width:o??(u?u.width:0),height:a??(u?u.height:0)})}return super.preprocess(c,r)}isNode(){return!0}size(t,r,i){return void 0===t?this.getSize():"number"==typeof t?this.setSize(t,r,i):this.setSize(t,r)}getSize(){const t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}setSize(t,r,i){return"object"==typeof t?this.resize(t.width,t.height,r):this.resize(t,r,i),this}resize(t,r,i={}){this.startBatch("resize",i);const s=i.direction;if(s){const o=this.getSize();switch(s){case"left":case"right":r=o.height;break;case"top":case"bottom":t=o.width}let c={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[s];const u=bt.normalize(this.getAngle()||0);i.absolute&&(c+=Math.floor((u+45)/90),c%=4);const d=this.getBBox();let h;h=0===c?d.getBottomLeft():1===c?d.getCorner():2===c?d.getTopRight():d.getOrigin();const g=h.clone().rotate(-u,d.getCenter()),m=Math.sqrt(t*t+r*r)/2;let y=c*Math.PI/2;y+=Math.atan(c%2==0?r/t:t/r),y-=bt.toRad(u);const w=T.fromPolar(m,y,g).clone().translate(t/-2,r/-2);this.store.set("size",{width:t,height:r},i),this.setPosition(w.x,w.y,i)}else this.store.set("size",{width:t,height:r},i);return this.stopBatch("resize",i),this}scale(t,r,i,s={}){const o=this.getBBox().scale(t,r,i??void 0);return this.startBatch("scale",s),this.setPosition(o.x,o.y,s),this.resize(o.width,o.height,s),this.stopBatch("scale"),this}position(t,r,i){return"number"==typeof t?this.setPosition(t,r,i):this.getPosition(t)}getPosition(t={}){if(t.relative){const i=this.getParent();if(null!=i&&i.isNode()){const s=this.getPosition(),o=i.getPosition();return{x:s.x-o.x,y:s.y-o.y}}}const r=this.store.get("position");return r?Object.assign({},r):{x:0,y:0}}setPosition(t,r,i={}){let s,o,a;if("object"==typeof t?(s=t.x,o=t.y,a=r||{}):(s=t,o=r,a=i||{}),a.relative){const c=this.getParent();if(null!=c&&c.isNode()){const u=c.getPosition();s+=u.x,o+=u.y}}if(a.deep){const c=this.getPosition();this.translate(s-c.x,o-c.y,a)}else this.store.set("position",{x:s,y:o},a);return this}translate(t=0,r=0,i={}){if(0===t&&0===r)return this;i.translateBy=i.translateBy||this.id;const s=this.getPosition();if(null!=i.restrict&&i.translateBy===this.id){const a=this.getBBox({deep:!0}),c=i.restrict,u=s.x-a.x,d=s.y-a.y,h=Math.max(c.x+u,Math.min(c.x+c.width+u-a.width,s.x+t)),g=Math.max(c.y+d,Math.min(c.y+c.height+d-a.height,s.y+r));t=h-s.x,r=g-s.y}const o={x:s.x+t,y:s.y+r};return i.tx=t,i.ty=r,i.transition?("object"!=typeof i.transition&&(i.transition={}),this.transition("position",o,Object.assign(Object.assign({},i.transition),{interp:Yf.object})),this.eachChild(a=>{var c;(null===(c=i.exclude)||void 0===c?void 0:c.includes(a))||a.translate(t,r,i)})):(this.startBatch("translate",i),this.store.set("position",o,i),this.eachChild(a=>{var c;(null===(c=i.exclude)||void 0===c?void 0:c.includes(a))||a.translate(t,r,i)}),this.stopBatch("translate",i)),this}angle(t,r){return null==t?this.getAngle():this.rotate(t,r)}getAngle(){return this.store.get("angle",0)}rotate(t,r={}){const i=this.getAngle();if(r.center){const s=this.getSize(),o=this.getPosition(),a=this.getBBox().getCenter();a.rotate(i-t,r.center);const c=a.x-s.width/2-o.x,u=a.y-s.height/2-o.y;this.startBatch("rotate",{angle:t,options:r}),this.setPosition(o.x+c,o.y+u,r),this.rotate(t,Object.assign(Object.assign({},r),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",r.absolute?t:(i+t)%360,r);return this}getBBox(t={}){if(t.deep){const r=this.getDescendants({deep:!0,breadthFirst:!0});return r.push(this),Fe.getCellsBBox(r)}return Y.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(t,r){const i=this.getBBox(),s=i.getCenter(),o=t.getTerminal(r);if(null==o)return s;const a=o.port;if(!a||!this.hasPort(a))return s;const c=this.getPort(a);if(!c||!c.group)return s;const d=this.getPortsPosition(c.group)[a].position,h=T.create(d).translate(i.getOrigin()),g=this.getAngle();return g&&h.rotate(-g,s),h}fit(t={}){const i=(this.getChildren()||[]).filter(d=>d.isNode());if(0===i.length)return this;this.startBatch("fit-embeds",t),t.deep&&i.forEach(d=>d.fit(t));let{x:s,y:o,width:a,height:c}=Fe.getCellsBBox(i);const u=nl(t.padding);return s-=u.left,o-=u.top,a+=u.left+u.right,c+=u.bottom+u.top,this.store.set({position:{x:s,y:o},size:{width:a,height:c}},t),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(t){this.setPortContainerMarkup(t)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Et.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(t,r={}){return this.store.set("portContainerMarkup",Et.clone(t),r),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(t){this.setPortMarkup(t)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Et.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(t,r={}){return this.store.set("portMarkup",Et.clone(t),r),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(t){this.setPortLabelMarkup(t)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Et.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(t,r={}){return this.store.set("portLabelMarkup",Et.clone(t),r),this}get ports(){const t=this.store.get("ports",{items:[]});return null==t.items&&(t.items=[]),t}getPorts(){return jt(this.ports.items)}getPortsByGroup(t){return this.getPorts().filter(r=>r.group===t)}getPort(t){return jt(this.ports.items.find(r=>r.id&&r.id===t))}getPortAt(t){return this.ports.items[t]||null}hasPorts(){return this.ports.items.length>0}hasPort(t){return-1!==this.getPortIndex(t)}getPortIndex(t){const r="string"==typeof t?t:t.id;return null!=r?this.ports.items.findIndex(i=>i.id===r):-1}getPortsPosition(t){const r=this.getSize();return this.port.getPortsLayoutByGroup(t,new Y(0,0,r.width,r.height)).reduce((s,o)=>{const a=o.portLayout;return s[o.portId]={position:Object.assign({},a.position),angle:a.angle||0},s},{})}getPortProp(t,r){return this.getPropByPath(this.prefixPortPath(t,r))}setPortProp(t,r,i,s){if("string"==typeof r||Array.isArray(r)){const c=this.prefixPortPath(t,r);return this.setPropByPath(c,i,s)}const o=this.prefixPortPath(t);return this.setPropByPath(o,r,i)}removePortProp(t,r,i){return"string"==typeof r||Array.isArray(r)?this.removePropByPath(this.prefixPortPath(t,r),i):this.removePropByPath(this.prefixPortPath(t),r)}portProp(t,r,i,s){return null==r?this.getPortProp(t):"string"==typeof r||Array.isArray(r)?2===arguments.length?this.getPortProp(t,r):null==i?this.removePortProp(t,r,s):this.setPortProp(t,r,i,s):this.setPortProp(t,r,i)}prefixPortPath(t,r){const i=this.getPortIndex(t);if(-1===i)throw new Error(`Unable to find port with id: "${t}"`);return null==r||""===r?["ports","items",`${i}`]:Array.isArray(r)?["ports","items",`${i}`,...r]:`ports/items/${i}/${r}`}addPort(t,r){const i=[...this.ports.items];return i.push(t),this.setPropByPath("ports/items",i,r),this}addPorts(t,r){return this.setPropByPath("ports/items",[...this.ports.items,...t],r),this}insertPort(t,r,i){const s=[...this.ports.items];return s.splice(t,0,r),this.setPropByPath("ports/items",s,i),this}removePort(t,r={}){return this.removePortAt(this.getPortIndex(t),r)}removePortAt(t,r={}){if(t>=0){const i=[...this.ports.items];i.splice(t,1),r.rewrite=!0,this.setPropByPath("ports/items",i,r)}return this}removePorts(t,r){let i;if(Array.isArray(t)){if(i=r||{},t.length){i.rewrite=!0;const o=[...this.ports.items].filter(a=>!t.some(c=>a.id===("string"==typeof c?c:c.id)));this.setPropByPath("ports/items",o,i)}}else i=t||{},i.rewrite=!0,this.setPropByPath("ports/items",[],i);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(t,r){return this.port.getPortsLayoutByGroup(t,r)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const r={};this.ports.items.forEach(a=>{a.id&&(r[a.id]=!0)});const i={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(a=>{a.id&&!r[a.id]&&(i[a.id]=!0)});const o=this.model;o&&!SN(i)&&(o.getConnectedEdges(this,{incoming:!0}).forEach(u=>{const d=u.getTargetPortId();d&&i[d]&&u.remove()}),o.getConnectedEdges(this,{outgoing:!0}).forEach(u=>{const d=u.getSourcePortId();d&&i[d]&&u.remove()}))}validatePorts(){const t={},r=[];return this.ports.items.forEach(i=>{"object"!=typeof i&&r.push(`Invalid port ${i}.`),null==i.id&&(i.id=this.generatePortId()),t[i.id]&&r.push("Duplicitied port id."),t[i.id]=!0}),r}generatePortId(){return Fb()}updatePortData(){const t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));const r=this.port?this.port.getPorts():null;this.port=new Ene(this.ports);const i=this.port.getPorts(),s=r?i.filter(a=>r.find(c=>c.id===a.id)?null:a):[...i],o=r?r.filter(a=>i.find(c=>c.id===a.id)?null:a):[];s.length>0&&this.notify("ports:added",{added:s,cell:this,node:this}),o.length>0&&this.notify("ports:removed",{removed:o,cell:this,node:this})}}return n.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},n})();(function(n){n.toStringTag=`X6.${n.name}`,n.isNode=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr&&"function"==typeof t.size&&"function"==typeof t.position}})(pn||(pn={})),function(n){n.config({propHooks(e){var{ports:t}=e,r=d0(e,["ports"]);return t&&(r.ports=Array.isArray(t)?{items:t}:t),r}})}(pn||(pn={})),function(n){n.registry=Zt.create({type:"node",process(e,t){if(ad.exist(e,!0))throw new Error(`Node with name '${e}' was registered by anthor Edge`);if("function"==typeof t)return t.config({shape:e}),t;let r=n;const{inherit:i}=t,s=d0(t,["inherit"]);if(i)if("string"==typeof i){const a=this.get(i);null==a?this.onNotFound(i,"inherited"):r=a}else r=i;null==s.constructorName&&(s.constructorName=e);const o=r.define.call(r,s);return o.config({shape:e}),o}}),ad.setNodeRegistry(n.registry)}(pn||(pn={})),function(n){let e=0;n.define=function r(s){const{constructorName:o,overwrite:a}=s,c=d0(s,["constructorName","overwrite"]),u=iD(function t(s){return s?uD(s):(e+=1,`CustomNode${e}`)}(o||c.shape),this);return u.config(c),c.shape&&n.registry.register(c.shape,u,a),u},n.create=function i(s){const o=s.shape||"rect",a=n.registry.get(o);return a?new a(s):n.registry.onNotFound(o)}}(pn||(pn={}));var h0=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};let Jt=(()=>{class n extends Fe{get[Symbol.toStringTag](){return n.toStringTag}constructor(t={}){super(t)}preprocess(t,r){const{source:i,sourceCell:s,sourcePort:o,sourcePoint:a,target:c,targetCell:u,targetPort:d,targetPoint:h}=t,m=h0(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),y=v=>"string"==typeof v||"number"==typeof v;if(null!=i)if(Fe.isCell(i))m.source={cell:i.id};else if(y(i))m.source={cell:i};else if(T.isPoint(i))m.source=i.toJSON();else if(Array.isArray(i))m.source={x:i[0],y:i[1]};else{const v=i.cell;m.source=Fe.isCell(v)?Object.assign(Object.assign({},i),{cell:v.id}):i}if(null!=s||null!=o){let v=m.source;if(null!=s){const w=y(s)?s:s.id;v?v.cell=w:v=m.source={cell:w}}null!=o&&v&&(v.port=o)}else null!=a&&(m.source=T.create(a).toJSON());if(null!=c)if(Fe.isCell(c))m.target={cell:c.id};else if(y(c))m.target={cell:c};else if(T.isPoint(c))m.target=c.toJSON();else if(Array.isArray(c))m.target={x:c[0],y:c[1]};else{const v=c.cell;m.target=Fe.isCell(v)?Object.assign(Object.assign({},c),{cell:v.id}):c}if(null!=u||null!=d){let v=m.target;if(null!=u){const w=y(u)?u:u.id;v?v.cell=w:v=m.target={cell:w}}null!=d&&v&&(v.port=d)}else null!=h&&(m.target=T.create(h).toJSON());return super.preprocess(m,r)}setup(){super.setup(),this.on("change:labels",t=>this.onLabelsChanged(t)),this.on("change:vertices",t=>this.onVertexsChanged(t))}isEdge(){return!0}disconnect(t={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}get source(){return this.getSource()}set source(t){this.setSource(t)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(t,r,i={}){return this.setTerminal("source",t,r,i)}get target(){return this.getTarget()}set target(t){this.setTarget(t)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(t,r,i={}){return this.setTerminal("target",t,r,i)}getTerminal(t){return Object.assign({},this.store.get(t))}setTerminal(t,r,i,s={}){if(Fe.isCell(r))return this.store.set(t,cn({},i,{cell:r.id}),s),this;const o=r;return T.isPoint(r)||null!=o.x&&null!=o.y?(this.store.set(t,cn({},i,{x:o.x,y:o.y}),s),this):(this.store.set(t,jt(r),s),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(t){const r=this[t];if(T.isPointLike(r))return T.create(r);const i=this.getTerminalCell(t);return i?i.getConnectionPoint(this,t):new T}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(t){if(this.model){const r="source"===t?this.getSourceCellId():this.getTargetCellId();if(r)return this.model.getCell(r)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(t){let r=this;const i={};for(;r&&r.isEdge();){if(i[r.id])return null;i[r.id]=!0,r=r.getTerminalCell(t)}return r&&r.isNode()?r:null}get router(){return this.getRouter()}set router(t){null==t?this.removeRouter():this.setRouter(t)}getRouter(){return this.store.get("router")}setRouter(t,r,i){return"object"==typeof t?this.store.set("router",t,r):this.store.set("router",{name:t,args:r},i),this}removeRouter(t={}){return this.store.remove("router",t),this}get connector(){return this.getConnector()}set connector(t){null==t?this.removeConnector():this.setConnector(t)}getConnector(){return this.store.get("connector")}setConnector(t,r,i){return"object"==typeof t?this.store.set("connector",t,r):this.store.set("connector",{name:t,args:r},i),this}removeConnector(t={}){return this.store.remove("connector",t)}getDefaultLabel(){const t=this.constructor,r=this.store.get("defaultLabel")||t.defaultLabel||{};return jt(r)}get labels(){return this.getLabels()}set labels(t){this.setLabels(t)}getLabels(){return[...this.store.get("labels",[])].map(t=>this.parseLabel(t))}setLabels(t,r={}){return this.store.set("labels",Array.isArray(t)?t:[t],r),this}insertLabel(t,r,i={}){const s=this.getLabels(),o=s.length;let a=null!=r&&Number.isFinite(r)?r:o;return a<0&&(a=o+a+1),s.splice(a,0,this.parseLabel(t)),this.setLabels(s,i)}appendLabel(t,r={}){return this.insertLabel(t,-1,r)}getLabelAt(t){const r=this.getLabels();return null!=t&&Number.isFinite(t)?this.parseLabel(r[t]):null}setLabelAt(t,r,i={}){if(null!=t&&Number.isFinite(t)){const s=this.getLabels();s[t]=this.parseLabel(r),this.setLabels(s,i)}return this}removeLabelAt(t,r={}){const i=this.getLabels(),s=null!=t&&Number.isFinite(t)?t:-1,o=i.splice(s,1);return this.setLabels(i,r),o.length?o[0]:null}parseLabel(t){return"string"==typeof t?this.constructor.parseStringLabel(t):t}onLabelsChanged({previous:t,current:r}){const i=t&&r?r.filter(o=>t.find(a=>o===a||Co(o,a))?null:o):r?[...r]:[],s=t&&r?t.filter(o=>r.find(a=>o===a||Co(o,a))?null:o):t?[...t]:[];i.length>0&&this.notify("labels:added",{added:i,cell:this,edge:this}),s.length>0&&this.notify("labels:removed",{removed:s,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(t){this.setVertices(t)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(t,r={}){const i=Array.isArray(t)?t:[t];return this.store.set("vertices",i.map(s=>T.toJSON(s)),r),this}insertVertex(t,r,i={}){const s=this.getVertices(),o=s.length;let a=null!=r&&Number.isFinite(r)?r:o;return a<0&&(a=o+a+1),s.splice(a,0,T.toJSON(t)),this.setVertices(s,i)}appendVertex(t,r={}){return this.insertVertex(t,-1,r)}getVertexAt(t){return null!=t&&Number.isFinite(t)?this.getVertices()[t]:null}setVertexAt(t,r,i={}){if(null!=t&&Number.isFinite(t)){const s=this.getVertices();s[t]=r,this.setVertices(s,i)}return this}removeVertexAt(t,r={}){const i=this.getVertices(),s=null!=t&&Number.isFinite(t)?t:-1;return i.splice(s,1),this.setVertices(i,r)}onVertexsChanged({previous:t,current:r}){const i=t&&r?r.filter(o=>t.find(a=>T.equals(o,a))?null:o):r?[...r]:[],s=t&&r?t.filter(o=>r.find(a=>T.equals(o,a))?null:o):t?[...t]:[];i.length>0&&this.notify("vertexs:added",{added:i,cell:this,edge:this}),s.length>0&&this.notify("vertexs:removed",{removed:s,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Et.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(t,r,i={}){return i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=r,this.applyToPoints(s=>({x:(s.x||0)+t,y:(s.y||0)+r}),i)}scale(t,r,i,s={}){return this.applyToPoints(o=>T.create(o).scale(t,r,i).toJSON(),s)}applyToPoints(t,r={}){const i={},s=this.getSource(),o=this.getTarget();T.isPointLike(s)&&(i.source=t(s)),T.isPointLike(o)&&(i.target=t(o));const a=this.getVertices();return a.length>0&&(i.vertices=a.map(t)),this.store.set(i,r),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const t=[this.getSourcePoint(),...this.getVertices().map(r=>T.create(r)),this.getTargetPoint()];return new Yt(t)}updateParent(t){let r=null;const i=this.getSourceCell(),s=this.getTargetCell(),o=this.getParent();return i&&s&&(r=i===s||i.isDescendantOf(s)?s:s.isDescendantOf(i)?i:Fe.getCommonAncestor(i,s)),o&&r&&r.id!==o.id&&o.unembed(this,t),r&&(!o||o.id!==r.id)&&r.embed(this,t),r}hasLoop(t={}){const r=this.getSource(),i=this.getTarget(),s=r.cell,o=i.cell;if(!s||!o)return!1;let a=s===o;if(!a&&t.deep&&this._model){const c=this.getSourceCell(),u=this.getTargetCell();c&&u&&(a=c.isAncestorOf(u,t)||u.isAncestorOf(c,t))}return a}getFragmentAncestor(){const t=[this,this.getSourceNode(),this.getTargetNode()].filter(r=>null!=r);return this.getCommonAncestor(...t)}isFragmentDescendantOf(t){const r=this.getFragmentAncestor();return!!r&&(r.id===t.id||r.isDescendantOf(t))}}return n.defaults={},n})();(function(n){n.equalTerminals=function e(t,r){return t.cell===r.cell&&(t.port===r.port||null==t.port&&null==r.port)}})(Jt||(Jt={})),function(n){n.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},n.parseStringLabel=function e(t){return{attrs:{label:{text:t}}}}}(Jt||(Jt={})),function(n){n.toStringTag=`X6.${n.name}`,n.isEdge=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr&&"function"==typeof t.disconnect&&"function"==typeof t.getSource&&"function"==typeof t.getTarget}}(Jt||(Jt={})),function(n){n.registry=Zt.create({type:"edge",process(e,t){if(ad.exist(e,!1))throw new Error(`Edge with name '${e}' was registered by anthor Node`);if("function"==typeof t)return t.config({shape:e}),t;let r=n;const{inherit:i="edge"}=t,s=h0(t,["inherit"]);if("string"==typeof i){const a=this.get(i||"edge");null==a&&i?this.onNotFound(i,"inherited"):r=a}else r=i;null==s.constructorName&&(s.constructorName=e);const o=r.define.call(r,s);return o.config({shape:e}),o}}),ad.setEdgeRegistry(n.registry)}(Jt||(Jt={})),function(n){let e=0;n.define=function r(s){const{constructorName:o,overwrite:a}=s,c=h0(s,["constructorName","overwrite"]),u=iD(function t(s){return s?uD(s):(e+=1,`CustomEdge${e}`)}(o||c.shape),this);return u.config(c),c.shape&&n.registry.register(c.shape,u,a),u},n.create=function i(s){const o=s.shape||"edge",a=n.registry.get(o);return a?new a(s):n.registry.onNotFound(o)}}(Jt||(Jt={})),function(n){const e="basic.edge";n.config({shape:e,propHooks(t){const{label:r,vertices:i}=t,s=h0(t,["label","vertices"]);if(r){null==s.labels&&(s.labels=[]);const o="string"==typeof r?n.parseStringLabel(r):r;s.labels.push(o)}return i&&Array.isArray(i)&&(s.vertices=i.map(o=>T.create(o).toJSON())),s}}),n.registry.register(e,n)}(Jt||(Jt={}));class Dne extends Di{constructor(e,t={}){super(),this.length=0,this.comparator=t.comparator||"zIndex",this.clean(),e&&this.reset(e,{silent:!0})}toJSON(){return this.cells.map(e=>e.toJSON())}add(e,t,r){let i,s;"number"==typeof t?(i=t,s=Object.assign({merge:!1},r)):(i=this.length,s=Object.assign({merge:!1},t)),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);const o=Array.isArray(e)?e:[e],a=this.comparator&&"number"!=typeof t&&!1!==s.sort,c=this.comparator||null;let u=!1;const d=[],h=[];return o.forEach(g=>{const m=this.get(g);m?s.merge&&!g.isSameStore(m)&&(m.setProp(g.getProp(),r),h.push(m),a&&!u&&(u=null==c||"function"==typeof c?m.hasChanged():"string"==typeof c?m.hasChanged(c):c.some(y=>m.hasChanged(y)))):(d.push(g),this.reference(g))}),d.length&&(a&&(u=!0),this.cells.splice(i,0,...d),this.length=this.cells.length),u&&this.sort({silent:!0}),s.silent||(d.forEach((g,m)=>{const y={cell:g,index:i+m,options:s};this.trigger("added",y),s.dryrun||g.notify("added",Object.assign({},y))}),u&&this.trigger("sorted"),(d.length||h.length)&&this.trigger("updated",{added:d,merged:h,removed:[],options:s})),this}remove(e,t={}){const r=Array.isArray(e)?e:[e],i=this.removeCells(r,t);return!t.silent&&i.length>0&&this.trigger("updated",{options:t,removed:i,added:[],merged:[]}),Array.isArray(e)?i:i[0]}removeCells(e,t){const r=[];for(let i=0;i<e.length;i+=1){const s=this.get(e[i]);if(null==s)continue;const o=this.cells.indexOf(s);this.cells.splice(o,1),this.length-=1,delete this.map[s.id],r.push(s),this.unreference(s),t.dryrun||s.remove(),t.silent||(this.trigger("removed",{cell:s,index:o,options:t}),t.dryrun||s.notify("removed",{cell:s,index:o,options:t}))}return r}reset(e,t={}){const r=this.cells.slice();if(r.forEach(i=>this.unreference(i)),this.clean(),this.add(e,Object.assign({silent:!0},t)),!t.silent){const i=this.cells.slice();this.trigger("reseted",{options:t,previous:r,current:i});const s=[],o=[];i.forEach(a=>{r.some(u=>u.id===a.id)||s.push(a)}),r.forEach(a=>{i.some(u=>u.id===a.id)||o.push(a)}),this.trigger("updated",{options:t,added:s,removed:o,merged:[]})}return this}push(e,t){return this.add(e,this.length,t)}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,0,t)}shift(e){const t=this.at(0);return this.remove(t,e)}get(e){return null==e?null:this.map["string"==typeof e||"number"==typeof e?e:e.id]||null}has(e){return null!=this.get(e)}at(e){return e<0&&(e+=this.length),this.cells[e]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(e){return this.cells.indexOf(e)}toArray(){return this.cells.slice()}sort(e={}){return null!=this.comparator&&(this.cells=sJ(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}clone(){return new(0,this.constructor)(this.cells.slice(),{comparator:this.comparator})}reference(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}unreference(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}notifyCellEvent(e,t){const r=t.cell;this.trigger(`cell:${e}`,t),r&&(r.isNode()?this.trigger(`node:${e}`,Object.assign(Object.assign({},t),{node:r})):r.isEdge()&&this.trigger(`edge:${e}`,Object.assign(Object.assign({},t),{edge:r})))}clean(){this.length=0,this.cells=[],this.map={}}}class Ao extends Di{get[Symbol.toStringTag](){return Ao.toStringTag}constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new Dne(e),this.setup()}notify(e,t){this.trigger(e,t);const r=this.graph;return r&&r.trigger("sorted"===e||"reseted"===e||"updated"===e?`model:${e}`:e,t),this}setup(){const e=this.collection;e.on("sorted",()=>this.notify("sorted",null)),e.on("updated",t=>this.notify("updated",t)),e.on("cell:change:zIndex",()=>this.sortOnChangeZ()),e.on("added",({cell:t})=>{this.onCellAdded(t)}),e.on("removed",t=>{const r=t.cell;this.onCellRemoved(r,t.options),this.notify("cell:removed",t),r.isNode()?this.notify("node:removed",Object.assign(Object.assign({},t),{node:r})):r.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},t),{edge:r}))}),e.on("reseted",t=>{this.onReset(t.current),this.notify("reseted",t)}),e.on("edge:change:source",({edge:t})=>this.onEdgeTerminalChanged(t,"source")),e.on("edge:change:target",({edge:t})=>{this.onEdgeTerminalChanged(t,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const r=e.id;if(e.isEdge()){delete this.edges[r];const i=e.getSource(),s=e.getTarget();if(i&&i.cell){const o=this.outgoings[i.cell],a=o?o.indexOf(r):-1;a>=0&&(o.splice(a,1),0===o.length&&delete this.outgoings[i.cell])}if(s&&s.cell){const o=this.incomings[s.cell],a=o?o.indexOf(r):-1;a>=0&&(o.splice(a,1),0===o.length&&delete this.incomings[s.cell])}}else delete this.nodes[r];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(t=>this.onCellAdded(t))}onEdgeTerminalChanged(e,t){const r="source"===t?this.outgoings:this.incomings,i=e.previous(t);if(i&&i.cell){const o=Fe.isCell(i.cell)?i.cell.id:i.cell,a=r[o],c=a?a.indexOf(e.id):-1;c>=0&&(a.splice(c,1),0===a.length&&delete r[o])}const s=e.getTerminal(t);if(s&&s.cell){const o=Fe.isCell(s.cell)?s.cell.id:s.cell,a=r[o]||[];-1===a.indexOf(e.id)&&a.push(e.id),r[o]=a}}prepareCell(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),null==e.zIndex&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map(r=>this.prepareCell(r,Object.assign(Object.assign({},t),{dryrun:!0}))),this.collection.reset(e,t),e.map(r=>this.prepareCell(r,{options:t})),this}clear(e={}){const t=this.getCells();if(0===t.length)return this;const r=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",()=>{const i=t.sort((s,o)=>(s.isEdge()?1:2)-(o.isEdge()?1:2));for(;i.length>0;){const s=i.shift();s&&s.remove(r)}},r),this}addNode(e,t={}){const r=pn.isNode(e)?e:this.createNode(e);return this.addCell(r,t),r}updateNode(e,t={}){const r=this.createNode(e),i=r.getProp();return r.dispose(),this.updateCell(i,t)}createNode(e){return pn.create(e)}addEdge(e,t={}){const r=Jt.isEdge(e)?e:this.createEdge(e);return this.addCell(r,t),r}createEdge(e){return Jt.create(e)}updateEdge(e,t={}){const r=this.createEdge(e),i=r.getProp();return r.dispose(),this.updateCell(i,t)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild(r=>this.addCell(r,t)),this.addings.delete(e)),this)}addCells(e,t={}){const r=e.length;if(0===r)return this;const i=Object.assign(Object.assign({},t),{position:r-1,maxPosition:r-1});return this.startBatch("add",Object.assign(Object.assign({},i),{cells:e})),e.forEach(s=>{this.addCell(s,i),i.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},i),{cells:e})),this}updateCell(e,t={}){const r=e.id&&this.getCell(e.id);return!!r&&this.batchUpdate("update",()=>(Object.entries(e).forEach(([i,s])=>r.setProp(i,s,t)),!0),e)}removeCell(e,t={}){const r="string"==typeof e?this.getCell(e):e;return r&&this.has(r)?this.collection.remove(r,t):null}updateCellId(e,t){if(e.id===t)return;this.startBatch("update",{id:t}),e.prop("id",t);const r=e.clone({keepId:!0});return this.addCell(r),this.getConnectedEdges(e).forEach(s=>{const o=s.getSourceCell(),a=s.getTargetCell();o===e&&s.setSource(Object.assign(Object.assign({},s.getSource()),{cell:t})),a===e&&s.setTarget(Object.assign(Object.assign({},s.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),r}removeCells(e,t={}){return e.length?this.batchUpdate("remove",()=>e.map(r=>this.removeCell(r,t))):[]}removeConnectedEdges(e,t={}){const r=this.getConnectedEdges(e);return r.forEach(i=>{i.remove(t)}),r}disconnectConnectedEdges(e,t={}){const r="string"==typeof e?e:e.id;this.getConnectedEdges(e).forEach(i=>{const s=i.getSourceCellId(),o=i.getTargetCellId();s===r&&i.setSource({x:0,y:0},t),o===r&&i.setTarget({x:0,y:0},t)})}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map(t=>this.getCell(t)).filter(t=>null!=t):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const r=this.outgoings["string"==typeof e?e:e.id];return r?r.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getIncomingEdges(e){const r=this.incomings["string"==typeof e?e:e.id];return r?r.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getConnectedEdges(e,t={}){const r=[],i="string"==typeof e?this.getCell(e):e;if(null==i)return r;const s={},o=t.indirect;let a=t.incoming,c=t.outgoing;null==a&&null==c&&(a=c=!0);const u=(d,h)=>{const g=h?this.getOutgoingEdges(d):this.getIncomingEdges(d);if(g?.forEach(m=>{s[m.id]||(r.push(m),s[m.id]=!0,o&&(a&&u(m,!1),c&&u(m,!0)))}),o&&d.isEdge()){const m=h?d.getTargetCell():d.getSourceCell();m&&m.isEdge()&&(s[m.id]||(r.push(m),u(m,h)))}};if(c&&u(i,!0),a&&u(i,!1),t.deep){const d=i.getDescendants({deep:!0}),h={};d.forEach(m=>{m.isNode()&&(h[m.id]=!0)});const g=(m,y)=>{const v=y?this.getOutgoingEdges(m.id):this.getIncomingEdges(m.id);v?.forEach(w=>{if(!s[w.id]){const _=w.getSourceCell(),C=w.getTargetCell();if(!t.enclosed&&_&&h[_.id]&&C&&h[C.id])return;r.push(w),s[w.id]=!0}})};d.forEach(m=>{m.isEdge()||(c&&g(m,!0),a&&g(m,!1))})}return r}isBoundary(e,t){const r="string"==typeof e?this.getCell(e):e,i=t?this.getIncomingEdges(r):this.getOutgoingEdges(r);return null==i||0===i.length}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach(r=>{if(this.isBoundary(r,e)){const i=this.getCell(r);i&&t.push(i)}}),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let r=t.incoming,i=t.outgoing;null==r&&null==i&&(r=i=!0);const o=this.getConnectedEdges(e,t).reduce((a,c)=>{const u=c.hasLoop(t),d=c.getSourceCell(),h=c.getTargetCell();return r&&d&&d.isNode()&&!a[d.id]&&(u||d!==e&&(!t.deep||!d.isDescendantOf(e)))&&(a[d.id]=d),i&&h&&h.isNode()&&!a[h.id]&&(u||h!==e&&(!t.deep||!h.isDescendantOf(e)))&&(a[h.id]=h),a},{});if(e.isEdge()){if(r){const a=e.getSourceCell();a&&a.isNode()&&!o[a.id]&&(o[a.id]=a)}if(i){const a=e.getTargetCell();a&&a.isNode()&&!o[a.id]&&(o[a.id]=a)}}return Object.keys(o).map(a=>o[a])}isNeighbor(e,t,r={}){let i=r.incoming,s=r.outgoing;return null==i&&null==s&&(i=s=!0),this.getConnectedEdges(e,r).some(o=>{const a=o.getSourceCell(),c=o.getTargetCell();return!!(i&&a&&a.id===t.id||s&&c&&c.id===t.id)})}getSuccessors(e,t={}){const r=[];return this.search(e,(i,s)=>{i!==e&&this.matchDistance(s,t.distance)&&r.push(i)},Object.assign(Object.assign({},t),{outgoing:!0})),r}isSuccessor(e,t,r={}){let i=!1;return this.search(e,(s,o)=>{if(s===t&&s!==e&&this.matchDistance(o,r.distance))return i=!0,!1},Object.assign(Object.assign({},r),{outgoing:!0})),i}getPredecessors(e,t={}){const r=[];return this.search(e,(i,s)=>{i!==e&&this.matchDistance(s,t.distance)&&r.push(i)},Object.assign(Object.assign({},t),{incoming:!0})),r}isPredecessor(e,t,r={}){let i=!1;return this.search(e,(s,o)=>{if(s===t&&s!==e&&this.matchDistance(o,r.distance))return i=!0,!1},Object.assign(Object.assign({},r),{incoming:!0})),i}matchDistance(e,t){return null==t||("function"==typeof t?t(e):!(!Array.isArray(t)||!t.includes(e))||e===t)}getCommonAncestor(...e){const t=[];return e.forEach(r=>{r&&(Array.isArray(r)?t.push(...r):t.push(r))}),Fe.getCommonAncestor(...t)}getSubGraph(e,t={}){const r=[],i={},s=[],o=[],a=c=>{i[c.id]||(r.push(c),i[c.id]=c,c.isEdge()&&o.push(c),c.isNode()&&s.push(c))};return e.forEach(c=>{a(c),t.deep&&c.getDescendants({deep:!0}).forEach(d=>a(d))}),o.forEach(c=>{const u=c.getSourceCell(),d=c.getTargetCell();u&&!i[u.id]&&(r.push(u),i[u.id]=u,u.isNode()&&s.push(u)),d&&!i[d.id]&&(r.push(d),i[d.id]=d,d.isNode()&&s.push(d))}),s.forEach(c=>{this.getConnectedEdges(c,t).forEach(d=>{const h=d.getSourceCell(),g=d.getTargetCell();!i[d.id]&&h&&i[h.id]&&g&&i[g.id]&&(r.push(d),i[d.id]=d)})}),r}cloneSubGraph(e,t={}){const r=this.getSubGraph(e,t);return this.cloneCells(r)}cloneCells(e){return Fe.cloneCells(e)}getNodesFromPoint(e,t){const r="number"==typeof e?{x:e,y:t||0}:e;return this.getNodes().filter(i=>i.getBBox().containsPoint(r))}getNodesInArea(e,t,r,i,s){const o="number"==typeof e?new Y(e,t,r,i):Y.create(e),a="number"==typeof e?s:t,c=a&&a.strict;return this.getNodes().filter(u=>{const d=u.getBBox();return c?o.containsRect(d):o.isIntersectWithRect(d)})}getEdgesInArea(e,t,r,i,s){const o="number"==typeof e?new Y(e,t,r,i):Y.create(e),a="number"==typeof e?s:t,c=a&&a.strict;return this.getEdges().filter(u=>{const d=u.getBBox();return 0===d.width?d.inflate(1,0):0===d.height&&d.inflate(0,1),c?o.containsRect(d):o.isIntersectWithRect(d)})}getNodesUnderNode(e,t={}){const r=e.getBBox();return(null==t.by||"bbox"===t.by?this.getNodesInArea(r):this.getNodesFromPoint(r[t.by])).filter(s=>e.id!==s.id&&!s.isDescendantOf(e))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return Fe.getCellsBBox(e,t)}search(e,t,r={}){r.breadthFirst?this.breadthFirstSearch(e,t,r):this.depthFirstSearch(e,t,r)}breadthFirstSearch(e,t,r={}){const i=[],s={},o={};for(i.push(e),o[e.id]=0;i.length>0;){const a=i.shift();null==a||s[a.id]||(s[a.id]=!0,!1===_e(t,this,a,o[a.id]))||this.getNeighbors(a,r).forEach(u=>{o[u.id]=o[a.id]+1,i.push(u)})}}depthFirstSearch(e,t,r={}){const i=[],s={},o={};for(i.push(e),o[e.id]=0;i.length>0;){const a=i.pop();if(null==a||s[a.id]||(s[a.id]=!0,!1===_e(t,this,a,o[a.id])))continue;const c=this.getNeighbors(a,r),u=i.length;c.forEach(d=>{o[d.id]=o[a.id]+1,i.splice(u,0,d)})}}getShortestPath(e,t,r={}){const i={};this.getEdges().forEach(u=>{const d=u.getSourceCellId(),h=u.getTargetCellId();d&&h&&(i[d]||(i[d]=[]),i[h]||(i[h]=[]),i[d].push(h),r.directed||i[h].push(d))});const o=AD.run(i,"string"==typeof e?e:e.id,r.weight),a=[];let c="string"==typeof t?t:t.id;for(o[c]&&a.push(c);c=o[c];)a.unshift(c);return a}translate(e,t,r){return this.getCells().filter(i=>!i.hasParent()).forEach(i=>i.translate(e,t,r)),this}resize(e,t,r){return this.resizeCells(e,t,this.getCells(),r)}resizeCells(e,t,r,i={}){const s=this.getCellsBBox(r);if(s){const o=Math.max(e/s.width,0),a=Math.max(t/s.height,0),c=s.getOrigin();r.forEach(u=>u.scale(o,a,c,i))}return this}toJSON(e={}){return Ao.toJSON(this.getCells(),e)}parseJSON(e){return Ao.fromJSON(e)}fromJSON(e,t={}){const r=this.parseJSON(e);return this.resetCells(r,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,r={}){this.startBatch(e,r);const i=t();return this.stopBatch(e,r),i}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some(r=>this.batches[r]>0)}}(function(n){n.toStringTag=`X6.${n.name}`,n.isModel=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.addNode&&"function"==typeof t.addEdge&&null!=t.collection}})(Ao||(Ao={})),function(n){n.toJSON=function e(r,i={}){return{cells:r.map(s=>s.toJSON(i))}},n.fromJSON=function t(r){const i=[];return Array.isArray(r)?i.push(...r):(r.cells&&i.push(...r.cells),r.nodes&&r.nodes.forEach(s=>{null==s.shape&&(s.shape="rect"),i.push(s)}),r.edges&&r.edges.forEach(s=>{null==s.shape&&(s.shape="edge"),i.push(s)})),i.map(s=>{const o=s.shape;if(o){if(pn.registry.exist(o))return pn.create(s);if(Jt.registry.exist(o))return Jt.create(s)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}}(Ao||(Ao={}));class ja extends pn{get label(){return this.getLabel()}set label(e){this.setLabel(e)}getLabel(){return this.getAttrByPath("text/text")}setLabel(e,t){return null==e?this.removeLabel():this.setAttrByPath("text/text",e,t),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}function Mne(n,e="body"){return[{tagName:n,selector:e},{tagName:"text",selector:"label"}]}function cd(n,e,t={}){const r={constructorName:n,markup:Mne(n,t.selector),attrs:{[n]:Object.assign({},ja.bodyAttr)}};return(t.parent||ja).define(cn(r,e,{shape:n}))}!function(n){n.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},n.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},n.config({attrs:{text:Object.assign({},n.labelAttr)},propHooks(e){const{label:t}=e,r=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(e,["label"]);return t&&Ff(r,"attrs/text/text",t),r},visible:!0})}(ja||(ja={})),cd("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}});const Tne=Jt.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});cd("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});class ld extends ja{get points(){return this.getPoints()}set points(e){this.setPoints(e)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(e,t){return null==e?this.removePoints():this.setAttrByPath("body/refPoints",ld.pointsToString(e),t),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}!function(n){function e(t){return"string"==typeof t?t:t.map(r=>Array.isArray(r)?r.join(","):T.isPointLike(r)?`${r.x}, ${r.y}`:"").join(" ")}n.pointsToString=e,n.config({propHooks(t){const{points:r}=t,i=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["points"]);if(r){const s=e(r);s&&Ff(i,"attrs/body/refPoints",s)}return i}})}(ld||(ld={})),cd("polygon",{},{parent:ld}),cd("polyline",{},{parent:ld}),ja.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(n){const{path:e}=n,t=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["path"]);return e&&Ff(t,"attrs/body/refD",e),t}}),ja.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},Sa.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:Sn.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},ja.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(n){const{text:e}=n,t=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(n,["text"]);return e&&Ff(t,"attrs/label/text",e),t},attrHooks:{text:{set(n,{cell:e,view:t,refBBox:r,elem:i,attrs:s}){if(!(i instanceof HTMLElement)){const o=s.style||{},a={text:n,width:-5,height:"100%"},c=Object.assign({textVerticalAnchor:"middle"},o);return _e(ks.presets.textWrap.set,this,a,{cell:e,view:t,elem:i,refBBox:r,attrs:c}),{fill:o.color||null}}i.textContent=n},position(n,{refBBox:e,elem:t}){if(t instanceof SVGElement)return e.getCenter()}}}}),cd("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:function Ine(n="xlink:href"){return t=>{const{imageUrl:r,imageWidth:i,imageHeight:s}=t,o=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["imageUrl","imageWidth","imageHeight"]);if(null!=r||null!=i||null!=s){const a=()=>{if(o.attrs){const c=o.attrs.image;null!=r&&(c[n]=r),null!=i&&(c.width=i),null!=s&&(c.height=s),o.attrs.image=c}};o.attrs?(null==o.attrs.image&&(o.attrs.image={}),a()):(o.attrs={image:{}},a())}return o}}()},{selector:"image"}),cd("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class rs extends Qn{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return rs.toStringTag}getContainerClassName(){const e=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}updateClassName(e){const t=e.target;if(t.hasAttribute("magnet")){const r=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?Ai(t,r):ze(t,r)}else{const r=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(r):this.addClass(r)}}isNodeView(){return!0}confirmUpdate(e,t={}){let r=e;return this.hasAction(r,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","resize","translate","rotate","ports","tools"])):(r=this.handleAction(r,"resize",()=>this.resize(),"update"),r=this.handleAction(r,"update",()=>this.update(),Fn.useCSSSelector?"ports":null),r=this.handleAction(r,"translate",()=>this.translate()),r=this.handleAction(r,"rotate",()=>this.rotate()),r=this.handleAction(r,"ports",()=>this.renderPorts()),r=this.handleAction(r,"tools",()=>{this.getFlag("tools")===e?this.renderTools():this.updateTools(t)})),r}update(e){this.cleanCache(),Fn.useCSSSelector&&this.removePorts();const t=this.cell,r=t.getSize(),i=t.getAttrs();this.updateAttrs(this.container,i,{attrs:e===i?null:e,rootBBox:new Y(0,0,r.width,r.height),selectors:this.selectors}),Fn.useCSSSelector&&this.renderPorts()}renderMarkup(){const e=this.cell.markup;if(e){if("string"==typeof e)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(e)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.appendChild(t.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),Fn.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const e=this.cell.getPosition();return`translate(${e.x},${e.y})`}getRotationString(){const e=this.cell.getAngle();if(e){const t=this.cell.getSize();return`rotate(${e},${t.width/2},${t.height/2})`}}updateTransform(){let e=this.getTranslationString();const t=this.getRotationString();t&&(e+=` ${t}`),this.container.setAttribute("transform",e)}findPortElem(e,t){const r=e?this.portsCache[e]:null;return r?this.findOne(t,r.portContentElement,r.portContentSelectors||{}):null}cleanPortsCache(){this.portsCache={}}removePorts(){Object.values(this.portsCache).forEach(e=>{Hf(e.portElement)})}renderPorts(){const e=this.container,t=[];e.childNodes.forEach(o=>{t.push(o)});const r=this.cell.getParsedPorts(),i=JN(r,"zIndex"),s="auto";i[s]&&i[s].forEach(o=>{const a=this.getPortElement(o);e.append(a),t.push(a)}),Object.keys(i).forEach(o=>{if(o!==s){const a=parseInt(o,10);this.appendPorts(i[o],a,t)}}),this.updatePorts()}appendPorts(e,t,r){const i=e.map(s=>this.getPortElement(s));r[t]||t<0?vD(r[Math.max(t,0)],i):hp(this.container,i)}getPortElement(e){const t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}createPortElement(e){let t=Et.renderMarkup(this.cell.getPortContainerMarkup());const r=t.elem;if(null==r)throw new Error("Invalid port container markup.");t=Et.renderMarkup(this.getPortMarkup(e));const i=t.elem,s=t.selectors;if(null==i)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},i);let o="x6-port";e.group&&(o+=` x6-port-${e.group}`),ze(r,o),ze(r,"x6-port"),ze(i,"x6-port-body"),r.appendChild(i);let c,u,a=s;if(this.existPortLabel(e)){if(t=Et.renderMarkup(this.getPortLabelMarkup(e.label)),c=t.elem,u=t.selectors,null==c)throw new Error("Invalid port label markup.");if(s&&u){for(const h in u)if(s[h]&&h!==this.rootSelector)throw new Error("Selectors within port must be unique.");a=Object.assign(Object.assign({},s),u)}ze(c,"x6-port-label"),r.appendChild(c)}return this.portsCache[e.id]={portElement:r,portSelectors:a,portLabelElement:c,portLabelSelectors:u,portContentElement:i,portContentSelectors:s},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:e,node:this.cell,container:r,selectors:a,labelContainer:c,labelSelectors:u,contentContainer:i,contentSelectors:s}),r}updatePorts(){const e=this.cell.getParsedGroups(),t=Object.keys(e);0===t.length?this.updatePortGroup():t.forEach(r=>this.updatePortGroup(r))}updatePortGroup(e){const t=Y.fromSize(this.cell.getSize()),r=this.cell.getPortsLayoutByGroup(e,t);for(let i=0,s=r.length;i<s;i+=1){const o=r[i],c=this.portsCache[o.portId]||{},u=o.portLayout;if(this.applyPortTransform(c.portElement,u),null!=o.portAttrs){const h={selectors:c.portSelectors||{}};o.portSize&&(h.rootBBox=Y.fromSize(o.portSize)),this.updateAttrs(c.portElement,o.portAttrs,h)}const d=o.labelLayout;if(d&&c.portLabelElement&&(this.applyPortTransform(c.portLabelElement,d,-(u.angle||0)),d.attrs)){const h={selectors:c.portLabelSelectors||{}};o.labelSize&&(h.rootBBox=Y.fromSize(o.labelSize)),this.updateAttrs(c.portLabelElement,d.attrs,h)}}}applyPortTransform(e,t,r=0){const i=t.angle,s=t.position;zf(e,An().rotate(r).translate(s.x||0,s.y||0).rotate(i||0),{absolute:!0})}getPortMarkup(e){return e.markup||this.cell.portMarkup}getPortLabelMarkup(e){return e.markup||this.cell.portLabelMarkup}existPortLabel(e){return e.attrs&&e.attrs.text}getEventArgs(e,t,r){const i=this,s=i.cell;return null==t||null==r?{e,view:i,node:s,cell:s}:{e,x:t,y:r,view:i,node:s,cell:s}}getPortEventArgs(e,t,r){const i=this,s=i.cell;return r?{e,x:r.x,y:r.y,view:i,node:s,cell:s,port:t}:{e,view:i,node:s,cell:s,port:t}}notifyMouseDown(e,t,r){super.onMouseDown(e,t,r),this.notify("node:mousedown",this.getEventArgs(e,t,r))}notifyMouseMove(e,t,r){super.onMouseMove(e,t,r),this.notify("node:mousemove",this.getEventArgs(e,t,r))}notifyMouseUp(e,t,r){super.onMouseUp(e,t,r),this.notify("node:mouseup",this.getEventArgs(e,t,r))}notifyPortEvent(e,t,r){const i=this.findAttr("port",t.target);if(i){const s=t.type;"node:port:mouseenter"===e?t.type="mouseenter":"node:port:mouseleave"===e&&(t.type="mouseleave"),this.notify(e,this.getPortEventArgs(t,i,r)),t.type=s}}onClick(e,t,r){super.onClick(e,t,r),this.notify("node:click",this.getEventArgs(e,t,r)),this.notifyPortEvent("node:port:click",e,{x:t,y:r})}onDblClick(e,t,r){super.onDblClick(e,t,r),this.notify("node:dblclick",this.getEventArgs(e,t,r)),this.notifyPortEvent("node:port:dblclick",e,{x:t,y:r})}onContextMenu(e,t,r){super.onContextMenu(e,t,r),this.notify("node:contextmenu",this.getEventArgs(e,t,r)),this.notifyPortEvent("node:port:contextmenu",e,{x:t,y:r})}onMouseDown(e,t,r){this.isPropagationStopped(e)||(this.notifyMouseDown(e,t,r),this.notifyPortEvent("node:port:mousedown",e,{x:t,y:r}),this.startNodeDragging(e,t,r))}onMouseMove(e,t,r){const i=this.getEventData(e),s=i.action;if("magnet"===s)this.dragMagnet(e,t,r);else{if("move"===s){const a=i.targetView||this;a.dragNode(e,t,r),a.notify("node:moving",{e,x:t,y:r,view:a,cell:a.cell,node:a.cell})}this.notifyMouseMove(e,t,r),this.notifyPortEvent("node:port:mousemove",e,{x:t,y:r})}this.setEventData(e,i)}onMouseUp(e,t,r){const i=this.getEventData(e),s=i.action;"magnet"===s?this.stopMagnetDragging(e,t,r):(this.notifyMouseUp(e,t,r),this.notifyPortEvent("node:port:mouseup",e,{x:t,y:r}),"move"===s&&(i.targetView||this).stopNodeDragging(e,t,r));const o=i.targetMagnet;o&&this.onMagnetClick(e,o,t,r),this.checkMouseleave(e)}onMouseOver(e){super.onMouseOver(e),this.notify("node:mouseover",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseenter",e),this.notifyPortEvent("node:port:mouseover",e)}onMouseOut(e){super.onMouseOut(e),this.notify("node:mouseout",this.getEventArgs(e)),this.notifyPortEvent("node:port:mouseleave",e),this.notifyPortEvent("node:port:mouseout",e)}onMouseEnter(e){this.updateClassName(e),super.onMouseEnter(e),this.notify("node:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("node:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,r,i){super.onMouseWheel(e,t,r,i),this.notify("node:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}onMagnetClick(e,t,r,i){const s=this.graph;s.view.getMouseMovedCount(e)>s.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}onMagnetDblClick(e,t,r,i){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}onMagnetContextMenu(e,t,r,i){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}onMagnetMouseDown(e,t,r,i){this.startMagnetDragging(e,r,i)}onCustomEvent(e,t,r,i){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),super.onCustomEvent(e,t,r,i)}prepareEmbedding(e){const t=this.graph,i=this.getEventData(e).cell||this.cell,s=t.findViewByCell(i),o=t.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:i,view:s,cell:i,x:o.x,y:o.y,currentParent:i.getParent()})}processEmbedding(e,t){const r=t.cell||this.cell,i=t.graph||this.graph,s=i.options.embedding,o=s.findParent;let a="function"==typeof o?_e(o,i,{view:this,node:this.cell}).filter(g=>Fe.isCell(g)&&this.cell.id!==g.id&&!g.isDescendantOf(this.cell)):i.model.getNodesUnderNode(r,{by:o});if(s.frontOnly&&a.length>0){const g=JN(a,"zIndex"),m=DJ(Object.keys(g).map(y=>parseInt(y,10)));m&&(a=g[m])}a=a.filter(g=>g.visible);let c=null;const u=t.candidateEmbedView,d=s.validate;for(let g=a.length-1;g>=0;g-=1){const m=a[g];if(u&&u.cell.id===m.id){c=u;break}{const y=m.findView(i);if(_e(d,i,{child:this.cell,parent:y.cell,childView:this,parentView:y})){c=y;break}}}this.clearEmbedding(t),c&&c.highlight(null,{type:"embedding"}),t.candidateEmbedView=c;const h=i.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:r,node:r,view:i.findViewByCell(r),x:h.x,y:h.y,currentParent:r.getParent(),candidateParent:c?c.cell:null})}clearEmbedding(e){const t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}finalizeEmbedding(e,t){this.graph.startBatch("embedding");const r=t.cell||this.cell,i=t.graph||this.graph,s=i.findViewByCell(r),o=r.getParent(),a=t.candidateEmbedView;if(a?(a.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(null==o||o.id!==a.cell.id)&&a.cell.insertChild(r,void 0,{ui:!0})):o&&o.unembed(r,{ui:!0}),i.model.getConnectedEdges(r,{deep:!0}).forEach(c=>{c.updateParent({ui:!0})}),s&&a){const c=i.snapToGrid(e.clientX,e.clientY);s.notify("node:embedded",{e,cell:r,x:c.x,y:c.y,node:r,view:i.findViewByCell(r),previousParent:o,currentParent:r.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let e=this.cell,t=this;for(;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.findViewByCell(e)}return null}validateMagnet(e,t,r){if("passive"!==t.getAttribute("magnet")){const i=this.graph.options.connecting.validateMagnet;return!i||_e(i,this.graph,{e:r,magnet:t,view:e,cell:e.cell})}return!1}startMagnetDragging(e,t,r){if(!this.can("magnetConnectable"))return;e.stopPropagation();const i=e.currentTarget,s=this.graph;this.setEventData(e,{targetMagnet:i}),this.validateMagnet(this,i,e)?(s.options.magnetThreshold<=0&&this.startConnectting(e,i,t,r),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):this.onMouseDown(e,t,r),s.view.delegateDragEvents(e,this)}startConnectting(e,t,r,i){this.graph.model.startBatch("add-edge");const s=this.createEdgeFromMagnet(t,r,i);s.setEventData(e,s.prepareArrowheadDragging("target",{x:r,y:i,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:s}),s.notifyMouseDown(e,r,i)}getDefaultEdge(e,t){let r;const i=this.graph.options.connecting.createEdge;return i&&(r=_e(i,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),r}createEdgeFromMagnet(e,t,r){const i=this.graph,s=i.model,o=this.getDefaultEdge(this,e);return o.setSource(Object.assign(Object.assign({},o.getSource()),this.getEdgeTerminal(e,t,r,o,"source"))),o.setTarget(Object.assign(Object.assign({},o.getTarget()),{x:t,y:r})),o.addTo(s,{async:!1,ui:!0}),o.findView(i)}dragMagnet(e,t,r){const i=this.getEventData(e),s=i.edgeView;if(s)s.onMouseMove(e,t,r),this.autoScrollGraph(e.clientX,e.clientY);else{const o=this.graph,a=o.options.magnetThreshold,c=this.getEventTarget(e),u=i.targetMagnet;if("onleave"===a){if(u===c||u.contains(c))return}else if(o.view.getMouseMovedCount(e)<=a)return;this.startConnectting(e,u,t,r)}}stopMagnetDragging(e,t,r){const s=this.eventData(e).edgeView;s&&(s.onMouseUp(e,t,r),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(e,t,r){this.notify("node:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(e,t,r,i,s){let o=[s];const a=this.graph.getPlugin("selection");if(a&&a.isSelectionMovable()){const c=a.getSelectedCells();c.includes(s)&&(o=c.filter(u=>u.isNode()))}o.forEach(c=>{this.notify(e,{e:t,x:r,y:i,cell:c,node:c,view:c.findView(this.graph)})})}getRestrictArea(e){const t=this.graph.options.translating.restrict,r="function"==typeof t?_e(t,this.graph,e):t;return"number"==typeof r?this.graph.transform.getGraphArea().inflate(r):!0===r?this.graph.transform.getGraphArea():r||null}startNodeDragging(e,t,r){const i=this.getDelegatedView();if(null==i||!i.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,r);this.setEventData(e,{targetView:i,action:"move"});const s=T.create(i.cell.getPosition());i.setEventData(e,{moving:!1,offset:s.diff(t,r),restrict:this.getRestrictArea(i)})}dragNode(e,t,r){const i=this.cell,s=this.graph,o=s.getGridSize(),a=this.getEventData(e),c=a.offset,u=a.restrict;a.moving||(a.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,r,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);const d=ft.snapToGrid(t+c.x,o),h=ft.snapToGrid(r+c.y,o);i.setPosition(d,h,{restrict:u,deep:!0,ui:!0}),s.options.embedding.enabled&&(a.embedding||(this.prepareEmbedding(e),a.embedding=!0),this.processEmbedding(e,a))}stopNodeDragging(e,t,r){const i=this.getEventData(e);i.embedding&&this.finalizeEmbedding(e,i),i.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,r,this.cell)),i.moving=!1,i.embedding=!1}autoScrollGraph(e,t){const r=this.graph.getPlugin("scroller");r&&r.autoScroll(e,t)}}(function(n){n.toStringTag=`X6.${n.name}`,n.isNodeView=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate&&"function"==typeof t.update&&"function"==typeof t.findPortElem&&"function"==typeof t.resize&&"function"==typeof t.rotate&&"function"==typeof t.translate}})(rs||(rs={})),rs.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),rs.registry.register("node",rs,!0);class Mo extends Qn{constructor(){super(...arguments),this.POINT_ROUNDING=2}get[Symbol.toStringTag](){return Mo.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const r=this.cell.getSource();return new Y(r.x,r.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new Y(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const r=this.cell.getTarget();return new Y(r.x,r.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new Y(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let r=e;if(this.hasAction(r,"source")){if(!this.updateTerminalProperties("source"))return r;r=this.removeAction(r,"source")}if(this.hasAction(r,"target")){if(!this.updateTerminalProperties("target"))return r;r=this.removeAction(r,"target")}return this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","labels","tools"]),r):(r=this.handleAction(r,"update",()=>this.update(t)),r=this.handleAction(r,"labels",()=>this.onLabelsChange(t)),r=this.handleAction(r,"tools",()=>this.renderTools()),r)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const e=this.cell.markup;if(e){if("string"==typeof e)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(e)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}customizeLabels(){if(this.labelContainer){const e=this.cell,t=e.labels;for(let r=0,i=t.length;r<i;r+=1){const c=this.graph.options.onEdgeLabelRendered;c&&c({edge:e,label:t[r],container:this.labelCache[r],selectors:this.labelSelectors[r]})}}}renderLabels(){const e=this.cell,t=e.getLabels(),r=t.length;let i=this.labelContainer;if(this.labelCache={},this.labelSelectors={},r<=0)return i&&i.parentNode&&i.parentNode.removeChild(i),this;i?this.empty(i):(i=xo("g"),this.addClass(this.prefixClassName("edge-labels"),i),this.labelContainer=i);for(let s=0,o=t.length;s<o;s+=1){const c=this.normalizeLabelMarkup(this.parseLabelMarkup(t[s].markup));let u,d;if(c)u=c.node,d=c.selectors;else{const g=e.getDefaultLabel(),m=this.normalizeLabelMarkup(this.parseLabelMarkup(g.markup));u=m.node,d=m.selectors}u.setAttribute("data-index",`${s}`),i.appendChild(u);const h=this.rootSelector;if(d[h])throw new Error("Ambiguous label root selector.");d[h]=u,this.labelCache[s]=u,this.labelSelectors[s]=d}return null==i.parentNode&&this.container.appendChild(i),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(e={}){this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(null==t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const r=e.propertyPathArray||[],i=r.length;if(i>1&&t[r[1]]){if(2===i)return"object"==typeof e.propertyValue&&xb(e.propertyValue,"markup");if("markup"!==r[2])return!1}}return!0}parseLabelMarkup(e){return e?"string"==typeof e?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=we.createVectors(e),r=document.createDocumentFragment();for(let i=0,s=t.length;i<s;i+=1)r.appendChild(t[i].node);return{fragment:r,selectors:{}}}normalizeLabelMarkup(e){if(null==e)return;const t=e.fragment;if(!(t instanceof DocumentFragment&&t.hasChildNodes()))throw new Error("Invalid label markup.");let r;const i=t.childNodes;return r=i.length>1||"G"!==i[0].nodeName.toUpperCase()?we.create("g").append(t):we.create(i[0]),r.addClass(this.prefixClassName("edge-label")),{node:r.node,selectors:e.selectors}}updateLabels(){if(this.labelContainer){const e=this.cell,t=e.labels,r=this.can("edgeLabelMovable"),i=e.getDefaultLabel();for(let s=0,o=t.length;s<o;s+=1){const a=this.labelCache[s],c=this.labelSelectors[s];a.setAttribute("cursor",r?"move":"default");const u=t[s],d=cn({},i.attrs,u.attrs);this.updateAttrs(a,d,{selectors:c,rootBBox:u.size?Y.fromSize(u.size):void 0})}}}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}update(e={}){this.cleanCache(),this.updateConnection(e);const t=this.cell.getAttrs();return null!=t&&this.updateAttrs(this.container,t,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(e),this}removeRedundantLinearVertices(e={}){const t=this.cell,r=t.getVertices(),i=[this.sourceAnchor,...r,this.targetAnchor],s=i.length,o=new Yt(i);o.simplify({threshold:.01});const a=o.points.map(u=>u.toJSON()),c=a.length;return s===c?0:(t.setVertices(a.slice(1,c-1),e),s-c)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return T.create(this.sourceAnchor);case"target":return T.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return T.create(this.sourcePoint);case"target":return T.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const r=this.sourceView;return r?this.sourceMagnet||r.container:null}case"target":{if(t.raw)return this.targetMagnet;const r=this.targetView;return r?this.targetMagnet||r.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const r=e.tx||0,i=e.ty||0;this.routePoints=new Yt(this.routePoints).translate(r,i).points,this.translateConnectionPoints(r,i),this.path.translate(r,i)}else{const r=t.getVertices(),i=this.findAnchors(r);this.sourceAnchor=i.source,this.targetAnchor=i.target,this.routePoints=this.findRoutePoints(r);const s=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=s.source,this.targetPoint=s.target;const o=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,o.source||this.sourcePoint,o.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,s=e[0],o=e[e.length-1];return t.target.priority&&!t.source.priority?this.findAnchorsOrdered("target",o,"source",s):this.findAnchorsOrdered("source",s,"target",o)}findAnchorsOrdered(e,t,r,i){let s,o;const a=this.cell,c=a[e],u=a[r],d=this.getTerminalView(e),h=this.getTerminalView(r),g=this.getTerminalMagnet(e),m=this.getTerminalMagnet(r);if(d){let y;y=t?T.create(t):h?m:T.create(u),s=this.getAnchor(c.anchor,d,g,y,e)}else s=T.create(c);if(h){const y=T.create(i||s);o=this.getAnchor(u.anchor,h,m,y,r)}else o=T.isPointLike(u)?T.create(u):new T;return{[e]:s,[r]:o}}getAnchor(e,t,r,i,s){const o=t.isEdgeElement(r),a=this.graph.options.connecting;let u,c="string"==typeof e?{name:e}:e;if(!c){const h=o?("source"===s?a.sourceEdgeAnchor:a.targetEdgeAnchor)||a.edgeAnchor:("source"===s?a.sourceAnchor:a.targetAnchor)||a.anchor;c="string"==typeof h?{name:h}:h}if(!c)throw new Error("Anchor should be specified.");const d=c.name;if(o){const h=id.registry.get(d);if("function"!=typeof h)return id.registry.onNotFound(d);u=_e(h,this,t,r,i,c.args||{},s)}else{const h=rd.registry.get(d);if("function"!=typeof h)return rd.registry.onNotFound(d);u=_e(h,this,t,r,i,c.args||{},s)}return u?u.round(this.POINT_ROUNDING):new T}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||Fa.presets.normal,r=this.cell.getRouter()||t;let i;if("function"==typeof r)i=_e(r,this,e,{},this);else{const s="string"==typeof r?r:r.name,o="string"==typeof r?{}:r.args||{},a=s?Fa.registry.get(s):Fa.presets.normal;if("function"!=typeof a)return Fa.registry.onNotFound(s);i=_e(a,this,e,o,this)}return null==i?e.map(s=>T.create(s)):i.map(s=>T.create(s))}findConnectionPoints(e,t,r){const i=this.cell,s=this.graph.options.connecting,o=i.getSource(),a=i.getTarget(),c=this.sourceView,u=this.targetView,d=e[0],h=e[e.length-1];let g,m;if(c&&!c.isEdgeElement(this.sourceMagnet)){const y=this.sourceMagnet||c.container,w=new Q(d||r,t);g=this.getConnectionPoint(o.connectionPoint||s.sourceConnectionPoint||s.connectionPoint,c,y,w,"source")}else g=t;if(u&&!u.isEdgeElement(this.targetMagnet)){const y=this.targetMagnet||u.container,v=a.connectionPoint||s.targetConnectionPoint||s.connectionPoint,_=new Q(h||t,r);m=this.getConnectionPoint(v,u,y,_,"target")}else m=r;return{source:g,target:m}}getConnectionPoint(e,t,r,i,s){const o=i.end;if(null==e)return o;const a="string"==typeof e?e:e.name,c="string"==typeof e?{}:e.args,u=sd.registry.get(a);if("function"!=typeof u)return sd.registry.onNotFound(a);const d=_e(u,this,i,t,r,c||{},s);return d?d.round(this.POINT_ROUNDING):o}findMarkerPoints(e,t,r){const i=h=>{const g=this.cell.getAttrs(),m=Object.keys(g);for(let y=0,v=m.length;y<v;y+=1){const w=g[m[y]];if(w[`${h}Marker`]||w[`${h}-marker`]){const _=w.strokeWidth||w["stroke-width"];if(_)return parseFloat(_);break}}return null},s=e[0],o=e[e.length-1];let a,c;const u=i("source");u&&(a=t.clone().move(s||r,-u));const d=i("target");return d&&(c=r.clone().move(o||t,-d)),this.sourceMarkerPoint=a||t.clone(),this.targetMarkerPoint=c||r.clone(),{source:a,target:c}}findPath(e,t,r){const i=this.cell.getConnector()||this.graph.options.connecting.connector;let s,o,a;if("string"==typeof i?s=i:(s=i.name,o=i.args),s){const u=al.registry.get(s);if("function"!=typeof u)return al.registry.onNotFound(s);a=u}else a=al.presets.normal;const c=_e(a,this,t,r,e,Object.assign(Object.assign({},o),{raw:!0}),this);return"string"==typeof c?ae.parse(c):c}translateConnectionPoints(e,t){this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t),this.sourceMarkerPoint.translate(e,t),this.targetMarkerPoint.translate(e,t)}updateLabelPositions(){if(null==this.labelContainer)return this;if(!this.path)return this;const t=this.cell,r=t.getLabels();if(0===r.length)return this;const i=t.getDefaultLabel(),s=this.normalizeLabelPosition(i.position);for(let o=0,a=r.length;o<a;o+=1){const c=r[o],u=this.labelCache[o];if(!u)continue;const d=this.normalizeLabelPosition(c.position),h=cn({},s,d),g=this.getLabelTransformationMatrix(h);u.setAttribute("transform",Uf(g))}return this}updateTerminalProperties(e){const r=this.graph,i=this.cell[e],s=i&&i.cell,o=`${e}View`;if(!s)return this[o]=null,this.updateTerminalMagnet(e),!0;const a=r.getCellById(s);if(!a)throw new Error(`Edge's ${e} node with id "${s}" not exists`);const c=a.findView(r);return!!c&&(this[o]=c,this.updateTerminalMagnet(e),!0)}updateTerminalMagnet(e){const t=`${e}Magnet`,r=this.getTerminalView(e);if(r){let i=r.getMagnetFromEdgeTerminal(this.cell[e]);i===r.container&&(i=null),this[t]=i}else this[t]=null}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&"object"==typeof t.position&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&"object"==typeof t.position)return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&"object"==typeof e.position)return e.position.options}mergeLabelPositionArgs(e,t){return null===e?null:void 0===e?null===t?null:t:cn({},t,e)}getConnection(){return null!=this.path?this.path.clone():null}getConnectionPathData(){if(null==this.path)return"";const e=this.cache.pathCache;return xb(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(null==this.path)return null;const e=this.cache.pathCache;return xb(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(null==this.path)return 0;const e=this.cache.pathCache;return xb(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return null==this.path?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return null==this.path?null:(_o(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return null==this.path?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return null==this.path?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return null==this.path?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return null==this.path?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return null==this.path?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,r,i){const s={distance:0};let a,o=0;"number"==typeof r?(o=r,a=i):a=r,null!=a&&(s.options=a);const c=a&&a.absoluteOffset,u=!(a&&a.absoluteDistance),d=a&&a.absoluteDistance&&a.reverseDistance,h=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},m=new T(e,t),y=h.closestPointT(m,g),v=this.getConnectionLength()||0;let _,C,w=h.lengthAtT(y,g);if(u&&(w=v>0?w/v:0),d&&(w=-1*(v-w)||1),s.distance=w,c||(_=h.tangentAtT(y)),_)C=_.pointOffset(m);else{const E=h.pointAtT(y),A=m.diff(E);C={x:A.x,y:A.y}}return s.offset=C,s.angle=o,s}normalizeLabelPosition(e){return"number"==typeof e?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),r=t.options||{},i=t.angle||0,s=t.distance,o=s>0&&s<=1;let a=0;const c={x:0,y:0},u=t.offset;u&&("number"==typeof u?a=u:(null!=u.x&&(c.x=u.x),null!=u.y&&(c.y=u.y)));const d=0!==c.x||0!==c.y||0===a,h=r.keepGradient,g=r.ensureLegibility,m=this.path,y={segmentSubdivisions:this.getConnectionSubdivisions()},v=o?s*this.getConnectionLength():s,w=m.tangentAtLength(v,y);let _,C=i;if(w){if(d)_=w.start,_.translate(c);else{const E=w.clone();E.rotate(-90,w.start),E.setLength(a),_=E.end}h&&(C=w.angle()+i,g&&(C=bt.normalize((C+90)%180-90)))}else _=m.start,d&&_.translate(c);return An().translate(_.x,_.y).rotate(C)}getVertexIndex(e,t){const i=this.cell.getVertices(),s=this.getClosestPointLength(new T(e,t));let o=0;if(null!=s)for(const a=i.length;o<a;o+=1){const u=this.getClosestPointLength(i[o]);if(null!=u&&s<u)break}return o}getEventArgs(e,t,r){const i=this,s=i.cell;return null==t||null==r?{e,view:i,edge:s,cell:s}:{e,x:t,y:r,view:i,edge:s,cell:s}}notifyUnhandledMouseDown(e,t,r){this.notify("edge:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,r){super.onMouseDown(e,t,r),this.notify("edge:mousedown",this.getEventArgs(e,t,r))}notifyMouseMove(e,t,r){super.onMouseMove(e,t,r),this.notify("edge:mousemove",this.getEventArgs(e,t,r))}notifyMouseUp(e,t,r){super.onMouseUp(e,t,r),this.notify("edge:mouseup",this.getEventArgs(e,t,r))}onClick(e,t,r){super.onClick(e,t,r),this.notify("edge:click",this.getEventArgs(e,t,r))}onDblClick(e,t,r){super.onDblClick(e,t,r),this.notify("edge:dblclick",this.getEventArgs(e,t,r))}onContextMenu(e,t,r){super.onContextMenu(e,t,r),this.notify("edge:contextmenu",this.getEventArgs(e,t,r))}onMouseDown(e,t,r){this.notifyMouseDown(e,t,r),this.startEdgeDragging(e,t,r)}onMouseMove(e,t,r){const i=this.getEventData(e);switch(i.action){case"drag-label":this.dragLabel(e,t,r);break;case"drag-arrowhead":this.dragArrowhead(e,t,r);break;case"drag-edge":this.dragEdge(e,t,r)}return this.notifyMouseMove(e,t,r),i}onMouseUp(e,t,r){const i=this.getEventData(e);switch(i.action){case"drag-label":this.stopLabelDragging(e,t,r);break;case"drag-arrowhead":this.stopArrowheadDragging(e,t,r);break;case"drag-edge":this.stopEdgeDragging(e,t,r)}return this.notifyMouseUp(e,t,r),this.checkMouseleave(e),i}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,r,i){super.onMouseWheel(e,t,r,i),this.notify("edge:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}onCustomEvent(e,t,r,i){if(zR(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===t)return void this.cell.remove({ui:!0});this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,i)))}this.notifyMouseDown(e,r,i)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),super.onCustomEvent(e,t,r,i)}onLabelMouseDown(e,t,r){this.notifyMouseDown(e,t,r),this.startLabelDragging(e,t,r),this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,r){this.can("edgeMovable")?this.setEventData(e,{x:t,y:r,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(e,t,r)}dragEdge(e,t,r){const i=this.getEventData(e);i.moving||(i.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-i.x,r-i.y,{ui:!0}),this.setEventData(e,{x:t,y:r}),this.notify("edge:moving",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,r){const i=this.getEventData(e);i.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),i.moving=!1}prepareArrowheadDragging(e,t){const r=this.getTerminalMagnet(e),i={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:!0===t.isNewEdge,terminalType:e,initialMagnet:r,initialTerminal:rD(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(i),i}createValidateConnectionArgs(e){const t=[];t[4]=e,t[5]=this;let r,i=0,s=0;"source"===e?(i=2,r="target"):(s=2,r="source");const o=this.cell[r],a=o.cell;if(a){let c;const u=t[i]=this.graph.findViewByCell(a);u&&(c=u.getMagnetFromEdgeTerminal(o),c===u.container&&(c=void 0)),t[i+1]=c}return(c,u)=>(t[s]=c,t[s+1]=c.container===u?void 0:u,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){null!=e.zIndex&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null),this.container.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}validateConnection(e,t,r,i,s,o,a){const c=this.graph.options.connecting,u=c.allowLoop,d=c.allowNode,h=c.allowEdge,g=c.allowPort,m=c.allowMulti,y=c.validateConnection,v=o?o.cell:null,w="target"===s?r:e,_="target"===s?i:t;let C=!0;const E=A=>{const P="source"===s?a?a.port:null:v?v.getSourcePortId():null,L="target"===s?a?a.port:null:v?v.getTargetPortId():null;return _e(A,this.graph,{edge:v,edgeView:o,sourceView:e,targetView:r,sourcePort:P,targetPort:L,sourceMagnet:t,targetMagnet:i,sourceCell:e?e.cell:null,targetCell:r?r.cell:null,type:s})};if(null!=u&&("boolean"==typeof u?!u&&e===r&&(C=!1):C=E(u)),C&&null!=g&&("boolean"==typeof g?!g&&_&&(C=!1):C=E(g)),C&&null!=h&&("boolean"==typeof h?!h&&Mo.isEdgeView(w)&&(C=!1):C=E(h)),C&&null!=d&&null==_&&("boolean"==typeof d?!d&&rs.isNodeView(w)&&(C=!1):C=E(d)),C&&null!=m&&o){const A=o.cell,P="source"===s?a:A.getSource(),L="target"===s?a:A.getTarget(),V=a?this.graph.getCellById(a.cell):null;if(P&&L&&P.cell&&L.cell&&V)if("function"==typeof m)C=E(m);else{const G=this.graph.model.getConnectedEdges(V,{outgoing:"source"===s,incoming:"target"===s});G.length&&("withPort"===m?G.some(te=>{const Z=te.getSource(),ie=te.getTarget();return Z&&ie&&Z.cell===P.cell&&ie.cell===L.cell&&null!=Z.port&&Z.port===P.port&&null!=ie.port&&ie.port===L.port})&&(C=!1):m||G.some(te=>{const Z=te.getSource(),ie=te.getTarget();return Z&&ie&&Z.cell===P.cell&&ie.cell===L.cell})&&(C=!1))}}return C&&null!=y&&(C=E(y)),C}allowConnectToBlank(e){const t=this.graph,i=t.options.connecting.allowBlank;if("function"!=typeof i)return!!i;const s=t.findViewByCell(e),o=e.getSourceCell(),a=e.getTargetCell(),c=t.findViewByCell(o),u=t.findViewByCell(a);return _e(i,t,{edge:e,edgeView:s,sourceCell:o,targetCell:a,sourceView:c,targetView:u,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:s.sourceMagnet,targetMagnet:s.targetMagnet})}validateEdge(e,t,r){const i=this.graph;if(!this.allowConnectToBlank(e)){const o=e.getSourceCellId(),a=e.getTargetCellId();if(!o||!a)return!1}const s=i.options.connecting.validateEdge;return!s||_e(s,i,{edge:e,type:t,previous:r})}arrowheadDragging(e,t,r,i){i.x=t,i.y=r,i.currentTarget!==e&&(i.currentMagnet&&i.currentView&&i.currentView.unhighlight(i.currentMagnet,{type:"magnetAdsorbed"}),i.currentView=this.graph.findViewByElem(e),i.currentView?(i.currentMagnet=i.currentView.findMagnet(e),i.currentMagnet&&this.validateConnection(...i.getValidateConnectionArgs(i.currentView,i.currentMagnet),i.currentView.getEdgeTerminal(i.currentMagnet,t,r,this.cell,i.terminalType))?i.currentView.highlight(i.currentMagnet,{type:"magnetAdsorbed"}):i.currentMagnet=null):i.currentMagnet=null),i.currentTarget=e,this.cell.prop(i.terminalType,{x:t,y:r},Object.assign(Object.assign({},i.options),{ui:!0}))}arrowheadDragged(e,t,r){const i=e.currentView,s=e.currentMagnet;if(!s||!i)return;i.unhighlight(s,{type:"magnetAdsorbed"});const o=e.terminalType,a=i.getEdgeTerminal(s,t,r,this.cell,o);this.cell.setTerminal(o,a,{ui:!0})}snapArrowhead(e,t,r){const i=this.graph,{snap:s,allowEdge:o}=i.options.connecting,a="object"==typeof s&&s.radius||50,c=i.renderer.findViewsInArea({x:e-a,y:t-a,width:2*a,height:2*a},{nodeOnly:!0});if(o){const E=i.renderer.findEdgeViewsFromPoint({x:e,y:t},a).filter(A=>A!==this);c.push(...E)}const u=r.closestView||null,d=r.closestMagnet||null;r.closestView=null,r.closestMagnet=null;let h,g=Number.MAX_SAFE_INTEGER;const m=new T(e,t);let y;c.forEach(E=>{if("false"!==E.container.getAttribute("magnet")){if(E.isNodeView())h=E.cell.getBBox().getCenter().distance(m);else if(E.isEdgeView()){const A=E.getClosestPoint(m);h=A?A.distance(m):Number.MAX_SAFE_INTEGER}h<a&&h<g&&(d===E.container||this.validateConnection(...r.getValidateConnectionArgs(E,null),E.getEdgeTerminal(E.container,e,t,this.cell,r.terminalType)))&&(g=h,r.closestView=E,r.closestMagnet=E.container)}E.container.querySelectorAll("[magnet]").forEach(A=>{if("false"!==A.getAttribute("magnet")){const P=E.getBBoxOfElement(A);h=m.distance(P.getCenter()),h<a&&h<g&&(d===A||this.validateConnection(...r.getValidateConnectionArgs(E,A),E.getEdgeTerminal(A,e,t,this.cell,r.terminalType)))&&(g=h,r.closestView=E,r.closestMagnet=A)}})});const v=r.terminalType,w=r.closestView,_=r.closestMagnet,C=d!==_;if(u&&C&&u.unhighlight(d,{type:"magnetAdsorbed"}),w){if(!C)return;w.highlight(_,{type:"magnetAdsorbed"}),y=w.getEdgeTerminal(_,e,t,this.cell,v)}else y={x:e,y:t};this.cell.setTerminal(v,y,{},Object.assign(Object.assign({},r.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(r,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(r)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){"remove"===e.fallbackAction?this.cell.remove({ui:!0}):this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0})}notifyConnectionEvent(e,t){const r=e.terminalType,i=e.initialTerminal,s=this.cell[r];if(s&&!Jt.equalTerminals(i,s)){const a=this.graph,c=i,u=c.cell?a.getCellById(c.cell):null,d=c.port,h=u?a.findViewByCell(u):null,g=u||e.isNewEdge?null:T.create(i).toJSON(),m=s,y=m.cell?a.getCellById(m.cell):null,v=m.port,w=y?a.findViewByCell(y):null,_=y?null:T.create(s).toJSON();this.notify("edge:connected",{e:t,previousCell:u,previousPort:d,previousView:h,previousPoint:g,currentCell:y,currentView:w,currentPort:v,currentPoint:_,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:r,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,r=t.model.getCells();e.marked={};for(let i=0,s=r.length;i<s;i+=1){const o=t.findViewByCell(r[i]);if(!o||o.cell.id===this.cell.id)continue;const a=Array.prototype.slice.call(o.container.querySelectorAll("[magnet]"));"false"!==o.container.getAttribute("magnet")&&a.push(o.container);const c=a.filter(u=>this.validateConnection(...e.getValidateConnectionArgs(o,u),o.getEdgeTerminal(u,e.x,e.y,this.cell,e.terminalType)));if(c.length>0){for(let u=0,d=c.length;u<d;u+=1)o.highlight(c[u],{type:"magnetAvailable"});o.highlight(null,{type:"nodeAvailable"}),e.marked[o.cell.id]=c}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach(r=>{const i=this.graph.findViewByCell(r);i&&(t[r].forEach(o=>{i.unhighlight(o,{type:"magnetAvailable"})}),i.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}startArrowheadDragging(e,t,r){if(!this.can("arrowheadMovable"))return void this.notifyUnhandledMouseDown(e,t,r);const s=e.target.getAttribute("data-terminal"),o=this.prepareArrowheadDragging(s,{x:t,y:r});this.setEventData(e,o)}dragArrowhead(e,t,r){const i=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,r,i):this.arrowheadDragging(this.getEventTarget(e),t,r,i)}stopArrowheadDragging(e,t,r){const i=this.graph,s=this.getEventData(e);i.options.connecting.snap?this.snapArrowheadEnd(s):this.arrowheadDragged(s,t,r),this.validateEdge(this.cell,s.terminalType,s.initialTerminal)?(this.finishEmbedding(s),this.notifyConnectionEvent(s,e)):this.fallbackConnection(s),this.afterArrowheadDragging(s)}startLabelDragging(e,t,r){if(this.can("edgeLabelMovable")){const s=parseInt(e.currentTarget.getAttribute("data-index"),10),o=this.getLabelPositionAngle(s),a=this.getLabelPositionArgs(s),c=this.getDefaultLabelPositionArgs(),u=this.mergeLabelPositionArgs(a,c);this.setEventData(e,{index:s,positionAngle:o,positionArgs:u,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,r){const i=this.getEventData(e),s=this.cell.getLabelAt(i.index),o=cn({},s,{position:this.getLabelPosition(t,r,i.positionAngle,i.positionArgs)});this.cell.setLabelAt(i.index,o)}stopLabelDragging(e,t,r){}}(function(n){n.toStringTag=`X6.${n.name}`,n.isEdgeView=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return(null==r||r===n.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate&&"function"==typeof t.update&&"function"==typeof t.getConnection}})(Mo||(Mo={})),Mo.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),Mo.registry.register("edge",Mo,!0);class Fs extends Ot{get options(){return this.graph.options}constructor(e){super(),this.graph=e;const{selectors:t,fragment:r}=Et.parseJSONMarkup(Fs.markup);this.background=t.background,this.grid=t.grid,this.svg=t.svg,this.defs=t.defs,this.viewport=t.viewport,this.primer=t.primer,this.stage=t.stage,this.decorator=t.decorator,this.overlay=t.overlay,this.container=this.options.container,this.restore=Fs.snapshoot(this.container),ze(this.container,this.prefixClassName("graph")),hp(this.container,r),this.delegateEvents()}delegateEvents(){return super.delegateEvents(this.constructor.events),this}guard(e,t){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,t))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(t&&t.cell&&Fe.isCell(t.cell)||this.svg===e.target||this.container===e.target||this.svg.contains(e.target)))}findView(e){return this.graph.findViewByElem(e)}onDblClick(e){this.options.preventDefaultDblClick&&e.preventDefault();const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onDblClick(t,i.x,i.y):this.graph.trigger("blank:dblclick",{e:t,x:i.x,y:i.y})}onClick(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onClick(t,i.x,i.y):this.graph.trigger("blank:click",{e:t,x:i.x,y:i.y})}}isPreventDefaultContextMenu(e){let t=this.options.preventDefaultContextMenu;return"function"==typeof t&&(t=_e(t,this.graph,{view:e})),t}onContextMenu(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.isPreventDefaultContextMenu(r)&&e.preventDefault(),this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onContextMenu(t,i.x,i.y):this.graph.trigger("blank:contextmenu",{e:t,x:i.x,y:i.y})}delegateDragEvents(e,t){null==e.data&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}}),this.delegateDocumentEvents(this.constructor.documentEvents,e.data),this.undelegateEvents()}getMouseMovedCount(e){return this.getEventData(e).mouseMovedCount||0}onMouseDown(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;this.options.preventDefaultMouseDown&&e.preventDefault();const i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onMouseDown(t,i.x,i.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&e.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:i.x,y:i.y})),this.delegateDragEvents(t,r)}onMouseMove(e){const t=this.getEventData(e),r=t.startPosition;if(r&&r.x===e.clientX&&r.y===e.clientY||(null==t.mouseMovedCount&&(t.mouseMovedCount=0),t.mouseMovedCount+=1,t.mouseMovedCount<=this.options.moveThreshold))return;const s=this.normalizeEvent(e),o=this.graph.snapToGrid(s.clientX,s.clientY),a=t.currentView;a?a.onMouseMove(s,o.x,o.y):this.graph.trigger("blank:mousemove",{e:s,x:o.x,y:o.y}),this.setEventData(s,t)}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY),s=this.getEventData(e).currentView;if(s?s.onMouseUp(t,r.x,r.y):this.graph.trigger("blank:mouseup",{e:t,x:r.x,y:r.y}),!e.isPropagationStopped()){const o=new Ls(e,{type:"click",data:e.data});this.onClick(o)}e.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(!this.guard(t,r))if(r)r.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}onMouseOut(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(!this.guard(t,r))if(r)r.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}onMouseEnter(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.findViewByElem(t.relatedTarget);if(r){if(i===r)return;r.onMouseEnter(t)}else{if(i)return;this.graph.trigger("graph:mouseenter",{e:t})}}onMouseLeave(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=this.graph.findViewByElem(t.relatedTarget);if(r){if(i===r)return;r.onMouseLeave(t)}else{if(i)return;this.graph.trigger("graph:mouseleave",{e:t})}}onMouseWheel(e){const t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;const i=t.originalEvent,s=this.graph.snapToGrid(i.clientX,i.clientY),o=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));r?r.onMouseWheel(t,s.x,s.y,o):this.graph.trigger("blank:mousewheel",{e:t,delta:o,x:s.x,y:s.y})}onCustomEvent(e){const t=e.currentTarget,r=t.getAttribute("event")||t.getAttribute("data-event");if(r){const i=this.findView(t);if(i){const s=this.normalizeEvent(e);if(this.guard(s,i))return;const o=this.graph.snapToGrid(s.clientX,s.clientY);i.onCustomEvent(s,r,o.x,o.y)}}}handleMagnetEvent(e,t){const r=e.currentTarget,i=r.getAttribute("magnet");if(i&&"false"!==i.toLowerCase()){const s=this.findView(r);if(s){const o=this.normalizeEvent(e);if(this.guard(o,s))return;const a=this.graph.snapToGrid(o.clientX,o.clientY);_e(t,this.graph,s,o,r,a.x,a.y)}}}onMagnetMouseDown(e){this.handleMagnetEvent(e,(t,r,i,s,o)=>{t.onMagnetMouseDown(r,i,s,o)})}onMagnetDblClick(e){this.handleMagnetEvent(e,(t,r,i,s,o)=>{t.onMagnetDblClick(r,i,s,o)})}onMagnetContextMenu(e){const t=this.findView(e.target);this.isPreventDefaultContextMenu(t)&&e.preventDefault(),this.handleMagnetEvent(e,(r,i,s,o,a)=>{r.onMagnetContextMenu(i,s,o,a)})}onLabelMouseDown(e){const r=this.findView(e.currentTarget);if(r){const i=this.normalizeEvent(e);if(this.guard(i,r))return;const s=this.graph.snapToGrid(i.clientX,i.clientY);r.onLabelMouseDown(i,s.x,s.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}(function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([Ot.dispose()],Fs.prototype,"dispose",null),function(n){const e=`${Fn.prefixCls}-graph`;n.markup=[{ns:Sn.xhtml,tagName:"div",selector:"background",className:`${e}-background`},{ns:Sn.xhtml,tagName:"div",selector:"grid",className:`${e}-grid`},{ns:Sn.svg,tagName:"svg",selector:"svg",className:`${e}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":Sn.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${e}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${e}-svg-primer`},{tagName:"g",selector:"stage",className:`${e}-svg-stage`},{tagName:"g",selector:"decorator",className:`${e}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${e}-svg-overlay`}]}]}],n.snapshoot=function t(r){const i=r.cloneNode();return r.childNodes.forEach(s=>i.appendChild(s)),()=>{for(dp(r);r.attributes.length>0;)r.removeAttribute(r.attributes[0].name);for(let s=0,o=i.attributes.length;s<o;s+=1){const a=i.attributes[s];r.setAttribute(a.name,a.value)}i.childNodes.forEach(s=>r.appendChild(s))}}}(Fs||(Fs={})),function(n){const e=Fn.prefixCls;n.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${e}-cell`]:"onMouseEnter",[`mouseleave  .${e}-cell`]:"onMouseLeave",[`mouseenter  .${e}-cell-tools`]:"onMouseEnter",[`mouseleave  .${e}-cell-tools`]:"onMouseLeave",[`mousedown   .${e}-cell [event]`]:"onCustomEvent",[`touchstart  .${e}-cell [event]`]:"onCustomEvent",[`mousedown   .${e}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${e}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${e}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${e}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${e}-cell image`]:"onImageDragStart",[`mousedown   .${e}-edge .${e}-edge-label`]:"onLabelMouseDown",[`touchstart  .${e}-edge .${e}-edge-label`]:"onLabelMouseDown"},n.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(Fs||(Fs={}));class In extends Ea{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(e){super(),this.graph=e,this.init()}init(){}}class $D extends In{init(){Fn.autoInsertCSS&&function fQ(n,e){const t=xp.find(r=>r.name===n);if(!(t&&(t.loadTimes+=1,t.loadTimes>1)||Sa.isApplyingHMR())){const r=document.createElement("style");r.setAttribute("type","text/css"),r.textContent=e;const i=document.querySelector("head");i&&i.insertBefore(r,i.firstChild),xp.push({name:n,loadTimes:1,styleElement:r})}}("core",".x6-graph {\n  position: relative;\n  overflow: hidden;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n")}dispose(){!function dQ(n){const e=xp.findIndex(t=>t.name===n);if(e>-1){const t=xp[e];if(t.loadTimes-=1,t.loadTimes>0)return;let r=t.styleElement;r&&r.parentNode&&r.parentNode.removeChild(r),r=null,xp.splice(e,1)}}("core")}}var Np;!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([$D.dispose()],$D.prototype,"dispose",null),function(n){n.get=function e(t){const{grid:r}=t,a=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["grid","panning","mousewheel","embedding"]),c=t.container;if(null==c)throw new Error("Ensure the container of the graph is specified and valid");null==a.width&&(a.width=c.clientWidth),null==a.height&&(a.height=c.clientHeight);const u=cn({},n.defaults,a);return u.grid="number"==typeof r?{size:r,visible:!1}:Object.assign(Object.assign({},{size:10,visible:!1}),"boolean"==typeof r?{visible:r}:r),["panning","mousewheel","embedding"].forEach(g=>{const m=t[g];"boolean"==typeof m?u[g].enabled=m:u[g]=Object.assign(Object.assign({},u[g]),m)}),u}}(Np||(Np={})),function(n){n.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Fn.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Fn.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection:({type:e,sourceView:t,targetView:r})=>null!=("target"===e?r:t),createEdge:()=>new Tne},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}}(Np||(Np={}));class VD extends In{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}getGridSize(){return this.grid.size}setGridSize(e){this.grid.size=Math.max(e,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}update(e={}){const t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();const r=this.graph.matrix(),i=this.getInstance(),s=Array.isArray(e)?e:[e];this.patterns.forEach((c,u)=>{const d=`pattern_${u}`,h=r.a||1,g=r.d||1,{update:m,markup:y}=c,v=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(c,["update","markup"]),w=Object.assign(Object.assign(Object.assign({},v),s[u]),{sx:h,sy:g,ox:r.e||0,oy:r.f||0,width:t*h,height:t*g});i.has(d)||i.add(d,we.create("pattern",{id:d,patternUnits:"userSpaceOnUse"},we.createVectors(y)).node);const _=i.get(d);"function"==typeof m&&m(_.childNodes[0],w);let C=w.ox%w.width;C<0&&(C+=w.width);let E=w.oy%w.height;E<0&&(E+=w.height),ut(_,{x:C,y:E,width:w.width,height:w.height})});const o=(new XMLSerializer).serializeToString(i.root),a=`url(data:image/svg+xml;base64,${btoa(o)})`;this.elem.style.backgroundImage=a}getInstance(){return this.instance||(this.instance=new Ia),this.instance}resolveGrid(e){if(!e)return[];const t=e.type;if(null==t)return[Object.assign(Object.assign({},Ia.presets.dot),e.args)];const r=Ia.registry.get(t);if(r){let i=e.args||[];return Array.isArray(i)||(i=[i]),Array.isArray(r)?r.map((s,o)=>Object.assign(Object.assign({},s),i[o])):[Object.assign(Object.assign({},r),i[0])]}return Ia.registry.onNotFound(t)}dispose(){this.stopListening(),this.clear()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([In.dispose()],VD.prototype,"dispose",null);class Ck extends In{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),An(this.viewportMatrix)}setMatrix(e){const t=An(e),r=Uf(t);this.viewport.setAttribute("transform",r),this.viewportMatrix=t,this.viewportTransformString=r}resize(e,t){let r=void 0===e?this.options.width:e,i=void 0===t?this.options.height:t;this.options.width=r,this.options.height=i,"number"==typeof r&&(r=Math.round(r)),"number"==typeof i&&(i=Math.round(i)),this.container.style.width=null==r?"":`${r}px`,this.container.style.height=null==i?"":`${i}px`;const s=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},s)),this}getComputedSize(){let e=this.options.width,t=this.options.height;return ER(e)||(e=this.container.clientWidth),ER(t)||(t=this.container.clientHeight),{width:e,height:t}}getScale(){return function nQ(n){let e,t,r,i;return n?(e=null==n.a?1:n.a,i=null==n.d?1:n.d,t=n.b,r=n.c):e=i=1,{sx:t?Math.sqrt(e*e+t*t):e,sy:r?Math.sqrt(r*r+i*i):i}}(this.getMatrix())}scale(e,t=e,r=0,i=0){if(e=this.clampScale(e),t=this.clampScale(t),r||i){const o=this.getTranslation(),a=o.tx-r*(e-1),c=o.ty-i*(t-1);(a!==o.tx||c!==o.ty)&&this.translate(a,c)}const s=this.getMatrix();return s.a=e,s.d=t,this.setMatrix(s),this.graph.trigger("scale",{sx:e,sy:t,ox:r,oy:i}),this}clampScale(e){const t=this.graph.options.scaling;return Si(e,t.min||.01,t.max||16)}getZoom(){return this.getScale().sx}zoom(e,t){t=t||{};let r=e,i=e;const s=this.getScale(),o=this.getComputedSize();let a=o.width/2,c=o.height/2;if(t.absolute||(r+=s.sx,i+=s.sy),t.scaleGrid&&(r=Math.round(r/t.scaleGrid)*t.scaleGrid,i=Math.round(i/t.scaleGrid)*t.scaleGrid),t.maxScale&&(r=Math.min(t.maxScale,r),i=Math.min(t.maxScale,i)),t.minScale&&(r=Math.max(t.minScale,r),i=Math.max(t.minScale,i)),t.center&&(a=t.center.x,c=t.center.y),r=this.clampScale(r),i=this.clampScale(i),a||c){const u=this.getTranslation(),d=a-r/s.sx*(a-u.tx),h=c-i/s.sy*(c-u.ty);(d!==u.tx||h!==u.ty)&&this.translate(d,h)}return this.scale(r,i),this}getRotation(){return function rQ(n){let e={x:0,y:1};n&&(e=ED(n,e));const t=180*Math.atan2(e.y,e.x)/Math.PI%360-90;return{angle:t%360+(t<0?360:0)}}(this.getMatrix())}rotate(e,t,r){if(null==t||null==r){const s=rt.getBBox(this.stage);t=s.width/2,r=s.height/2}const i=this.getMatrix().translate(t,r).rotate(e).translate(-t,-r);return this.setMatrix(i),this}getTranslation(){return function iQ(n){return{tx:n&&n.e||0,ty:n&&n.f||0}}(this.getMatrix())}translate(e,t){const r=this.getMatrix();r.e=e||0,r.f=t||0,this.setMatrix(r);const i=this.getTranslation();return this.options.x=i.tx,this.options.y=i.ty,this.graph.trigger("translate",Object.assign({},i)),this}setOrigin(e,t){return this.translate(e||0,t||0)}fitToContent(e,t,r,i){if("object"==typeof e){const E=e;e=E.gridWidth||1,t=E.gridHeight||1,r=E.padding||0,i=E}else e=e||1,t=t||1,r=r||0,null==i&&(i={});const s=nl(r),o=i.border||0,a=i.contentArea?Y.create(i.contentArea):this.getContentArea(i);o>0&&a.inflate(o);const c=this.getScale(),u=this.getTranslation(),d=c.sx,h=c.sy;a.x*=d,a.y*=h,a.width*=d,a.height*=h;let g=Math.max(Math.ceil((a.width+a.x)/e),1)*e,m=Math.max(Math.ceil((a.height+a.y)/t),1)*t,y=0,v=0;("negative"===i.allowNewOrigin&&a.x<0||"positive"===i.allowNewOrigin&&a.x>=0||"any"===i.allowNewOrigin)&&(y=Math.ceil(-a.x/e)*e,y+=s.left,g+=y),("negative"===i.allowNewOrigin&&a.y<0||"positive"===i.allowNewOrigin&&a.y>=0||"any"===i.allowNewOrigin)&&(v=Math.ceil(-a.y/t)*t,v+=s.top,m+=v),g+=s.right,m+=s.bottom,g=Math.max(g,i.minWidth||0),m=Math.max(m,i.minHeight||0),g=Math.min(g,i.maxWidth||Number.MAX_SAFE_INTEGER),m=Math.min(m,i.maxHeight||Number.MAX_SAFE_INTEGER);const w=this.getComputedSize(),_=g!==w.width||m!==w.height;return(y!==u.tx||v!==u.ty)&&this.translate(y,v),_&&this.resize(g,m),new Y(-y/d,-v/h,g/d,m/h)}scaleContentToFit(e={}){this.scaleContentToFitImpl(e)}scaleContentToFitImpl(e={},t=!0){let r,i;if(e.contentArea){const _=e.contentArea;r=this.graph.localToGraph(_),i=T.create(_)}else r=this.getContentBBox(e),i=this.graph.graphToLocal(r);if(!r.width||!r.height)return;const s=nl(e.padding),o=e.minScale||0,a=e.maxScale||Number.MAX_SAFE_INTEGER,c=e.minScaleX||o,u=e.maxScaleX||a,d=e.minScaleY||o,h=e.maxScaleY||a;let g;if(e.viewportArea)g=e.viewportArea;else{const _=this.getComputedSize(),C=this.getTranslation();g={x:C.tx,y:C.ty,width:_.width,height:_.height}}g=Y.create(g).moveAndExpand({x:s.left,y:s.top,width:-s.left-s.right,height:-s.top-s.bottom});const m=this.getScale();let y=g.width/r.width*m.sx,v=g.height/r.height*m.sy;!1!==e.preserveAspectRatio&&(y=v=Math.min(y,v));const w=e.scaleGrid;if(w&&(y=w*Math.floor(y/w),v=w*Math.floor(v/w)),y=Si(y,c,u),v=Si(v,d,h),this.scale(y,v),t){const _=this.options;this.translate(g.x-i.x*y-_.x,g.y-i.y*v-_.y)}}getContentArea(e={}){return!1!==e.useCellGeometry?this.model.getAllCellsBBox()||new Y:rt.getBBox(this.stage)}getContentBBox(e={}){return this.graph.localToGraph(this.getContentArea(e))}getGraphArea(){const e=Y.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}zoomToRect(e,t={}){const r=Y.create(e),i=this.graph;t.contentArea=r,null==t.viewportArea&&(t.viewportArea={x:i.options.x,y:i.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);const s=r.getCenter();return this.centerPoint(s.x,s.y),this}zoomToFit(e={}){return this.zoomToRect(this.getContentArea(e),e)}centerPoint(e,t){const r=this.getComputedSize(),i=this.getScale(),s=this.getTranslation(),o=r.width/2,a=r.height/2;t=a-(t="number"==typeof t?t:a)*i.sy,(s.tx!==(e=o-(e="number"==typeof e?e:o)*i.sx)||s.ty!==t)&&this.translate(e,t)}centerContent(e){const r=this.graph.getContentArea(e).getCenter();this.centerPoint(r.x,r.y)}centerCell(e){return this.positionCell(e,"center")}positionPoint(e,t,r){const i=this.getComputedSize();(t=ts(t,Math.max(0,i.width)))<0&&(t=i.width+t),(r=ts(r,Math.max(0,i.height)))<0&&(r=i.height+r);const s=this.getTranslation(),o=this.getScale(),a=t-e.x*o.sx,c=r-e.y*o.sy;(s.tx!==a||s.ty!==c)&&this.translate(a,c)}positionRect(e,t){const r=Y.create(e);switch(t){case"center":return this.positionPoint(r.getCenter(),"50%","50%");case"top":return this.positionPoint(r.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%");case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(r.getTopLeft(),0,0);default:return this}}positionCell(e,t){const r=e.getBBox();return this.positionRect(r,t)}positionContent(e,t){const r=this.graph.getContentArea(t);return this.positionRect(r,e)}}class HD extends In{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(e={}){let t=e.size||"auto auto",r=e.position||"center";const i=this.graph.transform.getScale(),s=this.graph.translate();"object"==typeof r&&(r=`${s.tx+i.sx*(r.x||0)}px ${s.ty+i.sy*(r.y||0)}px`),"object"==typeof t&&(t=Y.fromSize(t).scale(i.sx,i.sy),t=`${t.width}px ${t.height}px`),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=r}drawBackgroundImage(e,t={}){if(!(e instanceof HTMLImageElement))return void(this.elem.style.backgroundImage="");const r=this.optionsCache;if(r&&r.image!==t.image)return;let i;const s=t.opacity,o=t.size;let a=t.repeat||"no-repeat";const c=Ep.registry.get(a);if("function"==typeof c){const d=t.quality||1;e.width*=d,e.height*=d;const h=c(e,t);if(!(h instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");i=h.toDataURL("image/png"),a=t.repeat&&a!==t.repeat?t.repeat:"repeat","object"==typeof o?(o.width*=h.width/e.width,o.height*=h.height/e.height):void 0===o&&(t.size={width:h.width/d,height:h.height/d})}else i=e.src,void 0===o&&(t.size={width:e.width,height:e.height});null!=r&&"object"==typeof t.size&&t.image===r.image&&t.repeat===r.repeat&&t.quality===r.quality&&(r.size=rD(t.size));const u=this.elem.style;u.backgroundImage=`url(${i})`,u.backgroundRepeat=a,u.opacity=null==s||s>=1?"":`${s}`,this.updateBackgroundImage(t)}updateBackgroundColor(e){this.elem.style.backgroundColor=e||""}updateBackgroundOptions(e){this.graph.options.background=e}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(e){const t=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(t.color),t.image){this.optionsCache=rD(t);const r=document.createElement("img");r.onload=()=>this.drawBackgroundImage(r,e),r.setAttribute("crossorigin","anonymous"),r.src=t.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([In.dispose()],HD.prototype,"dispose",null);class _k extends In{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&!0===this.widgetOptions.enabled}init(){this.startListening(),this.updateClassName()}startListening(){const e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),yr.on(this.graph.container,"mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new hL(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&yr.off(this.graph.container,"mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e}){const t=this.graph.getPlugin("selection"),r=t&&t.allowRubberband(e,!0);(this.allowPanning(e,!0)||this.allowPanning(e)&&!r)&&this.startPanning(e)}allowPanning(e,t){return this.pannable&&qf.isMatch(e,this.widgetOptions.modifiers,t)}startPanning(e){const t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),yr.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),yr.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.view.normalizeEvent(e),r=t.clientX-this.clientX,i=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY,this.graph.translateBy(r,i)}stopPanning(e){this.panning=!1,this.updateClassName(),yr.off(document.body,".panning"),yr.off(window,".panning")}updateClassName(){const e=this.view.container,t=this.view.prefixClassName("graph-panning"),r=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(ze(e,t),Ai(e,r)):(Ai(e,t),ze(e,r)):(Ai(e,t),Ai(e,r))}onRightMouseDown(e){2===e.button&&this.allowPanning(e,!0)&&this.startPanning(e)}allowMouseWheel(e){return this.pannable&&!e.ctrlKey}onMouseWheel(e,t,r){e.ctrlKey||this.graph.translateBy(-t,-r)}autoPanning(e,t){const i=this.graph.getGraphArea();let s=0,o=0;e<=i.left+10&&(s=-10),t<=i.top+10&&(o=-10),e>=i.right-10&&(s=10),t>=i.bottom-10&&(o=10),(0!==s||0!==o)&&this.graph.translateBy(-s,-o)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([In.dispose()],_k.prototype,"dispose",null);class UD extends In{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new hL(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return!0!==this.widgetOptions.enabled}enable(e){(this.disabled||e)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(e){const t=this.widgetOptions.guard;return(null==t||t(e))&&qf.isMatch(e,this.widgetOptions.modifiers)}onMouseWheel(e){const t=this.widgetOptions.guard;if((null==t||t(e))&&qf.isMatch(e,this.widgetOptions.modifiers)){const r=this.widgetOptions.factor||1.2;null==this.currentScale&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.transform.getScale().sx),e.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*r*20)/20/this.currentScale,1===this.cumulatedFactor&&(this.cumulatedFactor=1.05)):this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*(1/r)*20)/20/this.currentScale,1===this.cumulatedFactor&&(this.cumulatedFactor=.95)),this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const s=this.currentScale;let o=this.graph.transform.clampScale(s*this.cumulatedFactor);if(o=Si(o,this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER),o!==s)if(this.widgetOptions.zoomAtMousePosition){const d=this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(o,{absolute:!0,center:d.clone()})}else this.graph.zoom(o,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([Ea.dispose()],UD.prototype,"dispose",null);class xk extends In{init(){this.resetRenderArea=b6(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const e=this.graph.getGraphArea();this.graph.renderer.setRenderArea(e)}}dispose(){this.stopListening()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([In.dispose()],xk.prototype,"dispose",null);class zne{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(e){if(e.priority&Ba.PRIOR)e.cb();else{const t=this.findInsertionIndex(e);t>=0&&this.queue.splice(t,0,e)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const e=this.getCurrentTime();let t;for(;(t=this.queue.shift())&&(t.cb(),!(this.getCurrentTime()-e>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){let e;for(this.isFlushPending=!1,this.isFlushing=!0;e=this.queue.shift();)try{e.cb()}catch(t){console.log(t)}this.isFlushing=!1}findInsertionIndex(e){let t=0,r=this.queue.length,i=r-1;const s=e.priority;for(;t<=i;){const o=(i-t>>1)+t;s<=this.queue[o].priority?t=o+1:(r=o,i=o-1)}return r}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():Date.now()-this.initialTime}}var Ba=function(n){return n[n.Update=2]="Update",n[n.RenderEdge=4]="RenderEdge",n[n.RenderNode=8]="RenderNode",n[n.PRIOR=1048576]="PRIOR",n}(Ba||{});class mn extends Ea{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(e){super(),this.views={},this.willRemoveViews={},this.queue=new zne,this.graph=e,this.init()}init(){this.startListening(),this.renderViews(this.model.getCells())}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:e}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews();const t=this.model.getCells();this.renderViews(t,Object.assign(Object.assign({},e),{queue:t.map(r=>r.id)}))}onCellAdded({cell:e,options:t}){this.renderViews([e],t)}onCellRemoved({cell:e}){this.removeViews([e])}onCellZIndexChanged({cell:e,options:t}){const r=this.views[e.id];r&&this.requestViewUpdate(r.view,mn.FLAG_INSERT,t,Ba.Update,!0)}onCellVisibleChanged({cell:e,current:t}){this.toggleVisible(e,!!t)}requestViewUpdate(e,t,r={},i=Ba.Update,s=!0){const o=e.cell.id,a=this.views[o];a&&(a.flag=t,a.options=r,(e.hasAction(t,["translate","resize","rotate"])||!1===r.async)&&(i=Ba.PRIOR,s=!1),this.queue.queueJob({id:o,priority:i,cb:()=>{this.renderViewInArea(e,t,r);const d=r.queue;if(d){const h=d.indexOf(e.cell.id);h>=0&&d.splice(h,1),0===d.length&&this.graph.trigger("render:done")}}}),this.getEffectedEdges(e).forEach(d=>{this.requestViewUpdate(d.view,d.flag,r,i,!1)}),s&&this.flush())}setRenderArea(e){this.renderArea=e,this.flushWaitingViews()}isViewMounted(e){if(null==e)return!1;const t=this.views[e.cell.id];return!!t&&t.state===mn.ViewState.MOUNTED}renderViews(e,t={}){e.sort((r,i)=>r.isNode()&&i.isEdge()?-1:0),e.forEach(r=>{const i=r.id;let o=0,a=this.views[i];if(a)o=mn.FLAG_INSERT;else{const c=this.createCellView(r);c&&(c.graph=this.graph,o=mn.FLAG_INSERT|c.getBootstrapFlag(),a={view:c,flag:o,options:t,state:mn.ViewState.CREATED},this.views[i]=a)}a&&this.requestViewUpdate(a.view,o,t,this.getRenderPriority(a.view),!1)}),this.flush()}renderViewInArea(e,t,r={}){const i=e.cell,s=i.id,o=this.views[s];if(!o)return;let a=0;this.isUpdatable(e)||o.state===mn.ViewState.MOUNTED?(a=this.updateView(e,t,r),o.flag=a):o.state=mn.ViewState.WAITING,a&&i.isEdge()&&!(a&e.getFlag(["source","target"]))&&this.queue.queueJob({id:s,priority:Ba.RenderEdge,cb:()=>{this.updateView(e,t,r)}})}removeViews(e){e.forEach(t=>{const r=t.id,i=this.views[r];i&&(this.willRemoveViews[r]=i,delete this.views[r],this.queue.queueJob({id:r,priority:this.getRenderPriority(i.view),cb:()=>{this.removeView(i.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaitingViews(){Object.values(this.views).forEach(e=>{if(e&&e.state===mn.ViewState.WAITING){const{view:t,flag:r,options:i}=e;this.requestViewUpdate(t,r,i,this.getRenderPriority(t),!1)}}),this.flush()}updateView(e,t,r={}){if(null==e)return 0;if(Qn.isCellView(e)){if(t&mn.FLAG_REMOVE)return this.removeView(e.cell),0;t&mn.FLAG_INSERT&&(this.insertView(e),t^=mn.FLAG_INSERT)}return t?e.confirmUpdate(t,r):0}insertView(e){const t=this.views[e.cell.id];if(t){const r=e.cell.getZIndex(),i=this.addZPivot(r);this.container.insertBefore(e.container,i),e.cell.isVisible()||this.toggleVisible(e.cell,!1),t.state=mn.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:e})}}resetViews(){this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach(e=>{e&&this.removeView(e.view)}),this.views={},this.willRemoveViews={}}removeView(e){const t=e.cell,r=this.willRemoveViews[t.id];r&&e&&(r.view.remove(),delete this.willRemoveViews[t.id],this.graph.trigger("view:unmounted",{view:e}))}toggleVisible(e,t){const r=this.model.getConnectedEdges(e);for(let s=0,o=r.length;s<o;s+=1){const a=r[s];if(t){const c=a.getSourceCell(),u=a.getTargetCell();if(c&&!c.isVisible()||u&&!u.isVisible())continue;this.toggleVisible(a,!0)}else this.toggleVisible(a,!1)}const i=this.views[e.id];i&&pp(i.view.container,{display:t?"unset":"none"})}addZPivot(e=0){null==this.zPivots&&(this.zPivots={});const t=this.zPivots;let r=t[e];if(r)return r;r=t[e]=document.createComment(`z-index:${e+1}`);let i=-1/0;for(const o in t){const a=+o;a<e&&a>i&&(i=a)}const s=this.container;return s.insertBefore(r,i!==-1/0?t[i].nextSibling:s.firstChild),r}removeZPivots(){this.zPivots&&Object.values(this.zPivots).forEach(e=>{e&&e.parentNode&&e.parentNode.removeChild(e)}),this.zPivots={}}createCellView(e){const t={graph:this.graph},r=this.graph.options.createCellView;if(r){const s=_e(r,this.graph,e);if(s)return new s(e,t);if(null===s)return null}const i=e.view;if(null!=i&&"string"==typeof i){const s=Qn.registry.get(i);return s?new s(e,t):Qn.registry.onNotFound(i)}return e.isNode()?new rs(e,t):e.isEdge()?new Mo(e,t):null}getEffectedEdges(e){const t=[],r=e.cell,i=this.model.getConnectedEdges(r);for(let s=0,o=i.length;s<o;s+=1){const a=i[s],c=this.views[a.id];if(!c)continue;const u=c.view;if(!this.isViewMounted(u))continue;const d=["update"];a.getTargetCell()===r&&d.push("target"),a.getSourceCell()===r&&d.push("source"),t.push({id:a.id,view:u,flag:u.getFlag(d)})}return t}isUpdatable(e){if(e.isNodeView())return!this.renderArea||this.renderArea.isIntersectWithRect(e.cell.getBBox());if(e.isEdgeView()){const t=e.cell,r=t.getSourceCell(),i=t.getTargetCell();if(this.renderArea&&r&&i)return this.renderArea.isIntersectWithRect(r.getBBox())||this.renderArea.isIntersectWithRect(i.getBBox())}return!0}getRenderPriority(e){return e.cell.isNode()?Ba.RenderNode:Ba.RenderEdge}dispose(){this.stopListening()}}(function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([Ea.dispose()],mn.prototype,"dispose",null),function(n){n.FLAG_INSERT=1<<30,n.FLAG_REMOVE=1<<29,n.FLAG_RENDER=67108863}(mn||(mn={})),function(n){let e;var t;(t=e=n.ViewState||(n.ViewState={}))[t.CREATED=0]="CREATED",t[t.MOUNTED=1]="MOUNTED",t[t.WAITING=2]="WAITING"}(mn||(mn={}));class zD extends In{constructor(){super(...arguments),this.schedule=new mn(this.graph)}requestViewUpdate(e,t,r={}){this.schedule.requestViewUpdate(e,t,r)}isViewMounted(e){return this.schedule.isViewMounted(e)}setRenderArea(e){this.schedule.setRenderArea(e)}findViewByElem(e){if(null==e)return null;const r="string"==typeof e?this.options.container.querySelector(e):e instanceof Element?e:e[0];if(r){const i=this.graph.view.findAttr("data-cell-id",r);if(i){const s=this.schedule.views;if(s[i])return s[i].view}}return null}findViewByCell(e){if(null==e)return null;const t=Fe.isCell(e)?e.id:e,r=this.schedule.views;return r[t]?r[t].view:null}findViewsFromPoint(e){const t={x:e.x,y:e.y};return this.model.getCells().map(r=>this.findViewByCell(r)).filter(r=>null!=r&&rt.getBBox(r.container,{target:this.view.stage}).containsPoint(t))}findEdgeViewsFromPoint(e,t=5){return this.model.getEdges().map(r=>this.findViewByCell(r)).filter(r=>{if(null!=r){const i=r.getClosestPoint(e);if(i)return i.distance(e)<=t}return!1})}findViewsInArea(e,t={}){const r=Y.create(e);return this.model.getCells().map(i=>this.findViewByCell(i)).filter(i=>{if(i){if(t.nodeOnly&&!i.isNodeView())return!1;const s=rt.getBBox(i.container,{target:this.view.stage});return 0===s.width?s.inflate(1,0):0===s.height&&s.inflate(0,1),t.strict?r.containsRect(s):r.isIntersectWithRect(s)}return!1})}dispose(){this.schedule.dispose()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([In.dispose()],zD.prototype,"dispose",null);var Ek=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t};class Dk extends In{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(e){return null!=this.svg.getElementById(e)}filter(e){let t=e.id;const r=e.name;if(t||(t=`filter-${r}-${this.cid}-${fD(JSON.stringify(e))}`),!this.isDefined(t)){const i=Xf.registry.get(r);if(null==i)return Xf.registry.onNotFound(r);const s=i(e.args||{}),o=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});we.create(Et.sanitize(s),o).appendTo(this.defs)}return t}gradient(e){let t=e.id;const r=e.type;if(t||(t=`gradient-${r}-${this.cid}-${fD(JSON.stringify(e))}`),!this.isDefined(t)){const o=`<${r}>${e.stops.map(c=>{const u=null!=c.opacity&&Number.isFinite(c.opacity)?c.opacity:1;return`<stop offset="${c.offset}" stop-color="${c.color}" stop-opacity="${u}"/>`}).join("")}</${r}>`,a=Object.assign({id:t},e.attrs);we.create(o,a).appendTo(this.defs)}return t}marker(e){const{id:t,refX:r,refY:i,markerUnits:s,markerOrient:o,tagName:a,children:c}=e,u=Ek(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let d=t;if(d||(d=`marker-${this.cid}-${fD(JSON.stringify(e))}`),!this.isDefined(d)){"path"!==a&&delete u.d;const h=we.create("marker",{refX:r,refY:i,id:d,overflow:"visible",orient:o??"auto",markerUnits:s||"userSpaceOnUse"},c?c.map(g=>{var{tagName:m}=g,y=Ek(g,["tagName"]);return we.create(`${m}`||"path",gp(Object.assign(Object.assign({},u),y)))}):[we.create(a||"path",gp(u))]);this.defs.appendChild(h.node)}return d}remove(e){const t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}class Sk extends In{getClientMatrix(){return An(this.view.stage.getScreenCTM())}getClientOffset(){const e=this.view.svg.getBoundingClientRect();return new T(e.left,e.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(e,t){return("number"==typeof e?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(e,t){const r=T.create(e,t);return rt.transformPoint(r,this.graph.matrix())}localToClientPoint(e,t){const r=T.create(e,t);return rt.transformPoint(r,this.getClientMatrix())}localToPagePoint(e,t){return("number"==typeof e?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}localToGraphRect(e,t,r,i){const s=Y.create(e,t,r,i);return rt.transformRectangle(s,this.graph.matrix())}localToClientRect(e,t,r,i){const s=Y.create(e,t,r,i);return rt.transformRectangle(s,this.getClientMatrix())}localToPageRect(e,t,r,i){return("number"==typeof e?this.localToGraphRect(e,t,r,i):this.localToGraphRect(e)).translate(this.getPageOffset())}graphToLocalPoint(e,t){const r=T.create(e,t);return rt.transformPoint(r,this.graph.matrix().inverse())}clientToLocalPoint(e,t){const r=T.create(e,t);return rt.transformPoint(r,this.getClientMatrix().inverse())}clientToGraphPoint(e,t){const r=T.create(e,t);return rt.transformPoint(r,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(e,t){const i=T.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(i)}graphToLocalRect(e,t,r,i){const s=Y.create(e,t,r,i);return rt.transformRectangle(s,this.graph.matrix().inverse())}clientToLocalRect(e,t,r,i){const s=Y.create(e,t,r,i);return rt.transformRectangle(s,this.getClientMatrix().inverse())}clientToGraphRect(e,t,r,i){const s=Y.create(e,t,r,i);return rt.transformRectangle(s,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(e,t,r,i){const s=Y.create(e,t,r,i),o=this.getPageOffset();return s.x-=o.x,s.y-=o.y,this.graphToLocalRect(s)}}class g0 extends In{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:e,magnet:t,options:r={}}){const i=this.resolveHighlighter(r);if(!i)return;const s=this.getHighlighterId(t,i);if(!this.highlights[s]){const o=i.highlighter;o.highlight(e,t,Object.assign({},i.args)),this.highlights[s]={cellView:e,magnet:t,highlighter:o,args:i.args}}}onCellUnhighlight({magnet:e,options:t={}}){const r=this.resolveHighlighter(t);if(!r)return;const i=this.getHighlighterId(e,r);this.unhighlight(i)}resolveHighlighter(e){const t=this.options;let r=e.highlighter;if(null==r){const a=e.type;r=a&&t.highlighting[a]||t.highlighting.default}if(null==r)return null;const i="string"==typeof r?{name:r}:r,s=i.name,o=Do.registry.get(s);return null==o?Do.registry.onNotFound(s):(Do.check(s,o),{name:s,highlighter:o,args:i.args||{}})}getHighlighterId(e,t){return pD(e),t.name+e.id+JSON.stringify(t.args)}unhighlight(e){const t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}dispose(){Object.keys(this.highlights).forEach(e=>this.unhighlight(e)),this.stopListening()}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([g0.dispose()],g0.prototype,"dispose",null);class Ak extends In{getScroller(){const e=this.graph.getPlugin("scroller");return e&&e.options.enabled?e:null}getContainer(){const e=this.getScroller();return e?e.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const e=this.options.autoResize;if(e)return"boolean"==typeof e?this.getContainer():e}init(){if(this.options.autoResize){const t=this.getSensorTarget();t&&Wb.bind(t,()=>{this.resize(t.offsetWidth,t.offsetHeight)})}}resize(e,t){const r=this.getScroller();r?r.resize(e,t):this.graph.transform.resize(e,t)}dispose(){Wb.clear(this.graph.container)}}!function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([In.dispose()],Ak.prototype,"dispose",null);class vr extends Di{get container(){return this.options.container}get[Symbol.toStringTag](){return vr.toStringTag}constructor(e){super(),this.installedPlugins=new Set,this.options=Np.get(e),this.css=new $D(this),this.view=new Fs(this),this.defs=new Dk(this),this.coord=new Sk(this),this.transform=new Ck(this),this.highlight=new g0(this),this.grid=new VD(this),this.background=new HD(this),this.options.model?this.model=this.options.model:(this.model=new Ao,this.model.graph=this),this.renderer=new zD(this),this.panning=new _k(this),this.mousewheel=new UD(this),this.virtualRender=new xk(this),this.size=new Ak(this)}isNode(e){return e.isNode()}isEdge(e){return e.isEdge()}resetCells(e,t={}){return this.model.resetCells(e,t),this}clearCells(e={}){return this.model.clear(e),this}toJSON(e={}){return this.model.toJSON(e)}parseJSON(e){return this.model.parseJSON(e)}fromJSON(e,t={}){return this.model.fromJSON(e,t),this}getCellById(e){return this.model.getCell(e)}addNode(e,t={}){return this.model.addNode(e,t)}addNodes(e,t={}){return this.addCell(e.map(r=>pn.isNode(r)?r:this.createNode(r)),t)}createNode(e){return this.model.createNode(e)}removeNode(e,t={}){return this.model.removeCell(e,t)}addEdge(e,t={}){return this.model.addEdge(e,t)}addEdges(e,t={}){return this.addCell(e.map(r=>Jt.isEdge(r)?r:this.createEdge(r)),t)}removeEdge(e,t={}){return this.model.removeCell(e,t)}createEdge(e){return this.model.createEdge(e)}addCell(e,t={}){return this.model.addCell(e,t),this}removeCell(e,t={}){return this.model.removeCell(e,t)}removeCells(e,t={}){return this.model.removeCells(e,t)}removeConnectedEdges(e,t={}){return this.model.removeConnectedEdges(e,t)}disconnectConnectedEdges(e,t={}){return this.model.disconnectConnectedEdges(e,t),this}hasCell(e){return this.model.has(e)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(e){return this.model.getOutgoingEdges(e)}getIncomingEdges(e){return this.model.getIncomingEdges(e)}getConnectedEdges(e,t={}){return this.model.getConnectedEdges(e,t)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(e){return this.model.isRoot(e)}isLeafNode(e){return this.model.isLeaf(e)}getNeighbors(e,t={}){return this.model.getNeighbors(e,t)}isNeighbor(e,t,r={}){return this.model.isNeighbor(e,t,r)}getSuccessors(e,t={}){return this.model.getSuccessors(e,t)}isSuccessor(e,t,r={}){return this.model.isSuccessor(e,t,r)}getPredecessors(e,t={}){return this.model.getPredecessors(e,t)}isPredecessor(e,t,r={}){return this.model.isPredecessor(e,t,r)}getCommonAncestor(...e){return this.model.getCommonAncestor(...e)}getSubGraph(e,t={}){return this.model.getSubGraph(e,t)}cloneSubGraph(e,t={}){return this.model.cloneSubGraph(e,t)}cloneCells(e){return this.model.cloneCells(e)}getNodesFromPoint(e,t){return this.model.getNodesFromPoint(e,t)}getNodesInArea(e,t,r,i,s){return this.model.getNodesInArea(e,t,r,i,s)}getNodesUnderNode(e,t={}){return this.model.getNodesUnderNode(e,t)}searchCell(e,t,r={}){return this.model.search(e,t,r),this}getShortestPath(e,t,r={}){return this.model.getShortestPath(e,t,r)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(e,t={}){return this.model.getCellsBBox(e,t)}startBatch(e,t={}){this.model.startBatch(e,t)}stopBatch(e,t={}){this.model.stopBatch(e,t)}batchUpdate(e,t,r){const i="string"==typeof e?e:"update",s="string"==typeof e?t:e,o="function"==typeof t?r:t;this.startBatch(i,o);const a=s();return this.stopBatch(i,o),a}updateCellId(e,t){return this.model.updateCellId(e,t)}findView(e){return Fe.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}findViews(e){return Y.isRectangleLike(e)?this.findViewsInArea(e):T.isPointLike(e)?this.findViewsFromPoint(e):[]}findViewByCell(e){return this.renderer.findViewByCell(e)}findViewByElem(e){return this.renderer.findViewByElem(e)}findViewsFromPoint(e,t){return this.renderer.findViewsFromPoint("number"==typeof e?{x:e,y:t}:e)}findViewsInArea(e,t,r,i,s){return this.renderer.findViewsInArea("number"==typeof e?{x:e,y:t,width:r,height:i}:e,"number"==typeof e?s:t)}matrix(e){return typeof e>"u"?this.transform.getMatrix():(this.transform.setMatrix(e),this)}resize(e,t){const r=this.getPlugin("scroller");return r?r.resize(e,t):this.transform.resize(e,t),this}scale(e,t=e,r=0,i=0){return typeof e>"u"?this.transform.getScale():(this.transform.scale(e,t,r,i),this)}zoom(e,t){const r=this.getPlugin("scroller");if(r){if(typeof e>"u")return r.zoom();r.zoom(e,t)}else{if(typeof e>"u")return this.transform.getZoom();this.transform.zoom(e,t)}return this}zoomTo(e,t={}){const r=this.getPlugin("scroller");return r?r.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){const r=this.getPlugin("scroller");return r?r.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}zoomToFit(e={}){const t=this.getPlugin("scroller");return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}rotate(e,t,r){return typeof e>"u"?this.transform.getRotation():(this.transform.rotate(e,t,r),this)}translate(e,t){return typeof e>"u"?this.transform.getTranslation():(this.transform.translate(e,t),this)}translateBy(e,t){const r=this.translate();return this.translate(r.tx+e,r.ty+t)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(e={}){return this.transform.getContentArea(e)}getContentBBox(e={}){return this.transform.getContentBBox(e)}fitToContent(e,t,r,i){return this.transform.fitToContent(e,t,r,i)}scaleContentToFit(e={}){return this.transform.scaleContentToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,r){const i=this.getPlugin("scroller");return i?i.centerPoint(e,t,r):this.transform.centerPoint(e,t),this}centerContent(e){const t=this.getPlugin("scroller");return t?t.centerContent(e):this.transform.centerContent(e),this}centerCell(e,t){const r=this.getPlugin("scroller");return r?r.centerCell(e,t):this.transform.centerCell(e),this}positionPoint(e,t,r,i={}){const s=this.getPlugin("scroller");return s?s.positionPoint(e,t,r,i):this.transform.positionPoint(e,t,r),this}positionRect(e,t,r){const i=this.getPlugin("scroller");return i?i.positionRect(e,t,r):this.transform.positionRect(e,t),this}positionCell(e,t,r){const i=this.getPlugin("scroller");return i?i.positionCell(e,t,r):this.transform.positionCell(e,t),this}positionContent(e,t){const r=this.getPlugin("scroller");return r?r.positionContent(e,t):this.transform.positionContent(e,t),this}snapToGrid(e,t){return this.coord.snapToGrid(e,t)}pageToLocal(e,t,r,i){return Y.isRectangleLike(e)?this.coord.pageToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.pageToLocalRect(e,t,r,i):this.coord.pageToLocalPoint(e,t)}localToPage(e,t,r,i){return Y.isRectangleLike(e)?this.coord.localToPageRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.localToPageRect(e,t,r,i):this.coord.localToPagePoint(e,t)}clientToLocal(e,t,r,i){return Y.isRectangleLike(e)?this.coord.clientToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.clientToLocalRect(e,t,r,i):this.coord.clientToLocalPoint(e,t)}localToClient(e,t,r,i){return Y.isRectangleLike(e)?this.coord.localToClientRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.localToClientRect(e,t,r,i):this.coord.localToClientPoint(e,t)}localToGraph(e,t,r,i){return Y.isRectangleLike(e)?this.coord.localToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.localToGraphRect(e,t,r,i):this.coord.localToGraphPoint(e,t)}graphToLocal(e,t,r,i){return Y.isRectangleLike(e)?this.coord.graphToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.graphToLocalRect(e,t,r,i):this.coord.graphToLocalPoint(e,t)}clientToGraph(e,t,r,i){return Y.isRectangleLike(e)?this.coord.clientToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof i?this.coord.clientToGraphRect(e,t,r,i):this.coord.clientToGraphPoint(e,t)}defineFilter(e){return this.defs.filter(e)}defineGradient(e){return this.defs.gradient(e)}defineMarker(e){return this.defs.marker(e)}getGridSize(){return this.grid.getGridSize()}setGridSize(e){return this.grid.setGridSize(e),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(e){return this.grid.draw(e),this}updateBackground(){return this.background.update(),this}drawBackground(e,t){const r=this.getPlugin("scroller");return null==r||null!=this.options.background&&t?this.background.draw(e):r.drawBackground(e,t),this}clearBackground(e){const t=this.getPlugin("scroller");return null==t||null!=this.options.background&&e?this.background.clear():t.clearBackground(e),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(e){return null==e?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const e=this.getPlugin("scroller");return e?e.isPannable():this.panning.pannable}enablePanning(){const e=this.getPlugin("scroller");return e?e.enablePanning():this.panning.enablePanning(),this}disablePanning(){const e=this.getPlugin("scroller");return e?e.disablePanning():this.panning.disablePanning(),this}togglePanning(e){return null==e?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}use(e,...t){return this.installedPlugins.has(e)||(this.installedPlugins.add(e),e.init(this,...t)),this}getPlugin(e){return Array.from(this.installedPlugins).find(t=>t.name===e)}getPlugins(e){return Array.from(this.installedPlugins).filter(t=>e.includes(t.name))}enablePlugins(e){let t=e;Array.isArray(t)||(t=[t]);const r=this.getPlugins(t);return r?.forEach(i=>{var s;null===(s=i?.enable)||void 0===s||s.call(i)}),this}disablePlugins(e){let t=e;Array.isArray(t)||(t=[t]);const r=this.getPlugins(t);return r?.forEach(i=>{var s;null===(s=i?.disable)||void 0===s||s.call(i)}),this}isPluginEnabled(e){var t;const r=this.getPlugin(e);return null===(t=r?.isEnabled)||void 0===t?void 0:t.call(r)}disposePlugins(e){let t=e;Array.isArray(t)||(t=[t]);const r=this.getPlugins(t);return r?.forEach(i=>{i.dispose()}),this}dispose(e=!0){e&&this.clearCells(),this.off(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(t=>{t.dispose()})}}(function(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([Di.dispose()],vr.prototype,"dispose",null),function(n){n.View=Fs,n.Renderer=zD,n.MouseWheel=UD,n.DefsManager=Dk,n.GridManager=VD,n.CoordManager=Sk,n.TransformManager=Ck,n.HighlightManager=g0,n.BackgroundManager=HD}(vr||(vr={})),function(n){n.toStringTag=`X6.${n.name}`,n.isGraph=function e(t){if(null==t)return!1;if(t instanceof n)return!0;const r=t[Symbol.toStringTag];return null==r||r===n.toStringTag}}(vr||(vr={})),function(n){n.render=function e(t,r){const i=t instanceof HTMLElement?new n({container:t}):new n(t);return null!=r&&i.fromJSON(r),i}}(vr||(vr={})),function(n){n.registerNode=pn.registry.register,n.registerEdge=Jt.registry.register,n.registerView=Qn.registry.register,n.registerAttr=ks.registry.register,n.registerGrid=Ia.registry.register,n.registerFilter=Xf.registry.register,n.registerNodeTool=td.registry.register,n.registerEdgeTool=nd.registry.register,n.registerBackground=Ep.registry.register,n.registerHighlighter=Do.registry.register,n.registerPortLayout=ol.registry.register,n.registerPortLabelLayout=Qf.registry.register,n.registerMarker=Oa.registry.register,n.registerRouter=Fa.registry.register,n.registerConnector=al.registry.register,n.registerAnchor=rd.registry.register,n.registerEdgeAnchor=id.registry.register,n.registerConnectionPoint=sd.registry.register}(vr||(vr={})),function(n){n.unregisterNode=pn.registry.unregister,n.unregisterEdge=Jt.registry.unregister,n.unregisterView=Qn.registry.unregister,n.unregisterAttr=ks.registry.unregister,n.unregisterGrid=Ia.registry.unregister,n.unregisterFilter=Xf.registry.unregister,n.unregisterNodeTool=td.registry.unregister,n.unregisterEdgeTool=nd.registry.unregister,n.unregisterBackground=Ep.registry.unregister,n.unregisterHighlighter=Do.registry.unregister,n.unregisterPortLayout=ol.registry.unregister,n.unregisterPortLabelLayout=Qf.registry.unregister,n.unregisterMarker=Oa.registry.unregister,n.unregisterRouter=Fa.registry.unregister,n.unregisterConnector=al.registry.unregister,n.unregisterAnchor=rd.registry.unregister,n.unregisterEdgeAnchor=id.registry.unregister,n.unregisterConnectionPoint=sd.registry.unregister}(vr||(vr={}));class ud extends pn{}(function(n){class e extends rs{init(){super.init(),this.cell.on("change:*",({key:r})=>{const i=n.shapeMaps[this.cell.shape];if(i){const{effect:s}=i;(!s||s.includes(r))&&this.renderHTMLComponent()}})}confirmUpdate(r){const i=super.confirmUpdate(r);return this.handleAction(i,e.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const r=this.selectors&&this.selectors.foContent;if(r){dp(r);const i=n.shapeMaps[this.cell.shape];if(!i)return;let{html:s}=i;"function"==typeof s&&(s=s(this.cell)),s&&("string"==typeof s?r.innerHTML=s:hp(r,s))}}}var t;n.View=e,(t=e=n.View||(n.View={})).action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),rs.registry.register("html-view",t,!0)})(ud||(ud={})),function(n){n.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Et.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),pn.registry.register("html",n,!0)}(ud||(ud={})),function(n){n.shapeMaps={},n.register=function e(t){const{shape:r,html:i,effect:s,inherit:o}=t,a=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(t,["shape","html","effect","inherit"]);if(!r)throw new Error("should specify shape in config");n.shapeMaps[r]={html:i,effect:s},vr.registerNode(r,Object.assign({inherit:o||"html"},a),!0)}}(ud||(ud={}));let Xne=(()=>{class n{constructor(){var t=this;this.token=vf.UPDATE_NODE.id,this.execute=Se(function*(){const{args:r,hooks:i}=t.ctx.getArgs();yield t.ctx.getHooks().updateNode.call(r,function(){var o=Se(function*(a){const{options:c=fd.XFlowNodeSetOptions}=a,u=yield t.ctx.getX6Graph(),d=t.getNodeCell(u,a),h=yield t.getNextNodeConfig(a,d);return t.setNodeConfig(d,h,c),{nodeConfig:h,nodeCell:d}});return function(a){return o.apply(this,arguments)}}(),i)}),this.setNodeConfig=(r,i,s)=>{r.setData(i,s),r.setPosition(i?.x||0,i?.y||0),r.setSize(i?.width||fd.NODE_WIDTH,i?.height||fd.NODE_HEIGHT),r.angle(i?.angle||0,{absolute:!0}),(0,Cf.isBoolean)(i?.visible)&&r.setVisible(i?.visible),r.getAttrByPath("text/text")&&r.setAttrByPath("text/text",i.label),i.attrs&&r.setAttrs(i.attrs),Array.isArray(i.ports)&&r.setPropByPath("ports/items",i.ports,{rewrite:!0,...s})},this.getNextNodeConfig=function(){var r=Se(function*(i,s){if(i&&i.setNodeConfig&&i.setNodeConfig.callback){const o=t.getNodeConfig(s);return i.setNodeConfig.callback(o)}return i.nodeConfig});return function(i,s){return r.apply(this,arguments)}}(),this.getNodeConfig=r=>({...r.getData(),...r.getPosition(),...r.getSize()}),this.getNodeCell=(r,i)=>{const{nodeConfig:s,setNodeConfig:o}=i;let a="";return o&&o.node&&"string"==typeof o.node?a=o.node:s&&s.id&&"string"==typeof s.id&&(a=s.id),a?r?.getCellById(a):o&&o.node instanceof pn?o.node:null}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fd;!function(n){n.command=vf.UPDATE_NODE,n.hookKey="updateNode",n.XFlowNodeSetOptions={overwrite:!0},n.NODE_WIDTH=200,n.NODE_HEIGHT=40}(fd||(fd={}));const Kne=[TE,fd];let Qne=(()=>{class n{constructor(){var t=this;this.token=bf.ADD_EDGE.id,this.processEdgeConfig=function(){var r=Se(function*(i,s){if(!s.id){const{createIdService:o=p0.createEdgeId}=i;s.id=yield o(s)}return s.sourcePortId&&!s.sourcePort&&(s.sourcePort=s.sourcePortId,s.targetPort=s.targetPortId),s});return function(i,s){return r.apply(this,arguments)}}(),this.execute=Se(function*(){const{args:r,hooks:i}=t.ctx.getArgs();yield t.ctx.getHooks().addEdge.call(r,function(){var o=Se(function*(a){const{cellFactory:c,createEdgeService:u,options:h}=a,g=yield t.ctx.getX6Graph();let m=a.edgeConfig;if(u){const _=yield u(a);if("boolean"==typeof _)return{err:"createEdgeService rejected"};m=_}const y=yield t.processEdgeConfig(a,m);let v;const w={...h,isCommand:!0};if(c){const _=yield c(y,t);v=g.addEdge(_,w)}else v=g.addEdge({...y,label:y?.label||y,data:{...y}},w);return{edgeConfig:y,edgeCell:v}});return function(a){return o.apply(this,arguments)}}(),i)})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p0;!function(n){function e(r){return r.source&&r.source.cell&&"string"==typeof r.source.cell}function t(r){return r.sourceCell&&"string"==typeof r.sourceCell}n.command=bf.ADD_EDGE,n.hookKey="addEdge",n.createEdgeId=r=>"string"==typeof r.source?`${r.source}:${r.sourcePortId}-${r.target}:${r.targetPortId}`:e(r)?`${r.source.cell}:${r.source.port}-${r.target.cell}:${r.target.port}`:t(r)?`${r.sourceCell}:${r.sourcePort}-${r.targetCell}:${r.targetPort}`:"",n.isX6EdgeConfig=e,n.isX6EdgePlainConfig=t}(p0||(p0={}));let ere=(()=>{class n{constructor(){var t=this;this.token=bf.UPDATE_EDGE.id,this.execute=Se(function*(){const{args:r,hooks:i}=t.ctx.getArgs();yield t.ctx.getHooks().updateEdge.call(r,function(){var o=Se(function*(a){const c=yield t.ctx.getX6Graph(),{updateEdgeService:u,updateEdgeLabelService:d=Rp.XFlowUpdateLabelService,options:h=Rp.XFlowEdgeSetOptions}=a,g=u?yield u(a):a?.edgeConfig,m=c?.getCellById(g?.id);return m?.setData(g,h),g?.hasOwnProperty("label")&&(yield d(m,g,h)),(0,Cf.isBoolean)(g?.visible)&&m.setVisible(g?.visible),g.attrs&&m.setAttrs(g.attrs),g.vertices&&m.setVertices(g.vertices),g.router&&m.setRouter(g.router),g.connector&&m.setConnector(g.connector),(0,Cf.isObject)(g.source)&&m.setSource(g.source),(0,Cf.isObject)(g.target)&&m.setTarget(g.target),{edgeConfig:g,edgeCell:m}});return function(a){return o.apply(this,arguments)}}(),i)})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Rp;!function(n){n.command=bf.UPDATE_EDGE,n.hookKey="updateEdge",n.XFlowEdgeSetOptions={overwrite:!0},n.XFlowUpdateLabelService=function(){var e=Se(function*(t,r,i=n.XFlowEdgeSetOptions){t?.setLabelAt(0,r?.label||r,i)});return function(t,r){return e.apply(this,arguments)}}()}(Rp||(Rp={}));const tre=[p0,Rp];class nre{constructor(e,t,r,i){var s=this;this.commandService=e,this.graphProvider=t,this.modelService=r,this.hookService=i,this.runtimeHooks=[],this.getModelService=()=>this.modelService,this.getCommands=()=>this.commandService,this.getGraphConfig=Se(function*(){return s.graphProvider.getGraphOptions()}),this.getX6Graph=Se(function*(){if(s.graph)return s.graph;const o=yield s.graphProvider.getGraphInstance();return s.graph=o,o}),this.getHooks=()=>this.hookService.hookProvider()}setArgs(e,t=[]){this.args=e,this.runtimeHooks=t}getArgs(){return{args:{...this.args,modelService:this.getModelService(),commandService:this.getCommands(),getX6Graph:this.getX6Graph,getGraphConfig:this.getGraphConfig},hooks:this.runtimeHooks}}}var m0,y0,Mk,Ik,Tk;!function(n){const e="\u8282\u70b9\u64cd\u4f5c";n.ADD_NODE={id:"xflow:add-node",label:"\u6dfb\u52a0\u8282\u70b9",category:e},n.DEL_NODE={id:"xflow:del-node",label:"\u5220\u9664\u8282\u70b9",category:e},n.UPDATE_NODE_PORT={id:"xflow:update-node-port",label:"\u5220\u9664\u8fde\u63a5\u6869",category:e},n.UPDATE_NODE={id:"xflow:update-node",label:"\u66f4\u65b0\u8282\u70b9",category:e},n.HIGHLIGHT_NODE={id:"xflow:highlight-node",label:"\u9ad8\u4eae\u8282\u70b9",category:e},n.SELECT_NODE={id:"xflow:select-node",label:"\u9009\u4e2d\u8282\u70b9",category:e},n.MOVE_NODE={id:"xflow:move-node",label:"Move Node",category:e},n.CENTER_NODE={id:"xflow:center-node",label:"\u5c45\u4e2d\u8282\u70b9",category:e},n.FRONT_NODE={id:"xflow:front-node",label:"\u524d\u7f6e\u8282\u70b9",category:e},n.BACK_NODE={id:"xflow:back-node",label:"\u540e\u7f6e\u8282\u70b9",category:e}}(m0||(m0={})),function(n){const e="\u8fb9\u64cd\u4f5c";n.ADD_EDGE={id:"xflow:add-edge",label:"\u6dfb\u52a0\u8fb9",category:e},n.DEL_EDGE={id:"xflow:del-edge",label:"\u5220\u9664\u8fb9",category:e},n.UPDATE_EDGE={id:"xflow:update-edge",label:"\u66f4\u65b0\u8fb9",category:e},n.HIGHLIGHT_EDGE={id:"xflow:highlight-edge",label:"\u9ad8\u4eae\u8fb9",category:e},n.FRONT_EDGE={id:"xflow:front-edge",label:"\u524d\u7f6e\u53d8",category:e},n.BACK_EDGE={id:"xflow:back-edge",label:"\u540e\u7f6e\u8fb9",category:e}}(y0||(y0={})),function(n){const e="\u753b\u5e03\u64cd\u4f5c";n.LOAD_META={id:"xflow:load-meta",label:"\u83b7\u53d6\u5143\u6570\u636e",category:e},n.LOAD_DATA={id:"xflow:load-data",label:"\u83b7\u53d6\u56fe\u6570\u636e",category:e},n.SAVE_GRAPH_DATA={id:"xflow:save-graph-data",label:"\u4fdd\u5b58",category:e},n.GRAPH_LAYOUT={id:"xflow:layout",label:"\u8ba1\u7b97\u5e03\u5c40",category:e},n.GRAPH_RENDER={id:"xflow:graph-render",label:"\u6e32\u67d3\u753b\u5e03",category:e},n.UNDO_CMD={id:"xflow:undo-cmd",label:"\u64a4\u9500",category:e},n.REDO_CMD={id:"xflow:redo-cmd",label:"\u91cd\u505a",category:e},n.GRAPH_INSTANCE_COMMAND={id:"xflow:graph-instacne-cmd",label:"Graph\u901a\u7528Command",category:e},n.GRAPH_ZOOM={id:"xflow:graph-zoom",label:"\u7f29\u653e\u753b\u5e03",category:e},n.GRAPH_FULLSCREEN={id:"xflow:graph-fullscreen",label:"\u5168\u5c4f",category:e},n.GRAPH_RESIZE={id:"xflow:graph-resize",label:"\u8c03\u6574\u7a97\u53e3\u5927\u5c0f",category:e},n.GRAPH_COPY={id:"xflow:graph-copy-selection",label:"\u590d\u5236",category:e},n.GRAPH_PASTE={id:"xflow:graph-paste-selection",label:"\u7c98\u8d34",category:e},n.GRAPH_TOGGLE_MULTI_SELECT={id:"xflow:graph-toggle-multi-select",label:"\u542f\u7528\u6846\u9009",category:e},n.GRAPH_ADD_TOOL={id:"xflow:add-tool",label:"\u6dfb\u52a0\u5de5\u5177",category:e},n.GRAPH_DEL_TOOL={id:"xflow:del-tool",label:"\u5220\u9664\u5de5\u5177",category:e},n.GRAPH_HISTORY_UNDO={id:"xflow:history-undo",label:"history undo",category:e},n.GRAPH_HISTORY_REDO={id:"xflow:history-redo",label:"history redo",category:e},n.GRAPH_HISTORY_RESET={id:"xflow:history-reset",label:"history reset",category:e},n.GRAPH_HISTORY_TOGGLE={id:"xflow:history-toggle",label:"history toggle",category:e}}(Mk||(Mk={})),function(n){n.UPDATE_MODEL={id:"xflow:update-model",label:"\u8bbe\u7f6e\u72b6\u6001\u503c",category:"\u72b6\u6001\u64cd\u4f5c"}}(Ik||(Ik={})),function(n){const e="\u7fa4\u7ec4\u64cd\u4f5c";n.INIT_GROUP={id:"xflow:init-group",label:"\u521d\u59cb\u5316\u7fa4\u7ec4",category:e},n.ADD_GROUP={id:"xflow:add-group",label:"\u65b0\u5efa\u7fa4\u7ec4",category:e},n.DEL_GROUP={id:"xflow:del-group",label:"\u89e3\u6563\u7fa4\u7ec4",category:e},n.COLLAPSE_GROUP={id:"xflow:collapse-group",label:"\u6298\u53e0\u7fa4\u7ec4",category:e}}(Tk||(Tk={}));let v0=(()=>{class n{constructor(){this.groupManager=new dre}getGraphInstance(){var t=this;return Se(function*(){const r=yield t.groupManager.getGraph(t.graphConfig.graphId);return t.graphInstance=r,Promise.resolve(t.graphInstance)})()}getGraphOptions(){return Promise.resolve(this.graphConfig)}setGraphInstance(t){this.graphInstance=t}setGraphOptions(t){this.graphConfig=t,this.groupManager.setConfig(this.graphConfig)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rre=(()=>{class n{constructor(t){this.command=t}registerModel(t){}static#e=this.\u0275fac=function(r){return new(r||n)(ne(_0))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Xt=n=>function(){var e=Se(function*(t){return yield t.awaitModel(n)});return function(t){return e.apply(this,arguments)}}(),Kt=n=>function(){var e=Se(function*(t){return(yield t.awaitModel(n)).getValidValue()});return function(t){return e.apply(this,arguments)}}();var GD,qD,b0,Pk,Ok,Nk,WD,w0,Rk,Lk,kk,Fk,jk,Bk,$k,Vk,Hk,Uk,zk,Gk,qk;!function(n){n.id="GRAPH_META",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(GD||(GD={})),function(n){n.id="GRAPH_ENABLE_MULTI_SELECT",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(qD||(qD={})),function(n){n.id="GRAPH_FULLSCREEN",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(b0||(b0={})),function(n){n.id="IS_NODE_SELECTED",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Pk||(Pk={})),function(n){n.id="IS_GROUP_SELECTED",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Ok||(Ok={})),function(n){n.id="IS_NORMAL_NODES_SELECTED",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Nk||(Nk={})),function(n){n.id="LAST_SELECTED_CELL",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(WD||(WD={})),function(n){n.id="SELECTED_CELLS",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(w0||(w0={})),function(n){n.id="LAST_SELECTED_NODE",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Rk||(Rk={})),function(n){n.id="SELECTED_NODES",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Lk||(Lk={})),function(n){n.id="SELECTED_EDGES",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(kk||(kk={})),function(n){n.id="SELECTED_GROUPS",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Fk||(Fk={})),function(n){n.id="CONTEXTMENU_NODE",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(jk||(jk={})),function(n){n.id="CONTEXTMENU_EDGE",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Bk||(Bk={})),function(n){n.id="CONTEXTMENU_TARGET",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}($k||($k={})),function(n){n.id="GRAPH_SCALE",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Vk||(Vk={})),function(n){n.id="COMMAND_REDOABLE",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Hk||(Hk={})),function(n){n.id="COMMAND_UNDOABLE",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Uk||(Uk={})),function(n){n.id="COMMAND_GLOBALS",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(zk||(zk={})),function(n){n.id="HISTORY_UNDOABLE",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(Gk||(Gk={})),function(n){n.id="HISTORY_REDOABLE",n.getModel=Xt(n.id),n.useValue=Kt(n.id)}(qk||(qk={}));let ire=(()=>{class n{constructor(t){var r=this;this.graphProvider=t,this.getGraphInstance=Se(function*(){return{graph:yield r.graphProvider.getGraphInstance(),config:yield r.graphProvider.getGraphOptions()}})}registerModel(t){var i,r=this;t.registerModel({id:GD.id,getInitialValue:()=>({flowId:"-1"}),watchChange:(i=Se(function*(s){return()=>{s.setValue({flowId:"-1"})}}),function(o){return i.apply(this,arguments)})}),t.registerModel({id:qD.id,getInitialValue:()=>({isEnable:!1}),watchChange:function(){var i=Se(function*(s){return()=>{s.setValue({isEnable:!1})}});return function(o){return i.apply(this,arguments)}}()}),t.registerModel({id:b0.id,getInitialValue:()=>!1,watchChange:function(){var i=Se(function*(s,o){const a=function(){var c=Se(function*(){const u=!!document.fullscreenElement;(yield b0.getModel(o)).setValue(u)});return function(){return c.apply(this,arguments)}}();return document.addEventListener("fullscreenchange",a,!1),()=>{document.removeEventListener("fullscreenchange",a),s.setValue(!1)}});return function(o,a){return i.apply(this,arguments)}}()}),t.registerModel({id:w0.id,getInitialValue:()=>[],watchChange:function(){var i=Se(function*(s){const{graph:o}=yield r.getGraphInstance(),a=c=>{const{selected:u}=c;s.setValue(u)};return o.on("selection:changed",a),()=>o.off("selection:changed",a)});return function(o){return i.apply(this,arguments)}}()}),t.registerModel({id:WD.id,watchChange:function(){var i=Se(function*(s,o){return(yield w0.getModel(o)).watch((c=[])=>{s.setValue([...c].pop()||null)})});return function(o,a){return i.apply(this,arguments)}}()})}static#e=this.\u0275fac=function(r){return new(r||n)(ne(v0))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wk=(()=>{class n{constructor(t,r,i){this.commandModelContribution=t,this.graphModelContribution=r,this.graphProvider=i}onStart(){this.commandModelContribution.registerModel(this),this.graphModelContribution.registerModel(this)}registerModel(t){}awaitModel(t){return Promise.resolve(void 0)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(rre),ne(ire),ne(v0))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var C0=function(n){return n.ASYNC_SRRIES="ASYNC_SRRIES",n.ASYNC_PARALLEL="ASYNC_PARALLEL",n}(C0||{}),Yk=function(n){return n.normalize=(e=[],t)=>{const r=Array.isArray(e)?e:[e],i=[];return t.forEach(s=>{i.push(s)}),[...i,...r].filter(s=>s&&!!s.handler)},n}(Yk||{});class Lp{constructor(e){var r,t=this;this.scheduleType=C0.ASYNC_SRRIES,this.hasHook=r=>this.hookMap.has(r),this.getHooks=(r=[],i=!0)=>Yk.normalize(r,this.hookMap),this.schedulers={[C0.ASYNC_SRRIES]:(r=Se(function*(i,s,o=[]){let a=s;for(const c of o)if([0,1].includes(c.handler.length))yield c.handler.call(t,i);else if([2].includes(c.handler.length)&&null!==a){const u=yield c.handler.call(t,i,a);if(null===u){a=null;break}if("function"==typeof u){a=u;continue}}if(a)return yield a.call(t,i)}),function(i,s){return r.apply(this,arguments)}),[C0.ASYNC_PARALLEL]:function(){var r=Se(function*(i,s,o=[]){if(o.map(c=>[0,1].includes(c.handler.length)?c.handler.call(t,i):[2].includes(c.handler.length)?c.handler.call(t,i,s):void 0),s)return yield s.call(t)});return function(i,s){return r.apply(this,arguments)}}()},this.hookMap=new Map,e&&e.type&&(this.scheduleType=e.type)}call(e,t,r){const i=this.getHooks(r,!0);return(0,this.schedulers[this.scheduleType])(e,t,i)}registerHook(e){}}class ore{constructor(){var e=this;this.CONFIG_TYPE="XFlowHook",this.time=Date.now(),this.setRegisterHook=t=>{this.hookRegisterFunc=t},this.setRegisterHookhub=t=>{this.hookhubRegisterFn=t},this.getConfig=Se(function*(){return{CONFIG_TYPE:e.CONFIG_TYPE,hookRegisterFn:e.hookRegisterFunc||Zk,hookhubRegisterFn:e.hookhubRegisterFn||Zk}})}}const Zk=()=>({dispose:()=>{}});let are=(()=>{class n{constructor(){var t=this;this.registerHook=function(){var r=Se(function*(i){const{hookRegisterFn:s}=yield t.hookConfig.getConfig();s(i)});return function(i){return r.apply(this,arguments)}}(),this.registerHookHub=function(){var r=Se(function*(i){const{hookhubRegisterFn:s}=yield t.hookConfig.getConfig();s(i)});return function(i){return r.apply(this,arguments)}}()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cre=(()=>{class n{registerHook(t){return Promise.resolve({})}registerHookHub(){return Promise.resolve(void 0)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YD=(()=>{class n{constructor(t,r,i){this.runtimeHookContribution=t,this.graphEventHookContribution=r,this.commandContributionService=i,this.hookProvider=()=>this.hooks,this.registerHook=o=>o(this.hooks),this.registerHookHub=(o,a)=>(this.hooks[o]=a,{dispose:()=>{delete this.hooks[o]}}),this.hooks={graphOptions:new Lp,afterGraphInit:new Lp,beforeGraphDestroy:new Lp,x6Events:new Lp};const s=new ore;this.hookConfig=s,this.runtimeHookContribution.hookConfig=s}onStart(){this.runtimeHookContribution.registerHookHub(this),this.graphEventHookContribution.registerHookHub(),this.commandContributionService.registerHookHub(this),this.runtimeHookContribution.registerHook(this.hooks),this.graphEventHookContribution.registerHook(this.hooks),this.commandContributionService.registerHook(this.hooks)}setHookConfig(t){this.hookConfig=t,this.runtimeHookContribution.hookConfig=t}static#e=this.\u0275fac=function(r){return new(r||n)(ne(are),ne(cre),ne(Xk))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Jk=[...N8,...Kne,...tre],lre=()=>new Lp;let Xk=(()=>{class n{constructor(t){this.injector=t,this.registerHook=function(){var r=Se(function*(i){var s;i.x6Events.registerHook({name:"bind group node move event",handler:(s=Se(function*(o){const a={eventName:"node:moving",callback:(c=Se(function*({node:u}){u.prop("isGroup")&&u.prop("originPosition",u.getPosition())}),function(d){return c.apply(this,arguments)})};var c;o.push(a)}),function(a){return s.apply(this,arguments)})})});return function(i){return r.apply(this,arguments)}}(),this.registerHookHub=function(){var r=Se(function*(i){Jk.forEach(({hookKey:s,createHook:o=lre})=>{i.registerHookHub(s,o())})});return function(i){return r.apply(this,arguments)}}()}registerGraphCommands(t){Jk.forEach(({command:r})=>{t.registerCommand(r,{createCommand:(i,s,o)=>{const a=this.injector.get(v0),c=this.injector.get(Wk),u=this.injector.get(YD),d=this.injector.get(_0),h=new nre(d,a,c,u);h.setArgs(s,o);const g=t.commandMap.get(i);return g.ctx=h,g}})})}static#e=this.\u0275fac=function(r){return new(r||n)(ne(dr))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_0=(()=>{class n{constructor(t,r){this.injector=t,this.commandContributionService=r,this.factories=new Map,this.commandMap=new Map,this.commands=new Map,this.registerXFlowCommand()}onStart(){this.commandContributionService.registerGraphCommands(this)}executeCommand(t,r,i){var s=this;return Se(function*(){const o=s.getFactory(t);return o&&o.createCommand(t,r,i).execute(),Promise.resolve(void 0)})()}redoCommand(){return Promise.resolve(void 0)}undoCommand(){return Promise.resolve(void 0)}registerXFlowCommand(){const t=[O8,P8,R8,Xne,Qne,ere];for(const r of t){const i=this.injector.get(r);this.commandMap.set(i.token,i)}}registerCommand(t,r){this.factories.has(t.id)?console.warn(`A command ${t.id} is already register`):(this.doRegisterCommand(t),this.registerFactory(t.id,r))}registerFactory(t,r){this.hasFactory(t)&&console.error("cannot register command:",t),this.factories.set(t,r)}doRegisterCommand(t){this.commands.set(t.id,t)}hasFactory(t){return!!this.factories.get(t)}getFactory(t){return this.factories.get(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(dr),ne(Xk))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ure=(()=>{class n{constructor(t,r,i,s){var o=this;this.graphProvider=t,this.commandService=r,this.modelService=i,this.hookService=s,this.getGraphData=Se(function*(){const c=(yield o.graphProvider.getGraphInstance()).getCells();return mre(c)}),this.getAllNodes=Se(function*(){return(yield o.graphProvider.getGraphInstance()).getNodes()}),this.getNodeById=function(){var a=Se(function*(c){return(yield o.graphProvider.getGraphInstance()).getCellById(c)});return function(c){return a.apply(this,arguments)}}(),this.getAllEdges=Se(function*(){return(yield o.graphProvider.getGraphInstance()).getEdges()}),this.getEdgeById=function(){var a=Se(function*(c){return(yield o.graphProvider.getGraphInstance()).getCellById(c)});return function(c){return a.apply(this,arguments)}}()}start(){this.commandService.onStart(),this.modelService.onStart(),this.hookService.onStart()}getGraphInstance(){return this.graphProvider.getGraphInstance()}getGraphConfig(){return this.graphProvider.getGraphOptions()}static#e=this.\u0275fac=function(r){return new(r||n)(ne(v0),ne(_0),ne(Wk),ne(YD))};static#t=this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class dre{constructor(){this.graphMap=new Map}getGraph(e){let t=this.graphMap.get(e);if(!t){const{graphContainer:r}=this.config,{clientHeight:i,clientWidth:s}=r;t=new vr({container:r,width:s,height:i,...this.config.x6Options}),this.graphMap.set(e,t),t.on("node:moved",({node:o})=>{const a=o.getData(),c=o.position();o.setData({...a,x:c?.x,y:c?.y})}),t.on("node:resized",({node:o})=>{const a=o.getData(),c=o.size();o.setData({...a,width:c?.width,height:c?.height})})}return Promise.resolve(t)}setConfig(e){this.config=e}}const mre=n=>{const e=[],t=[];return n.map(i=>(i=>{i.isNode()&&e.push((n=>{const e=n.getChildren(),t=n.getSize(),r=n.getData()||{},i=n.getPosition(),s=n.getParentId(),{isCollapsed:o}=r,a=r.groupCollapsedSize||(o?t:null);return{...r,id:n.id,width:t.width,height:t.height,x:i.x,y:i.y,group:s,groupChildren:e?e.map(c=>c.id):null,groupCollapsedSize:a}})(i)),i.isEdge()&&t.push((n=>({...n.getData()||{},id:n.id,source:n.getSourceCellId(),target:n.getTargetCellId(),sourcePortId:n.getSourcePortId(),targetPortId:n.getTargetPortId(),sourcePort:n.getSourcePortId(),targetPort:n.getTargetPortId()}))(i))})(i)),{nodes:e,edges:t}},yre=["content"],vre=["XFlow"],bre=function(){return{top:0,bottom:0,left:0,right:0}};function wre(n,e){if(1&n&&(bv(0),Vc(1,"app-x-flow-canvas",3),wv()),2&n){const t=MM();cv(1),Cg("app",t.app)("position",sI(2,bre))}}const Cre=["*"];let ZD=(()=>{class n{constructor(t,r){this.injector=t,this.hookService=r,this.haveCanvasComponent=!1}ngOnChanges(t){t.hookConfig&&t.hookConfig.currentValue&&this.hookService.setHookConfig(this.hookConfig)}ngOnInit(){var t=this;this.app=(n=>this.injector.get(ure))(),this.app.start(),this.onload&&this.onload(this.app),setTimeout(Se(function*(){yield t.app.commandService.executeCommand(wf.GRAPH_RENDER.id,{graphData:t.graphData},null),t.app.getGraphInstance().then(r=>r.centerContent())}),1e3)}ngAfterViewInit(){this.haveCanvasComponent=this.content.some(t=>t&&t.isXFlowCanvas)}static#e=this.\u0275fac=function(r){return new(r||n)(me(dr),me(YD))};static#t=this.\u0275cmp=Gs({type:n,selectors:[["app-x-flow"]],contentQueries:function(r,i,s){if(1&r&&function sx(n,e,t,r){const i=Ve();if(i.firstCreatePass){const s=nn();xI(i,new wI(e,t,r),s.index),function W$(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}_I(i,H(),t)}(s,yre,4),2&r){let o;Qu(o=ef())&&(i.content=o)}},viewQuery:function(r,i){if(1&r&&Tv(vre,5),2&r){let s;Qu(s=ef())&&(i.XFlow=s.first)}},inputs:{meta:"meta",graphConfig:"graphConfig",onload:"onload",graphData:"graphData",hookConfig:"hookConfig"},features:[ui],ngContentSelectors:Cre,decls:4,vars:1,consts:[[1,"relative","h-full"],["XFlow",""],[4,"ngIf"],[3,"app","position"]],template:function(r,i){1&r&&(function IM(n){const e=H()[Pt][en];if(!e.projection){const r=e.projection=ro(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?aj(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}(),Yu(0,"div",0,1),function yM(n,e,t,r,i,s,o,a){const c=H(),u=Ve(),d=n+Re,h=u.firstCreatePass?function Y2(n,e,t,r,i,s,o,a,c){const u=e.consts,d=ju(e,n,4,o||null,ms(u,a));C_(e,t,d,ms(u,c)),Hi(e,d);const h=d.tView=w_(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,u,c,e,t,r,i,s,o):u.data[d];Yr(h,!1);const g=vM(u,c,h,n);Yo()&&_u(u,c,g,h),sn(g,c),uv(c,c[d]=BA(g,c,g,h)),Fl(h)&&v_(u,c,h),null!=o&&b_(c,h,a)}(2,wre,2,3,"ng-container",2),function TM(n,e=0,t){const r=H(),i=Ve(),s=ju(i,Re+n,16,null,t||null);null===s.projection&&(s.projection=e),xn(),(!r[Er]||vs())&&32!=(32&s.flags)&&function Mr(n,e,t){zh(e[de],0,e,t,Vh(n,t,e),Hh(t.parent||e[en],t,e))}(i,r,s)}(3,0,["#content",""]),Zu()),2&r&&(cv(2),Cg("ngIf",!i.haveCanvasComponent))},changeDetection:0})}return n})();var Kk;!function(n){let e;var r;let t;(r=e=n.AnchorGroup||(n.AnchorGroup={})).TOP="top",r.BOTTOM="bottom",r.RIGHT="right",r.LEFT="left",function(r){r.INPUT="input",r.OUTPUT="output"}(t=n.AnchorType||(n.AnchorType={}))}(Kk||(Kk={}));const xre=new oe("command injection token"),Ere=["rootRef"],Dre=["canvasRef"];let Qk=(()=>{class n{constructor(){this.isXFlowCanvas=!0,this.style={}}ngOnChanges(t){if(t.app&&t.app.currentValue){const r=this.config?this.config:new I8;setTimeout(()=>{r.setX6Config(),r.setRootContainer(this.rootRef.nativeElement),r.setGraphContainer(this.rootRef.nativeElement),this.app.graphProvider.setGraphOptions(r)})}t.position&&t.position.currentValue&&(this.style=((n={})=>{const e=Object.entries(n),t=e.length>0?{position:"absolute"}:{};return e.forEach(([r,i=0])=>{t[r]=`${i}px`}),t})(this.position),console.log(this.style))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Gs({type:n,selectors:[["app-x-flow-canvas"]],viewQuery:function(r,i){if(1&r&&(Tv(Ere,5),Tv(Dre,5)),2&r){let s;Qu(s=ef())&&(i.rootRef=s.first),Qu(s=ef())&&(i.canvasRef=s.first)}},inputs:{isXFlowCanvas:"isXFlowCanvas",config:"config",position:"position",app:"app"},features:[ui],decls:4,vars:2,consts:[["rootRef",""],[1,"h-full"],["canvasRef",""]],template:function(r,i){1&r&&(Yu(0,"div",null,0),Vc(2,"div",1,2),Zu()),2&r&&qi(i.style)},changeDetection:0})}return n})();const Sre=[{path:"",pathMatch:"full",redirectTo:"flow"},{path:"flow",component:(()=>{class n{constructor(){this.graphData={nodes:[{id:"node1",x:40,y:40,width:80,height:40,label:"hello"},{id:"node2",x:160,y:180,width:80,height:40,label:"world"}],edges:[{source:"node1",target:"node2"}]},this.onload=t=>{console.log("flow app>>>",t)}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Gs({type:n,selectors:[["app-flow"]],decls:2,vars:2,consts:[[1,"h-full"],[3,"graphData","onload"]],template:function(r,i){1&r&&(Yu(0,"div",0),Vc(1,"app-x-flow",1),Zu()),2&r&&(cv(1),Cg("graphData",i.graphData)("onload",i.onload))},dependencies:[ZD]})}return n})()}];let Are=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qr({type:n});static#n=this.\u0275inj=ls({imports:[mO.forRoot(Sre),mO]})}return n})(),Mre=(()=>{class n{constructor(){this.title="ngx-flow"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Gs({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Vc(0,"router-outlet")},dependencies:[bE]})}return n})(),Ire=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qr({type:n,bootstrap:[Mre]});static#n=this.\u0275inj=ls({providers:[{provide:xre,useClass:_0}],imports:[V3,Are]})}return n})();(function Hd(n,e,t){const r=n.\u0275cmp;r.directiveDefs=Ll(e,!1),r.pipeDefs=Ll(t,!0)})(ZD,[BT,Qk],[]),B3().bootstrapModule(Ire).catch(n=>console.error(n))},990:function(Nr,Pi,Be){var ei;Nr=Be.nmd(Nr),function(){var I,jn="Expected a function",Ua="__lodash_hash_undefined__",Po="__lodash_placeholder__",Vs=1/0,ni=9007199254740991,ri=4294967295,I0=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],as="[object Arguments]",gl="[object Array]",br="[object Boolean]",Ga="[object Date]",St="[object Error]",qa="[object Function]",jp="[object GeneratorFunction]",Lr="[object Map]",Wa="[object Number]",ii="[object Object]",vd="[object Promise]",Ct="[object RegExp]",Fr="[object Set]",Ge="[object String]",No="[object Symbol]",Hs="[object WeakMap]",Ya="[object ArrayBuffer]",Ro="[object DataView]",Bp="[object Float32Array]",$p="[object Float64Array]",Vp="[object Int8Array]",Hp="[object Int16Array]",bd="[object Int32Array]",pl="[object Uint8Array]",wd="[object Uint8ClampedArray]",Za="[object Uint16Array]",Cd="[object Uint32Array]",_d=/\b__p \+= '';/g,Up=/\b(__p \+=) '' \+/g,O0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zp=/&(?:amp|lt|gt|quot|#39);/g,Gp=/[&<>"']/g,cs=RegExp(zp.source),qp=RegExp(Gp.source),N0=/<%-([\s\S]+?)%>/g,Wp=/<%([\s\S]+?)%>/g,Yp=/<%=([\s\S]+?)%>/g,R0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,L0=/^\w*$/,k0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xd=/[\\^$.*+?()[\]{}|]/g,F0=RegExp(xd.source),Ed=/^\s+/,j0=/\s/,B0=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$0=/\{\n\/\* \[wrapped with (.+)\] \*/,JD=/,? & /,Zp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jp=/[()=,{}\[\]\/\s]/,Xp=/\\(\\)?/g,Kp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dd=/\w*$/,V0=/^[-+]0x[0-9a-f]+$/i,Qp=/^0b[01]+$/i,em=/^\[object .+?Constructor\]$/,tm=/^0o[0-7]+$/i,nm=/^(?:0|[1-9]\d*)$/,wr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ml=/($^)/,H0=/['\n\r\u2028\u2029\\]/g,yl="\\ud800-\\udfff",im="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",si="\\u2700-\\u27bf",sm="a-z\\xdf-\\xf6\\xf8-\\xff",om="A-Z\\xc0-\\xd6\\xd8-\\xde",am="\\ufe0e\\ufe0f",vl="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ja="["+yl+"]",cm="["+vl+"]",Xa="["+im+"]",Ad="\\d+",G0="["+si+"]",lm="["+sm+"]",um="[^"+yl+vl+Ad+si+sm+om+"]",Md="\\ud83c[\\udffb-\\udfff]",dm="[^"+yl+"]",Id="(?:\\ud83c[\\udde6-\\uddff]){2}",Vt="[\\ud800-\\udbff][\\udc00-\\udfff]",ko="["+om+"]",ve="(?:"+lm+"|"+um+")",hm="(?:"+ko+"|"+um+")",bl="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",jr="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",gm="(?:"+Xa+"|"+Md+")?",pm="["+am+"]?",Cl=pm+gm+"(?:\\u200d(?:"+[dm,Id,Vt].join("|")+")"+pm+gm+")*",q0="(?:"+[G0,Id,Vt].join("|")+")"+Cl,Td="(?:"+[dm+Xa+"?",Xa,Id,Vt,Ja].join("|")+")",be=RegExp("['\u2019]","g"),Pd=RegExp(Xa,"g"),Ka=RegExp(Md+"(?="+Md+")|"+Td+Cl,"g"),KD=RegExp([ko+"?"+lm+"+"+bl+"(?="+[cm,ko,"$"].join("|")+")",hm+"+"+jr+"(?="+[cm,ko+ve,"$"].join("|")+")",ko+"?"+ve+"+"+bl,ko+"+"+jr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ad,q0].join("|"),"g"),mm=RegExp("[\\u200d"+yl+im+am+"]"),W=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_l=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ce=-1,ce={};ce[Bp]=ce[$p]=ce[Vp]=ce[Hp]=ce[bd]=ce[pl]=ce[wd]=ce[Za]=ce[Cd]=!0,ce[as]=ce[gl]=ce[Ya]=ce[br]=ce[Ro]=ce[Ga]=ce[St]=ce[qa]=ce[Lr]=ce[Wa]=ce[ii]=ce[Ct]=ce[Fr]=ce[Ge]=ce[Hs]=!1;var it={};it[as]=it[gl]=it[Ya]=it[Ro]=it[br]=it[Ga]=it[Bp]=it[$p]=it[Vp]=it[Hp]=it[bd]=it[Lr]=it[Wa]=it[ii]=it[Ct]=it[Fr]=it[Ge]=it[No]=it[pl]=it[wd]=it[Za]=it[Cd]=!0,it[St]=it[qa]=it[Hs]=!1;var nr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},eS=parseFloat,Y0=parseInt,Z0="object"==typeof global&&global&&global.Object===Object&&global,Us="object"==typeof self&&self&&self.Object===Object&&self,vn=Z0||Us||Function("return this")(),J0=Pi&&!Pi.nodeType&&Pi,xl=J0&&Nr&&!Nr.nodeType&&Nr,X0=xl&&xl.exports===J0,Nd=X0&&Z0.process,Br=function(){try{return xl&&xl.require&&xl.require("util").types||Nd&&Nd.binding&&Nd.binding("util")}catch{}}(),ym=Br&&Br.isArrayBuffer,K0=Br&&Br.isDate,rr=Br&&Br.isMap,pe=Br&&Br.isRegExp,Q0=Br&&Br.isSet,ew=Br&&Br.isTypedArray;function Cr(N,j,k){switch(k.length){case 0:return N.call(j);case 1:return N.call(j,k[0]);case 2:return N.call(j,k[0],k[1]);case 3:return N.call(j,k[0],k[1],k[2])}return N.apply(j,k)}function re(N,j,k,J){for(var ye=-1,Ue=null==N?0:N.length;++ye<Ue;){var Nt=N[ye];j(J,Nt,k(Nt),N)}return J}function $r(N,j){for(var k=-1,J=null==N?0:N.length;++k<J&&!1!==j(N[k],k,N););return N}function ls(N,j){for(var k=null==N?0:N.length;k--&&!1!==j(N[k],k,N););return N}function Qa(N,j){for(var k=-1,J=null==N?0:N.length;++k<J;)if(!j(N[k],k,N))return!1;return!0}function us(N,j){for(var k=-1,J=null==N?0:N.length,ye=0,Ue=[];++k<J;){var Nt=N[k];j(Nt,k,N)&&(Ue[ye++]=Nt)}return Ue}function ec(N,j){return!(null==N||!N.length)&&rc(N,j,0)>-1}function Rd(N,j,k){for(var J=-1,ye=null==N?0:N.length;++J<ye;)if(k(j,N[J]))return!0;return!1}function tt(N,j){for(var k=-1,J=null==N?0:N.length,ye=Array(J);++k<J;)ye[k]=j(N[k],k,N);return ye}function Vr(N,j){for(var k=-1,J=j.length,ye=N.length;++k<J;)N[ye+k]=j[k];return N}function tc(N,j,k,J){var ye=-1,Ue=null==N?0:N.length;for(J&&Ue&&(k=N[++ye]);++ye<Ue;)k=j(k,N[ye],ye,N);return k}function vm(N,j,k,J){var ye=null==N?0:N.length;for(J&&ye&&(k=N[--ye]);ye--;)k=j(k,N[ye],ye,N);return k}function Ld(N,j){for(var k=-1,J=null==N?0:N.length;++k<J;)if(j(N[k],k,N))return!0;return!1}var Ne=ic("length");function Pn(N,j,k){var J;return k(N,function(ye,Ue,Nt){if(j(ye,Ue,Nt))return J=Ue,!1}),J}function nc(N,j,k,J){for(var ye=N.length,Ue=k+(J?1:-1);J?Ue--:++Ue<ye;)if(j(N[Ue],Ue,N))return Ue;return-1}function rc(N,j,k){return j==j?function Vd(N,j,k){for(var J=k-1,ye=N.length;++J<ye;)if(N[J]===j)return J;return-1}(N,j,k):nc(N,tw,k)}function st(N,j,k,J){for(var ye=k-1,Ue=N.length;++ye<Ue;)if(J(N[ye],j))return ye;return-1}function tw(N){return N!=N}function nw(N,j){var k=null==N?0:N.length;return k?Bd(N,j)/k:NaN}function ic(N){return function(j){return null==j?I:j[N]}}function sc(N){return function(j){return null==N?I:N[j]}}function Fd(N,j,k,J,ye){return ye(N,function(Ue,Nt,Ye){k=J?(J=!1,Ue):j(k,Ue,Nt,Ye)}),k}function Bd(N,j){for(var k,J=-1,ye=N.length;++J<ye;){var Ue=j(N[J]);Ue!==I&&(k=k===I?Ue:k+Ue)}return k}function oc(N,j){for(var k=-1,J=Array(N);++k<N;)J[k]=j(k);return J}function rw(N){return N&&N.slice(0,_m(N)+1).replace(Ed,"")}function _r(N){return function(j){return N(j)}}function wm(N,j){return tt(j,function(k){return N[k]})}function El(N,j){return N.has(j)}function Fo(N,j){for(var k=-1,J=N.length;++k<J&&rc(j,N[k],0)>-1;);return k}function Dl(N,j){for(var k=N.length;k--&&rc(j,N[k],0)>-1;);return k}var iw=sc({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),sw=sc({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ow(N){return"\\"+nr[N]}function Hr(N){return mm.test(N)}function $d(N){var j=-1,k=Array(N.size);return N.forEach(function(J,ye){k[++j]=[ye,J]}),k}function ne(N,j){return function(k){return N(j(k))}}function Ni(N,j){for(var k=-1,J=N.length,ye=0,Ue=[];++k<J;){var Nt=N[k];(Nt===j||Nt===Po)&&(N[k]=Po,Ue[ye++]=k)}return Ue}function ee(N){var j=-1,k=Array(N.size);return N.forEach(function(J){k[++j]=J}),k}function jo(N){return Hr(N)?function Ml(N){for(var j=Ka.lastIndex=0;Ka.test(N);)++j;return j}(N):Ne(N)}function Ur(N){return Hr(N)?function zr(N){return N.match(Ka)||[]}(N):function kd(N){return N.split("")}(N)}function _m(N){for(var j=N.length;j--&&j0.test(N.charAt(j)););return j}var Ri=sc({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),zs=function N(j){var l,k=(j=null==j?vn:zs.defaults(vn.Object(),j,zs.pick(vn,_l))).Array,J=j.Date,ye=j.Error,Ue=j.Function,Nt=j.Math,Ye=j.Object,Il=j.RegExp,xm=j.String,bn=j.TypeError,cc=k.prototype,Bo=Ye.prototype,lc=j["__core-js_shared__"],Tl=Ue.prototype.toString,Ze=Bo.hasOwnProperty,Gr=0,Dm=(l=/[^.]+$/.exec(lc&&lc.keys&&lc.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",uc=Bo.toString,cw=Tl.call(Ye),lw=vn._,uw=Il("^"+Tl.call(Ze).replace(xd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pl=X0?j.Buffer:I,Li=j.Symbol,Ol=j.Uint8Array,Sm=Pl?Pl.allocUnsafe:I,Nl=ne(Ye.getPrototypeOf,Ye),Gs=Ye.create,Hd=Bo.propertyIsEnumerable,Rl=cc.splice,Am=Li?Li.isConcatSpreadable:I,qr=Li?Li.iterator:I,qs=Li?Li.toStringTag:I,fc=function(){try{var l=_s(Ye,"defineProperty");return l({},"",{}),l}catch{}}(),On=j.clearTimeout!==vn.clearTimeout&&j.clearTimeout,$n=J&&J.now!==vn.Date.now&&J.now,$e=j.setTimeout!==vn.setTimeout&&j.setTimeout,Rt=Nt.ceil,Qt=Nt.floor,ds=Ye.getOwnPropertySymbols,ir=Pl?Pl.isBuffer:I,Ud=j.isFinite,Mm=cc.join,Ll=ne(Ye.keys,Ye),Ut=Nt.max,wn=Nt.min,At=J.now,K=j.parseInt,xe=Nt.random,dt=cc.reverse,sr=_s(j,"DataView"),ki=_s(j,"Map"),en=_s(j,"Promise"),Wr=_s(j,"Set"),at=_s(j,"WeakMap"),xr=_s(Ye,"create"),Fi=at&&new at,de={},dc=Es(sr),Im=Es(ki),$o=Es(en),Pt=Es(Wr),hc=Es(at),ji=Li?Li.prototype:I,Vn=ji?ji.valueOf:I,Vo=ji?ji.toString:I;function D(l){if(gt(l)&&!Ee(l)&&!(l instanceof Te)){if(l instanceof Cn)return l;if(Ze.call(l,"__wrapped__"))return Xo(l)}return new Cn(l)}var or=function(){function l(){}return function(f){if(!ct(f))return{};if(Gs)return Gs(f);l.prototype=f;var p=new l;return l.prototype=I,p}}();function Er(){}function Cn(l,f){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=I}function Te(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ri,this.__views__=[]}function hs(l){var f=-1,p=null==l?0:l.length;for(this.clear();++f<p;){var b=l[f];this.set(b[0],b[1])}}function gs(l){var f=-1,p=null==l?0:l.length;for(this.clear();++f<p;){var b=l[f];this.set(b[0],b[1])}}function zt(l){var f=-1,p=null==l?0:l.length;for(this.clear();++f<p;){var b=l[f];this.set(b[0],b[1])}}function Ys(l){var f=-1,p=null==l?0:l.length;for(this.__data__=new zt;++f<p;)this.add(l[f])}function li(l){var f=this.__data__=new gs(l);this.size=f.size}function gw(l,f){var p=Ee(l),b=!p&&io(l),x=!p&&!b&&Ui(l),S=!p&&!b&&!x&&Ds(l),M=p||b||x||S,O=M?oc(l.length,xm):[],R=O.length;for(var B in l)(f||Ze.call(l,B))&&(!M||!("length"==B||x&&("offset"==B||"parent"==B)||S&&("buffer"==B||"byteLength"==B||"byteOffset"==B)||Zr(B,R)))&&O.push(B);return O}function pw(l){var f=l.length;return f?l[et(0,f-1)]:I}function fS(l,f){return to(xn(l),zo(f,0,l.length))}function dS(l){return to(xn(l))}function jl(l,f,p){(p!==I&&!Xr(l[f],p)||p===I&&!(f in l))&&_n(l,f,p)}function Uo(l,f,p){var b=l[f];(!Ze.call(l,f)||!Xr(b,p)||p===I&&!(f in l))&&_n(l,f,p)}function Wd(l,f){for(var p=l.length;p--;)if(Xr(l[p][0],f))return p;return-1}function hS(l,f,p,b){return Bi(l,function(x,S,M){f(b,x,p(x),M)}),b}function mw(l,f){return l&&hi(f,on(f),l)}function _n(l,f,p){"__proto__"==f&&fc?fc(l,f,{configurable:!0,enumerable:!0,value:p,writable:!0}):l[f]=p}function Tm(l,f){for(var p=-1,b=f.length,x=k(b),S=null==l;++p<b;)x[p]=S?I:Du(l,f[p]);return x}function zo(l,f,p){return l==l&&(p!==I&&(l=l<=p?l:p),f!==I&&(l=l>=f?l:f)),l}function Qe(l,f,p,b,x,S){var M,O=1&f,R=2&f,B=4&f;if(p&&(M=x?p(l,b,x,S):p(l)),M!==I)return M;if(!ct(l))return l;var $=Ee(l);if($){if(M=function wS(l){var f=l.length,p=new l.constructor(f);return f&&"string"==typeof l[0]&&Ze.call(l,"index")&&(p.index=l.index,p.input=l.input),p}(l),!O)return xn(l,M)}else{var U=Lt(l),X=U==qa||U==jp;if(Ui(l))return zm(l,O);if(U==ii||U==as||X&&!x){if(M=R||X?{}:Xm(l),!O)return R?function Gm(l,f){return hi(l,eo(l),f)}(l,function Zs(l,f){return l&&hi(f,Yn(f),l)}(M,l)):function vS(l,f){return hi(l,bh(l),f)}(l,mw(M,l))}else{if(!it[U])return x?l:{};M=function Rw(l,f,p){var b=l.constructor;switch(f){case Ya:return H(l);case br:case Ga:return new b(+l);case Ro:return function Ve(l,f){var p=f?H(l.buffer):l.buffer;return new l.constructor(p,l.byteOffset,l.byteLength)}(l,p);case Bp:case $p:case Vp:case Hp:case bd:case pl:case wd:case Za:case Cd:return nn(l,p);case Lr:return new b;case Wa:case Ge:return new b(l);case Ct:return function Sw(l){var f=new l.constructor(l.source,Dd.exec(l));return f.lastIndex=l.lastIndex,f}(l);case Fr:return new b;case No:return function Aw(l){return Vn?Ye(Vn.call(l)):{}}(l)}}(l,U,O)}}S||(S=new li);var se=S.get(l);if(se)return se;S.set(l,M),Hh(l)?l.forEach(function(ge){M.add(Qe(ge,f,p,ge,l,S))}):Py(l)&&l.forEach(function(ge,Le){M.set(Le,Qe(ge,f,p,Le,l,S))});var Pe=$?I:(B?R?Yo:Ql:R?Yn:on)(l);return $r(Pe||l,function(ge,Le){Pe&&(ge=l[Le=ge]),Uo(M,Le,Qe(ge,f,p,Le,l,S))}),M}function ar(l,f,p){var b=p.length;if(null==l)return!b;for(l=Ye(l);b--;){var x=p[b],M=l[x];if(M===I&&!(x in l)||!(0,f[x])(M))return!1}return!0}function Yd(l,f,p){if("function"!=typeof l)throw new bn(jn);return Jo(function(){l.apply(I,p)},f)}function Go(l,f,p,b){var x=-1,S=ec,M=!0,O=l.length,R=[],B=f.length;if(!O)return R;p&&(f=tt(f,_r(p))),b?(S=Rd,M=!1):f.length>=200&&(S=El,M=!1,f=new Ys(f));e:for(;++x<O;){var $=l[x],U=null==p?$:p($);if($=b||0!==$?$:0,M&&U==U){for(var X=B;X--;)if(f[X]===U)continue e;R.push($)}else S(f,U,b)||R.push($)}return R}D.templateSettings={escape:N0,evaluate:Wp,interpolate:Yp,variable:"",imports:{_:D}},(D.prototype=Er.prototype).constructor=D,(Cn.prototype=or(Er.prototype)).constructor=Cn,(Te.prototype=or(Er.prototype)).constructor=Te,hs.prototype.clear=function ci(){this.__data__=xr?xr(null):{},this.size=0},hs.prototype.delete=function kl(l){var f=this.has(l)&&delete this.__data__[l];return this.size-=f?1:0,f},hs.prototype.get=function Ho(l){var f=this.__data__;if(xr){var p=f[l];return p===Ua?I:p}return Ze.call(f,l)?f[l]:I},hs.prototype.has=function gc(l){var f=this.__data__;return xr?f[l]!==I:Ze.call(f,l)},hs.prototype.set=function fn(l,f){var p=this.__data__;return this.size+=this.has(l)?0:1,p[l]=xr&&f===I?Ua:f,this},gs.prototype.clear=function Hn(){this.__data__=[],this.size=0},gs.prototype.delete=function Nn(l){var f=this.__data__,p=Wd(f,l);return!(p<0||(p==f.length-1?f.pop():Rl.call(f,p,1),--this.size,0))},gs.prototype.get=function Gd(l){var f=this.__data__,p=Wd(f,l);return p<0?I:f[p][1]},gs.prototype.has=function Ws(l){return Wd(this.__data__,l)>-1},gs.prototype.set=function Fl(l,f){var p=this.__data__,b=Wd(p,l);return b<0?(++this.size,p.push([l,f])):p[b][1]=f,this},zt.prototype.clear=function qd(){this.size=0,this.__data__={hash:new hs,map:new(ki||gs),string:new hs}},zt.prototype.delete=function fw(l){var f=Qs(this,l).delete(l);return this.size-=f?1:0,f},zt.prototype.get=function dw(l){return Qs(this,l).get(l)},zt.prototype.has=function rS(l){return Qs(this,l).has(l)},zt.prototype.set=function hw(l,f){var p=Qs(this,l),b=p.size;return p.set(l,f),this.size+=p.size==b?0:1,this},Ys.prototype.add=Ys.prototype.push=function iS(l){return this.__data__.set(l,Ua),this},Ys.prototype.has=function sS(l){return this.__data__.has(l)},li.prototype.clear=function oS(){this.__data__=new gs,this.size=0},li.prototype.delete=function aS(l){var f=this.__data__,p=f.delete(l);return this.size=f.size,p},li.prototype.get=function cS(l){return this.__data__.get(l)},li.prototype.has=function lS(l){return this.__data__.has(l)},li.prototype.set=function uS(l,f){var p=this.__data__;if(p instanceof gs){var b=p.__data__;if(!ki||b.length<199)return b.push([l,f]),this.size=++p.size,this;p=this.__data__=new zt(b)}return p.set(l,f),this.size=p.size,this};var Bi=mh(cr),Zd=mh(Js,!0);function Jd(l,f){var p=!0;return Bi(l,function(b,x,S){return p=!!f(b,x,S)}),p}function pc(l,f,p){for(var b=-1,x=l.length;++b<x;){var S=l[b],M=f(S);if(null!=M&&(O===I?M==M&&!Wn(M):p(M,O)))var O=M,R=S}return R}function $l(l,f){var p=[];return Bi(l,function(b,x,S){f(b,x,S)&&p.push(b)}),p}function tn(l,f,p,b,x){var S=-1,M=l.length;for(p||(p=_S),x||(x=[]);++S<M;){var O=l[S];f>0&&p(O)?f>1?tn(O,f-1,p,b,x):Vr(x,O):b||(x[x.length]=O)}return x}var Vl=Xs(),Kd=Xs(!0);function cr(l,f){return l&&Vl(l,f,on)}function Js(l,f){return l&&Kd(l,f,on)}function $i(l,f){return us(f,function(p){return zi(l[p])})}function ps(l,f){for(var p=0,b=(f=bs(f,l)).length;null!=l&&p<b;)l=l[yi(f[p++])];return p&&p==b?l:I}function yw(l,f,p){var b=f(l);return Ee(l)?b:Vr(b,p(l))}function Un(l){return null==l?l===I?"[object Undefined]":"[object Null]":qs&&qs in Ye(l)?function Jm(l){var f=Ze.call(l,qs),p=l[qs];try{l[qs]=I;var b=!0}catch{}var x=uc.call(l);return b&&(f?l[qs]=p:delete l[qs]),x}(l):function _h(l){return uc.call(l)}(l)}function Pm(l,f){return l>f}function vw(l,f){return null!=l&&Ze.call(l,f)}function bw(l,f){return null!=l&&f in Ye(l)}function Hl(l,f,p){for(var b=p?Rd:ec,x=l[0].length,S=l.length,M=S,O=k(S),R=1/0,B=[];M--;){var $=l[M];M&&f&&($=tt($,_r(f))),R=wn($.length,R),O[M]=!p&&(f||x>=120&&$.length>=120)?new Ys(M&&$):I}$=l[0];var U=-1,X=O[0];e:for(;++U<x&&B.length<R;){var se=$[U],fe=f?f(se):se;if(se=p||0!==se?se:0,!(X?El(X,fe):b(B,fe,p))){for(M=S;--M;){var Pe=O[M];if(!(Pe?El(Pe,fe):b(l[M],fe,p)))continue e}X&&X.push(fe),B.push(se)}}return B}function mc(l,f,p){var b=null==(l=Ac(l,f=bs(f,l)))?l:l[yi(Sr(f))];return null==b?I:Cr(b,l,p)}function Ul(l){return gt(l)&&Un(l)==as}function yc(l,f,p,b,x){return l===f||(null==l||null==f||!gt(l)&&!gt(f)?l!=l&&f!=f:function Om(l,f,p,b,x,S){var M=Ee(l),O=Ee(f),R=M?gl:Lt(l),B=O?gl:Lt(f),$=(R=R==as?ii:R)==ii,U=(B=B==as?ii:B)==ii,X=R==B;if(X&&Ui(l)){if(!Ui(f))return!1;M=!0,$=!1}if(X&&!$)return S||(S=new li),M||Ds(l)?Zm(l,f,p,b,x,S):function Pw(l,f,p,b,x,S,M){switch(p){case Ro:if(l.byteLength!=f.byteLength||l.byteOffset!=f.byteOffset)return!1;l=l.buffer,f=f.buffer;case Ya:return!(l.byteLength!=f.byteLength||!S(new Ol(l),new Ol(f)));case br:case Ga:case Wa:return Xr(+l,+f);case St:return l.name==f.name&&l.message==f.message;case Ct:case Ge:return l==f+"";case Lr:var O=$d;case Fr:if(O||(O=ee),l.size!=f.size&&!(1&b))return!1;var B=M.get(l);if(B)return B==f;b|=2,M.set(l,f);var $=Zm(O(l),O(f),b,x,S,M);return M.delete(l),$;case No:if(Vn)return Vn.call(l)==Vn.call(f)}return!1}(l,f,R,p,b,x,S);if(!(1&p)){var se=$&&Ze.call(l,"__wrapped__"),fe=U&&Ze.call(f,"__wrapped__");if(se||fe){var Pe=se?l.value():l,ge=fe?f.value():f;return S||(S=new li),x(Pe,ge,p,b,S)}}return!!X&&(S||(S=new li),function Ow(l,f,p,b,x,S){var M=1&p,O=Ql(l),R=O.length;if(R!=Ql(f).length&&!M)return!1;for(var U=R;U--;){var X=O[U];if(!(M?X in f:Ze.call(f,X)))return!1}var se=S.get(l),fe=S.get(f);if(se&&fe)return se==f&&fe==l;var Pe=!0;S.set(l,f),S.set(f,l);for(var ge=M;++U<R;){var Le=l[X=O[U]],ke=f[X];if(b)var Dn=M?b(ke,Le,X,f,l,S):b(Le,ke,X,l,f,S);if(!(Dn===I?Le===ke||x(Le,ke,p,b,S):Dn)){Pe=!1;break}ge||(ge="constructor"==X)}if(Pe&&!ge){var hn=l.constructor,ur=f.constructor;hn!=ur&&"constructor"in l&&"constructor"in f&&!("function"==typeof hn&&hn instanceof hn&&"function"==typeof ur&&ur instanceof ur)&&(Pe=!1)}return S.delete(l),S.delete(f),Pe}(l,f,p,b,x,S))}(l,f,p,b,yc,x))}function eh(l,f,p,b){var x=p.length,S=x,M=!b;if(null==l)return!S;for(l=Ye(l);x--;){var O=p[x];if(M&&O[2]?O[1]!==l[O[0]]:!(O[0]in l))return!1}for(;++x<S;){var R=(O=p[x])[0],B=l[R],$=O[1];if(M&&O[2]){if(B===I&&!(R in l))return!1}else{var U=new li;if(b)var X=b(B,$,R,l,f,U);if(!(X===I?yc($,B,3,b,U):X))return!1}}return!0}function Rm(l){return!(!ct(l)||function nu(l){return!!Dm&&Dm in l}(l))&&(zi(l)?uw:em).test(Es(l))}function th(l){return"function"==typeof l?l:null==l?En:"object"==typeof l?Ee(l)?km(l[0],l[1]):ih(l):Bc(l)}function nh(l){if(!Zo(l))return Ll(l);var f=[];for(var p in Ye(l))Ze.call(l,p)&&"constructor"!=p&&f.push(p);return f}function rh(l,f){return l<f}function ui(l,f){var p=-1,b=Ln(l)?k(l.length):[];return Bi(l,function(x,S,M){b[++p]=f(x,S,M)}),b}function ih(l){var f=Ec(l);return 1==f.length&&f[0][2]?Km(f[0][0],f[0][1]):function(p){return p===l||eh(p,l,f)}}function km(l,f){return wh(l)&&Ch(f)?Km(yi(l),f):function(p){var b=Du(p,l);return b===I&&b===f?Su(p,l):yc(f,b,3)}}function zl(l,f,p,b,x){l!==f&&Vl(f,function(S,M){if(x||(x=new li),ct(S))!function Fm(l,f,p,b,x,S,M){var O=Dh(l,p),R=Dh(f,p),B=M.get(R);if(B)jl(l,p,B);else{var $=S?S(O,R,p+"",l,f,M):I,U=$===I;if(U){var X=Ee(R),se=!X&&Ui(R),fe=!X&&!se&&Ds(R);$=R,X||se||fe?Ee(O)?$=O:ot(O)?$=xn(O):se?(U=!1,$=zm(R,!0)):fe?(U=!1,$=nn(R,!0)):$=[]:Cu(R)||io(R)?($=O,io(O)?$=zh(O):(!ct(O)||zi(O))&&($=Xm(R))):U=!1}U&&(M.set(R,$),x($,R,b,S,M),M.delete(R)),jl(l,p,$)}}(l,f,M,p,zl,b,x);else{var O=b?b(Dh(l,M),S,M+"",l,f,x):I;O===I&&(O=S),jl(l,M,O)}},Yn)}function sh(l,f){var p=l.length;if(p)return Zr(f+=f<0?p:0,p)?l[f]:I}function jm(l,f,p){f=f.length?tt(f,function(S){return Ee(S)?function(M){return ps(M,1===S.length?S[0]:S)}:S}):[En];var b=-1;return f=tt(f,_r(le())),function jd(N,j){var k=N.length;for(N.sort(j);k--;)N[k]=N[k].value;return N}(ui(l,function(S,M,O){return{criteria:tt(f,function(B){return B(S)}),index:++b,value:S}}),function(S,M){return function bc(l,f,p){for(var b=-1,x=l.criteria,S=f.criteria,M=x.length,O=p.length;++b<M;){var R=ph(x[b],S[b]);if(R)return b>=O?R:R*("desc"==p[b]?-1:1)}return l.index-f.index}(S,M,p)})}function Bm(l,f,p){for(var b=-1,x=f.length,S={};++b<x;){var M=f[b],O=ps(l,M);p(O,M)&&di(S,bs(M,l),O)}return S}function Gl(l,f,p,b){var x=b?st:rc,S=-1,M=f.length,O=l;for(l===f&&(f=xn(f)),p&&(O=tt(l,_r(p)));++S<M;)for(var R=0,B=f[S],$=p?p(B):B;(R=x(O,$,R,b))>-1;)O!==l&&Rl.call(O,R,1),Rl.call(l,R,1);return l}function ah(l,f){for(var p=l?f.length:0,b=p-1;p--;){var x=f[p];if(p==b||x!==S){var S=x;Zr(x)?Rl.call(l,x,1):he(l,x)}}return l}function et(l,f){return l+Qt(xe()*(f-l+1))}function qo(l,f){var p="";if(!l||f<1||f>ni)return p;do{f%2&&(p+=l),(f=Qt(f/2))&&(l+=l)}while(f);return p}function ue(l,f){return iu(xh(l,f,En),l+"")}function _w(l){return pw(ao(l))}function $m(l,f){var p=ao(l);return to(p,zo(f,0,p.length))}function di(l,f,p,b){if(!ct(l))return l;for(var x=-1,S=(f=bs(f,l)).length,M=S-1,O=l;null!=O&&++x<S;){var R=yi(f[x]),B=p;if("__proto__"===R||"constructor"===R||"prototype"===R)return l;if(x!=M){var $=O[R];(B=b?b($,R,O):I)===I&&(B=ct($)?$:Zr(f[x+1])?[]:{})}Uo(O,R,B),O=O[R]}return l}var zn=Fi?function(l,f){return Fi.set(l,f),l}:En,xw=fc?function(l,f){return fc(l,"toString",{configurable:!0,enumerable:!1,value:Iu(f),writable:!0})}:En;function Ew(l){return to(ao(l))}function Dr(l,f,p){var b=-1,x=l.length;f<0&&(f=-f>x?0:x+f),(p=p>x?x:p)<0&&(p+=x),x=f>p?0:p-f>>>0,f>>>=0;for(var S=k(x);++b<x;)S[b]=l[b+f];return S}function ms(l,f){var p;return Bi(l,function(b,x,S){return!(p=f(b,x,S))}),!!p}function vc(l,f,p){var b=0,x=null==l?b:l.length;if("number"==typeof f&&f==f&&x<=2147483647){for(;b<x;){var S=b+x>>>1,M=l[S];null!==M&&!Wn(M)&&(p?M<=f:M<f)?b=S+1:x=S}return x}return lh(l,f,En,p)}function lh(l,f,p,b){var x=0,S=null==l?0:l.length;if(0===S)return 0;for(var M=(f=p(f))!=f,O=null===f,R=Wn(f),B=f===I;x<S;){var $=Qt((x+S)/2),U=p(l[$]),X=U!==I,se=null===U,fe=U==U,Pe=Wn(U);if(M)var ge=b||fe;else ge=B?fe&&(b||X):O?fe&&X&&(b||!se):R?fe&&X&&!se&&(b||!Pe):!se&&!Pe&&(b?U<=f:U<f);ge?x=$+1:S=$}return wn(S,4294967294)}function uh(l,f){for(var p=-1,b=l.length,x=0,S=[];++p<b;){var M=l[p],O=f?f(M):M;if(!p||!Xr(O,R)){var R=O;S[x++]=0===M?0:M}}return S}function fh(l){return"number"==typeof l?l:Wn(l)?NaN:+l}function Gn(l){if("string"==typeof l)return l;if(Ee(l))return tt(l,Gn)+"";if(Wn(l))return Vo?Vo.call(l):"";var f=l+"";return"0"==f&&1/l==-Vs?"-0":f}function ys(l,f,p){var b=-1,x=ec,S=l.length,M=!0,O=[],R=O;if(p)M=!1,x=Rd;else if(S>=200){var B=f?null:Iw(l);if(B)return ee(B);M=!1,x=El,R=new Ys}else R=f?[]:O;e:for(;++b<S;){var $=l[b],U=f?f($):$;if($=p||0!==$?$:0,M&&U==U){for(var X=R.length;X--;)if(R[X]===U)continue e;f&&R.push(U),O.push($)}else x(R,U,p)||(R!==O&&R.push(U),O.push($))}return O}function he(l,f){return null==(l=Ac(l,f=bs(f,l)))||delete l[yi(Sr(f))]}function dh(l,f,p,b){return di(l,f,p(ps(l,f)),b)}function hh(l,f,p,b){for(var x=l.length,S=b?x:-1;(b?S--:++S<x)&&f(l[S],S,l););return p?Dr(l,b?0:S,b?S+1:x):Dr(l,b?S+1:0,b?x:S)}function Vm(l,f){var p=l;return p instanceof Te&&(p=p.value()),tc(f,function(b,x){return x.func.apply(x.thisArg,Vr([b],x.args))},p)}function gh(l,f,p){var b=l.length;if(b<2)return b?ys(l[0]):[];for(var x=-1,S=k(b);++x<b;)for(var M=l[x],O=-1;++O<b;)O!=x&&(S[x]=Go(S[x]||M,l[O],f,p));return ys(tn(S,1),f,p)}function Hm(l,f,p){for(var b=-1,x=l.length,S=f.length,M={};++b<x;)p(M,l[b],b<S?f[b]:I);return M}function ql(l){return ot(l)?l:[]}function vs(l){return"function"==typeof l?l:En}function bs(l,f){return Ee(l)?l:wh(l,f)?[l]:xs(qe(l))}var Dw=ue;function ws(l,f,p){var b=l.length;return p=p===I?b:p,!f&&p>=b?l:Dr(l,f,p)}var Um=On||function(l){return vn.clearTimeout(l)};function zm(l,f){if(f)return l.slice();var p=l.length,b=Sm?Sm(p):new l.constructor(p);return l.copy(b),b}function H(l){var f=new l.constructor(l.byteLength);return new Ol(f).set(new Ol(l)),f}function nn(l,f){var p=f?H(l.buffer):l.buffer;return new l.constructor(p,l.byteOffset,l.length)}function ph(l,f){if(l!==f){var p=l!==I,b=null===l,x=l==l,S=Wn(l),M=f!==I,O=null===f,R=f==f,B=Wn(f);if(!O&&!B&&!S&&l>f||S&&M&&R&&!O&&!B||b&&M&&R||!p&&R||!x)return 1;if(!b&&!S&&!B&&l<f||B&&p&&x&&!b&&!S||O&&p&&x||!M&&x||!R)return-1}return 0}function Yr(l,f,p,b){for(var x=-1,S=l.length,M=p.length,O=-1,R=f.length,B=Ut(S-M,0),$=k(R+B),U=!b;++O<R;)$[O]=f[O];for(;++x<M;)(U||x<S)&&($[p[x]]=l[x]);for(;B--;)$[O++]=l[x++];return $}function Wl(l,f,p,b){for(var x=-1,S=l.length,M=-1,O=p.length,R=-1,B=f.length,$=Ut(S-O,0),U=k($+B),X=!b;++x<$;)U[x]=l[x];for(var se=x;++R<B;)U[se+R]=f[R];for(;++M<O;)(X||x<S)&&(U[se+p[M]]=l[x++]);return U}function xn(l,f){var p=-1,b=l.length;for(f||(f=k(b));++p<b;)f[p]=l[p];return f}function hi(l,f,p,b){var x=!p;p||(p={});for(var S=-1,M=f.length;++S<M;){var O=f[S],R=b?b(p[O],l[O],O,p,l):I;R===I&&(R=l[O]),x?_n(p,O,R):Uo(p,O,R)}return p}function rn(l,f){return function(p,b){var x=Ee(p)?re:hS,S=f?f():{};return x(p,l,le(b,2),S)}}function qn(l){return ue(function(f,p){var b=-1,x=p.length,S=x>1?p[x-1]:I,M=x>2?p[2]:I;for(S=l.length>3&&"function"==typeof S?(x--,S):I,M&&Gt(p[0],p[1],M)&&(S=x<3?I:S,x=1),f=Ye(f);++b<x;){var O=p[b];O&&l(f,O,b,S)}return f})}function mh(l,f){return function(p,b){if(null==p)return p;if(!Ln(p))return l(p,b);for(var x=p.length,S=f?x:-1,M=Ye(p);(f?S--:++S<x)&&!1!==b(M[S],S,M););return p}}function Xs(l){return function(f,p,b){for(var x=-1,S=Ye(f),M=b(f),O=M.length;O--;){var R=M[l?O:++x];if(!1===p(S[R],R,S))break}return f}}function qm(l){return function(f){var p=Hr(f=qe(f))?Ur(f):I,b=p?p[0]:f.charAt(0),x=p?ws(p,1).join(""):f.slice(1);return b[l]()+x}}function Ks(l){return function(f){return tc(Kh(BC(f).replace(be,"")),l,"")}}function wc(l){return function(){var f=arguments;switch(f.length){case 0:return new l;case 1:return new l(f[0]);case 2:return new l(f[0],f[1]);case 3:return new l(f[0],f[1],f[2]);case 4:return new l(f[0],f[1],f[2],f[3]);case 5:return new l(f[0],f[1],f[2],f[3],f[4]);case 6:return new l(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new l(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var p=or(l.prototype),b=l.apply(p,f);return ct(b)?b:p}}function Yl(l){return function(f,p,b){var x=Ye(f);if(!Ln(f)){var S=le(p,3);f=on(f),p=function(O){return S(x[O],O,x)}}var M=l(f,p,b);return M>-1?x[S?f[M]:M]:I}}function Zl(l){return gi(function(f){var p=f.length,b=p,x=Cn.prototype.thru;for(l&&f.reverse();b--;){var S=f[b];if("function"!=typeof S)throw new bn(jn);if(x&&!M&&"wrapper"==eu(S))var M=new Cn([],!0)}for(b=M?b:p;++b<p;){var O=eu(S=f[b]),R="wrapper"==O?pi(S):I;M=R&&Sc(R[0])&&424==R[1]&&!R[4].length&&1==R[9]?M[eu(R[0])].apply(M,R[3]):1==S.length&&Sc(S)?M[O]():M.thru(S)}return function(){var B=arguments,$=B[0];if(M&&1==B.length&&Ee($))return M.plant($).value();for(var U=0,X=p?f[U].apply(this,B):$;++U<p;)X=f[U].call(this,X);return X}})}function Cc(l,f,p,b,x,S,M,O,R,B){var $=128&f,U=1&f,X=2&f,se=24&f,fe=512&f,Pe=X?I:wc(l);return function ge(){for(var Le=arguments.length,ke=k(Le),Dn=Le;Dn--;)ke[Dn]=arguments[Dn];if(se)var hn=Hi(ge),ur=function Sl(N,j){for(var k=N.length,J=0;k--;)N[k]===j&&++J;return J}(ke,hn);if(b&&(ke=Yr(ke,b,x,se)),S&&(ke=Wl(ke,S,M,se)),Le-=ur,se&&Le<B){var Mt=Ni(ke,hn);return vh(l,f,Cc,ge.placeholder,p,ke,Mt,O,R,B-Le)}var fr=U?p:this,Tr=X?fr[l]:l;return Le=ke.length,O?ke=function Eh(l,f){for(var p=l.length,b=wn(f.length,p),x=xn(l);b--;){var S=f[b];l[b]=Zr(S,p)?x[S]:I}return l}(ke,O):fe&&Le>1&&ke.reverse(),$&&R<Le&&(ke.length=R),this&&this!==vn&&this instanceof ge&&(Tr=Pe||wc(Tr)),Tr.apply(fr,ke)}}function Jl(l,f){return function(p,b){return function Qd(l,f,p,b){return cr(l,function(x,S,M){f(b,p(x),S,M)}),b}(p,l,f(b),{})}}function Xl(l,f){return function(p,b){var x;if(p===I&&b===I)return f;if(p!==I&&(x=p),b!==I){if(x===I)return b;"string"==typeof p||"string"==typeof b?(p=Gn(p),b=Gn(b)):(p=fh(p),b=fh(b)),x=l(p,b)}return x}}function Kl(l){return gi(function(f){return f=tt(f,_r(le())),ue(function(p){var b=this;return l(f,function(x){return Cr(x,b,p)})})})}function Wo(l,f){var p=(f=f===I?" ":Gn(f)).length;if(p<2)return p?qo(f,l):f;var b=qo(f,Rt(l/jo(f)));return Hr(f)?ws(Ur(b),0,l).join(""):b.slice(0,l)}function yh(l){return function(f,p,b){return b&&"number"!=typeof b&&Gt(f,p,b)&&(p=b=I),f=vi(f),p===I?(p=f,f=0):p=vi(p),function ch(l,f,p,b){for(var x=-1,S=Ut(Rt((f-l)/(p||1)),0),M=k(S);S--;)M[b?S:++x]=l,l+=p;return M}(f,p,b=b===I?f<p?1:-1:vi(b),l)}}function _c(l){return function(f,p){return"string"==typeof f&&"string"==typeof p||(f=Mr(f),p=Mr(p)),l(f,p)}}function vh(l,f,p,b,x,S,M,O,R,B){var $=8&f;f|=$?32:64,4&(f&=~($?64:32))||(f&=-4);var Pe=[l,f,x,$?S:I,$?M:I,$?I:S,$?I:M,O,R,B],ge=p.apply(I,Pe);return Sc(l)&&Sh(ge,Pe),ge.placeholder=b,Ah(ge,l,f)}function xc(l){var f=Nt[l];return function(p,b){if(p=Mr(p),(b=null==b?0:wn(De(b),292))&&Ud(p)){var x=(qe(p)+"e").split("e");return+((x=(qe(f(x[0]+"e"+(+x[1]+b)))+"e").split("e"))[0]+"e"+(+x[1]-b))}return f(p)}}var Iw=Wr&&1/ee(new Wr([,-0]))[1]==Vs?function(l){return new Wr(l)}:ga;function Ym(l){return function(f){var p=Lt(f);return p==Lr?$d(f):p==Fr?function Al(N){var j=-1,k=Array(N.size);return N.forEach(function(J){k[++j]=[J,J]}),k}(f):function tS(N,j){return tt(j,function(k){return[k,N[k]]})}(f,l(f))}}function _t(l,f,p,b,x,S,M,O){var R=2&f;if(!R&&"function"!=typeof l)throw new bn(jn);var B=b?b.length:0;if(B||(f&=-97,b=x=I),M=M===I?M:Ut(De(M),0),O=O===I?O:De(O),B-=x?x.length:0,64&f){var $=b,U=x;b=x=I}var X=R?I:pi(l),se=[l,f,p,b,x,$,U,S,M,O];if(X&&function Lw(l,f){var p=l[1],b=f[1],x=p|b;if(!(x<131)&&!(128==b&&8==p||128==b&&256==p&&l[7].length<=f[8]||384==b&&f[7].length<=f[8]&&8==p))return l;1&b&&(l[2]=f[2],x|=1&p?0:4);var O=f[3];if(O){var R=l[3];l[3]=R?Yr(R,O,f[4]):O,l[4]=R?Ni(l[3],Po):f[4]}(O=f[5])&&(l[5]=(R=l[5])?Wl(R,O,f[6]):O,l[6]=R?Ni(l[5],Po):f[6]),(O=f[7])&&(l[7]=O),128&b&&(l[8]=null==l[8]?f[8]:wn(l[8],f[8])),null==l[9]&&(l[9]=f[9]),l[0]=f[0],l[1]=x}(se,X),l=se[0],f=se[1],p=se[2],b=se[3],x=se[4],!(O=se[9]=se[9]===I?R?0:l.length:Ut(se[9]-B,0))&&24&f&&(f&=-25),f&&1!=f)fe=8==f||16==f?function Mw(l,f,p){var b=wc(l);return function x(){for(var S=arguments.length,M=k(S),O=S,R=Hi(x);O--;)M[O]=arguments[O];var B=S<3&&M[0]!==R&&M[S-1]!==R?[]:Ni(M,R);return(S-=B.length)<p?vh(l,f,Cc,x.placeholder,I,M,B,I,I,p-S):Cr(this&&this!==vn&&this instanceof x?b:l,this,M)}}(l,f,O):32!=f&&33!=f||x.length?Cc.apply(I,se):function Wm(l,f,p,b){var x=1&f,S=wc(l);return function M(){for(var O=-1,R=arguments.length,B=-1,$=b.length,U=k($+R),X=this&&this!==vn&&this instanceof M?S:l;++B<$;)U[B]=b[B];for(;R--;)U[B++]=arguments[++O];return Cr(X,x?p:this,U)}}(l,f,p,b);else var fe=function Vi(l,f,p){var b=1&f,x=wc(l);return function S(){return(this&&this!==vn&&this instanceof S?x:l).apply(b?p:this,arguments)}}(l,f,p);return Ah((X?zn:Sh)(fe,se),l,f)}function Cs(l,f,p,b){return l===I||Xr(l,Bo[p])&&!Ze.call(b,p)?f:l}function ht(l,f,p,b,x,S){return ct(l)&&ct(f)&&(S.set(f,l),zl(l,f,I,ht,S),S.delete(f)),l}function Tw(l){return Cu(l)?I:l}function Zm(l,f,p,b,x,S){var M=1&p,O=l.length,R=f.length;if(O!=R&&!(M&&R>O))return!1;var B=S.get(l),$=S.get(f);if(B&&$)return B==f&&$==l;var U=-1,X=!0,se=2&p?new Ys:I;for(S.set(l,f),S.set(f,l);++U<O;){var fe=l[U],Pe=f[U];if(b)var ge=M?b(Pe,fe,U,f,l,S):b(fe,Pe,U,l,f,S);if(ge!==I){if(ge)continue;X=!1;break}if(se){if(!Ld(f,function(Le,ke){if(!El(se,ke)&&(fe===Le||x(fe,Le,p,b,S)))return se.push(ke)})){X=!1;break}}else if(fe!==Pe&&!x(fe,Pe,p,b,S)){X=!1;break}}return S.delete(l),S.delete(f),X}function gi(l){return iu(xh(l,I,no),l+"")}function Ql(l){return yw(l,on,bh)}function Yo(l){return yw(l,Yn,eo)}var pi=Fi?function(l){return Fi.get(l)}:ga;function eu(l){for(var f=l.name+"",p=de[f],b=Ze.call(de,f)?p.length:0;b--;){var x=p[b],S=x.func;if(null==S||S==l)return x.name}return f}function Hi(l){return(Ze.call(D,"placeholder")?D:l).placeholder}function le(){var l=D.iteratee||tg;return l=l===tg?th:l,arguments.length?l(arguments[0],arguments[1]):l}function Qs(l,f){var p=l.__data__;return function Dc(l){var f=typeof l;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==l:null===l}(f)?p["string"==typeof f?"string":"hash"]:p.map}function Ec(l){for(var f=on(l),p=f.length;p--;){var b=f[p],x=l[b];f[p]=[b,x,Ch(x)]}return f}function _s(l,f){var p=function Cm(N,j){return null==N?I:N[j]}(l,f);return Rm(p)?p:I}var bh=ds?function(l){return null==l?[]:(l=Ye(l),us(ds(l),function(f){return Hd.call(l,f)}))}:Ou,eo=ds?function(l){for(var f=[];l;)Vr(f,bh(l)),l=Nl(l);return f}:Ou,Lt=Un;function tu(l,f,p){for(var b=-1,x=(f=bs(f,l)).length,S=!1;++b<x;){var M=yi(f[b]);if(!(S=null!=l&&p(l,M)))break;l=l[M]}return S||++b!=x?S:!!(x=null==l?0:l.length)&&so(x)&&Zr(M,x)&&(Ee(l)||io(l))}function Xm(l){return"function"!=typeof l.constructor||Zo(l)?{}:or(Nl(l))}function _S(l){return Ee(l)||io(l)||!!(Am&&l&&l[Am])}function Zr(l,f){var p=typeof l;return!!(f=f??ni)&&("number"==p||"symbol"!=p&&nm.test(l))&&l>-1&&l%1==0&&l<f}function Gt(l,f,p){if(!ct(p))return!1;var b=typeof f;return!!("number"==b?Ln(p)&&Zr(f,p.length):"string"==b&&f in p)&&Xr(p[f],l)}function wh(l,f){if(Ee(l))return!1;var p=typeof l;return!("number"!=p&&"symbol"!=p&&"boolean"!=p&&null!=l&&!Wn(l))||L0.test(l)||!R0.test(l)||null!=f&&l in Ye(f)}function Sc(l){var f=eu(l),p=D[f];if("function"!=typeof p||!(f in Te.prototype))return!1;if(l===p)return!0;var b=pi(p);return!!b&&l===b[0]}(sr&&Lt(new sr(new ArrayBuffer(1)))!=Ro||ki&&Lt(new ki)!=Lr||en&&Lt(en.resolve())!=vd||Wr&&Lt(new Wr)!=Fr||at&&Lt(new at)!=Hs)&&(Lt=function(l){var f=Un(l),p=f==ii?l.constructor:I,b=p?Es(p):"";if(b)switch(b){case dc:return Ro;case Im:return Lr;case $o:return vd;case Pt:return Fr;case hc:return Hs}return f});var xS=lc?zi:As;function Zo(l){var f=l&&l.constructor;return l===("function"==typeof f&&f.prototype||Bo)}function Ch(l){return l==l&&!ct(l)}function Km(l,f){return function(p){return null!=p&&p[l]===f&&(f!==I||l in Ye(p))}}function xh(l,f,p){return f=Ut(f===I?l.length-1:f,0),function(){for(var b=arguments,x=-1,S=Ut(b.length-f,0),M=k(S);++x<S;)M[x]=b[f+x];x=-1;for(var O=k(f+1);++x<f;)O[x]=b[x];return O[f]=p(M),Cr(l,this,O)}}function Ac(l,f){return f.length<2?l:ps(l,Dr(f,0,-1))}function Dh(l,f){if(("constructor"!==f||"function"!=typeof l[f])&&"__proto__"!=f)return l[f]}var Sh=Qm(zn),Jo=$e||function(l,f){return vn.setTimeout(l,f)},iu=Qm(xw);function Ah(l,f,p){var b=f+"";return iu(l,function CS(l,f){var p=f.length;if(!p)return l;var b=p-1;return f[b]=(p>1?"& ":"")+f[b],f=f.join(p>2?", ":" "),l.replace(B0,"{\n/* [wrapped with "+f+"] */\n")}(b,function ey(l,f){return $r(I0,function(p){var b="_."+p[0];f&p[1]&&!ec(l,b)&&l.push(b)}),l.sort()}(function bS(l){var f=l.match($0);return f?f[1].split(JD):[]}(b),p)))}function Qm(l){var f=0,p=0;return function(){var b=At(),x=16-(b-p);if(p=b,x>0){if(++f>=800)return arguments[0]}else f=0;return l.apply(I,arguments)}}function to(l,f){var p=-1,b=l.length,x=b-1;for(f=f===I?b:f;++p<f;){var S=et(p,x),M=l[S];l[S]=l[p],l[p]=M}return l.length=f,l}var xs=function mi(l){var f=dn(l,function(b){return 500===p.size&&p.clear(),b}),p=f.cache;return f}(function(l){var f=[];return 46===l.charCodeAt(0)&&f.push(""),l.replace(k0,function(p,b,x,S){f.push(x?S.replace(Xp,"$1"):b||p)}),f});function yi(l){if("string"==typeof l||Wn(l))return l;var f=l+"";return"0"==f&&1/l==-Vs?"-0":f}function Es(l){if(null!=l){try{return Tl.call(l)}catch{}try{return l+""}catch{}}return""}function Xo(l){if(l instanceof Te)return l.clone();var f=new Cn(l.__wrapped__,l.__chain__);return f.__actions__=xn(l.__actions__),f.__index__=l.__index__,f.__values__=l.__values__,f}var ty=ue(function(l,f){return ot(l)?Go(l,tn(f,1,ot,!0)):[]}),Mh=ue(function(l,f){var p=Sr(f);return ot(p)&&(p=I),ot(l)?Go(l,tn(f,1,ot,!0),le(p,2)):[]}),jw=ue(function(l,f){var p=Sr(f);return ot(p)&&(p=I),ot(l)?Go(l,tn(f,1,ot,!0),I,p):[]});function Ih(l,f,p){var b=null==l?0:l.length;if(!b)return-1;var x=null==p?0:De(p);return x<0&&(x=Ut(b+x,0)),nc(l,le(f,3),x)}function ou(l,f,p){var b=null==l?0:l.length;if(!b)return-1;var x=b-1;return p!==I&&(x=De(p),x=p<0?Ut(b+x,0):wn(x,b-1)),nc(l,le(f,3),x,!0)}function no(l){return null!=l&&l.length?tn(l,1):[]}function $w(l){return l&&l.length?l[0]:I}var MS=ue(function(l){var f=tt(l,ql);return f.length&&f[0]===l[0]?Hl(f):[]}),IS=ue(function(l){var f=Sr(l),p=tt(l,ql);return f===Sr(p)?f=I:p.pop(),p.length&&p[0]===l[0]?Hl(p,le(f,2)):[]}),ta=ue(function(l){var f=Sr(l),p=tt(l,ql);return(f="function"==typeof f?f:I)&&p.pop(),p.length&&p[0]===l[0]?Hl(p,I,f):[]});function Sr(l){var f=null==l?0:l.length;return f?l[f-1]:I}var Mc=ue(ry);function ry(l,f){return l&&l.length&&f&&f.length?Gl(l,f):l}var iy=gi(function(l,f){var p=null==l?0:l.length,b=Tm(l,f);return ah(l,tt(f,function(x){return Zr(x,p)?+x:x}).sort(ph)),b});function ro(l){return null==l?l:dt.call(l)}var Jw=ue(function(l){return ys(tn(l,1,ot,!0))}),Ph=ue(function(l){var f=Sr(l);return ot(f)&&(f=I),ys(tn(l,1,ot,!0),le(f,2))}),cu=ue(function(l){var f=Sr(l);return f="function"==typeof f?f:I,ys(tn(l,1,ot,!0),I,f)});function ia(l){if(!l||!l.length)return[];var f=0;return l=us(l,function(p){if(ot(p))return f=Ut(p.length,f),!0}),oc(f,function(p){return tt(l,ic(p))})}function oy(l,f){if(!l||!l.length)return[];var p=ia(l);return null==f?p:tt(p,function(b){return Cr(f,I,b)})}var ay=ue(function(l,f){return ot(l)?Go(l,f):[]}),Oh=ue(function(l){return gh(us(l,ot))}),uu=ue(function(l){var f=Sr(l);return ot(f)&&(f=I),gh(us(l,ot),le(f,2))}),cy=ue(function(l){var f=Sr(l);return f="function"==typeof f?f:I,gh(us(l,ot),I,f)}),Qw=ue(ia),Ic=ue(function(l){var f=l.length,p=f>1?l[f-1]:I;return p="function"==typeof p?(l.pop(),p):I,oy(l,p)});function ly(l){var f=D(l);return f.__chain__=!0,f}function Tc(l,f){return f(l)}var tC=gi(function(l){var f=l.length,p=f?l[0]:0,b=this.__wrapped__,x=function(S){return Tm(S,l)};return!(f>1||this.__actions__.length)&&b instanceof Te&&Zr(p)?((b=b.slice(p,+p+(f?1:0))).__actions__.push({func:Tc,args:[x],thisArg:I}),new Cn(b,this.__chain__).thru(function(S){return f&&!S.length&&S.push(I),S})):this.thru(x)}),fy=rn(function(l,f,p){Ze.call(l,p)?++l[p]:_n(l,p,1)}),kS=Yl(Ih),oC=Yl(ou);function cC(l,f){return(Ee(l)?$r:Bi)(l,le(f,3))}function du(l,f){return(Ee(l)?ls:Zd)(l,le(f,3))}var jS=rn(function(l,f,p){Ze.call(l,p)?l[p].push(f):_n(l,p,[f])}),$S=ue(function(l,f,p){var b=-1,x="function"==typeof f,S=Ln(l)?k(l.length):[];return Bi(l,function(M){S[++b]=x?Cr(f,M,p):mc(M,f,p)}),S}),VS=rn(function(l,f,p){_n(l,p,f)});function Rh(l,f){return(Ee(l)?tt:ui)(l,le(f,3))}var hu=rn(function(l,f,p){l[p?0:1].push(f)},function(){return[[],[]]}),mu=ue(function(l,f){if(null==l)return[];var p=f.length;return p>1&&Gt(l,f[0],f[1])?f=[]:p>2&&Gt(f[0],f[1],f[2])&&(f=[f[0]]),jm(l,tn(f,1),[])}),Jr=$n||function(){return vn.Date.now()};function vy(l,f,p){return f=p?I:f,_t(l,128,I,I,I,I,f=l&&null==f?l.length:f)}function by(l,f){var p;if("function"!=typeof f)throw new bn(jn);return l=De(l),function(){return--l>0&&(p=f.apply(this,arguments)),l<=1&&(f=I),p}}var yu=ue(function(l,f,p){var b=1;if(p.length){var x=Ni(p,Hi(yu));b|=32}return _t(l,b,f,p,x)}),vu=ue(function(l,f,p){var b=3;if(p.length){var x=Ni(p,Hi(vu));b|=32}return _t(f,b,l,p,x)});function _y(l,f,p){var b,x,S,M,O,R,B=0,$=!1,U=!1,X=!0;if("function"!=typeof l)throw new bn(jn);function se(Mt){var fr=b,Tr=x;return b=x=I,B=Mt,M=l.apply(Tr,fr)}function ge(Mt){var fr=Mt-R;return R===I||fr>=f||fr<0||U&&Mt-B>=S}function Le(){var Mt=Jr();if(ge(Mt))return ke(Mt);O=Jo(Le,function Pe(Mt){var nv=f-(Mt-R);return U?wn(nv,S-(Mt-B)):nv}(Mt))}function ke(Mt){return O=I,X&&b?se(Mt):(b=x=I,M)}function ur(){var Mt=Jr(),fr=ge(Mt);if(b=arguments,x=this,R=Mt,fr){if(O===I)return function fe(Mt){return B=Mt,O=Jo(Le,f),$?se(Mt):M}(R);if(U)return Um(O),O=Jo(Le,f),se(R)}return O===I&&(O=Jo(Le,f)),M}return f=Mr(f)||0,ct(p)&&($=!!p.leading,S=(U="maxWait"in p)?Ut(Mr(p.maxWait)||0,f):S,X="trailing"in p?!!p.trailing:X),ur.cancel=function Dn(){O!==I&&Um(O),B=0,b=R=x=O=I},ur.flush=function hn(){return O===I?M:ke(Jr())},ur}var xy=ue(function(l,f){return Yd(l,1,f)}),fC=ue(function(l,f,p){return Yd(l,Mr(f)||0,p)});function dn(l,f){if("function"!=typeof l||null!=f&&"function"!=typeof f)throw new bn(jn);var p=function(){var b=arguments,x=f?f.apply(this,b):b[0],S=p.cache;if(S.has(x))return S.get(x);var M=l.apply(this,b);return p.cache=S.set(x,M)||S,M};return p.cache=new(dn.Cache||zt),p}function aa(l){if("function"!=typeof l)throw new bn(jn);return function(){var f=arguments;switch(f.length){case 0:return!l.call(this);case 1:return!l.call(this,f[0]);case 2:return!l.call(this,f[0],f[1]);case 3:return!l.call(this,f[0],f[1],f[2])}return!l.apply(this,f)}}dn.Cache=zt;var Lh=Dw(function(l,f){var p=(f=1==f.length&&Ee(f[0])?tt(f[0],_r(le())):tt(tn(f,1),_r(le()))).length;return ue(function(b){for(var x=-1,S=wn(b.length,p);++x<S;)b[x]=f[x].call(this,b[x]);return Cr(l,this,b)})}),sn=ue(function(l,f){var p=Ni(f,Hi(sn));return _t(l,32,I,f,p)}),ca=ue(function(l,f){var p=Ni(f,Hi(ca));return _t(l,64,I,f,p)}),Dy=gi(function(l,f){return _t(l,256,I,I,I,f)});function Xr(l,f){return l===f||l!=l&&f!=f}var Pc=_c(Pm),vC=_c(function(l,f){return l>=f}),io=Ul(function(){return arguments}())?Ul:function(l){return gt(l)&&Ze.call(l,"callee")&&!Hd.call(l,"callee")},Ee=k.isArray,Ty=ym?_r(ym):function pS(l){return gt(l)&&Un(l)==Ya};function Ln(l){return null!=l&&so(l.length)&&!zi(l)}function ot(l){return gt(l)&&Ln(l)}var Ui=ir||As,jh=K0?_r(K0):function mS(l){return gt(l)&&Un(l)==Ga};function Bh(l){if(!gt(l))return!1;var f=Un(l);return f==St||"[object DOMException]"==f||"string"==typeof l.message&&"string"==typeof l.name&&!Cu(l)}function zi(l){if(!ct(l))return!1;var f=Un(l);return f==qa||f==jp||"[object AsyncFunction]"==f||"[object Proxy]"==f}function $h(l){return"number"==typeof l&&l==De(l)}function so(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=ni}function ct(l){var f=typeof l;return null!=l&&("object"==f||"function"==f)}function gt(l){return null!=l&&"object"==typeof l}var Py=rr?_r(rr):function Nm(l){return gt(l)&&Lt(l)==Lr};function Ly(l){return"number"==typeof l||gt(l)&&Un(l)==Wa}function Cu(l){if(!gt(l)||Un(l)!=ii)return!1;var f=Nl(l);if(null===f)return!0;var p=Ze.call(f,"constructor")&&f.constructor;return"function"==typeof p&&p instanceof p&&Tl.call(p)==cw}var la=pe?_r(pe):function ww(l){return gt(l)&&Un(l)==Ct},Hh=Q0?_r(Q0):function Lm(l){return gt(l)&&Lt(l)==Fr};function Oc(l){return"string"==typeof l||!Ee(l)&&gt(l)&&Un(l)==Ge}function Wn(l){return"symbol"==typeof l||gt(l)&&Un(l)==No}var Ds=ew?_r(ew):function Cw(l){return gt(l)&&so(l.length)&&!!ce[Un(l)]},Fy=_c(rh),Uh=_c(function(l,f){return l<=f});function Rc(l){if(!l)return[];if(Ln(l))return Oc(l)?Ur(l):xn(l);if(qr&&l[qr])return function fs(N){for(var j,k=[];!(j=N.next()).done;)k.push(j.value);return k}(l[qr]());var f=Lt(l);return(f==Lr?$d:f==Fr?ee:ao)(l)}function vi(l){return l?(l=Mr(l))===Vs||l===-Vs?17976931348623157e292*(l<0?-1:1):l==l?l:0:0===l?l:0}function De(l){var f=vi(l),p=f%1;return f==f?p?f-p:f:0}function ua(l){return l?zo(De(l),0,ri):0}function Mr(l){if("number"==typeof l)return l;if(Wn(l))return NaN;if(ct(l)){var f="function"==typeof l.valueOf?l.valueOf():l;l=ct(f)?f+"":f}if("string"!=typeof l)return 0===l?l:+l;l=rw(l);var p=Qp.test(l);return p||tm.test(l)?Y0(l.slice(2),p?2:8):V0.test(l)?NaN:+l}function zh(l){return hi(l,Yn(l))}function qe(l){return null==l?"":Gn(l)}var SC=qn(function(l,f){if(Zo(f)||Ln(f))hi(f,on(f),l);else for(var p in f)Ze.call(f,p)&&Uo(l,p,f[p])}),Gh=qn(function(l,f){hi(f,Yn(f),l)}),Lc=qn(function(l,f,p,b){hi(f,Yn(f),l,b)}),xu=qn(function(l,f,p,b){hi(f,on(f),l,b)}),qh=gi(Tm),AC=ue(function(l,f){l=Ye(l);var p=-1,b=f.length,x=b>2?f[2]:I;for(x&&Gt(f[0],f[1],x)&&(b=1);++p<b;)for(var S=f[p],M=Yn(S),O=-1,R=M.length;++O<R;){var B=M[O],$=l[B];($===I||Xr($,Bo[B])&&!Ze.call(l,B))&&(l[B]=S[B])}return l}),MC=ue(function(l){return l.push(I,ht),Cr(LC,I,l)});function Du(l,f,p){var b=null==l?I:ps(l,f);return b===I?p:b}function Su(l,f){return null!=l&&tu(l,f,bw)}var PC=Jl(function(l,f,p){null!=f&&"function"!=typeof f.toString&&(f=uc.call(f)),l[f]=p},Iu(En)),OC=Jl(function(l,f,p){null!=f&&"function"!=typeof f.toString&&(f=uc.call(f)),Ze.call(l,f)?l[f].push(p):l[f]=[p]},le),NC=ue(mc);function on(l){return Ln(l)?gw(l):nh(l)}function Yn(l){return Ln(l)?gw(l,!0):function yS(l){if(!ct(l))return function ru(l){var f=[];if(null!=l)for(var p in Ye(l))f.push(p);return f}(l);var f=Zo(l),p=[];for(var b in l)"constructor"==b&&(f||!Ze.call(l,b))||p.push(b);return p}(l)}var RC=qn(function(l,f,p){zl(l,f,p)}),LC=qn(function(l,f,p,b){zl(l,f,p,b)}),US=gi(function(l,f){var p={};if(null==l)return p;var b=!1;f=tt(f,function(S){return S=bs(S,l),b||(b=S.length>1),S}),hi(l,Yo(l),p),b&&(p=Qe(p,7,Tw));for(var x=f.length;x--;)he(p,f[x]);return p}),GS=gi(function(l,f){return null==l?{}:function oh(l,f){return Bm(l,f,function(p,b){return Su(l,b)})}(l,f)});function kC(l,f){if(null==l)return{};var p=tt(Yo(l),function(b){return[b]});return f=le(f),Bm(l,p,function(b,x){return f(b,x[0])})}var Vy=Ym(on),Hy=Ym(Yn);function ao(l){return null==l?[]:wm(l,on(l))}var Jh=Ks(function(l,f,p){return f=f.toLowerCase(),l+(p?Au(f):f)});function Au(l){return co(qe(l).toLowerCase())}function BC(l){return(l=qe(l))&&l.replace(wr,iw).replace(Pd,"")}var VC=Ks(function(l,f,p){return l+(p?"-":"")+f.toLowerCase()}),HC=Ks(function(l,f,p){return l+(p?" ":"")+f.toLowerCase()}),UC=qm("toLowerCase"),qC=Ks(function(l,f,p){return l+(p?"_":"")+f.toLowerCase()}),Wy=Ks(function(l,f,p){return l+(p?" ":"")+co(f)}),oe=Ks(function(l,f,p){return l+(p?" ":"")+f.toUpperCase()}),co=qm("toUpperCase");function Kh(l,f,p){return l=qe(l),(f=p?I:f)===I?function aw(N){return W.test(N)}(l)?function ai(N){return N.match(KD)||[]}(l):function bm(N){return N.match(Zp)||[]}(l):l.match(f)||[]}var Qh=ue(function(l,f){try{return Cr(l,I,f)}catch(p){return Bh(p)?p:new ye(p)}}),eg=gi(function(l,f){return $r(f,function(p){p=yi(p),_n(l,p,yu(l[p],l))}),l});function Iu(l){return function(){return l}}var Tu=Zl(),KS=Zl(!0);function En(l){return l}function tg(l){return th("function"==typeof l?l:Qe(l,1))}var Qy=ue(function(l,f){return function(p){return mc(p,l,f)}}),lo=ue(function(l,f){return function(p){return mc(l,p,f)}});function rg(l,f,p){var b=on(f),x=$i(f,b);null==p&&(!ct(f)||!x.length&&b.length)&&(p=f,f=l,l=this,x=$i(f,on(f)));var S=!(ct(p)&&"chain"in p&&!p.chain),M=zi(l);return $r(x,function(O){var R=f[O];l[O]=R,M&&(l.prototype[O]=function(){var B=this.__chain__;if(S||B){var $=l(this.__wrapped__);return($.__actions__=xn(this.__actions__)).push({func:R,args:arguments,thisArg:l}),$.__chain__=B,$}return R.apply(l,Vr([this.value()],arguments))})}),l}function ga(){}var sg=Kl(tt),Pu=Kl(Qa),Ir=Kl(Ld);function Bc(l){return wh(l)?ic(yi(l)):function fi(l){return function(f){return ps(f,l)}}(l)}var e_=yh(),t_=yh(!0);function Ou(){return[]}function As(){return!1}var ev=Xl(function(l,f){return l+f},0),pa=xc("ceil"),QS=Xl(function(l,f){return l/f},1),eA=xc("floor"),cg=Xl(function(l,f){return l*f},1),lg=xc("round"),ma=Xl(function(l,f){return l-f},0);return D.after=function uC(l,f){if("function"!=typeof f)throw new bn(jn);return l=De(l),function(){if(--l<1)return f.apply(this,arguments)}},D.ary=vy,D.assign=SC,D.assignIn=Gh,D.assignInWith=Lc,D.assignWith=xu,D.at=qh,D.before=by,D.bind=yu,D.bindAll=eg,D.bindKey=vu,D.castArray=function pC(){if(!arguments.length)return[];var l=arguments[0];return Ee(l)?l:[l]},D.chain=ly,D.chunk=function kw(l,f,p){f=(p?Gt(l,f,p):f===I)?1:Ut(De(f),0);var b=null==l?0:l.length;if(!b||f<1)return[];for(var x=0,S=0,M=k(Rt(b/f));x<b;)M[S++]=Dr(l,x,x+=f);return M},D.compact=function Rn(l){for(var f=-1,p=null==l?0:l.length,b=0,x=[];++f<p;){var S=l[f];S&&(x[b++]=S)}return x},D.concat=function Fw(){var l=arguments.length;if(!l)return[];for(var f=k(l-1),p=arguments[0],b=l;b--;)f[b-1]=arguments[b];return Vr(Ee(p)?xn(p):[p],tn(f,1))},D.cond=function Jy(l){var f=null==l?0:l.length,p=le();return l=f?tt(l,function(b){if("function"!=typeof b[1])throw new bn(jn);return[p(b[0]),b[1]]}):[],ue(function(b){for(var x=-1;++x<f;){var S=l[x];if(Cr(S[0],this,b))return Cr(S[1],this,b)}})},D.conforms=function KC(l){return function Bl(l){var f=on(l);return function(p){return ar(p,l,f)}}(Qe(l,1))},D.constant=Iu,D.countBy=fy,D.create=function fa(l,f){var p=or(l);return null==f?p:mw(p,f)},D.curry=function wy(l,f,p){var b=_t(l,8,I,I,I,I,I,f=p?I:f);return b.placeholder=wy.placeholder,b},D.curryRight=function Cy(l,f,p){var b=_t(l,16,I,I,I,I,I,f=p?I:f);return b.placeholder=Cy.placeholder,b},D.debounce=_y,D.defaults=AC,D.defaultsDeep=MC,D.defer=xy,D.delay=fC,D.difference=ty,D.differenceBy=Mh,D.differenceWith=jw,D.drop=function ny(l,f,p){var b=null==l?0:l.length;return b?Dr(l,(f=p||f===I?1:De(f))<0?0:f,b):[]},D.dropRight=function su(l,f,p){var b=null==l?0:l.length;return b?Dr(l,0,(f=b-(f=p||f===I?1:De(f)))<0?0:f):[]},D.dropRightWhile=function Ko(l,f){return l&&l.length?hh(l,le(f,3),!0,!0):[]},D.dropWhile=function Qo(l,f){return l&&l.length?hh(l,le(f,3),!0):[]},D.fill=function ea(l,f,p,b){var x=null==l?0:l.length;return x?(p&&"number"!=typeof p&&Gt(l,f,p)&&(p=0,b=x),function Xd(l,f,p,b){var x=l.length;for((p=De(p))<0&&(p=-p>x?0:x+p),(b=b===I||b>x?x:De(b))<0&&(b+=x),b=p>b?0:ua(b);p<b;)l[p++]=f;return l}(l,f,p,b)):[]},D.filter=function dy(l,f){return(Ee(l)?us:$l)(l,le(f,3))},D.flatMap=function aC(l,f){return tn(Rh(l,f),1)},D.flatMapDeep=function Nh(l,f){return tn(Rh(l,f),Vs)},D.flatMapDepth=function FS(l,f,p){return p=p===I?1:De(p),tn(Rh(l,f),p)},D.flatten=no,D.flattenDeep=function ES(l){return null!=l&&l.length?tn(l,Vs):[]},D.flattenDepth=function Bw(l,f){return null!=l&&l.length?tn(l,f=f===I?1:De(f)):[]},D.flip=function dC(l){return _t(l,512)},D.flow=Tu,D.flowRight=KS,D.fromPairs=function DS(l){for(var f=-1,p=null==l?0:l.length,b={};++f<p;){var x=l[f];b[x[0]]=x[1]}return b},D.functions=function Yh(l){return null==l?[]:$i(l,on(l))},D.functionsIn=function jy(l){return null==l?[]:$i(l,Yn(l))},D.groupBy=jS,D.initial=function AS(l){return null!=l&&l.length?Dr(l,0,-1):[]},D.intersection=MS,D.intersectionBy=IS,D.intersectionWith=ta,D.invert=PC,D.invertBy=OC,D.invokeMap=$S,D.iteratee=tg,D.keyBy=VS,D.keys=on,D.keysIn=Yn,D.map=Rh,D.mapKeys=function Ss(l,f){var p={};return f=le(f,3),cr(l,function(b,x,S){_n(p,f(b,x,S),b)}),p},D.mapValues=function kc(l,f){var p={};return f=le(f,3),cr(l,function(b,x,S){_n(p,x,f(b,x,S))}),p},D.matches=function ng(l){return ih(Qe(l,1))},D.matchesProperty=function Ky(l,f){return km(l,Qe(f,1))},D.memoize=dn,D.merge=RC,D.mergeWith=LC,D.method=Qy,D.methodOf=lo,D.mixin=rg,D.negate=aa,D.nthArg=function QC(l){return l=De(l),ue(function(f){return sh(f,l)})},D.omit=US,D.omitBy=function zS(l,f){return kC(l,aa(le(f)))},D.once=function Ey(l){return by(2,l)},D.orderBy=function lC(l,f,p,b){return null==l?[]:(Ee(f)||(f=null==f?[]:[f]),Ee(p=b?I:p)||(p=null==p?[]:[p]),jm(l,f,p))},D.over=sg,D.overArgs=Lh,D.overEvery=Pu,D.overSome=Ir,D.partial=sn,D.partialRight=ca,D.partition=hu,D.pick=GS,D.pickBy=kC,D.property=Bc,D.propertyOf=function og(l){return function(f){return null==l?I:ps(l,f)}},D.pull=Mc,D.pullAll=ry,D.pullAllBy=function Ar(l,f,p){return l&&l.length&&f&&f.length?Gl(l,f,le(p,2)):l},D.pullAllWith=function na(l,f,p){return l&&l.length&&f&&f.length?Gl(l,f,I,p):l},D.pullAt=iy,D.range=e_,D.rangeRight=t_,D.rearg=Dy,D.reject=function gy(l,f){return(Ee(l)?us:$l)(l,aa(le(f,3)))},D.remove=function au(l,f){var p=[];if(!l||!l.length)return p;var b=-1,x=[],S=l.length;for(f=le(f,3);++b<S;){var M=l[b];f(M,b,l)&&(p.push(M),x.push(b))}return ah(l,x),p},D.rest=function Sy(l,f){if("function"!=typeof l)throw new bn(jn);return ue(l,f=f===I?f:De(f))},D.reverse=ro,D.sampleSize=function oa(l,f,p){return f=(p?Gt(l,f,p):f===I)?1:De(f),(Ee(l)?fS:$m)(l,f)},D.set=function FC(l,f,p){return null==l?l:di(l,f,p)},D.setWith=function jC(l,f,p,b){return b="function"==typeof b?b:I,null==l?l:di(l,f,p,b)},D.shuffle=function my(l){return(Ee(l)?dS:Ew)(l)},D.slice=function Uw(l,f,p){var b=null==l?0:l.length;return b?(p&&"number"!=typeof p&&Gt(l,f,p)?(f=0,p=b):(f=null==f?0:De(f),p=p===I?b:De(p)),Dr(l,f,p)):[]},D.sortBy=mu,D.sortedUniq=function OS(l){return l&&l.length?uh(l):[]},D.sortedUniqBy=function sy(l,f){return l&&l.length?uh(l,le(f,2)):[]},D.split=function WC(l,f,p){return p&&"number"!=typeof p&&Gt(l,f,p)&&(f=p=I),(p=p===I?ri:p>>>0)?(l=qe(l))&&("string"==typeof f||null!=f&&!la(f))&&!(f=Gn(f))&&Hr(l)?ws(Ur(l),0,p):l.split(f,p):[]},D.spread=function hC(l,f){if("function"!=typeof l)throw new bn(jn);return f=null==f?0:Ut(De(f),0),ue(function(p){var b=p[f],x=ws(p,0,f);return b&&Vr(x,b),Cr(l,this,x)})},D.tail=function Gw(l){var f=null==l?0:l.length;return f?Dr(l,1,f):[]},D.take=function qw(l,f,p){return l&&l.length?Dr(l,0,(f=p||f===I?1:De(f))<0?0:f):[]},D.takeRight=function Ww(l,f,p){var b=null==l?0:l.length;return b?Dr(l,(f=b-(f=p||f===I?1:De(f)))<0?0:f,b):[]},D.takeRightWhile=function Yw(l,f){return l&&l.length?hh(l,le(f,3),!1,!0):[]},D.takeWhile=function Zw(l,f){return l&&l.length?hh(l,le(f,3)):[]},D.tap=function NS(l,f){return f(l),l},D.throttle=function Ay(l,f,p){var b=!0,x=!0;if("function"!=typeof l)throw new bn(jn);return ct(p)&&(b="leading"in p?!!p.leading:b,x="trailing"in p?!!p.trailing:x),_y(l,f,{leading:b,maxWait:f,trailing:x})},D.thru=Tc,D.toArray=Rc,D.toPairs=Vy,D.toPairsIn=Hy,D.toPath=function Nu(l){return Ee(l)?tt(l,yi):Wn(l)?[l]:xn(xs(qe(l)))},D.toPlainObject=zh,D.transform=function Zh(l,f,p){var b=Ee(l),x=b||Ui(l)||Ds(l);if(f=le(f,4),null==p){var S=l&&l.constructor;p=x?b?new S:[]:ct(l)&&zi(S)?or(Nl(l)):{}}return(x?$r:cr)(l,function(M,O,R){return f(p,M,O,R)}),p},D.unary=function gC(l){return vy(l,1)},D.union=Jw,D.unionBy=Ph,D.unionWith=cu,D.uniq=function Xw(l){return l&&l.length?ys(l):[]},D.uniqBy=function lu(l,f){return l&&l.length?ys(l,le(f,2)):[]},D.uniqWith=function Kw(l,f){return f="function"==typeof f?f:I,l&&l.length?ys(l,I,f):[]},D.unset=function Gi(l,f){return null==l||he(l,f)},D.unzip=ia,D.unzipWith=oy,D.update=function Fc(l,f,p){return null==l?l:dh(l,f,vs(p))},D.updateWith=function Uy(l,f,p,b){return b="function"==typeof b?b:I,null==l?l:dh(l,f,vs(p),b)},D.values=ao,D.valuesIn=function zy(l){return null==l?[]:wm(l,Yn(l))},D.without=ay,D.words=Kh,D.wrap=function My(l,f){return sn(vs(f),l)},D.xor=Oh,D.xorBy=uu,D.xorWith=cy,D.zip=Qw,D.zipObject=function eC(l,f){return Hm(l||[],f||[],Uo)},D.zipObjectDeep=function sa(l,f){return Hm(l||[],f||[],di)},D.zipWith=Ic,D.entries=Vy,D.entriesIn=Hy,D.extend=Gh,D.extendWith=Lc,rg(D,D),D.add=ev,D.attempt=Qh,D.camelCase=Jh,D.capitalize=Au,D.ceil=pa,D.clamp=function qS(l,f,p){return p===I&&(p=f,f=I),p!==I&&(p=(p=Mr(p))==p?p:0),f!==I&&(f=(f=Mr(f))==f?f:0),zo(Mr(l),f,p)},D.clone=function Iy(l){return Qe(l,4)},D.cloneDeep=function yC(l){return Qe(l,5)},D.cloneDeepWith=function kh(l,f){return Qe(l,5,f="function"==typeof f?f:I)},D.cloneWith=function mC(l,f){return Qe(l,4,f="function"==typeof f?f:I)},D.conformsTo=function Fh(l,f){return null==f||ar(l,f,on(f))},D.deburr=BC,D.defaultTo=function Xy(l,f){return null==l||l!=l?f:l},D.divide=QS,D.endsWith=function ZS(l,f,p){l=qe(l),f=Gn(f);var b=l.length,x=p=p===I?b:zo(De(p),0,b);return(p-=f.length)>=0&&l.slice(p,x)==f},D.eq=Xr,D.escape=function Gy(l){return(l=qe(l))&&qp.test(l)?l.replace(Gp,sw):l},D.escapeRegExp=function $C(l){return(l=qe(l))&&F0.test(l)?l.replace(xd,"\\$&"):l},D.every=function LS(l,f,p){var b=Ee(l)?Qa:Jd;return p&&Gt(l,f,p)&&(f=I),b(l,le(f,3))},D.find=kS,D.findIndex=Ih,D.findKey=function HS(l,f){return Pn(l,le(f,3),cr)},D.findLast=oC,D.findLastIndex=ou,D.findLastKey=function IC(l,f){return Pn(l,le(f,3),Js)},D.floor=eA,D.forEach=cC,D.forEachRight=du,D.forIn=function Wh(l,f){return null==l?l:Vl(l,le(f,3),Yn)},D.forInRight=function TC(l,f){return null==l?l:Kd(l,le(f,3),Yn)},D.forOwn=function da(l,f){return l&&cr(l,le(f,3))},D.forOwnRight=function Eu(l,f){return l&&Js(l,le(f,3))},D.get=Du,D.gt=Pc,D.gte=vC,D.has=function By(l,f){return null!=l&&tu(l,f,vw)},D.hasIn=Su,D.head=$w,D.identity=En,D.includes=function BS(l,f,p,b){l=Ln(l)?l:ao(l),p=p&&!b?De(p):0;var x=l.length;return p<0&&(p=Ut(x+p,0)),Oc(l)?p<=x&&l.indexOf(f,p)>-1:!!x&&rc(l,f,p)>-1},D.indexOf=function SS(l,f,p){var b=null==l?0:l.length;if(!b)return-1;var x=null==p?0:De(p);return x<0&&(x=Ut(b+x,0)),rc(l,f,x)},D.inRange=function WS(l,f,p){return f=vi(f),p===I?(p=f,f=0):p=vi(p),function gS(l,f,p){return l>=wn(f,p)&&l<Ut(f,p)}(l=Mr(l),f,p)},D.invoke=NC,D.isArguments=io,D.isArray=Ee,D.isArrayBuffer=Ty,D.isArrayLike=Ln,D.isArrayLikeObject=ot,D.isBoolean=function bu(l){return!0===l||!1===l||gt(l)&&Un(l)==br},D.isBuffer=Ui,D.isDate=jh,D.isElement=function wu(l){return gt(l)&&1===l.nodeType&&!Cu(l)},D.isEmpty=function bC(l){if(null==l)return!0;if(Ln(l)&&(Ee(l)||"string"==typeof l||"function"==typeof l.splice||Ui(l)||Ds(l)||io(l)))return!l.length;var f=Lt(l);if(f==Lr||f==Fr)return!l.size;if(Zo(l))return!nh(l).length;for(var p in l)if(Ze.call(l,p))return!1;return!0},D.isEqual=function wC(l,f){return yc(l,f)},D.isEqualWith=function CC(l,f,p){var b=(p="function"==typeof p?p:I)?p(l,f):I;return b===I?yc(l,f,I,p):!!b},D.isError=Bh,D.isFinite=function _C(l){return"number"==typeof l&&Ud(l)},D.isFunction=zi,D.isInteger=$h,D.isLength=so,D.isMap=Py,D.isMatch=function xC(l,f){return l===f||eh(l,f,Ec(f))},D.isMatchWith=function Vh(l,f,p){return p="function"==typeof p?p:I,eh(l,f,Ec(f),p)},D.isNaN=function Oy(l){return Ly(l)&&l!=+l},D.isNative=function oo(l){if(xS(l))throw new ye("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rm(l)},D.isNil=function Ry(l){return null==l},D.isNull=function Ny(l){return null===l},D.isNumber=Ly,D.isObject=ct,D.isObjectLike=gt,D.isPlainObject=Cu,D.isRegExp=la,D.isSafeInteger=function EC(l){return $h(l)&&l>=-ni&&l<=ni},D.isSet=Hh,D.isString=Oc,D.isSymbol=Wn,D.isTypedArray=Ds,D.isUndefined=function ky(l){return l===I},D.isWeakMap=function _u(l){return gt(l)&&Lt(l)==Hs},D.isWeakSet=function Nc(l){return gt(l)&&"[object WeakSet]"==Un(l)},D.join=function Vw(l,f){return null==l?"":Mm.call(l,f)},D.kebabCase=VC,D.last=Sr,D.lastIndexOf=function qt(l,f,p){var b=null==l?0:l.length;if(!b)return-1;var x=b;return p!==I&&(x=(x=De(p))<0?Ut(b+x,0):wn(x,b-1)),f==f?function ac(N,j,k){for(var J=k+1;J--;)if(N[J]===j)return J;return J}(l,f,x):nc(l,tw,x,!0)},D.lowerCase=HC,D.lowerFirst=UC,D.lt=Fy,D.lte=Uh,D.max=function tv(l){return l&&l.length?pc(l,En,Pm):I},D.maxBy=function o_(l,f){return l&&l.length?pc(l,le(f,2),Pm):I},D.mean=function tA(l){return nw(l,En)},D.meanBy=function nA(l,f){return nw(l,le(f,2))},D.min=function Ru(l){return l&&l.length?pc(l,En,rh):I},D.minBy=function a_(l,f){return l&&l.length?pc(l,le(f,2),rh):I},D.stubArray=Ou,D.stubFalse=As,D.stubObject=function n_(){return{}},D.stubString=function r_(){return""},D.stubTrue=function i_(){return!0},D.multiply=cg,D.nth=function Hw(l,f){return l&&l.length?sh(l,De(f)):I},D.noConflict=function ig(){return vn._===this&&(vn._=lw),this},D.noop=ga,D.now=Jr,D.pad=function qy(l,f,p){l=qe(l);var b=(f=De(f))?jo(l):0;if(!f||b>=f)return l;var x=(f-b)/2;return Wo(Qt(x),p)+l+Wo(Rt(x),p)},D.padEnd=function Mu(l,f,p){l=qe(l);var b=(f=De(f))?jo(l):0;return f&&b<f?l+Wo(f-b,p):l},D.padStart=function zC(l,f,p){l=qe(l);var b=(f=De(f))?jo(l):0;return f&&b<f?Wo(f-b,p)+l:l},D.parseInt=function Xh(l,f,p){return p||null==f?f=0:f&&(f=+f),K(qe(l).replace(Ed,""),f||0)},D.random=function YS(l,f,p){if(p&&"boolean"!=typeof p&&Gt(l,f,p)&&(f=p=I),p===I&&("boolean"==typeof f?(p=f,f=I):"boolean"==typeof l&&(p=l,l=I)),l===I&&f===I?(l=0,f=1):(l=vi(l),f===I?(f=l,l=0):f=vi(f)),l>f){var b=l;l=f,f=b}if(p||l%1||f%1){var x=xe();return wn(l+x*(f-l+eS("1e-"+((x+"").length-1))),f)}return et(l,f)},D.reduce=function gu(l,f,p){var b=Ee(l)?tc:Fd,x=arguments.length<3;return b(l,le(f,4),p,x,Bi)},D.reduceRight=function hy(l,f,p){var b=Ee(l)?vm:Fd,x=arguments.length<3;return b(l,le(f,4),p,x,Zd)},D.repeat=function GC(l,f,p){return f=(p?Gt(l,f,p):f===I)?1:De(f),qo(qe(l),f)},D.replace=function ha(){var l=arguments,f=qe(l[0]);return l.length<3?f:f.replace(l[1],l[2])},D.result=function $y(l,f,p){var b=-1,x=(f=bs(f,l)).length;for(x||(x=1,l=I);++b<x;){var S=null==l?I:l[yi(f[b])];S===I&&(b=x,S=p),l=zi(S)?S.call(l):S}return l},D.round=lg,D.runInContext=N,D.sample=function py(l){return(Ee(l)?pw:_w)(l)},D.size=function yy(l){if(null==l)return 0;if(Ln(l))return Oc(l)?jo(l):l.length;var f=Lt(l);return f==Lr||f==Fr?l.size:nh(l).length},D.snakeCase=qC,D.some=function pu(l,f,p){var b=Ee(l)?Ld:ms;return p&&Gt(l,f,p)&&(f=I),b(l,le(f,3))},D.sortedIndex=function TS(l,f){return vc(l,f)},D.sortedIndexBy=function zw(l,f,p){return lh(l,f,le(p,2))},D.sortedIndexOf=function PS(l,f){var p=null==l?0:l.length;if(p){var b=vc(l,f);if(b<p&&Xr(l[b],f))return b}return-1},D.sortedLastIndex=function lr(l,f){return vc(l,f,!0)},D.sortedLastIndexBy=function Th(l,f,p){return lh(l,f,le(p,2),!0)},D.sortedLastIndexOf=function ra(l,f){if(null!=l&&l.length){var b=vc(l,f,!0)-1;if(Xr(l[b],f))return b}return-1},D.startCase=Wy,D.startsWith=function Yy(l,f,p){return l=qe(l),p=null==p?0:zo(De(p),0,l.length),f=Gn(f),l.slice(p,p+f.length)==f},D.subtract=ma,D.sum=function ug(l){return l&&l.length?Bd(l,En):0},D.sumBy=function fg(l,f){return l&&l.length?Bd(l,le(f,2)):0},D.template=function YC(l,f,p){var b=D.templateSettings;p&&Gt(l,f,p)&&(f=I),l=qe(l),f=Lc({},f,b,Cs);var O,R,x=Lc({},f.imports,b.imports,Cs),S=on(x),M=wm(x,S),B=0,$=f.interpolate||ml,U="__p += '",X=Il((f.escape||ml).source+"|"+$.source+"|"+($===Yp?Kp:ml).source+"|"+(f.evaluate||ml).source+"|$","g"),se="//# sourceURL="+(Ze.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ce+"]")+"\n";l.replace(X,function(ge,Le,ke,Dn,hn,ur){return ke||(ke=Dn),U+=l.slice(B,ur).replace(H0,ow),Le&&(O=!0,U+="' +\n__e("+Le+") +\n'"),hn&&(R=!0,U+="';\n"+hn+";\n__p += '"),ke&&(U+="' +\n((__t = ("+ke+")) == null ? '' : __t) +\n'"),B=ur+ge.length,ge}),U+="';\n";var fe=Ze.call(f,"variable")&&f.variable;if(fe){if(Jp.test(fe))throw new ye("Invalid `variable` option passed into `_.template`")}else U="with (obj) {\n"+U+"\n}\n";U=(R?U.replace(_d,""):U).replace(Up,"$1").replace(O0,"$1;"),U="function("+(fe||"obj")+") {\n"+(fe?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(O?", __e = _.escape":"")+(R?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+U+"return __p\n}";var Pe=Qh(function(){return Ue(S,se+"return "+U).apply(I,M)});if(Pe.source=U,Bh(Pe))throw Pe;return Pe},D.times=function ag(l,f){if((l=De(l))<1||l>ni)return[];var p=ri,b=wn(l,ri);f=le(f),l-=ri;for(var x=oc(b,f);++p<l;)f(p);return x},D.toFinite=vi,D.toInteger=De,D.toLength=ua,D.toLower=function ZC(l){return qe(l).toLowerCase()},D.toNumber=Mr,D.toSafeInteger=function DC(l){return l?zo(De(l),-ni,ni):0===l?l:0},D.toString=qe,D.toUpper=function JC(l){return qe(l).toUpperCase()},D.trim=function XC(l,f,p){if((l=qe(l))&&(p||f===I))return rw(l);if(!l||!(f=Gn(f)))return l;var b=Ur(l),x=Ur(f);return ws(b,Fo(b,x),Dl(b,x)+1).join("")},D.trimEnd=function Zy(l,f,p){if((l=qe(l))&&(p||f===I))return l.slice(0,_m(l)+1);if(!l||!(f=Gn(f)))return l;var b=Ur(l);return ws(b,0,Dl(b,Ur(f))+1).join("")},D.trimStart=function JS(l,f,p){if((l=qe(l))&&(p||f===I))return l.replace(Ed,"");if(!l||!(f=Gn(f)))return l;var b=Ur(l);return ws(b,Fo(b,Ur(f))).join("")},D.truncate=function XS(l,f){var p=30,b="...";if(ct(f)){var x="separator"in f?f.separator:x;p="length"in f?De(f.length):p,b="omission"in f?Gn(f.omission):b}var S=(l=qe(l)).length;if(Hr(l)){var M=Ur(l);S=M.length}if(p>=S)return l;var O=p-jo(b);if(O<1)return b;var R=M?ws(M,0,O).join(""):l.slice(0,O);if(x===I)return R+b;if(M&&(O+=R.length-O),la(x)){if(l.slice(O).search(x)){var B,$=R;for(x.global||(x=Il(x.source,qe(Dd.exec(x))+"g")),x.lastIndex=0;B=x.exec($);)var U=B.index;R=R.slice(0,U===I?O:U)}}else if(l.indexOf(Gn(x),O)!=O){var X=R.lastIndexOf(x);X>-1&&(R=R.slice(0,X))}return R+b},D.unescape=function jc(l){return(l=qe(l))&&cs.test(l)?l.replace(zp,Ri):l},D.uniqueId=function s_(l){var f=++Gr;return qe(l)+f},D.upperCase=oe,D.upperFirst=co,D.each=cC,D.eachRight=du,D.first=$w,rg(D,function(){var l={};return cr(D,function(f,p){Ze.call(D.prototype,p)||(l[p]=f)}),l}(),{chain:!1}),D.VERSION="4.17.21",$r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){D[l].placeholder=D}),$r(["drop","take"],function(l,f){Te.prototype[l]=function(p){p=p===I?1:Ut(De(p),0);var b=this.__filtered__&&!f?new Te(this):this.clone();return b.__filtered__?b.__takeCount__=wn(p,b.__takeCount__):b.__views__.push({size:wn(p,ri),type:l+(b.__dir__<0?"Right":"")}),b},Te.prototype[l+"Right"]=function(p){return this.reverse()[l](p).reverse()}}),$r(["filter","map","takeWhile"],function(l,f){var p=f+1,b=1==p||3==p;Te.prototype[l]=function(x){var S=this.clone();return S.__iteratees__.push({iteratee:le(x,3),type:p}),S.__filtered__=S.__filtered__||b,S}}),$r(["head","last"],function(l,f){var p="take"+(f?"Right":"");Te.prototype[l]=function(){return this[p](1).value()[0]}}),$r(["initial","tail"],function(l,f){var p="drop"+(f?"":"Right");Te.prototype[l]=function(){return this.__filtered__?new Te(this):this[p](1)}}),Te.prototype.compact=function(){return this.filter(En)},Te.prototype.find=function(l){return this.filter(l).head()},Te.prototype.findLast=function(l){return this.reverse().find(l)},Te.prototype.invokeMap=ue(function(l,f){return"function"==typeof l?new Te(this):this.map(function(p){return mc(p,l,f)})}),Te.prototype.reject=function(l){return this.filter(aa(le(l)))},Te.prototype.slice=function(l,f){l=De(l);var p=this;return p.__filtered__&&(l>0||f<0)?new Te(p):(l<0?p=p.takeRight(-l):l&&(p=p.drop(l)),f!==I&&(p=(f=De(f))<0?p.dropRight(-f):p.take(f-l)),p)},Te.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Te.prototype.toArray=function(){return this.take(ri)},cr(Te.prototype,function(l,f){var p=/^(?:filter|find|map|reject)|While$/.test(f),b=/^(?:head|last)$/.test(f),x=D[b?"take"+("last"==f?"Right":""):f],S=b||/^find/.test(f);x&&(D.prototype[f]=function(){var M=this.__wrapped__,O=b?[1]:arguments,R=M instanceof Te,B=O[0],$=R||Ee(M),U=function(Le){var ke=x.apply(D,Vr([Le],O));return b&&X?ke[0]:ke};$&&p&&"function"==typeof B&&1!=B.length&&(R=$=!1);var X=this.__chain__,fe=S&&!X,Pe=R&&!this.__actions__.length;if(!S&&$){M=Pe?M:new Te(this);var ge=l.apply(M,O);return ge.__actions__.push({func:Tc,args:[U],thisArg:I}),new Cn(ge,X)}return fe&&Pe?l.apply(this,O):(ge=this.thru(U),fe?b?ge.value()[0]:ge.value():ge)})}),$r(["pop","push","shift","sort","splice","unshift"],function(l){var f=cc[l],p=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",b=/^(?:pop|shift)$/.test(l);D.prototype[l]=function(){var x=arguments;if(b&&!this.__chain__){var S=this.value();return f.apply(Ee(S)?S:[],x)}return this[p](function(M){return f.apply(Ee(M)?M:[],x)})}}),cr(Te.prototype,function(l,f){var p=D[f];if(p){var b=p.name+"";Ze.call(de,b)||(de[b]=[]),de[b].push({name:f,func:p})}}),de[Cc(I,2).name]=[{name:"wrapper",func:I}],Te.prototype.clone=function Re(){var l=new Te(this.__wrapped__);return l.__actions__=xn(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=xn(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=xn(this.__views__),l},Te.prototype.reverse=function nS(){if(this.__filtered__){var l=new Te(this);l.__dir__=-1,l.__filtered__=!0}else(l=this.clone()).__dir__*=-1;return l},Te.prototype.value=function zd(){var l=this.__wrapped__.value(),f=this.__dir__,p=Ee(l),b=f<0,x=p?l.length:0,S=function Nw(l,f,p){for(var b=-1,x=p.length;++b<x;){var S=p[b],M=S.size;switch(S.type){case"drop":l+=M;break;case"dropRight":f-=M;break;case"take":f=wn(f,l+M);break;case"takeRight":l=Ut(l,f-M)}}return{start:l,end:f}}(0,x,this.__views__),M=S.start,O=S.end,R=O-M,B=b?O:M-1,$=this.__iteratees__,U=$.length,X=0,se=wn(R,this.__takeCount__);if(!p||!b&&x==R&&se==R)return Vm(l,this.__actions__);var fe=[];e:for(;R--&&X<se;){for(var Pe=-1,ge=l[B+=f];++Pe<U;){var Le=$[Pe],Dn=Le.type,hn=(0,Le.iteratee)(ge);if(2==Dn)ge=hn;else if(!hn){if(1==Dn)continue e;break e}}fe[X++]=ge}return fe},D.prototype.at=tC,D.prototype.chain=function RS(){return ly(this)},D.prototype.commit=function nC(){return new Cn(this.value(),this.__chain__)},D.prototype.next=function rC(){this.__values__===I&&(this.__values__=Rc(this.value()));var l=this.__index__>=this.__values__.length;return{done:l,value:l?I:this.__values__[this.__index__++]}},D.prototype.plant=function fu(l){for(var f,p=this;p instanceof Er;){var b=Xo(p);b.__index__=0,b.__values__=I,f?x.__wrapped__=b:f=b;var x=b;p=p.__wrapped__}return x.__wrapped__=l,f},D.prototype.reverse=function uy(){var l=this.__wrapped__;if(l instanceof Te){var f=l;return this.__actions__.length&&(f=new Te(this)),(f=f.reverse()).__actions__.push({func:Tc,args:[ro],thisArg:I}),new Cn(f,this.__chain__)}return this.thru(ro)},D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=function sC(){return Vm(this.__wrapped__,this.__actions__)},D.prototype.first=D.prototype.head,qr&&(D.prototype[qr]=function iC(){return this}),D}();vn._=zs,(ei=function(){return zs}.call(Pi,Be,Pi,Nr))!==I&&(Nr.exports=ei)}.call(this)}},Nr=>{Nr(Nr.s=198)}]);